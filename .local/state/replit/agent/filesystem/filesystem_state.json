{"file_contents":{"app/loading.tsx":{"content":"export default function Loading() {\n  return null\n}\n","size_bytes":52},"components/theme-provider.tsx":{"content":"\"use client\"\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\"\nimport type { ThemeProviderProps } from \"next-themes\"\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n","size_bytes":284},"components/NotificationSystem.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect, createContext, useContext, ReactNode } from 'react'\nimport { X, CheckCircle, AlertCircle, Info, AlertTriangle, Bell, ExternalLink } from 'lucide-react'\n\ninterface NotificationAction {\n  label: string\n  onClick: () => void\n  variant?: 'primary' | 'secondary' | 'danger'\n}\n\ninterface Notification {\n  id: string\n  type: 'success' | 'error' | 'warning' | 'info'\n  title: string\n  message: string\n  duration?: number // Auto-dismiss time in ms, 0 for persistent\n  actions?: NotificationAction[]\n  persistent?: boolean\n  createdAt: Date\n}\n\ninterface NotificationContextType {\n  notifications: Notification[]\n  addNotification: (notification: Omit<Notification, 'id' | 'createdAt'>) => string\n  removeNotification: (id: string) => void\n  clearAll: () => void\n  // Convenience methods\n  showSuccess: (title: string, message: string, actions?: NotificationAction[]) => string\n  showError: (title: string, message: string, actions?: NotificationAction[]) => string\n  showWarning: (title: string, message: string, actions?: NotificationAction[]) => string\n  showInfo: (title: string, message: string, actions?: NotificationAction[]) => string\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined)\n\ninterface NotificationProviderProps {\n  children: ReactNode\n}\n\nexport function NotificationProvider({ children }: NotificationProviderProps) {\n  const [notifications, setNotifications] = useState<Notification[]>([])\n\n  const addNotification = (notification: Omit<Notification, 'id' | 'createdAt'>) => {\n    const id = Date.now().toString() + Math.random().toString(36).substr(2, 9)\n    const newNotification: Notification = {\n      ...notification,\n      id,\n      createdAt: new Date(),\n      duration: notification.duration ?? (notification.type === 'error' ? 8000 : 5000)\n    }\n\n    setNotifications(prev => [newNotification, ...prev])\n\n    // Auto-dismiss if duration is set and > 0\n    if (newNotification.duration && newNotification.duration > 0 && !newNotification.persistent) {\n      setTimeout(() => {\n        removeNotification(id)\n      }, newNotification.duration)\n    }\n\n    return id\n  }\n\n  const removeNotification = (id: string) => {\n    setNotifications(prev => prev.filter(n => n.id !== id))\n  }\n\n  const clearAll = () => {\n    setNotifications([])\n  }\n\n  // Convenience methods for common notification types\n  const showSuccess = (title: string, message: string, actions?: NotificationAction[]) => \n    addNotification({ type: 'success', title, message, actions })\n\n  const showError = (title: string, message: string, actions?: NotificationAction[]) => \n    addNotification({ type: 'error', title, message, actions, persistent: true })\n\n  const showWarning = (title: string, message: string, actions?: NotificationAction[]) => \n    addNotification({ type: 'warning', title, message, actions })\n\n  const showInfo = (title: string, message: string, actions?: NotificationAction[]) => \n    addNotification({ type: 'info', title, message, actions })\n\n  const value: NotificationContextType = {\n    notifications,\n    addNotification,\n    removeNotification,\n    clearAll,\n    showSuccess,\n    showError,\n    showWarning,\n    showInfo\n  }\n\n  return (\n    <NotificationContext.Provider value={value}>\n      {children}\n      <ToastContainer />\n    </NotificationContext.Provider>\n  )\n}\n\nexport function useNotifications() {\n  const context = useContext(NotificationContext)\n  if (context === undefined) {\n    throw new Error('useNotifications must be used within a NotificationProvider')\n  }\n  return context\n}\n\n// Toast Container Component\nfunction ToastContainer() {\n  const { notifications, removeNotification } = useNotifications()\n\n  if (notifications.length === 0) return null\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 space-y-2 max-w-sm\">\n      {notifications.slice(0, 5).map((notification) => (\n        <Toast\n          key={notification.id}\n          notification={notification}\n          onDismiss={() => removeNotification(notification.id)}\n        />\n      ))}\n    </div>\n  )\n}\n\n// Individual Toast Component\ninterface ToastProps {\n  notification: Notification\n  onDismiss: () => void\n}\n\nfunction Toast({ notification, onDismiss }: ToastProps) {\n  const { type, title, message, actions } = notification\n\n  const getIcon = () => {\n    switch (type) {\n      case 'success': return <CheckCircle className=\"w-5 h-5 text-green-600\" />\n      case 'error': return <AlertCircle className=\"w-5 h-5 text-red-600\" />\n      case 'warning': return <AlertTriangle className=\"w-5 h-5 text-yellow-600\" />\n      case 'info': return <Info className=\"w-5 h-5 text-blue-600\" />\n    }\n  }\n\n  const getBorderColor = () => {\n    switch (type) {\n      case 'success': return 'border-green-400'\n      case 'error': return 'border-red-400'\n      case 'warning': return 'border-yellow-400'\n      case 'info': return 'border-blue-400'\n    }\n  }\n\n  const getBackgroundColor = () => {\n    switch (type) {\n      case 'success': return 'bg-green-50'\n      case 'error': return 'bg-red-50'\n      case 'warning': return 'bg-yellow-50'\n      case 'info': return 'bg-blue-50'\n    }\n  }\n\n  return (\n    <div\n      className={`\n        bg-white border-l-4 ${getBorderColor()} ${getBackgroundColor()}\n        rounded-lg shadow-lg p-4 min-w-80 max-w-sm\n        transform transition-all duration-300 ease-in-out\n        animate-in slide-in-from-right\n      `}\n    >\n      <div className=\"flex items-start\">\n        <div className=\"flex-shrink-0 mr-3 mt-0.5\">\n          {getIcon()}\n        </div>\n        \n        <div className=\"flex-1 min-w-0\">\n          <h4 className=\"text-sm font-semibold text-gray-900 mb-1\">\n            {title}\n          </h4>\n          <p className=\"text-sm text-gray-700 mb-3\">\n            {message}\n          </p>\n          \n          {/* Action buttons */}\n          {actions && actions.length > 0 && (\n            <div className=\"flex gap-2 mt-3\">\n              {actions.map((action, index) => (\n                <button\n                  key={index}\n                  onClick={() => {\n                    action.onClick()\n                    onDismiss()\n                  }}\n                  className={`\n                    px-3 py-1 text-xs font-medium rounded\n                    ${action.variant === 'primary' ? 'bg-orange-500 text-white hover:bg-orange-600' :\n                      action.variant === 'danger' ? 'bg-red-500 text-white hover:bg-red-600' :\n                      'bg-gray-200 text-gray-700 hover:bg-gray-300'}\n                    transition-colors\n                  `}\n                >\n                  {action.label}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n        \n        <button\n          onClick={onDismiss}\n          className=\"flex-shrink-0 ml-2 p-1 text-gray-400 hover:text-gray-600 transition-colors\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  )\n}\n\n// Notification Center Component for Dashboard\nexport function NotificationCenter() {\n  const { notifications, removeNotification, clearAll } = useNotifications()\n  const [isOpen, setIsOpen] = useState(false)\n\n  const unreadCount = notifications.length\n\n  return (\n    <div className=\"relative\">\n      {/* Notification Bell */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"relative p-2 text-gray-600 hover:text-gray-900 transition-colors\"\n      >\n        <Bell className=\"w-5 h-5\" />\n        {unreadCount > 0 && (\n          <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n            {unreadCount > 9 ? '9+' : unreadCount}\n          </span>\n        )}\n      </button>\n\n      {/* Notification Dropdown */}\n      {isOpen && (\n        <div className=\"absolute right-0 top-full mt-2 w-80 bg-white border rounded-lg shadow-lg z-50\">\n          <div className=\"p-4 border-b\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-semibold\">Notifiche</h3>\n              {notifications.length > 0 && (\n                <button\n                  onClick={clearAll}\n                  className=\"text-sm text-gray-500 hover:text-gray-700\"\n                >\n                  Cancella tutto\n                </button>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"max-h-80 overflow-y-auto\">\n            {notifications.length === 0 ? (\n              <div className=\"p-4 text-center text-gray-500\">\n                <Bell className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                <p>Nessuna notifica</p>\n              </div>\n            ) : (\n              notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className=\"p-4 border-b hover:bg-gray-50 cursor-pointer\"\n                  onClick={() => removeNotification(notification.id)}\n                >\n                  <div className=\"flex items-start\">\n                    <div className=\"flex-shrink-0 mr-3\">\n                      {notification.type === 'success' && <CheckCircle className=\"w-4 h-4 text-green-600\" />}\n                      {notification.type === 'error' && <AlertCircle className=\"w-4 h-4 text-red-600\" />}\n                      {notification.type === 'warning' && <AlertTriangle className=\"w-4 h-4 text-yellow-600\" />}\n                      {notification.type === 'info' && <Info className=\"w-4 h-4 text-blue-600\" />}\n                    </div>\n                    <div className=\"flex-1\">\n                      <h4 className=\"text-sm font-medium\">{notification.title}</h4>\n                      <p className=\"text-xs text-gray-600 mt-1\">{notification.message}</p>\n                      <p className=\"text-xs text-gray-400 mt-2\">\n                        {notification.createdAt.toLocaleTimeString()}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\n// Pre-built notification templates for common use cases\nexport const NotificationTemplates = {\n  // Content Management\n  contentSaved: (itemType: string, itemName: string) => ({\n    type: 'success' as const,\n    title: 'Contenuto Salvato',\n    message: `${itemType} \"${itemName}\" salvato con successo.`,\n    actions: [\n      {\n        label: 'Visualizza',\n        onClick: () => window.location.reload(),\n        variant: 'primary' as const\n      }\n    ]\n  }),\n\n  contentPublished: (itemType: string, itemName: string) => ({\n    type: 'success' as const,\n    title: 'Contenuto Pubblicato',\n    message: `${itemType} \"${itemName}\" √® ora pubblico.`,\n    actions: [\n      {\n        label: 'Vedi Live',\n        onClick: () => window.open('/', '_blank'),\n        variant: 'primary' as const\n      }\n    ]\n  }),\n\n  contentDeleted: (itemType: string, itemName: string) => ({\n    type: 'info' as const,\n    title: 'Contenuto Eliminato',\n    message: `${itemType} \"${itemName}\" √® stato eliminato.`\n  }),\n\n  // System Operations\n  systemError: (operation: string, error: string) => ({\n    type: 'error' as const,\n    title: 'Errore Sistema',\n    message: `Errore durante ${operation}: ${error}`,\n    persistent: true,\n    actions: [\n      {\n        label: 'Riprova',\n        onClick: () => window.location.reload(),\n        variant: 'primary' as const\n      },\n      {\n        label: 'Supporto',\n        onClick: () => alert('Contatta il supporto tecnico'),\n        variant: 'secondary' as const\n      }\n    ]\n  }),\n\n  // User Actions\n  loginSuccess: (userName: string) => ({\n    type: 'success' as const,\n    title: 'Accesso Effettuato',\n    message: `Benvenuto, ${userName}!`\n  }),\n\n  logoutSuccess: () => ({\n    type: 'info' as const,\n    title: 'Logout Effettuato',\n    message: 'Sei stato disconnesso con successo.'\n  }),\n\n  // Database Operations\n  dataImported: (count: number, type: string) => ({\n    type: 'success' as const,\n    title: 'Importazione Completata',\n    message: `${count} ${type} importati con successo.`,\n    actions: [\n      {\n        label: 'Visualizza',\n        onClick: () => window.location.reload(),\n        variant: 'primary' as const\n      }\n    ]\n  }),\n\n  // Maintenance\n  maintenanceWarning: (scheduledTime: string) => ({\n    type: 'warning' as const,\n    title: 'Manutenzione Programmata',\n    message: `Il sistema sar√† in manutenzione ${scheduledTime}. Salva il tuo lavoro.`,\n    persistent: true,\n    actions: [\n      {\n        label: 'Salva Ora',\n        onClick: () => alert('Salvataggio automatico...'),\n        variant: 'primary' as const\n      }\n    ]\n  })\n}","size_bytes":12696},"app/api/admin/users/route.ts":{"content":"// Admin User Management API\nimport { NextRequest, NextResponse } from 'next/server'\nimport { requireAdmin, AdminAuthService } from '@/lib/auth-admin'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    // Require admin privileges\n    await requireAdmin(idToken)\n    \n    // Get all users\n    const users = await AdminAuthService.listUsers()\n    \n    return NextResponse.json({ users })\n    \n  } catch (error) {\n    console.error('Get users error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error fetching users' \n    }, { status: 403 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    // Require admin privileges\n    await requireAdmin(idToken)\n    \n    const { email, password, displayName, isAdmin } = await request.json()\n    \n    if (!email || !password) {\n      return NextResponse.json({ error: 'Email and password required' }, { status: 400 })\n    }\n    \n    // Create user\n    const uid = await AdminAuthService.createAdminUser(email, password, displayName)\n    \n    // Set admin role if requested\n    if (isAdmin) {\n      await AdminAuthService.setAdminRole(uid, true)\n    }\n    \n    return NextResponse.json({ \n      success: true, \n      uid,\n      message: 'User created successfully' \n    })\n    \n  } catch (error) {\n    console.error('Create user error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error creating user' \n    }, { status: 500 })\n  }\n}","size_bytes":1958},"components/ui/badge.tsx":{"content":"import type React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-chip text-chip-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground\",\n        destructive: \"bg-destructive text-destructive-foreground\",\n        outline: \"border border-border text-foreground bg-background\",\n        primary: \"bg-primary text-primary-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} data-slot=\"badge\" {...props} />\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1048},"lib/utils.ts":{"content":"import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"app/api/admin/content/route.ts":{"content":"// CMS Content Management API - Secure server-side operations\nimport { NextRequest, NextResponse } from 'next/server'\nimport { requireAdmin, adminDb } from '@/lib/auth-admin'\nimport { COLLECTIONS } from '@/lib/firestore-schema'\n\n// Generate unique slug\nfunction generateSlug(title: string): string {\n  return title\n    .toLowerCase()\n    .replace(/[^a-z0-9 -]/g, '')\n    .replace(/\\s+/g, '-')\n    .replace(/-+/g, '-')\n    .trim()\n}\n\n// Ensure slug uniqueness\nasync function ensureUniqueSlug(collection: string, slug: string, excludeId?: string): Promise<string> {\n  if (!adminDb) throw new Error('Database not initialized')\n  \n  let uniqueSlug = slug\n  let counter = 1\n  \n  while (true) {\n    const query = adminDb.collection(collection).where('slug', '==', uniqueSlug)\n    const snapshot = await query.get()\n    \n    // Check if slug exists (excluding current document)\n    const existingDocs = snapshot.docs.filter((doc: any) => doc.id !== excludeId)\n    \n    if (existingDocs.length === 0) {\n      break\n    }\n    \n    uniqueSlug = `${slug}-${counter}`\n    counter++\n  }\n  \n  return uniqueSlug\n}\n\n// GET: Fetch content by collection\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const collection = searchParams.get('collection')\n    const id = searchParams.get('id')\n    const published = searchParams.get('published')\n    \n    if (!collection) {\n      return NextResponse.json({ error: 'Collection parameter required' }, { status: 400 })\n    }\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // ADMIN API: Always require authentication and admin role\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Authentication required' }, { status: 401 })\n    }\n    \n    // Verify admin role - this will throw if not admin\n    await requireAdmin(idToken)\n    \n    let query = adminDb.collection(collection)\n    \n    // Admin can see all content, including unpublished\n    // Optional filtering by published status\n    if (published === 'true') {\n      query = query.where('published', '==', true)\n    } else if (published === 'false') {\n      query = query.where('published', '==', false)\n    }\n    \n    // Get specific document\n    if (id) {\n      const doc = await adminDb.collection(collection).doc(id).get()\n      if (!doc.exists) {\n        return NextResponse.json({ error: 'Document not found' }, { status: 404 })\n      }\n      \n      return NextResponse.json({ \n        id: doc.id, \n        ...doc.data() \n      })\n    }\n    \n    // Get collection\n    const snapshot = await query.orderBy('updatedAt', 'desc').get()\n    const items = snapshot.docs.map((doc: any) => ({\n      id: doc.id,\n      ...doc.data()\n    }))\n    \n    return NextResponse.json({ items })\n    \n  } catch (error) {\n    console.error('Get content error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error fetching content' \n    }, { status: 500 })\n  }\n}\n\n// POST: Create content\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    const { collection, data } = await request.json()\n    \n    if (!collection || !data) {\n      return NextResponse.json({ error: 'Collection and data required' }, { status: 400 })\n    }\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // Generate slug if title/name provided\n    let slug = data.slug\n    if (!slug && (data.title || data.name)) {\n      slug = generateSlug(data.title || data.name)\n    }\n    \n    // Ensure unique slug\n    if (slug) {\n      slug = await ensureUniqueSlug(collection, slug)\n    }\n    \n    // Prepare document data\n    const docData = {\n      ...data,\n      ...(slug && { slug }),\n      published: data.published ?? false,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    }\n    \n    // Create document\n    const docRef = await adminDb.collection(collection).add(docData)\n    \n    return NextResponse.json({ \n      success: true,\n      id: docRef.id,\n      slug,\n      message: 'Content created successfully' \n    })\n    \n  } catch (error) {\n    console.error('Create content error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error creating content' \n    }, { status: 500 })\n  }\n}\n\n// PUT: Update content\nexport async function PUT(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    const { collection, id, data } = await request.json()\n    \n    if (!collection || !id || !data) {\n      return NextResponse.json({ error: 'Collection, ID and data required' }, { status: 400 })\n    }\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // Handle slug update\n    let slug = data.slug\n    if (!slug && (data.title || data.name)) {\n      slug = generateSlug(data.title || data.name)\n    }\n    \n    if (slug) {\n      slug = await ensureUniqueSlug(collection, slug, id)\n    }\n    \n    // Prepare update data\n    const updateData = {\n      ...data,\n      ...(slug && { slug }),\n      updatedAt: new Date()\n    }\n    \n    // Update document\n    await adminDb.collection(collection).doc(id).update(updateData)\n    \n    return NextResponse.json({ \n      success: true,\n      slug,\n      message: 'Content updated successfully' \n    })\n    \n  } catch (error) {\n    console.error('Update content error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error updating content' \n    }, { status: 500 })\n  }\n}\n\n// DELETE: Delete content\nexport async function DELETE(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    const { searchParams } = new URL(request.url)\n    const collection = searchParams.get('collection')\n    const id = searchParams.get('id')\n    \n    if (!collection || !id) {\n      return NextResponse.json({ error: 'Collection and ID required' }, { status: 400 })\n    }\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // Delete document\n    await adminDb.collection(collection).doc(id).delete()\n    \n    return NextResponse.json({ \n      success: true,\n      message: 'Content deleted successfully' \n    })\n    \n  } catch (error) {\n    console.error('Delete content error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error deleting content' \n    }, { status: 500 })\n  }\n}","size_bytes":7387},"app/globals.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n:root {\n  /* Enhanced CSS variables system for unified dark/light mode with desert theme */\n  --text-primary: oklch(0.145 0 0);\n  --text-secondary: oklch(0.556 0 0);\n  --bg-primary: oklch(1 0 0);\n  --bg-secondary: oklch(0.97 0 0);\n\n  /* Updated color tokens to match desert adventure theme */\n  --background: var(--bg-primary);\n  --foreground: var(--text-primary);\n  --card: oklch(0.95 0.05 85); /* Light sand color for cards */\n  --card-foreground: var(--text-primary);\n  --popover: oklch(0.95 0.05 85);\n  --popover-foreground: var(--text-primary);\n  --primary: oklch(0.58 0.2 30); /* Morocco Dreams Orange */\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.45 0.15 25); /* Rich Morocco Red */\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.95 0.05 85);\n  --muted-foreground: var(--text-secondary);\n  --accent: oklch(0.65 0.18 35);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --destructive-foreground: oklch(0.985 0 0);\n  --border: oklch(0.6 0.15 45);\n  --input: var(--bg-primary);\n  --ring: oklch(0.65 0.18 35);\n\n  /* Added chip/badge tokens for consistent tag styling */\n  --chip: oklch(0.9 0.05 45); /* Light sand background for chips */\n  --chip-foreground: oklch(0.3 0.1 45); /* Dark text for contrast */\n\n  --chart-1: oklch(0.6 0.15 45);\n  --chart-2: oklch(0.65 0.18 35);\n  --chart-3: oklch(0.3 0 0);\n  --chart-4: oklch(0.6 0.15 45);\n  --chart-5: oklch(0.65 0.18 35);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.95 0.05 85);\n  --sidebar-foreground: var(--text-primary);\n  --sidebar-primary: oklch(0.6 0.15 45);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.65 0.18 35);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.6 0.15 45);\n  --sidebar-ring: oklch(0.65 0.18 35);\n}\n\n.dark {\n  /* Enhanced dark mode variables with desert theme adaptation */\n  --text-primary: oklch(0.985 0 0);\n  --text-secondary: oklch(0.708 0 0);\n  --bg-primary: oklch(0.145 0 0);\n  --bg-secondary: oklch(0.269 0 0);\n\n  /* Dark mode desert theme colors */\n  --background: var(--bg-primary);\n  --foreground: var(--text-primary);\n  --card: oklch(0.2 0.05 45); /* Dark sand tone for cards */\n  --card-foreground: var(--text-primary);\n  --popover: oklch(0.2 0.05 45);\n  --popover-foreground: var(--text-primary);\n  --primary: oklch(0.68 0.22 32); /* Brighter Morocco Orange for dark mode */\n  --primary-foreground: oklch(0.145 0 0);\n  --secondary: oklch(0.55 0.18 27); /* Brighter Morocco Red for dark mode */\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.2 0.05 45);\n  --muted-foreground: var(--text-secondary);\n  --accent: oklch(0.75 0.18 35);\n  --accent-foreground: oklch(0.145 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.3 0.05 45);\n  --input: var(--bg-secondary);\n  --ring: oklch(0.75 0.18 35);\n\n  /* Dark mode chip tokens with proper contrast */\n  --chip: oklch(0.3 0.05 45); /* Dark background for chips */\n  --chip-foreground: oklch(0.9 0.05 45); /* Light text for contrast */\n\n  --chart-1: oklch(0.7 0.15 45);\n  --chart-2: oklch(0.75 0.18 35);\n  --chart-3: oklch(0.8 0 0);\n  --chart-4: oklch(0.7 0.15 45);\n  --chart-5: oklch(0.75 0.18 35);\n  --sidebar: oklch(0.2 0.05 45);\n  --sidebar-foreground: var(--text-primary);\n  --sidebar-primary: oklch(0.7 0.15 45);\n  --sidebar-primary-foreground: oklch(0.145 0 0);\n  --sidebar-accent: oklch(0.75 0.18 35);\n  --sidebar-accent-foreground: oklch(0.145 0 0);\n  --sidebar-border: oklch(0.3 0.05 45);\n  --sidebar-ring: oklch(0.75 0.18 35);\n}\n\n@theme inline {\n  /* optional: --font-sans, --font-serif, --font-mono if they are applied in the layout.tsx */\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n\n  /* Added chip color mappings for Tailwind */\n  --color-chip: var(--chip);\n  --color-chip-foreground: var(--chip-foreground);\n\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n\n  /* Added base styles for improved accessibility and consistency */\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    @apply text-balance;\n  }\n\n  p {\n    @apply text-pretty leading-relaxed;\n  }\n\n  /* Focus styles for better accessibility */\n  button:focus-visible,\n  a:focus-visible,\n  [role=\"button\"]:focus-visible {\n    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;\n  }\n\n  /* Ensure minimum touch targets */\n  button,\n  a,\n  [role=\"button\"] {\n    @apply min-h-[44px];\n  }\n}\n","size_bytes":6095},"app/auth/signup/page.tsx":{"content":"\"use client\";\n\nimport Link from 'next/link';\nimport SignUp from '@/components/auth/SignUp';\n\nexport default function SignUpPage() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 dark:from-background dark:to-muted flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <Link href=\"/\" className=\"inline-block\">\n            <h1 className=\"text-3xl font-bold text-orange-600 mb-2\">Morocco Dreams</h1>\n          </Link>\n          <p className=\"text-muted-foreground\">\n            Crea il tuo account\n          </p>\n        </div>\n\n        {/* Sign Up Form */}\n        <div className=\"bg-card border border-border rounded-2xl shadow-xl p-8\">\n          <SignUp />\n        </div>\n\n        {/* Back to site */}\n        <div className=\"text-center mt-6\">\n          <Link \n            href=\"/\" \n            className=\"text-muted-foreground hover:text-foreground text-sm transition-colors\"\n          >\n            ‚Üê Torna al sito\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":1124},"components/ui/SearchBar.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Search, X, MapPin, Calendar, Users } from \"lucide-react\"\nimport Link from \"next/link\"\n\ninterface SearchBarProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport default function SearchBar({ isOpen, onClose }: SearchBarProps) {\n  const [query, setQuery] = useState(\"\")\n  const [results, setResults] = useState<any[]>([])\n\n  const searchData = [\n    {\n      type: \"destination\",\n      title: \"Marrakech\",\n      subtitle: \"Citt√† Imperiale\",\n      href: \"/viaggi/citta-imperiali\",\n      icon: MapPin,\n    },\n    {\n      type: \"destination\",\n      title: \"Deserto del Sahara\",\n      subtitle: \"Avventura nel deserto\",\n      href: \"/viaggi/deserto\",\n      icon: MapPin,\n    },\n    {\n      type: \"destination\",\n      title: \"Fes\",\n      subtitle: \"Capitale spirituale\",\n      href: \"/viaggi/citta-imperiali\",\n      icon: MapPin,\n    },\n    {\n      type: \"destination\",\n      title: \"Essaouira\",\n      subtitle: \"Costa atlantica\",\n      href: \"/viaggi/costa-atlantica\",\n      icon: MapPin,\n    },\n    { type: \"destination\", title: \"Chefchaouen\", subtitle: \"Perla blu\", href: \"/viaggi/montagne-atlas\", icon: MapPin },\n    {\n      type: \"experience\",\n      title: \"Hammam Tradizionale\",\n      subtitle: \"Benessere autentico\",\n      href: \"/esperienze/hammam\",\n      icon: Users,\n    },\n    {\n      type: \"experience\",\n      title: \"Cucina Marocchina\",\n      subtitle: \"Corsi di cucina\",\n      href: \"/esperienze/cucina\",\n      icon: Users,\n    },\n    {\n      type: \"experience\",\n      title: \"Trekking Atlas\",\n      subtitle: \"Montagne e natura\",\n      href: \"/esperienze/trekking\",\n      icon: Users,\n    },\n    { type: \"tour\", title: \"Tour delle Citt√† Imperiali\", subtitle: \"8 giorni\", href: \"/viaggi/gruppo\", icon: Calendar },\n    { type: \"tour\", title: \"Avventura nel Deserto\", subtitle: \"4 giorni\", href: \"/viaggi/deserto\", icon: Calendar },\n  ]\n\n  useEffect(() => {\n    if (query.length > 0) {\n      const filtered = searchData.filter(\n        (item) =>\n          item.title.toLowerCase().includes(query.toLowerCase()) ||\n          item.subtitle.toLowerCase().includes(query.toLowerCase()),\n      )\n      setResults(filtered)\n    } else {\n      setResults([])\n    }\n  }, [query])\n\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\"\n    } else {\n      document.body.style.overflow = \"unset\"\n    }\n    return () => {\n      document.body.style.overflow = \"unset\"\n    }\n  }, [isOpen])\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm\">\n      <div className=\"bg-background border-b border-border\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n              <input\n                type=\"text\"\n                placeholder=\"Cerca destinazioni, esperienze, tour...\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                className=\"w-full pl-12 pr-4 py-4 bg-muted border border-border rounded-2xl text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg\"\n                autoFocus\n              />\n            </div>\n            <button onClick={onClose} className=\"p-3 hover:bg-muted rounded-full transition-colors\">\n              <X className=\"w-6 h-6 text-foreground\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        {query.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Search className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-foreground mb-2\">Cosa stai cercando?</h3>\n            <p className=\"text-muted-foreground\">Inizia a digitare per cercare destinazioni, esperienze o tour</p>\n          </div>\n        ) : results.length > 0 ? (\n          <div className=\"space-y-2\">\n            {results.map((result, idx) => (\n              <Link\n                key={idx}\n                href={result.href}\n                onClick={onClose}\n                className=\"flex items-center space-x-4 p-4 bg-card hover:bg-muted rounded-xl transition-colors group\"\n              >\n                <div className=\"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center\">\n                  <result.icon className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h4 className=\"font-semibold text-foreground group-hover:text-orange-600 transition-colors\">\n                    {result.title}\n                  </h4>\n                  <p className=\"text-sm text-muted-foreground\">{result.subtitle}</p>\n                </div>\n                <div className=\"text-xs text-muted-foreground capitalize bg-muted px-2 py-1 rounded-full\">\n                  {result.type}\n                </div>\n              </Link>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"text-6xl mb-4\">üîç</div>\n            <h3 className=\"text-xl font-semibold text-foreground mb-2\">Nessun risultato trovato</h3>\n            <p className=\"text-muted-foreground\">Prova con parole chiave diverse</p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","size_bytes":5617},"lib/auth-admin.ts":{"content":"// Firebase Admin Authentication - Server-side only\n// Handles custom claims, user verification, and admin privileges\n\nimport { initializeApp, cert, getApps } from 'firebase-admin/app'\nimport { getAuth } from 'firebase-admin/auth'\nimport { getFirestore } from 'firebase-admin/firestore'\nimport { formatPrivateKey } from './firebase-admin'\n\n// Initialize Firebase Admin (server-side only)\nfunction initializeFirebaseAdmin() {\n  if (getApps().length === 0) {\n    const privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY)\n    const clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL\n    const projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID\n\n    if (!privateKey || !clientEmail || !projectId) {\n      console.warn('Firebase Admin SDK credentials missing in auth-admin.ts. Admin auth will not be available.')\n      // Return null instead of throwing to allow app to continue\n      return null\n    }\n\n    const adminConfig = {\n      credential: cert({\n        projectId,\n        clientEmail,\n        privateKey,\n      }),\n      databaseURL: `https://${projectId}.firebaseio.com`\n    }\n    \n    try {\n      return initializeApp(adminConfig, 'admin')\n    } catch (error) {\n      console.error('Failed to initialize Firebase Admin:', error)\n      return null\n    }\n  }\n  \n  return getApps()[0]\n}\n\nlet adminApp: any = null\nlet adminAuth: any = null\nlet adminDb: any = null\n\ntry {\n  adminApp = initializeFirebaseAdmin()\n  adminAuth = getAuth(adminApp)\n  adminDb = getFirestore(adminApp)\n} catch (error) {\n  console.error('Firebase Admin initialization error:', error)\n}\n\n// Admin user management\nexport class AdminAuthService {\n  \n  // Verify ID token and check admin role\n  static async verifyAdminToken(idToken: string): Promise<{ uid: string; isAdmin: boolean; user: any }> {\n    try {\n      if (!adminAuth) {\n        throw new Error('Firebase Admin not initialized')\n      }\n      \n      const decodedToken = await adminAuth.verifyIdToken(idToken)\n      const uid = decodedToken.uid\n      \n      // Check custom claims\n      const isAdmin = decodedToken.role === 'admin' || decodedToken.admin === true\n      \n      // Get user profile from Firestore\n      const userDoc = await adminDb.collection('users').doc(uid).get()\n      const userProfile = userDoc.exists ? userDoc.data() : null\n      \n      return {\n        uid,\n        isAdmin: isAdmin || (userProfile?.role === 'admin'),\n        user: {\n          uid,\n          email: decodedToken.email,\n          name: decodedToken.name,\n          role: userProfile?.role || 'user',\n          ...userProfile\n        }\n      }\n    } catch (error) {\n      console.error('Token verification error:', error)\n      throw new Error('Invalid or expired token')\n    }\n  }\n  \n  // Set custom claims for admin users\n  static async setAdminRole(uid: string, isAdmin: boolean = true): Promise<void> {\n    try {\n      if (!adminAuth) {\n        throw new Error('Firebase Admin not initialized')\n      }\n      \n      await adminAuth.setCustomUserClaims(uid, { \n        role: isAdmin ? 'admin' : 'user',\n        admin: isAdmin \n      })\n      \n      // Also update in Firestore\n      if (adminDb) {\n        await adminDb.collection('users').doc(uid).set({\n          role: isAdmin ? 'admin' : 'user',\n          permissions: isAdmin ? {\n            canEditContent: true,\n            canManageUsers: true,\n            canEditTheme: true,\n            canPublish: true\n          } : {},\n          updatedAt: new Date()\n        }, { merge: true })\n      }\n      \n    } catch (error) {\n      console.error('Error setting admin role:', error)\n      throw error\n    }\n  }\n  \n  // Create admin user\n  static async createAdminUser(email: string, password: string, displayName?: string): Promise<string> {\n    try {\n      if (!adminAuth) {\n        throw new Error('Firebase Admin not initialized')\n      }\n      \n      const userRecord = await adminAuth.createUser({\n        email,\n        password,\n        displayName,\n        emailVerified: true\n      })\n      \n      // Set admin claims\n      await this.setAdminRole(userRecord.uid, true)\n      \n      return userRecord.uid\n    } catch (error) {\n      console.error('Error creating admin user:', error)\n      throw error\n    }\n  }\n  \n  // List all users with pagination\n  static async listUsers(maxResults: number = 1000): Promise<any[]> {\n    try {\n      if (!adminAuth) {\n        throw new Error('Firebase Admin not initialized')\n      }\n      \n      const listUsersResult = await adminAuth.listUsers(maxResults)\n      return listUsersResult.users.map((user: any) => ({\n        uid: user.uid,\n        email: user.email,\n        displayName: user.displayName,\n        emailVerified: user.emailVerified,\n        disabled: user.disabled,\n        customClaims: user.customClaims,\n        creationTime: user.metadata.creationTime,\n        lastSignInTime: user.metadata.lastSignInTime\n      }))\n    } catch (error) {\n      console.error('Error listing users:', error)\n      throw error\n    }\n  }\n  \n  // Delete user\n  static async deleteUser(uid: string): Promise<void> {\n    try {\n      if (!adminAuth) {\n        throw new Error('Firebase Admin not initialized')\n      }\n      \n      await adminAuth.deleteUser(uid)\n      \n      // Also delete from Firestore\n      if (adminDb) {\n        await adminDb.collection('users').doc(uid).delete()\n      }\n    } catch (error) {\n      console.error('Error deleting user:', error)\n      throw error\n    }\n  }\n  \n  // Check if user exists and is admin\n  static async isUserAdmin(uid: string): Promise<boolean> {\n    try {\n      if (!adminAuth) return false\n      \n      const userRecord = await adminAuth.getUser(uid)\n      return userRecord.customClaims?.admin === true || userRecord.customClaims?.role === 'admin'\n    } catch (error) {\n      console.error('Error checking admin status:', error)\n      return false\n    }\n  }\n}\n\n// Middleware helper for API routes\nexport async function requireAdmin(idToken: string) {\n  const verification = await AdminAuthService.verifyAdminToken(idToken)\n  \n  if (!verification.isAdmin) {\n    throw new Error('Insufficient permissions - admin role required')\n  }\n  \n  return verification\n}\n\n// Export for Next.js API routes\nexport { adminAuth, adminDb }","size_bytes":6221},"components/dashboard/UserOverview.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Calendar, Heart, User, Bell, Star, MapPin, Clock, Euro } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { firestoreService, COLLECTIONS, Booking } from '@/lib/firestore';\n\nexport default function UserOverview() {\n  const { user, userProfile } = useAuth();\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const loadUserData = async () => {\n      if (!user) return;\n      \n      try {\n        // Get user's bookings\n        const userBookings = await firestoreService.getUserBookings(user.uid);\n        setBookings(userBookings || []);\n      } catch (err: any) {\n        console.warn('Bookings not available, using empty array:', err);\n        setBookings([]); // Use empty array instead of showing error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadUserData();\n  }, [user]);\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {[...Array(4)].map((_, i) => (\n            <div key={i} className=\"bg-card rounded-2xl p-6 shadow-sm animate-pulse\">\n              <div className=\"h-4 bg-muted rounded w-1/2 mb-2\"></div>\n              <div className=\"h-8 bg-muted rounded w-1/3\"></div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300\">\n        {error}\n      </div>\n    );\n  }\n\n  const stats = {\n    totalBookings: bookings.length,\n    confirmedBookings: bookings.filter(b => b.status === 'confirmed').length,\n    totalSpent: bookings\n      .filter(b => b.status === 'confirmed' || b.status === 'completed')\n      .reduce((sum, b) => sum + b.totalPrice, 0),\n    wishlistItems: userProfile?.profile?.wishlist?.length || 0\n  };\n\n  const recentBookings = bookings\n    .sort((a, b) => b.createdAt.seconds - a.createdAt.seconds)\n    .slice(0, 3);\n\n  const upcomingBookings = bookings.filter(booking => {\n    const departureDate = new Date(booking.personalDetails.departureDate);\n    return departureDate > new Date() && booking.status === 'confirmed';\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Welcome Header */}\n      <div className=\"bg-primary rounded-2xl p-6 text-primary-foreground\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-2xl font-bold\">\n            {userProfile?.displayName?.charAt(0)?.toUpperCase() || user?.email?.charAt(0)?.toUpperCase() || 'U'}\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-bold\">\n              Benvenuto, {userProfile?.displayName || 'Viaggiatore'}!\n            </h1>\n            <p className=\"text-primary-foreground/80\">\n              Gestisci le tue prenotazioni e scopri nuove avventure\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Prenotazioni Totali</p>\n              <p className=\"text-2xl font-bold text-foreground\">{stats.totalBookings}</p>\n            </div>\n            <Calendar className=\"w-8 h-8 text-primary\" />\n          </div>\n        </div>\n\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Viaggi Confermati</p>\n              <p className=\"text-2xl font-bold text-foreground\">{stats.confirmedBookings}</p>\n            </div>\n            <Star className=\"w-8 h-8 text-primary\" />\n          </div>\n        </div>\n\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Totale Speso</p>\n              <p className=\"text-2xl font-bold text-foreground\">‚Ç¨{stats.totalSpent.toLocaleString()}</p>\n            </div>\n            <Euro className=\"w-8 h-8 text-primary\" />\n          </div>\n        </div>\n\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Lista Desideri</p>\n              <p className=\"text-2xl font-bold text-foreground\">{stats.wishlistItems}</p>\n            </div>\n            <Heart className=\"w-8 h-8 text-primary\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Upcoming Trips Alert */}\n      {upcomingBookings.length > 0 && (\n        <div className=\"bg-primary/10 border border-primary/20 rounded-lg p-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Clock className=\"w-5 h-5 text-primary\" />\n            <span className=\"text-primary font-medium\">\n              Hai {upcomingBookings.length} viaggio{upcomingBookings.length > 1 ? 'i' : ''} in programma!\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Quick Actions & Recent Activity */}\n      <div className=\"grid lg:grid-cols-2 gap-6\">\n        {/* Recent Bookings */}\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-foreground mb-4 flex items-center\">\n            <Calendar className=\"w-5 h-5 mr-2 text-primary\" />\n            Prenotazioni Recenti\n          </h3>\n          {recentBookings.length > 0 ? (\n            <div className=\"space-y-3\">\n              {recentBookings.map((booking) => (\n                <div key={booking.id} className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-sm text-foreground\">\n                      Prenotazione #{booking.id?.slice(-6)}\n                    </p>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Partenza: {booking.personalDetails.departureDate}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-semibold text-sm text-foreground\">\n                      ‚Ç¨{booking.totalPrice}\n                    </p>\n                    <span className={`inline-block px-2 py-1 text-xs rounded-full ${\n                      booking.status === 'pending' ? 'bg-accent/10 text-accent border border-accent/20' :\n                      booking.status === 'confirmed' ? 'bg-primary/10 text-primary border border-primary/20' :\n                      booking.status === 'cancelled' ? 'bg-destructive/10 text-destructive border border-destructive/20' :\n                      'bg-primary/10 text-primary border border-primary/20'\n                    }`}>\n                      {booking.status}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <Calendar className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\n              <p className=\"text-gray-500 dark:text-gray-400 text-sm\">\n                Nessuna prenotazione ancora\n              </p>\n              <p className=\"text-gray-400 dark:text-gray-500 text-xs\">\n                Inizia a esplorare i nostri viaggi!\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Quick Links */}\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Azioni Rapide\n          </h3>\n          <div className=\"space-y-3\">\n            <a\n              href=\"/esperienze\"\n              className=\"flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors\"\n            >\n              <MapPin className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Esplora Nuovi Viaggi</span>\n            </a>\n            <a\n              href=\"/dashboard?tab=bookings\"\n              className=\"flex items-center space-x-3 p-3 bg-primary/10 text-primary rounded-lg hover:bg-primary/20 transition-colors\"\n            >\n              <Calendar className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Le Mie Prenotazioni</span>\n            </a>\n            <a\n              href=\"/dashboard?tab=wishlist\"\n              className=\"flex items-center space-x-3 p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors\"\n            >\n              <Heart className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Lista Desideri</span>\n            </a>\n            <a\n              href=\"/dashboard?tab=profile\"\n              className=\"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n            >\n              <User className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Il Mio Profilo</span>\n            </a>\n          </div>\n        </div>\n      </div>\n\n      {/* Travel Preferences */}\n      {userProfile?.profile?.travelPreferences && userProfile.profile.travelPreferences.length > 0 && (\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Le Tue Preferenze di Viaggio\n          </h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {userProfile.profile.travelPreferences.map((preference, index) => (\n              <span\n                key={index}\n                className=\"px-3 py-1 bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300 rounded-full text-sm\"\n              >\n                {preference}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":10547},"components/dashboard/AdminOverview.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { MapPin, FileText, Package, Settings, Database, Users, BarChart3 } from 'lucide-react'\nimport { useAuth } from '@/context/AuthContext'\n\nexport default function AdminOverview() {\n  const { user } = useAuth()\n  const [stats, setStats] = useState({\n    cities: 0,\n    experiences: 0,\n    travels: 0,\n    services: 0,\n    total: 0\n  })\n\n  const statCards = [\n    { label: \"Citt√†\", value: stats.cities, icon: MapPin, color: \"orange\" },\n    { label: \"Esperienze\", value: stats.experiences, icon: FileText, color: \"green\" },\n    { label: \"Viaggi\", value: stats.travels, icon: Package, color: \"orange\" },\n    { label: \"Servizi\", value: stats.services, icon: Settings, color: \"purple\" }\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-3xl font-bold text-foreground\">Admin Dashboard</h2>\n        <div className=\"text-sm text-muted-foreground\">\n          Benvenuto, {user?.email}\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {statCards.map((stat, index) => (\n          <div key={index} className=\"bg-card rounded-2xl p-6 shadow-sm border border-border hover:shadow-md transition-shadow\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n                <p className=\"text-3xl font-bold text-foreground\">{stat.value}</p>\n              </div>\n              <stat.icon className={`w-8 h-8 text-${stat.color}-500`} />\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n        <h3 className=\"text-lg font-bold text-foreground mb-4\">Azioni Rapide</h3>\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <div className=\"p-4 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 rounded-xl\">\n            <Database className=\"w-6 h-6 mb-2\" />\n            <div className=\"font-medium\">Database</div>\n            <div className=\"text-sm opacity-75\">Gestisci contenuti</div>\n          </div>\n          <div className=\"p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-xl\">\n            <MapPin className=\"w-6 h-6 mb-2\" />\n            <div className=\"font-medium\">Citt√†</div>\n            <div className=\"text-sm opacity-75\">Aggiungi destinazioni</div>\n          </div>\n          <div className=\"p-4 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-xl\">\n            <BarChart3 className=\"w-6 h-6 mb-2\" />\n            <div className=\"font-medium\">Analytics</div>\n            <div className=\"text-sm opacity-75\">Visualizza statistiche</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Admin Info */}\n      <div className=\"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-6 text-white\">\n        <h3 className=\"text-lg font-bold mb-2\">Sistema CMS Integrato</h3>\n        <p className=\"text-sm opacity-90\">\n          Tutte le funzionalit√† di amministrazione sono ora integrate nella tua dashboard utente. \n          Naviga tra le sezioni admin usando la barra laterale per gestire contenuti, tema e struttura del sito.\n        </p>\n      </div>\n    </div>\n  )\n}","size_bytes":3432},"app/layout.tsx":{"content":"import type React from \"react\"\nimport type { Metadata } from \"next\"\nimport { Inter } from \"next/font/google\"\nimport \"./globals.css\"\nimport ConditionalLayout from \"./conditional-layout\"\nimport { ThemeProvider } from \"@/components/theme-provider\"\nimport { MoroccoThemeProvider } from \"@/context/ThemeContext\"\nimport { AuthProvider } from \"@/context/AuthContext\"\nimport { NotificationProvider } from \"@/components/NotificationSystem\"\nimport ChatBot from \"@/components/ChatBot\"\n\nconst inter = Inter({\n  subsets: [\"latin\"],\n  display: \"swap\",\n  variable: \"--font-inter\",\n})\n\nexport const metadata: Metadata = {\n  title: \"Morocco Dreams - Viaggi Autentici in Marocco\",\n  description:\n    \"Scopri il Marocco autentico con Morocco Dreams. Viaggi su misura, tour del deserto, citt√† imperiali e esperienze uniche nel regno delle mille e una notte.\",\n  keywords: \"Marocco, viaggi, tour, deserto, Marrakech, Fes, Casablanca, Sahara, viaggi su misura\",\n  authors: [{ name: \"Morocco Dreams\" }],\n  creator: \"Morocco Dreams\",\n  publisher: \"Morocco Dreams\",\n  formatDetection: {\n    email: false,\n    address: false,\n    telephone: false,\n  },\n  metadataBase: new URL(\"https://morocco-dreams.vercel.app\"),\n  alternates: {\n    canonical: \"/\",\n    languages: {\n      \"it-IT\": \"/\",\n      \"en-US\": \"/en\",\n      \"fr-FR\": \"/fr\",\n    },\n  },\n  openGraph: {\n    title: \"Morocco Dreams - Viaggi Autentici in Marocco\",\n    description:\n      \"Scopri il Marocco autentico con Morocco Dreams. Viaggi su misura, tour del deserto, citt√† imperiali e esperienze uniche.\",\n    url: \"https://morocco-dreams.vercel.app\",\n    siteName: \"Morocco Dreams\",\n    locale: \"it_IT\",\n    type: \"website\",\n  },\n  twitter: {\n    card: \"summary_large_image\",\n    title: \"Morocco Dreams - Viaggi Autentici in Marocco\",\n    description:\n      \"Scopri il Marocco autentico con Morocco Dreams. Viaggi su misura, tour del deserto, citt√† imperiali e esperienze uniche.\",\n  },\n  robots: {\n    index: true,\n    follow: true,\n    googleBot: {\n      index: true,\n      follow: true,\n      \"max-video-preview\": -1,\n      \"max-image-preview\": \"large\",\n      \"max-snippet\": -1,\n    },\n  },\n    generator: 'v0.app'\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"it\" suppressHydrationWarning className={inter.variable}>\n      <head>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, viewport-fit=cover\" />\n        <meta name=\"theme-color\" content=\"#ea580c\" />\n        <meta name=\"color-scheme\" content=\"light dark\" />\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossOrigin=\"anonymous\" />\n      </head>\n      <body className={`${inter.className} antialiased`}>\n        <ThemeProvider attribute=\"class\" defaultTheme=\"system\" enableSystem disableTransitionOnChange>\n          <MoroccoThemeProvider>\n            <AuthProvider>\n              <NotificationProvider>\n                <a\n                  href=\"#main-content\"\n                  className=\"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md focus:shadow-lg\"\n                >\n                  Salta al contenuto principale\n                </a>\n                <ConditionalLayout>{children}</ConditionalLayout>\n                <ChatBot />\n              </NotificationProvider>\n            </AuthProvider>\n          </MoroccoThemeProvider>\n        </ThemeProvider>\n      </body>\n    </html>\n  )\n}\n","size_bytes":3591},"app/api/chatbot/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport OpenAI from 'openai'\n\n// the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user\nconst openai = new OpenAI({ \n  apiKey: process.env.OPENAI_API_KEY\n})\n\nconst SYSTEM_PROMPT = `Sei l'assistente virtuale di \"Morocco Dreams\", un'agenzia di viaggi specializzata in viaggi autentici in Marocco.\n\nINFORMAZIONI AZIENDA:\n- Nome: Morocco Dreams\n- Specializzazione: Viaggi autentici e personalizzati in Marocco\n- Servizi: Tour delle citt√† imperiali, avventure nel deserto, esperienze costiere, montagne dell'Atlante\n- Valori: Autenticit√†, sostenibilit√†, esperienze locali, rispetto della cultura\n\nSERVIZI DISPONIBILI:\n- Guide private locali\n- Noleggio auto con autista\n- Assicurazioni viaggio\n- Trasferimenti aeroportuali\n- Tour personalizzati\n- Escursioni nel deserto del Sahara\n- Visite alle citt√† imperiali (Marrakech, Fez, Meknes, Rabat)\n- Esperienze culinarie e artigianato locale\n\nSTILE COMUNICAZIONE:\n- Caloroso e accogliente come l'ospitalit√† marocchina\n- Professionale ma amichevole\n- Usa emoji occasionalmente per essere pi√π cordiale\n- Parla sempre in italiano\n- Sii entusiasta del Marocco e delle sue bellezze\n- Offri suggerimenti personalizzati\n- Se non conosci informazioni specifiche, suggerisci di contattare l'agenzia\n\nRISPOSTE:\n- Mantieni risposte concise ma informative\n- Chiedi sempre come puoi aiutare ulteriormente\n- Suggerisci servizi correlati quando appropriato\n- Per prenotazioni, indirizza al contatto diretto con l'agenzia\n- Condividi curiosit√† sul Marocco quando rilevanti\n\nRispondi sempre con passione e conoscenza del Marocco!`\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { message, conversation } = await request.json()\n\n    if (!message) {\n      return NextResponse.json(\n        { error: 'Messaggio richiesto' },\n        { status: 400 }\n      )\n    }\n\n    // Build conversation history for context\n    const messages = [\n      { role: 'system', content: SYSTEM_PROMPT },\n      ...conversation.slice(-10).map((msg: any) => ({\n        role: msg.role,\n        content: msg.content\n      })),\n      { role: 'user', content: message }\n    ]\n\n    // Use GPT-4o-mini for cost efficiency\n    const completion = await openai.chat.completions.create({\n      model: 'gpt-4o-mini', // Most cost-effective model for production\n      messages: messages,\n      max_tokens: 350, // Reduced for maximum cost savings\n      temperature: 0.6, // Slightly more focused responses\n    })\n\n    const response = completion.choices[0]?.message?.content\n\n    if (!response) {\n      throw new Error('Nessuna risposta dal modello AI')\n    }\n\n    return NextResponse.json({ \n      response: response.trim()\n    })\n\n  } catch (error: any) {\n    console.error('Chatbot API error:', error)\n    \n    // Detect specific OpenAI quota/billing errors\n    const errorMessage = error?.message || error?.toString() || ''\n    const errorCode = error?.code || error?.type || ''\n    const isQuotaError = \n      errorCode === 'insufficient_quota' ||\n      errorMessage.includes('quota') ||\n      errorMessage.includes('billing') ||\n      errorMessage.includes('exceeded') ||\n      errorCode === 'rate_limit_exceeded'\n    \n    if (isQuotaError) {\n      // Specific message for OpenAI quota/billing issues\n      return NextResponse.json({ \n        response: \"üîã Al momento il nostro assistente AI ha esaurito il credito disponibile. \" +\n                 \"Per ricevere assistenza immediata, contatta direttamente il nostro team Morocco Dreams! \" +\n                 \"Siamo sempre pronti ad aiutarti a pianificare il tuo viaggio perfetto in Marocco. ‚ú®\"\n      })\n    }\n    \n    // Check for API key issues\n    if (errorMessage.includes('API key') || errorCode === 'invalid_api_key') {\n      return NextResponse.json({ \n        response: \"üîë C'√® un problema tecnico con la configurazione. \" +\n                 \"Contatta il nostro team per assistenza immediata - siamo qui per aiutarti! üá≤üá¶\"\n      })\n    }\n    \n    // Generic fallback responses for other errors\n    const fallbackResponses = [\n      \"Mi dispiace, sto avendo problemi tecnici al momento. üîß Puoi contattarci direttamente per assistenza immediata!\",\n      \"Ops! Sembra che ci sia un piccolo intoppo tecnico. üíª I nostri esperti sono disponibili via email o telefono per aiutarti.\",\n      \"Al momento non riesco a elaborare la tua richiesta. üõ†Ô∏è Ti consiglio di contattare il nostro team per assistenza personalizzata!\"\n    ]\n    \n    const randomFallback = fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)]\n    \n    return NextResponse.json({ \n      response: randomFallback\n    })\n  }\n}","size_bytes":4732},"components/sections/PopularTrips.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { ArrowRight, Filter } from \"lucide-react\"\nimport { getPublishedTravels } from \"@/lib/public-data\"\nimport { Travel } from \"@/lib/firestore-schema\"\nimport { TravelCard } from \"@/components/cards/TravelCard\"\n\nexport default function PopularTrips() {\n  const [activeTrip, setActiveTrip] = useState(0)\n  const [selectedCategory, setSelectedCategory] = useState(\"Tutti\")\n  const [selectedStyle, setSelectedStyle] = useState(\"Tutti\")\n  const [trips, setTrips] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n\n  // Load published travels from database\n  useEffect(() => {\n    const loadTrips = async () => {\n      try {\n        setLoading(true)\n        const publishedTrips = await getPublishedTravels({ \n          featured: true, \n          limit: 6 \n        })\n        setTrips(publishedTrips as any[])\n        setError(\"\")\n      } catch (err) {\n        console.error('Error loading trips:', err)\n        setError(\"Errore nel caricamento dei viaggi\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadTrips()\n  }, [])\n\n  const filteredTrips = trips.filter((trip) => {\n    const categoryMatch = selectedCategory === \"Tutti\" || trip.category === selectedCategory\n    // Add style filtering based on trip data when available\n    return categoryMatch\n  })\n\n  if (loading) {\n    return (\n      <div className=\"py-16 lg:py-24 bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Viaggi Pi√π Richiesti</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              I nostri tour pi√π amati, perfetti per scoprire il meglio del Marocco\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {[...Array(6)].map((_, i) => (\n              <div key={i} className=\"bg-card rounded-2xl p-6 shadow-lg animate-pulse\">\n                <div className=\"h-48 bg-gray-200 dark:bg-gray-700 rounded-xl mb-4\"></div>\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2\"></div>\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2\"></div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"py-16 lg:py-24 bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Viaggi Pi√π Richiesti</h2>\n            <p className=\"text-red-600 dark:text-red-400\">{error}</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"py-16 lg:py-24 bg-muted/30\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Viaggi Pi√π Richiesti</h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n            I nostri tour pi√π amati, perfetti per scoprire il meglio del Marocco\n          </p>\n        </div>\n\n        <div className=\"mb-8 bg-card rounded-2xl p-6 shadow-lg\">\n          <div className=\"flex items-center mb-4\">\n            <Filter className=\"w-5 h-5 text-orange-500 mr-2\" />\n            <h3 className=\"text-lg font-semibold text-foreground\">Filtra i Viaggi</h3>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Categoria</label>\n              <select\n                value={selectedCategory}\n                onChange={(e) => setSelectedCategory(e.target.value)}\n                className=\"w-full px-4 py-4 bg-background border border-border rounded-xl text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 min-h-[48px] text-base\"\n              >\n                <option value=\"Tutti\">Tutte le Categorie</option>\n                <option value=\"imperial-cities\">Citt√† Imperiali</option>\n                <option value=\"desert\">Deserto</option>\n                <option value=\"coast\">Costa</option>\n                <option value=\"mountains\">Montagne</option>\n                <option value=\"cultural\">Culturale</option>\n                <option value=\"custom\">Su Misura</option>\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Stile di Viaggio</label>\n              <select\n                value={selectedStyle}\n                onChange={(e) => setSelectedStyle(e.target.value)}\n                className=\"w-full px-4 py-4 bg-background border border-border rounded-xl text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 min-h-[48px] text-base\"\n              >\n                <option value=\"Tutti\">Tutti gli Stili</option>\n                <option value=\"Gruppo\">Gruppo</option>\n                <option value=\"Piccoli Gruppi\">Piccoli Gruppi</option>\n                <option value=\"Su Misura\">Su Misura</option>\n                <option value=\"Privato\">Privato</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"overflow-x-auto pb-4 -mx-4 px-4 sm:mx-0 sm:px-0 sm:overflow-visible\">\n          <div className=\"grid lg:grid-cols-3 gap-6 lg:gap-8 min-w-full lg:min-w-0\">\n            {filteredTrips.map((trip, idx) => (\n              <TravelCard\n                key={trip.id}\n                id={trip.id || trip.slug || ''}\n                image={trip.images?.[0] || `/placeholder.svg?height=400&width=600&query=${encodeURIComponent(trip.title + \" marocco viaggio\")}`}\n                title={trip.title}\n                description={trip.description}\n                price={trip.price}\n                originalPrice={trip.originalPrice}\n                duration={trip.duration}\n                rating={trip.rating}\n                reviews={trip.reviews}\n                highlights={trip.highlights || []}\n                badges={trip.category ? [{ label: trip.category, variant: 'default' }] : []}\n                ctas={[\n                  { \n                    label: 'Scopri di Pi√π', \n                    href: `/viaggi/${trip.slug || trip.id}`, \n                    variant: 'primary' \n                  },\n                  { \n                    label: 'Prenota', \n                    href: '/contatti', \n                    variant: 'secondary' \n                  }\n                ]}\n                className={`min-w-[280px] lg:min-w-0 ${\n                  activeTrip === idx ? \"lg:scale-105\" : \"\"\n                }`}\n                onMouseEnter={() => setActiveTrip(idx)}\n              />\n            ))}\n          </div>\n        </div>\n\n        <div className=\"text-center mt-12\">\n          <Link\n            href=\"/viaggi/gruppo\"\n            className=\"inline-flex items-center space-x-2 bg-card text-foreground px-8 py-4 rounded-2xl hover:bg-muted transition-all duration-300 font-semibold text-lg shadow-lg hover:shadow-xl min-h-[56px]\"\n          >\n            <span>Vedi Tutti i Viaggi</span>\n            <ArrowRight className=\"w-5 h-5\" />\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":7598},"next-env.d.ts":{"content":"/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/building-your-application/configuring/typescript for more information.\n","size_bytes":228},"app/viaggi/gruppo/page.tsx":{"content":"\"use client\"\n\nimport { Calendar, Users, MapPin, Star, X, Check } from \"lucide-react\"\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function GroupTripsPage() {\n  const [selectedTrip, setSelectedTrip] = useState<any | null>(null)\n  const [showDetails, setShowDetails] = useState(false)\n\n  const trips = [\n    {\n      id: 1,\n      title: \"Tour delle Citt√† Imperiali\",\n      duration: \"8 giorni / 7 notti\",\n      price: \"‚Ç¨890\",\n      originalPrice: \"‚Ç¨1090\",\n      image: \"/images/imperial-cities-tour.png\",\n      highlights: [\"Marrakech\", \"Fes\", \"Meknes\", \"Rabat\"],\n      badge: \"Bestseller\",\n      difficulty: 2,\n      rating: 4.9,\n      reviews: 127,\n      nextDeparture: \"15 Marzo 2024\",\n      spotsLeft: 3,\n      description:\n        \"Un viaggio completo attraverso le quattro citt√† imperiali del Marocco, scoprendo palazzi, medine e tradizioni millenarie.\",\n      detailedDescription:\n        \"Immergiti nella storia millenaria del Marocco attraverso un tour completo delle quattro citt√† imperiali. Inizierai a Marrakech, la 'Perla del Sud', dove visiterai la famosa piazza Jemaa el-Fnaa, i giardini Majorelle e il palazzo Bahia. Proseguirai verso Fes, la capitale spirituale, con la sua medina medievale patrimonio UNESCO. A Meknes scoprirai l'imponente Bab Mansour e le scuderie reali, mentre a Rabat, capitale moderna, visiterai la Torre Hassan e il mausoleo di Mohammed V.\",\n      itinerary: [\n        {\n          day: 1,\n          title: \"Arrivo a Marrakech\",\n          description: \"Trasferimento dall'aeroporto, check-in hotel, prima esplorazione della medina\",\n        },\n        {\n          day: 2,\n          title: \"Marrakech - Citt√† Rossa\",\n          description: \"Visita completa: Palazzo Bahia, Giardini Majorelle, Piazza Jemaa el-Fnaa\",\n        },\n        {\n          day: 3,\n          title: \"Marrakech - Fes\",\n          description: \"Partenza per Fes attraverso il Medio Atlante, sosta a Ifrane\",\n        },\n        {\n          day: 4,\n          title: \"Fes - Capitale Spirituale\",\n          description: \"Tour completo della medina: Universit√† Al Quaraouiyine, concerie, souks\",\n        },\n        {\n          day: 5,\n          title: \"Fes - Meknes\",\n          description: \"Visita di Meknes: Bab Mansour, Mausoleo Moulay Ismail, scuderie reali\",\n        },\n        {\n          day: 6,\n          title: \"Meknes - Rabat\",\n          description: \"Trasferimento a Rabat, visita Torre Hassan e Kasbah degli Oudayas\",\n        },\n        { day: 7, title: \"Rabat - Casablanca\", description: \"Visita di Casablanca: Moschea Hassan II, Corniche\" },\n        { day: 8, title: \"Partenza\", description: \"Trasferimento in aeroporto e volo di ritorno\" },\n      ],\n      included: [\n        \"7 notti in hotel 4* con colazione\",\n        \"Trasferimenti privati in veicolo climatizzato\",\n        \"Guida locale certificata parlante italiano\",\n        \"Ingressi a monumenti e siti storici\",\n        \"Assicurazione di viaggio base\",\n      ],\n      notIncluded: [\n        \"Voli internazionali\",\n        \"Pranzi e cene (tranne dove specificato)\",\n        \"Bevande durante i pasti\",\n        \"Mance e spese personali\",\n        \"Assicurazione annullamento\",\n      ],\n      groupSize: \"6-12 persone\",\n      meetingPoint: \"Aeroporto di Marrakech - Terminal 1\",\n      cancellationPolicy: \"Cancellazione gratuita fino a 30 giorni prima della partenza\",\n    },\n    {\n      id: 2,\n      title: \"Avventura nel Deserto del Sahara\",\n      duration: \"5 giorni / 4 notti\",\n      price: \"‚Ç¨650\",\n      originalPrice: \"‚Ç¨750\",\n      image: \"/images/sahara-adventure.png\",\n      highlights: [\"Merzouga\", \"Cammelli\", \"Notte sotto le stelle\", \"Berberi\"],\n      badge: \"Pi√π Amato\",\n      difficulty: 3,\n      rating: 4.8,\n      reviews: 89,\n      nextDeparture: \"22 Marzo 2024\",\n      spotsLeft: 5,\n      description: \"Un'esperienza magica nel cuore del Sahara con notti in campo tendato e trekking sui cammelli.\",\n      detailedDescription:\n        \"Parti per un'avventura indimenticabile nel cuore del deserto del Sahara. Da Merzouga, salirai a dorso di cammello per esplorare le dune dorate dell'Erg Chebbi, ammirando tramonti mozzafiato e trascorrendo notti sotto un cielo stellato senza pari. Incontrerai le popolazioni berbere locali, scoprendo le loro tradizioni e la loro ospitalit√† unica. Un'esperienza autentica e coinvolgente che ti lascer√† ricordi indelebili.\",\n      itinerary: [\n        {\n          day: 1,\n          title: \"Arrivo a Merzouga\",\n          description: \"Trasferimento in hotel, preparazione per l'escursione nel deserto\",\n        },\n        {\n          day: 2,\n          title: \"Merzouga - Erg Chebbi\",\n          description: \"Trekking a dorso di cammello, notte in campo tendato nel deserto\",\n        },\n        {\n          day: 3,\n          title: \"Deserto del Sahara\",\n          description: \"Esplorazione delle dune, incontro con nomadi berberi\",\n        },\n        {\n          day: 4,\n          title: \"Merzouga - Rissani\",\n          description: \"Visita al mercato di Rissani, rientro a Merzouga\",\n        },\n        { day: 5, title: \"Partenza\", description: \"Trasferimento in aeroporto e volo di ritorno\" },\n      ],\n      included: [\n        \"4 notti in hotel/campo tendato con colazione e cena\",\n        \"Trasferimenti privati in veicolo 4x4\",\n        \"Guida locale berbera parlante italiano\",\n        \"Trekking a dorso di cammello\",\n        \"Assicurazione di viaggio base\",\n      ],\n      notIncluded: [\n        \"Voli internazionali\",\n        \"Pranzi (tranne dove specificato)\",\n        \"Bevande durante i pasti\",\n        \"Mance e spese personali\",\n        \"Assicurazione annullamento\",\n      ],\n      groupSize: \"4-8 persone\",\n      meetingPoint: \"Aeroporto di Errachidia\",\n      cancellationPolicy: \"Cancellazione gratuita fino a 20 giorni prima della partenza\",\n    },\n    {\n      id: 3,\n      title: \"Tesori del Sud\",\n      duration: \"7 giorni / 6 notti\",\n      price: \"‚Ç¨1290\",\n      originalPrice: \"‚Ç¨1490\",\n      image: \"/images/south-treasures.png\",\n      highlights: [\"Ouarzazate\", \"A√Øt Benhaddou\", \"Dad√®s\", \"Todra\"],\n      badge: \"Novit√†\",\n      difficulty: 2,\n      rating: 4.7,\n      reviews: 45,\n      nextDeparture: \"5 Aprile 2024\",\n      spotsLeft: 8,\n      description: \"Esplora le meraviglie del sud del Marocco, dalle kasbah alle gole spettacolari dell'Atlante.\",\n      detailedDescription:\n        \"Scopri i tesori nascosti del sud del Marocco in un viaggio che ti porter√† attraverso paesaggi mozzafiato e citt√† fortificate. Visiterai Ouarzazate, la 'Hollywood del Marocco', e l'iconica kasbah di A√Øt Benhaddou, patrimonio UNESCO. Esplorerai le gole del Dad√®s e del Todra, con le loro pareti rocciose imponenti, e ti immergerai nella cultura berbera locale. Un'esperienza unica che ti far√† innamorare del Marocco pi√π autentico.\",\n      itinerary: [\n        {\n          day: 1,\n          title: \"Arrivo a Ouarzazate\",\n          description: \"Trasferimento in hotel, visita panoramica della citt√†\",\n        },\n        {\n          day: 2,\n          title: \"Ouarzazate - A√Øt Benhaddou\",\n          description: \"Visita della kasbah di A√Øt Benhaddou, patrimonio UNESCO\",\n        },\n        {\n          day: 3,\n          title: \"A√Øt Benhaddou - Gole del Dad√®s\",\n          description: \"Percorso attraverso la Valle delle Rose, visita alle gole del Dad√®s\",\n        },\n        {\n          day: 4,\n          title: \"Gole del Dad√®s - Gole del Todra\",\n          description: \"Escursione alle gole del Todra, trekking nella valle\",\n        },\n        {\n          day: 5,\n          title: \"Gole del Todra - Erfoud\",\n          description: \"Visita di Erfoud, citt√† delle oasi\",\n        },\n        {\n          day: 6,\n          title: \"Erfoud - Ouarzazate\",\n          description: \"Rientro a Ouarzazate attraverso la Valle del Draa\",\n        },\n        { day: 7, title: \"Partenza\", description: \"Trasferimento in aeroporto e volo di ritorno\" },\n      ],\n      included: [\n        \"6 notti in hotel/riad con colazione e cena\",\n        \"Trasferimenti privati in veicolo climatizzato\",\n        \"Guida locale parlante italiano\",\n        \"Ingressi a monumenti e siti storici\",\n        \"Assicurazione di viaggio base\",\n      ],\n      notIncluded: [\n        \"Voli internazionali\",\n        \"Pranzi (tranne dove specificato)\",\n        \"Bevande durante i pasti\",\n        \"Mance e spese personali\",\n        \"Assicurazione annullamento\",\n      ],\n      groupSize: \"6-10 persone\",\n      meetingPoint: \"Aeroporto di Ouarzazate\",\n      cancellationPolicy: \"Cancellazione gratuita fino a 25 giorni prima della partenza\",\n    },\n  ]\n\n  const openDetails = (trip: any) => {\n    setSelectedTrip(trip)\n    setShowDetails(true)\n  }\n\n  const closeDetails = () => {\n    setShowDetails(false)\n    setSelectedTrip(null)\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      {/* Hero Section */}\n      <div className=\"relative py-32 bg-gradient-to-r from-orange-500 to-red-500\">\n        <div className=\"absolute inset-0 bg-black/20\" />\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-primary-foreground\">\n          <h1 className=\"text-5xl md:text-6xl font-bold mb-6\">Viaggi di Gruppo</h1>\n          <p className=\"text-xl md:text-2xl max-w-3xl mx-auto mb-8\">\n            Unisciti ai nostri gruppi per vivere il Marocco in compagnia di altri viaggiatori\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Partenze garantite</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Gruppi piccoli (max 12 persone)</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Guide esperte</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"py-8 bg-muted border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-wrap gap-4 items-center justify-between\">\n            <div className=\"grid md:grid-cols-2 gap-4 flex-1\">\n              <select className=\"px-4 py-2 border border-border rounded-lg bg-card text-card-foreground\">\n                <option>Tutte le durate</option>\n                <option>3-5 giorni</option>\n                <option>6-8 giorni</option>\n                <option>9+ giorni</option>\n              </select>\n              <select className=\"px-4 py-2 border border-border rounded-lg bg-card text-card-foreground\">\n                <option>Tutti i prezzi</option>\n                <option>‚Ç¨500-‚Ç¨800</option>\n                <option>‚Ç¨800-‚Ç¨1200</option>\n                <option>‚Ç¨1200+</option>\n              </select>\n              <select className=\"px-4 py-2 border border-border rounded-lg bg-card text-card-foreground md:col-span-2\">\n                <option>Tutte le difficolt√†</option>\n                <option>Avventuroso</option>\n                <option>Rilassante</option>\n              </select>\n            </div>\n            <div className=\"text-sm text-muted-foreground\">{trips.length} viaggi disponibili</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Trips Grid */}\n      <div className=\"py-20 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {trips.map((trip) => (\n              <div\n                key={trip.id}\n                className=\"group bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105\"\n              >\n                <div className=\"relative h-64 overflow-hidden\">\n                  <img\n                    src={trip.image || \"/placeholder.svg\"}\n                    alt={trip.title}\n                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                  />\n                  \n                  {/* Wishlist Button - top left */}\n                  <div className=\"absolute top-16 left-4 z-10\">\n                    <WishlistButton\n                      itemId={`group-trip-${trip.id}`}\n                      itemType=\"travel\"\n                      itemTitle={trip.title}\n                      itemImage={trip.image}\n                      itemPrice={parseInt(trip.price.replace('‚Ç¨', ''))}\n                      itemDescription={trip.description}\n                    />\n                  </div>\n                  \n                  <div className=\"absolute top-4 left-4\">\n                    <span className=\"bg-orange-500 text-primary-foreground px-3 py-1 rounded-full text-sm font-semibold\">\n                      {trip.badge}\n                    </span>\n                  </div>\n                  <div className=\"absolute top-4 right-4 bg-white/90 backdrop-blur-sm text-gray-900 px-4 py-2 rounded-full\">\n                    <div className=\"flex items-center space-x-1\">\n                      <span className=\"font-bold text-lg\">{trip.price}</span>\n                      <span className=\"text-sm line-through text-gray-500\">{trip.originalPrice}</span>\n                    </div>\n                  </div>\n                  <div className=\"absolute bottom-4 left-4 flex items-center space-x-1\">\n                    {[...Array(5)].map((_, i) => (\n                      <div\n                        key={i}\n                        className={`w-2 h-2 rounded-full ${i < trip.difficulty ? \"bg-orange-400\" : \"bg-white/50\"}`}\n                      />\n                    ))}\n                    <span className=\"text-primary-foreground text-xs ml-2\">Difficolt√†</span>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"text-xl font-bold text-foreground\">{trip.title}</h3>\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-sm font-semibold text-foreground\">{trip.rating}</span>\n                      <span className=\"text-sm text-gray-500 dark:text-gray-400\">({trip.reviews})</span>\n                    </div>\n                  </div>\n\n                  <p className=\"text-muted-foreground text-sm mb-4 line-clamp-2\">{trip.description}</p>\n\n                  <div className=\"flex flex-wrap gap-2 mb-4\">\n                    {trip.highlights.map((highlight, hidx) => (\n                      <span\n  key={hidx}\n  className=\"\n    inline-block\n    px-3 py-1\n    rounded-full\n    text-xs font-semibold\n    bg-gradient-to-r from-orange-500 to-red-500 text-white\n    dark:bg-orange-900/40 dark:text-orange-200\n    shadow-sm\n    transition-colors\n  \"\n>\n  {highlight}\n</span>\n\n\n                    ))}\n                  </div>\n\n                  <div className=\"space-y-3 mb-6\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <div className=\"flex items-center space-x-2 text-gray-600 dark:text-gray-400\">\n                        <Calendar className=\"w-4 h-4\" />\n                        <span>{trip.duration}</span>\n                      </div>\n                      <div className=\"flex items-center space-x-2 text-gray-600 dark:text-gray-400\">\n                        <Users className=\"w-4 h-4\" />\n                        <span>{trip.spotsLeft} posti rimasti</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400\">\n                      <MapPin className=\"w-4 h-4\" />\n                      <span>Prossima partenza: {trip.nextDeparture}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex space-x-3\">\n                    <Link\n                      href=\"/contatti\"\n                      className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-primary-foreground py-3 px-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      Richiedi Info\n                    </Link>\n                    <button\n                      onClick={() => openDetails(trip)}\n                      className=\"px-4 py-3 border-2 border-orange-500 text-orange-500 rounded-xl hover:bg-orange-500 hover:text-primary-foreground transition-all duration-300\"\n                    >\n                      Dettagli\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-20 bg-gradient-to-r from-orange-500 to-red-500\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-primary-foreground\">\n          <h2 className=\"text-4xl font-bold mb-6\">Non Trovi il Viaggio Perfetto?</h2>\n          <p className=\"text-xl mb-8 max-w-2xl mx-auto\">\n            Creiamo viaggi su misura per le tue esigenze specifiche. Contattaci per un preventivo personalizzato.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/viaggi/su-misura\"\n              className=\"bg-white text-orange-600 px-8 py-4 rounded-xl hover:bg-gray-100 transition-all duration-300 font-semibold text-lg\"\n            >\n              Viaggio su Misura\n            </Link>\n            <Link\n              href=\"/contatti\"\n              className=\"border-2 border-white text-primary-foreground px-8 py-4 rounded-xl hover:bg-white hover:text-orange-600 transition-all duration-300 font-semibold text-lg\"\n            >\n              Contattaci\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      {/* Trip Details Modal */}\n      {showDetails && selectedTrip && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-card rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"relative\">\n              <img\n                src={selectedTrip.image || \"/placeholder.svg\"}\n                alt={selectedTrip.title}\n                className=\"w-full h-64 object-cover rounded-t-3xl\"\n              />\n              <button\n                onClick={closeDetails}\n                className=\"absolute top-4 right-4 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-900\" />\n              </button>\n              <div className=\"absolute bottom-4 left-4\">\n                <span className=\"bg-orange-500 text-primary-foreground px-4 py-2 rounded-full font-semibold\">\n                  {selectedTrip.badge}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"p-6 lg:p-8\">\n              <div className=\"flex items-start justify-between mb-6\">\n                <div>\n                  <h2 className=\"text-3xl font-bold text-foreground mb-2\">{selectedTrip.title}</h2>\n                  <div className=\"flex items-center space-x-4 text-gray-600 dark:text-gray-400\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>{selectedTrip.duration}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-1\">\n                      <Users className=\"w-4 h-4\" />\n                      <span>{selectedTrip.groupSize}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span>\n                        {selectedTrip.rating} ({selectedTrip.reviews} recensioni)\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-3xl font-bold text-orange-600\">{selectedTrip.price}</div>\n                  <div className=\"text-lg text-gray-500 line-through\">{selectedTrip.originalPrice}</div>\n                  <div className=\"text-sm text-gray-600 dark:text-gray-400\">per persona</div>\n                </div>\n              </div>\n\n              <div className=\"grid lg:grid-cols-3 gap-8\">\n                <div className=\"lg:col-span-2 space-y-8\">\n                  <div>\n                    <h3 className=\"text-xl font-bold text-foreground mb-4\">Descrizione</h3>\n                    <p className=\"text-muted-foreground leading-relaxed\">\n                      {selectedTrip.detailedDescription}\n                    </p>\n                  </div>\n\n                  <div>\n                    <h3 className=\"text-xl font-bold text-foreground mb-4\">Itinerario Dettagliato</h3>\n                    <div className=\"space-y-4\">\n                      {selectedTrip.itinerary?.map((day, index) => (\n                        <div key={index} className=\"flex space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl\">\n                          <div className=\"flex-shrink-0 w-12 h-12 bg-orange-500 text-primary-foreground rounded-full flex items-center justify-center font-bold\">\n                            {day.day}\n                          </div>\n                          <div>\n                            <h4 className=\"font-semibold text-foreground\">{day.title}</h4>\n                            <p className=\"text-muted-foreground text-sm\">{day.description}</p>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"space-y-6\">\n                  <div className=\"bg-green-50 dark:bg-green-900/20 p-6 rounded-xl\">\n                    <h3 className=\"text-lg font-bold text-green-800 dark:text-green-300 mb-4\">Incluso nel Prezzo</h3>\n                    <ul className=\"space-y-2\">\n                      {selectedTrip.included?.map((item, index) => (\n                        <li\n                          key={index}\n                          className=\"flex items-start space-x-2 text-sm text-green-700 dark:text-green-400\"\n                        >\n                          <Check className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n                          <span>{item}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n\n                  <div className=\"bg-red-50 dark:bg-red-900/20 p-6 rounded-xl\">\n                    <h3 className=\"text-lg font-bold text-red-800 dark:text-red-300 mb-4\">Non Incluso</h3>\n                    <ul className=\"space-y-2\">\n                      {selectedTrip.notIncluded?.map((item, index) => (\n                        <li key={index} className=\"flex items-start space-x-2 text-sm text-red-700 dark:text-red-400\">\n                          <X className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n                          <span>{item}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n\n                  <div className=\"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl\">\n                    <h3 className=\"text-lg font-bold text-blue-800 dark:text-blue-300 mb-4\">Informazioni Pratiche</h3>\n                    <div className=\"space-y-3 text-sm\">\n                      <div>\n                        <span className=\"font-medium text-blue-700 dark:text-blue-400\">Punto di Ritrovo:</span>\n                        <p className=\"text-blue-600 dark:text-blue-300\">{selectedTrip.meetingPoint}</p>\n                      </div>\n                      <div>\n                        <span className=\"font-medium text-blue-700 dark:text-blue-400\">Prossima Partenza:</span>\n                        <p className=\"text-blue-600 dark:text-blue-300\">{selectedTrip.nextDeparture}</p>\n                      </div>\n                      <div>\n                        <span className=\"font-medium text-blue-700 dark:text-blue-400\">Posti Disponibili:</span>\n                        <p className=\"text-blue-600 dark:text-blue-300\">{selectedTrip.spotsLeft} posti rimasti</p>\n                      </div>\n                      <div>\n                        <span className=\"font-medium text-blue-700 dark:text-blue-400\">Cancellazione:</span>\n                        <p className=\"text-blue-600 dark:text-blue-300\">{selectedTrip.cancellationPolicy}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <Link\n                      href=\"/contatti\"\n                      className=\"block w-full bg-gradient-to-r from-orange-500 to-red-500 text-primary-foreground py-4 px-6 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-lg text-center\"\n                    >\n                      Richiedi Informazioni - {selectedTrip.price}\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","size_bytes":25579},"app/api/admin/auth/google/route.ts":{"content":"// Google OAuth Admin Login API\nimport { NextRequest, NextResponse } from 'next/server'\nimport { AdminAuthService } from '@/lib/auth-admin'\n\n// Allowed admin emails/domains\nconst ADMIN_EMAILS = [\n  'admin@moroccodreams.com',\n  'info@moroccodreams.com'\n]\n\nconst ADMIN_DOMAINS = ['moroccodreams.com']\n\nfunction isAdminEmail(email: string): boolean {\n  return ADMIN_EMAILS.includes(email.toLowerCase()) || \n         ADMIN_DOMAINS.some(domain => email.toLowerCase().endsWith(`@${domain}`))\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { idToken } = await request.json()\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'ID token required' }, { status: 400 })\n    }\n    \n    // Verify token and get user info\n    const verification = await AdminAuthService.verifyAdminToken(idToken)\n    \n    // Check if email is in admin list\n    if (!isAdminEmail(verification.user.email)) {\n      return NextResponse.json({ \n        error: 'Accesso non autorizzato - email non in whitelist admin' \n      }, { status: 403 })\n    }\n    \n    // Set admin role if not already set\n    if (!verification.isAdmin) {\n      await AdminAuthService.setAdminRole(verification.uid, true)\n    }\n    \n    return NextResponse.json({\n      success: true,\n      user: verification.user,\n      isAdmin: true\n    })\n    \n  } catch (error) {\n    console.error('Google OAuth admin error:', error)\n    return NextResponse.json({ \n      error: 'Errore di autenticazione' \n    }, { status: 401 })\n  }\n}","size_bytes":1501},"components/layout/Footer.tsx":{"content":"\"use client\";\n\nimport { Phone, Mail, Clock, Instagram, User, Settings, LogOut } from \"lucide-react\"\nimport Link from \"next/link\"\nimport NewsletterForm from \"@/components/forms/NewsletterForm\"\nimport { useAuth } from \"@/context/AuthContext\"\n\nexport default function Footer() {\n  const { user, userProfile, isAdmin } = useAuth();\n\n  return (\n    <footer className=\"bg-card border-t border-border\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16\">\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-5 gap-10 lg:gap-8\">\n\n          {/* Company Info */}\n          <div className=\"lg:col-span-1\">\n            <h3 className=\"text-xl font-bold mb-4 text-orange-600\">Morocco Dreams</h3>\n            <p className=\"text-muted-foreground mb-6 text-sm leading-relaxed\">\n              La tua porta d'accesso al Marocco autentico. Viaggi personalizzati, esperienze uniche e servizi\n              professionali per scoprire la magia del Regno del Marocco.\n            </p>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center space-x-3 group\">\n                <Phone className=\"w-4 h-4 text-orange-500 group-hover:scale-110 transition-transform\" />\n                <span className=\"text-sm font-semibold text-orange-500 group-hover:underline transition-colors cursor-pointer\">+39 329 233 3370</span>\n              </div>\n              <div className=\"flex items-center space-x-3 group\">\n                <Mail className=\"w-4 h-4 text-orange-500 group-hover:scale-110 transition-transform\" />\n                <span className=\"text-sm font-semibold text-orange-500 group-hover:underline transition-colors cursor-pointer\">info@moroccodreams.it</span>\n              </div>\n              <div className=\"flex items-center space-x-3 group\">\n                <Clock className=\"w-4 h-4 text-orange-500 group-hover:rotate-6 transition-transform\" />\n                <span className=\"text-sm text-muted-foreground group-hover:text-orange-600 transition-colors\">Lun-Dom: 9:00-20:00</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Quick Links */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4 text-foreground\">Link Rapidi</h3>\n            <ul className=\"space-y-2\">\n              {[\n                { href: \"/about\", label: \"Chi Siamo\" },\n                { href: \"/viaggi/gruppo\", label: \"Viaggi di Gruppo\" },\n                { href: \"/viaggi/su-misura\", label: \"Viaggi su Misura\" },\n                { href: \"/esperienze\", label: \"Esperienze\" },\n                { href: \"/servizi\", label: \"Servizi\" },\n                { href: \"/contatti\", label: \"Contatti\" },\n                { href: \"/blog\", label: \"Blog\" },\n              ].map(link => (\n                <li key={link.href}>\n                  <Link\n                    href={link.href}\n                    className=\"group text-muted-foreground hover:text-orange-500 text-sm transition-colors flex items-center\"\n                  >\n                    <span className=\"group-hover:underline\">{link.label}</span>\n                    <span className=\"ml-1 group-hover:translate-x-1 transition-transform\">&#8594;</span>\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Destinations */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4 text-foreground\">Destinazioni</h3>\n            <ul className=\"space-y-2\">\n              {[\n                { href: \"/viaggi/citta-imperiali\", label: \"Citt√† Imperiali\" },\n                { href: \"/viaggi/deserto\", label: \"Deserto del Sahara\" },\n                { href: \"/viaggi/costa-atlantica\", label: \"Costa Atlantica\" },\n                { href: \"/viaggi/montagne-atlas\", label: \"Montagne Atlas\" },\n                { href: \"/esperienze/hammam\", label: \"Hammam & Spa\" },\n                { href: \"/esperienze/cucina\", label: \"Cucina Marocchina\" },\n              ].map(link => (\n                <li key={link.href}>\n                  <Link\n                    href={link.href}\n                    className=\"group text-muted-foreground hover:text-orange-500 text-sm transition-colors flex items-center\"\n                  >\n                    <span className=\"group-hover:underline\">{link.label}</span>\n                    <span className=\"ml-1 group-hover:translate-x-1 transition-transform\">&#8594;</span>\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Account Links */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4 text-foreground\">Account</h3>\n            <ul className=\"space-y-2\">\n              {user ? (\n                <>\n                  <li>\n                    <Link\n                      href=\"/dashboard\"\n                      className=\"group text-muted-foreground hover:text-orange-500 text-sm transition-colors flex items-center\"\n                    >\n                      <User className=\"w-4 h-4 mr-2\" />\n                      <span className=\"group-hover:underline\">La Mia Area</span>\n                      <span className=\"ml-1 group-hover:translate-x-1 transition-transform\">&#8594;</span>\n                    </Link>\n                  </li>\n                  {isAdmin && (\n                    <li>\n                      <Link\n                        href=\"/admin\"\n                        className=\"group text-muted-foreground hover:text-orange-500 text-sm transition-colors flex items-center\"\n                      >\n                        <Settings className=\"w-4 h-4 mr-2\" />\n                        <span className=\"group-hover:underline\">Pannello Admin</span>\n                        <span className=\"ml-1 group-hover:translate-x-1 transition-transform\">&#8594;</span>\n                      </Link>\n                    </li>\n                  )}\n                  <li>\n                    <span className=\"text-sm text-muted-foreground flex items-center\">\n                      <LogOut className=\"w-4 h-4 mr-2\" />\n                      Connesso come {userProfile?.displayName || user.email}\n                    </span>\n                  </li>\n                </>\n              ) : (\n                <>\n                  <li>\n                    <Link\n                      href=\"/auth/login\"\n                      className=\"group text-muted-foreground hover:text-orange-500 text-sm transition-colors flex items-center\"\n                    >\n                      <User className=\"w-4 h-4 mr-2\" />\n                      <span className=\"group-hover:underline\">Accedi / Registrati</span>\n                      <span className=\"ml-1 group-hover:translate-x-1 transition-transform\">&#8594;</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <span className=\"text-sm text-muted-foreground\">\n                      Crea un account per gestire le tue prenotazioni\n                    </span>\n                  </li>\n                </>\n              )}\n            </ul>\n          </div>\n\n          {/* Newsletter + Social/Legal */}\n          <div className=\"lg:col-span-1 flex flex-col justify-between space-y-8 lg:space-y-0\">\n            {/* Newsletter */}\n            <div className=\"mb-8\">\n              <NewsletterForm />\n            </div>\n            {/* Social & Legal */}\n            <div>\n              <h4 className=\"text-sm font-semibold mb-3 text-foreground\">Seguici su Instagram</h4>\n              <div className=\"flex space-x-3\">\n                <a\n                  href=\"https://www.instagram.com/omarito_chill/\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  aria-label=\"Instagram\"\n                  className=\"group w-10 h-10 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-500 rounded-full flex items-center justify-center hover:scale-110 transition-transform shadow-lg\"\n                  title=\"Seguici su Instagram\"\n                >\n                  <Instagram className=\"w-5 h-5 text-white\" />\n                </a>\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-2\">@omarito_chill</p>\n            </div>\n            {/* Legal links */}\n            <div className=\"mt-8\">\n              <h4 className=\"text-sm font-semibold mb-3 text-foreground\">Informazioni Legali</h4>\n              <div className=\"flex flex-wrap gap-4\">\n                {[\n                  { href: \"/privacy\", label: \"Privacy Policy\" },\n                  { href: \"/cookies\", label: \"Cookie Policy\" },\n                  { href: \"/terms\", label: \"Termini di Servizio\" },\n                  { href: \"/contatti\", label: \"Contatti\" },\n                ].map(link => (\n                  <Link key={link.href} href={link.href} className=\"text-muted-foreground hover:text-orange-500 text-xs transition-colors\">\n                    {link.label}\n                  </Link>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Footer bottom bar */}\n        <div className=\"border-t border-border mt-12 pt-8\">\n          <div className=\"flex flex-col md:flex-row justify-between items-center\">\n            <p className=\"text-muted-foreground text-sm\">¬© 2024 Morocco Dreams. Tutti i diritti riservati.</p>\n            <p className=\"text-muted-foreground text-sm mt-2 md:mt-0\">Realizzato con <span className=\"text-orange-500\">‚ù§Ô∏è</span> per gli amanti del Marocco</p>\n          </div>\n        </div>\n      </div>\n    </footer>\n  )\n}\n","size_bytes":9497},"app/contatti/page.tsx":{"content":"import { Phone, Mail, MessageCircle, Clock, Globe } from \"lucide-react\"\nimport ContactForm from \"@/components/forms/ContactForm\"\n\nexport default function ContactsPage() {\n  return (\n    <div className=\"min-h-screen\">\n      {/* Hero Section */}\n      <div className=\"relative py-32 bg-gradient-to-r from-orange-500 to-red-500\">\n        <div className=\"absolute inset-0 bg-black/20\" />\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-5xl md:text-6xl font-bold mb-6\">Contatti</h1>\n          <p className=\"text-xl md:text-2xl max-w-3xl mx-auto\">\n            Siamo qui per aiutarti a pianificare il tuo viaggio perfetto in Marocco\n          </p>\n        </div>\n      </div>\n\n      {/* Contact Information */}\n      <div className=\"py-20 bg-card\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-2 gap-16\">\n            {/* Contact Info */}\n            <div>\n              <h2 className=\"text-4xl font-bold text-card-foreground mb-8\">Come Contattarci</h2>\n              <p className=\"text-lg text-muted-foreground mb-12\">\n                Il nostro team √® sempre disponibile per rispondere alle tue domande e aiutarti a creare l'esperienza di\n                viaggio perfetta.\n              </p>\n\n              <div className=\"space-y-8\">\n                {[\n                  {\n                    icon: Phone,\n                    title: \"+39 329 233 3370\",\n                    subtitle: \"Chiamaci dal Luned√¨ al Venerd√¨\",\n                    description: \"9:00 - 18:00 (ora italiana)\",\n                    action: \"tel:+393292333370\",\n                  },\n                  {\n                    icon: Mail,\n                    title: \"info@moroccodreams.it\",\n                    subtitle: \"Rispondiamo entro 24 ore\",\n                    description: \"Per preventivi e informazioni generali\",\n                    action: \"mailto:info@moroccodreams.it\",\n                  },\n                  {\n                    icon: MessageCircle,\n                    title: \"WhatsApp +39 329 233 3370\",\n                    subtitle: \"Assistenza 24/7\",\n                    description: \"Risposta immediata per urgenze\",\n                    action: \"https://wa.me/393292333370\",\n                  },\n                ].map((contact, idx) => (\n                  <a\n                    key={idx}\n                    href={contact.action}\n                    target={contact.action.startsWith(\"http\") ? \"_blank\" : undefined}\n                    rel={contact.action.startsWith(\"http\") ? \"noopener noreferrer\" : undefined}\n                    className=\"flex items-start space-x-6 p-6 bg-card rounded-2xl hover:shadow-lg transition-all duration-300 hover:scale-105 group\"\n                  >\n                    <div className=\"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 dark:bg-orange-900/40 rounded-full flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300\">\n                      <contact.icon className=\"w-8 h-8 text-white dark:text-orange-400 transition-colors\" />\n                    </div>\n                    <div>\n                      <h3 className=\"text-xl font-bold text-card-foreground mb-2\">{contact.title}</h3>\n                      <p className=\"text-orange-600 dark:text-orange-400 font-semibold mb-1\">{contact.subtitle}</p>\n                      <p className=\"text-muted-foreground text-sm\">{contact.description}</p>\n                    </div>\n                  </a>\n                ))}\n              </div>\n\n              {/* Office Hours */}\n              <div className=\"mt-12 p-6 bg-muted rounded-2xl\">\n                <div className=\"flex items-center space-x-3 mb-4\">  \n                <Clock className=\"w-6 h-6 text-orange-600\" />\n                <h3 className=\"text-xl font-bold text-foreground\">Orari di Apertura</h3>\n                </div>\n                <div className=\"space-y-2 text-muted-foreground\">\n                  <div className=\"flex justify-between\">\n                    <span>Luned√¨ - Venerd√¨:</span>\n                    <span className=\"font-semibold\">9:00 - 18:00</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Sabato:</span>\n                    <span className=\"font-semibold\">9:00 - 13:00</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Domenica:</span>\n                    <span className=\"font-semibold\">Chiuso</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\n                    <Globe className=\"w-4 h-4 text-orange-600\" />\n                    <span className=\"text-sm\">Assistenza WhatsApp 24/7 per emergenze</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Contact Form */}\n            <div className=\"bg-card rounded-3xl p-8 shadow-xl\">\n              <h3 className=\"text-2xl font-bold text-card-foreground mb-6\">Invia un Messaggio</h3>\n              <p className=\"text-muted-foreground mb-8\">\n                Compila il form e ti ricontatteremo entro 24 ore con tutte le informazioni di cui hai bisogno.\n              </p>\n\n              <ContactForm type=\"general\" />\n\n              <div className=\"mt-8 pt-8 border-t border-gray-200 dark:border-gray-600\">\n                <p className=\"text-sm text-muted-foreground text-center\">\n                  Preferisci parlare direttamente con noi?\n                </p>\n                <div className=\"flex justify-center mt-4\">\n                  <a\n                    href=\"https://wa.me/393292333370?text=Ciao! Vorrei informazioni sui vostri viaggi in Marocco.\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center space-x-2 bg-green-500 text-white px-6 py-3 rounded-xl hover:bg-green-600 transition-colors duration-300 font-semibold\"\n                  >\n                    <MessageCircle className=\"w-5 h-5\" />\n                    <span>Scrivici su WhatsApp</span>\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* FAQ Section */}\n      <div className=\"py-12 bg-muted\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl font-bold text-card-foreground mb-4\">Domande Frequenti</h2>\n            <p className=\"text-xl text-muted-foreground\">\n              Le risposte alle domande pi√π comuni sui nostri servizi\n            </p>\n          </div>\n\n          <div className=\"space-y-6\">\n            {[\n              {\n                question: \"Quanto tempo prima devo prenotare?\",\n                answer:\n                  \"Consigliamo di prenotare almeno 30 giorni prima della partenza per i viaggi di gruppo e 45-60 giorni per i viaggi su misura, specialmente durante l'alta stagione.\",\n              },\n              {\n                question: \"Cosa include il prezzo del viaggio?\",\n                answer:\n                  \"I nostri prezzi includono alloggi, trasporti privati in Marocco, guide locali, alcune attivit√† e assistenza 24/7. Non includono voli internazionali, pasti non specificati e spese personali.\",\n              },\n              {\n                question: \"Posso modificare o cancellare la prenotazione?\",\n                answer:\n                  \"S√¨, offriamo condizioni flessibili. Le modifiche sono possibili fino a 15 giorni prima della partenza. Per le cancellazioni, si applicano le nostre condizioni generali disponibili nei Termini di Servizio.\",\n              },\n              {\n                question: \"Che tipo di assistenza fornite durante il viaggio?\",\n                answer:\n                  \"Forniamo assistenza 24/7 tramite WhatsApp, guide locali esperte che parlano italiano, e un referente in Italia sempre disponibile per qualsiasi necessit√†.\",\n              },\n            ].map((faq, idx) => (\n              <div key={idx} className=\"bg-card rounded-2xl p-6 shadow-lg\">\n                <h3 className=\"text-lg font-bold text-card-foreground mb-3\">{faq.question}</h3>\n                <p className=\"text-muted-foreground leading-relaxed\">{faq.answer}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":8551},"components/cta/contact-banner.tsx":{"content":"import Link from \"next/link\"\nimport { Phone, MessageCircle } from \"lucide-react\"\n\ninterface ContactBannerProps {\n  title: string\n  subtitle: string\n}\n\nexport default function ContactBanner({ title, subtitle }: ContactBannerProps) {\n  return (\n    <div className=\"py-16 lg:py-20 bg-gradient-to-r from-orange-500 to-red-500\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-white mb-4\">{title}</h2>\n        <p className=\"text-lg lg:text-xl text-orange-100 mb-8 max-w-2xl mx-auto\">{subtitle}</p>\n\n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n          <Link\n            href=\"/contatti\"\n            className=\"inline-flex items-center justify-center space-x-2 bg-white text-orange-600 px-8 py-4 rounded-xl hover:bg-orange-50 transition-all duration-300 font-semibold text-lg\"\n          >\n            <Phone className=\"w-5 h-5\" />\n            <span>Chiamaci Ora</span>\n          </Link>\n          <a\n            href=\"https://wa.me/393292333370?text=Ciao! Vorrei informazioni sui viaggi in Marocco.\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"inline-flex items-center justify-center space-x-2 border-2 border-white text-white px-8 py-4 rounded-xl hover:bg-white hover:text-orange-600 transition-all duration-300 font-semibold text-lg\"\n          >\n            <MessageCircle className=\"w-5 h-5\" />\n            <span>WhatsApp</span>\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":1547},"components/ui/card.tsx":{"content":"import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1992},"lib/guide-system.ts":{"content":"// PDF Guide Generation System for Morocco Dreams\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport { firestoreService } from './firestore';\n\nexport interface GuideContent {\n  id?: string;\n  title: string;\n  subtitle?: string;\n  type: 'travel' | 'package' | 'experience' | 'city';\n  itemId: string; // ID of the travel/package/experience/city\n  content: {\n    overview: string;\n    highlights: string[];\n    itinerary?: Array<{\n      day: number;\n      title: string;\n      description: string;\n      activities: string[];\n      meals?: string[];\n      accommodation?: string;\n    }>;\n    includes: string[];\n    notIncludes?: string[];\n    recommendations: {\n      whatToBring: string[];\n      clothing: string[];\n      health: string[];\n      cultural: string[];\n    };\n    emergencyInfo: {\n      contacts: Array<{\n        name: string;\n        phone: string;\n        type: 'guide' | 'hotel' | 'emergency' | 'office';\n      }>;\n      hospitals: Array<{\n        name: string;\n        address: string;\n        phone: string;\n      }>;\n    };\n    localInfo: {\n      currency: string;\n      language: string[];\n      customs: string[];\n      tips: string[];\n    };\n  };\n  userId?: string; // For personalized guides\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport class GuideService {\n  // Generate PDF guide with enhanced graphics\n  static async generatePDF(guide: GuideContent): Promise<Blob> {\n    const pdf = new jsPDF();\n    let yPosition = 20;\n\n    // Add header with background color\n    pdf.setFillColor(234, 88, 12); // Orange background\n    pdf.rect(0, 0, 210, 30, 'F');\n\n    // Title page with better styling\n    pdf.setFontSize(28);\n    pdf.setTextColor(255, 255, 255); // White text\n    pdf.text(guide.title, 20, yPosition);\n    yPosition += 15;\n\n    if (guide.subtitle) {\n      pdf.setFontSize(16);\n      pdf.setTextColor(100, 100, 100);\n      pdf.text(guide.subtitle, 20, yPosition);\n      yPosition += 20;\n    }\n\n    // Overview\n    pdf.setFontSize(18);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text('Panoramica', 20, yPosition);\n    yPosition += 10;\n\n    pdf.setFontSize(12);\n    const overviewLines = pdf.splitTextToSize(guide.content.overview, 170);\n    pdf.text(overviewLines, 20, yPosition);\n    yPosition += overviewLines.length * 5 + 10;\n\n    // Check if new page needed\n    if (yPosition > 250) {\n      pdf.addPage();\n      yPosition = 20;\n    }\n\n    // Highlights\n    pdf.setFontSize(18);\n    pdf.setTextColor(234, 88, 12);\n    pdf.text('Punti Salienti', 20, yPosition);\n    yPosition += 10;\n\n    pdf.setFontSize(12);\n    pdf.setTextColor(0, 0, 0);\n    guide.content.highlights.forEach((highlight, index) => {\n      pdf.text(`‚Ä¢ ${highlight}`, 25, yPosition);\n      yPosition += 7;\n    });\n    yPosition += 10;\n\n    // Itinerary (if available)\n    if (guide.content.itinerary && guide.content.itinerary.length > 0) {\n      if (yPosition > 200) {\n        pdf.addPage();\n        yPosition = 20;\n      }\n\n      pdf.setFontSize(18);\n      pdf.setTextColor(234, 88, 12);\n      pdf.text('Itinerario Dettagliato', 20, yPosition);\n      yPosition += 15;\n\n      guide.content.itinerary.forEach((day) => {\n        if (yPosition > 250) {\n          pdf.addPage();\n          yPosition = 20;\n        }\n\n        // Day header\n        pdf.setFontSize(14);\n        pdf.setTextColor(220, 38, 38); // Red color\n        pdf.text(`Giorno ${day.day}: ${day.title}`, 20, yPosition);\n        yPosition += 8;\n\n        // Description\n        pdf.setFontSize(11);\n        pdf.setTextColor(0, 0, 0);\n        const descLines = pdf.splitTextToSize(day.description, 170);\n        pdf.text(descLines, 20, yPosition);\n        yPosition += descLines.length * 4 + 5;\n\n        // Activities\n        if (day.activities && day.activities.length > 0) {\n          pdf.setFontSize(11);\n          pdf.setTextColor(100, 100, 100);\n          pdf.text('Attivit√†:', 25, yPosition);\n          yPosition += 5;\n          \n          day.activities.forEach((activity) => {\n            pdf.text(`  ‚Ä¢ ${activity}`, 30, yPosition);\n            yPosition += 4;\n          });\n          yPosition += 5;\n        }\n\n        yPosition += 5;\n      });\n    }\n\n    // Recommendations\n    if (yPosition > 180) {\n      pdf.addPage();\n      yPosition = 20;\n    }\n\n    pdf.setFontSize(18);\n    pdf.setTextColor(234, 88, 12);\n    pdf.text('Raccomandazioni', 20, yPosition);\n    yPosition += 15;\n\n    // What to bring\n    pdf.setFontSize(14);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text('Cosa Portare:', 20, yPosition);\n    yPosition += 8;\n    \n    pdf.setFontSize(11);\n    guide.content.recommendations.whatToBring.forEach((item) => {\n      pdf.text(`‚Ä¢ ${item}`, 25, yPosition);\n      yPosition += 5;\n    });\n    yPosition += 10;\n\n    // Emergency info\n    if (yPosition > 200) {\n      pdf.addPage();\n      yPosition = 20;\n    }\n\n    pdf.setFontSize(18);\n    pdf.setTextColor(220, 38, 38);\n    pdf.text('Informazioni di Emergenza', 20, yPosition);\n    yPosition += 15;\n\n    pdf.setFontSize(12);\n    pdf.setTextColor(0, 0, 0);\n    guide.content.emergencyInfo.contacts.forEach((contact) => {\n      pdf.text(`${contact.name} (${contact.type}): ${contact.phone}`, 20, yPosition);\n      yPosition += 6;\n    });\n\n    return pdf.output('blob');\n  }\n\n  // Save guide to Firestore\n  static async saveGuide(guide: Omit<GuideContent, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    try {\n      return await firestoreService.create('guides', {\n        ...guide,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error saving guide:', error);\n      throw error;\n    }\n  }\n\n  // Get guide by item ID and type\n  static async getGuideByItem(itemId: string, type: string): Promise<GuideContent | null> {\n    try {\n      const guides = await firestoreService.getWhere<GuideContent>('guides', 'itemId', '==', itemId);\n      return guides.find(guide => guide.type === type) || null;\n    } catch (error) {\n      console.error('Error fetching guide:', error);\n      return null;\n    }\n  }\n\n  // Get user's downloaded guides\n  static async getUserGuides(userId: string): Promise<GuideContent[]> {\n    try {\n      return await firestoreService.getWhere<GuideContent>('user_guides', 'userId', '==', userId);\n    } catch (error) {\n      console.error('Error fetching user guides:', error);\n      return [];\n    }\n  }\n\n  // Save guide to user's collection\n  static async saveToUserGuides(userId: string, guideId: string): Promise<void> {\n    try {\n      await firestoreService.create('user_guides', {\n        userId,\n        guideId,\n        downloadedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error saving to user guides:', error);\n      throw error;\n    }\n  }\n\n  // Create sample guides\n  static async createSampleGuides(): Promise<void> {\n    const sampleGuides: Omit<GuideContent, 'id' | 'createdAt' | 'updatedAt'>[] = [\n      {\n        title: 'Guida Completa: Tour delle Citt√† Imperiali',\n        subtitle: 'Marrakech, Fes, Meknes, Rabat',\n        type: 'travel',\n        itemId: 'imperial-cities-tour',\n        content: {\n          overview: 'Un viaggio straordinario attraverso le quattro citt√† imperiali del Marocco, ognuna con la sua storia millenaria e caratteristiche uniche.',\n          highlights: [\n            'Medina di Marrakech (UNESCO)',\n            'Universit√† Al Quaraouiyine a Fes',\n            'Mausoleo Mohammed V a Rabat',\n            'Palazzo Dar Jamai a Meknes'\n          ],\n          includes: ['Trasporto privato', 'Guide locali', 'Ingressi inclusi'],\n          recommendations: {\n            whatToBring: ['Scarpe comode', 'Crema solare', 'Cappello'],\n            clothing: ['Abbigliamento modesto', 'Strati per serate fresche'],\n            health: ['Bere solo acqua in bottiglia', 'Protezione solare'],\n            cultural: ['Rispettare le moschee', 'Contrattare nei souq']\n          },\n          emergencyInfo: {\n            contacts: [\n              { name: 'Guida principale', phone: '+212 661 234 567', type: 'guide' },\n              { name: 'Ufficio Morocco Dreams', phone: '+212 524 123 456', type: 'office' }\n            ],\n            hospitals: [\n              { name: 'Clinique du Sud', address: 'Gueliz, Marrakech', phone: '+212 524 447 999' }\n            ]\n          },\n          localInfo: {\n            currency: 'Dirham marocchino (MAD)',\n            language: ['Arabo', 'Berbero', 'Francese'],\n            customs: ['Salutare con \"As-salƒÅmu alaykum\"', 'Togliere le scarpe nelle case'],\n            tips: ['Contrattare √® normale', 'Mance 10-15%', 'Venerd√¨ √® giorno di preghiera']\n          }\n        }\n      }\n    ];\n\n    for (const guide of sampleGuides) {\n      await this.saveGuide(guide);\n    }\n  }\n}","size_bytes":8701},"components/modals/ExperienceDetailsModal.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { X, Clock, Users, MapPin, Star, Check, Droplets, Heart, Phone, Mail } from 'lucide-react'\nimport Link from \"next/link\"\n\ninterface ExperienceDetailsModalProps {\n  experience: any\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport default function ExperienceDetailsModal({ experience, isOpen, onClose }: ExperienceDetailsModalProps) {\n  if (!isOpen || !experience) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"relative\">\n          <img\n            src={experience.image || \"/placeholder.svg?height=300&width=800\"}\n            alt={experience.title || experience.name}\n            className=\"w-full h-64 object-cover rounded-t-3xl\"\n          />\n          <button\n            onClick={onClose}\n            className=\"absolute top-4 right-4 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-900\" />\n          </button>\n          <div className=\"absolute bottom-4 right-4 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full\">\n            <span className=\"font-bold text-lg text-gray-900\">{experience.price}</span>\n          </div>\n        </div>\n\n        <div className=\"p-6 lg:p-8\">\n          <div className=\"flex items-start justify-between mb-6\">\n            <div>\n              <h2 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n                {experience.title || experience.name}\n              </h2>\n              <p className=\"text-gray-600 dark:text-gray-300 text-lg mb-4\">\n                {experience.subtitle || experience.description}\n              </p>\n              <div className=\"flex items-center space-x-4 text-gray-600 dark:text-gray-400\">\n                <div className=\"flex items-center space-x-1\">\n                  <Clock className=\"w-4 h-4\" />\n                  <span>{experience.duration}</span>\n                </div>\n                {experience.maxParticipants && (\n                  <div className=\"flex items-center space-x-1\">\n                    <Users className=\"w-4 h-4\" />\n                    <span>Max {experience.maxParticipants}</span>\n                  </div>\n                )}\n                {experience.rating && (\n                  <div className=\"flex items-center space-x-1\">\n                    <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                    <span>{experience.rating} ({experience.reviews} recensioni)</span>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-3xl font-bold text-pink-600\">{experience.price}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">per persona</div>\n            </div>\n          </div>\n\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2 space-y-8\">\n              {/* Detailed Description */}\n              <div>\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Descrizione Completa</h3>\n                <p className=\"text-gray-600 dark:text-gray-300 leading-relaxed\">\n                  {experience.detailedDescription || experience.description}\n                </p>\n              </div>\n\n              {/* What's Included */}\n              {experience.includes && (\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Cosa Include</h3>\n                  <div className=\"grid md:grid-cols-2 gap-3\">\n                    {experience.includes.map((item: string, index: number) => (\n                      <div key={index} className=\"flex items-center space-x-2\">\n                        <Check className=\"w-5 h-5 text-green-500 flex-shrink-0\" />\n                        <span className=\"text-gray-600 dark:text-gray-300\">{item}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Benefits */}\n              {experience.benefits && (\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Benefici</h3>\n                  <div className=\"flex flex-wrap gap-3\">\n                    {experience.benefits.map((benefit: string, index: number) => (\n                      <span\n                        key={index}\n                        className=\"bg-pink-100 dark:bg-pink-900/30 text-pink-800 dark:text-pink-300 px-4 py-2 rounded-full text-sm font-medium\"\n                      >\n                        {benefit}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Steps/Process */}\n              {experience.steps && (\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Il Processo</h3>\n                  <div className=\"space-y-4\">\n                    {experience.steps.map((step: any, index: number) => (\n                      <div key={index} className=\"flex space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl\">\n                        <div className=\"flex-shrink-0 w-12 h-12 bg-pink-500 text-white rounded-full flex items-center justify-center font-bold\">\n                          {step.step}\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-gray-900 dark:text-white\">{step.title}</h4>\n                          <p className=\"text-gray-600 dark:text-gray-300 text-sm\">{step.description}</p>\n                          <div className=\"flex items-center space-x-2 text-xs text-pink-600 dark:text-pink-400 mt-2\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>{step.duration}</span>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Dishes (for cooking classes) */}\n              {experience.dishes && (\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Piatti che Imparerai</h3>\n                  <div className=\"grid md:grid-cols-2 gap-3\">\n                    {experience.dishes.map((dish: string, index: number) => (\n                      <div key={index} className=\"flex items-center space-x-2\">\n                        <span className=\"text-2xl\">üë®‚Äçüç≥</span>\n                        <span className=\"text-gray-600 dark:text-gray-300\">{dish}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Sidebar */}\n            <div className=\"space-y-6\">\n              {/* Experience Info */}\n              <div className=\"bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-bold text-pink-800 dark:text-pink-300 mb-4\">Dettagli Esperienza</h3>\n                <div className=\"space-y-3 text-sm\">\n                  <div>\n                    <span className=\"font-medium text-pink-700 dark:text-pink-400\">Durata:</span>\n                    <p className=\"text-pink-600 dark:text-pink-300\">{experience.duration}</p>\n                  </div>\n                  {experience.level && (\n                    <div>\n                      <span className=\"font-medium text-pink-700 dark:text-pink-400\">Livello:</span>\n                      <p className=\"text-pink-600 dark:text-pink-300\">{experience.level}</p>\n                    </div>\n                  )}\n                  {experience.maxParticipants && (\n                    <div>\n                      <span className=\"font-medium text-pink-700 dark:text-pink-400\">Partecipanti:</span>\n                      <p className=\"text-pink-600 dark:text-pink-300\">Max {experience.maxParticipants} persone</p>\n                    </div>\n                  )}\n                  <div>\n                    <span className=\"font-medium text-pink-700 dark:text-pink-400\">Disponibilit√†:</span>\n                    <p className=\"text-pink-600 dark:text-pink-300\">Tutti i giorni su prenotazione</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Contact Info */}\n              <div className=\"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-bold text-orange-800 dark:text-orange-300 mb-4\">Prenota Ora</h3>\n                <div className=\"space-y-3\">\n                  <a\n                    href=\"tel:+393292333370\"\n                    className=\"flex items-center space-x-2 text-orange-700 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-300\"\n                  >\n                    <Phone className=\"w-4 h-4\" />\n                    <span>+39 329 233 3370</span>\n                  </a>\n                  <a\n                    href=\"mailto:info@moroccodreams.it\"\n                    className=\"flex items-center space-x-2 text-orange-700 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-300\"\n                  >\n                    <Mail className=\"w-4 h-4\" />\n                    <span>info@moroccodreams.it</span>\n                  </a>\n                  <a\n                    href=\"https://wa.me/393292333370\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center space-x-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors text-sm\"\n                  >\n                    <span>üí¨</span>\n                    <span>WhatsApp</span>\n                  </a>\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                <Link\n                  href=\"/contatti\"\n                  className=\"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white py-4 px-6 rounded-xl hover:from-pink-600 hover:to-purple-600 transition-all duration-300 font-semibold text-lg text-center block\"\n                >\n                  Prenota - {experience.price}\n                </Link>\n                <Link\n                  href=\"/contatti\"\n                  className=\"w-full border-2 border-pink-500 text-pink-500 py-3 px-6 rounded-xl hover:bg-pink-500 hover:text-white transition-all duration-300 font-semibold text-center block\"\n                >\n                  Maggiori Informazioni\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":10904},"components/admin/ServiceModal.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { X, Save, Check, Eye, Globe, FileText } from 'lucide-react'\nimport { Service } from '@/lib/firestore-schema'\nimport { useNotifications } from '../NotificationSystem'\n\ninterface ServiceModalProps {\n  isOpen: boolean\n  onClose: () => void\n  service?: Service | null\n  onSave: (service: Partial<Service>) => Promise<void>\n}\n\nexport default function ServiceModal({ isOpen, onClose, service, onSave }: ServiceModalProps) {\n  const { showSuccess, showError } = useNotifications()\n  const [formData, setFormData] = useState<Partial<Service>>({\n    name: '',\n    slug: '',\n    description: '',\n    category: 'transport',\n    type: 'optional',\n    price: 0,\n    priceType: 'per_person',\n    currency: 'EUR',\n    locations: [],\n    travelTypes: [],\n    status: 'draft',\n    published: false\n  })\n  const [saving, setSaving] = useState(false)\n  const [locationInput, setLocationInput] = useState('')\n  const [travelTypeInput, setTravelTypeInput] = useState('')\n\n  useEffect(() => {\n    if (service) {\n      setFormData({\n        name: service.name || '',\n        slug: service.slug || '',\n        description: service.description || '',\n        category: service.category || 'transport',\n        type: service.type || 'optional',\n        price: service.price || 0,\n        priceType: service.priceType || 'per_person',\n        currency: service.currency || 'EUR',\n        locations: service.locations || [],\n        travelTypes: service.travelTypes || [],\n        status: service.status || 'draft',\n        published: service.published || false\n      })\n    } else {\n      // Reset for new service\n      setFormData({\n        name: '',\n        slug: '',\n        description: '',\n        category: 'transport',\n        type: 'optional',\n        price: 0,\n        priceType: 'per_person',\n        currency: 'EUR',\n        locations: [],\n        travelTypes: [],\n        status: 'draft',\n        published: false\n      })\n    }\n  }, [service, isOpen])\n\n  // Auto-generate slug from name\n  useEffect(() => {\n    if (formData.name && (!service || !service.slug)) {\n      const slug = formData.name\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-+|-+$/g, '')\n      setFormData(prev => ({ ...prev, slug }))\n    }\n  }, [formData.name, service])\n\n  const handleSave = async (publishStatus: 'draft' | 'published') => {\n    if (!formData.name || !formData.slug) return\n\n    setSaving(true)\n    try {\n      const saveData = {\n        ...formData,\n        status: publishStatus,\n        published: publishStatus === 'published'\n      }\n      \n      await onSave(saveData)\n      \n      // Show success notification\n      const serviceName = saveData.name || 'Servizio'\n      if (publishStatus === 'published') {\n        showSuccess('Servizio Pubblicato', `\"${serviceName}\" √® ora pubblico e visibile agli utenti.`)\n      } else {\n        showSuccess('Bozza Salvata', `\"${serviceName}\" salvato come bozza.`)\n      }\n      \n      onClose()\n    } catch (error) {\n      console.error('Error saving service:', error)\n      showError('Errore Salvataggio', 'Si √® verificato un errore durante il salvataggio del servizio.')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await handleSave(formData.status as 'draft' | 'published' || 'draft')\n  }\n\n  const addLocation = () => {\n    if (locationInput.trim() && !formData.locations?.includes(locationInput.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        locations: [...(prev.locations || []), locationInput.trim()]\n      }))\n      setLocationInput('')\n    }\n  }\n\n  const removeLocation = (location: string) => {\n    setFormData(prev => ({\n      ...prev,\n      locations: prev.locations?.filter(l => l !== location) || []\n    }))\n  }\n\n  const addTravelType = () => {\n    if (travelTypeInput.trim() && !formData.travelTypes?.includes(travelTypeInput.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        travelTypes: [...(prev.travelTypes || []), travelTypeInput.trim()]\n      }))\n      setTravelTypeInput('')\n    }\n  }\n\n  const removeTravelType = (type: string) => {\n    setFormData(prev => ({\n      ...prev,\n      travelTypes: prev.travelTypes?.filter(t => t !== type) || []\n    }))\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50\">\n      <div className=\"bg-white dark:bg-gray-900 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\n          <h2 className=\"text-xl font-semibold text-foreground\">\n            {service ? 'Modifica Servizio' : 'Nuovo Servizio'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {/* Basic Info */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Nome Servizio *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"es. Guida Privata Marrakech\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Slug *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.slug}\n                onChange={(e) => setFormData(prev => ({ ...prev, slug: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"guida-privata-marrakech\"\n                required\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Descrizione\n            </label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n              rows={3}\n              className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              placeholder=\"Descrizione dettagliata del servizio...\"\n            />\n          </div>\n\n          {/* Category and Type */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Categoria *\n              </label>\n              <select\n                value={formData.category}\n                onChange={(e) => setFormData(prev => ({ ...prev, category: e.target.value as any }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"transport\">Trasporti</option>\n                <option value=\"guide\">Guide</option>\n                <option value=\"insurance\">Assicurazioni</option>\n                <option value=\"accommodation\">Alloggi</option>\n                <option value=\"meal\">Pasti</option>\n                <option value=\"activity\">Attivit√†</option>\n                <option value=\"equipment\">Attrezzature</option>\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Tipo Servizio *\n              </label>\n              <select\n                value={formData.type}\n                onChange={(e) => setFormData(prev => ({ ...prev, type: e.target.value as any }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"optional\">Opzionale</option>\n                <option value=\"addon\">Add-on</option>\n                <option value=\"upgrade\">Upgrade</option>\n                <option value=\"required\">Richiesto</option>\n              </select>\n            </div>\n          </div>\n\n          {/* Pricing */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Prezzo *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.price}\n                onChange={(e) => setFormData(prev => ({ ...prev, price: Number(e.target.value) }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                min=\"0\"\n                step=\"0.01\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Tipo Prezzo *\n              </label>\n              <select\n                value={formData.priceType}\n                onChange={(e) => setFormData(prev => ({ ...prev, priceType: e.target.value as any }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"per_person\">Per Persona</option>\n                <option value=\"per_group\">Per Gruppo</option>\n                <option value=\"per_day\">Per Giorno</option>\n                <option value=\"flat_rate\">Tariffa Fissa</option>\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Valuta *\n              </label>\n              <select\n                value={formData.currency}\n                onChange={(e) => setFormData(prev => ({ ...prev, currency: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"EUR\">EUR (‚Ç¨)</option>\n                <option value=\"USD\">USD ($)</option>\n                <option value=\"MAD\">MAD (ÿØÿ±ŸáŸÖ)</option>\n              </select>\n            </div>\n          </div>\n\n          {/* Locations */}\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Localit√† Disponibili\n            </label>\n            <div className=\"flex gap-2 mb-2\">\n              <input\n                type=\"text\"\n                value={locationInput}\n                onChange={(e) => setLocationInput(e.target.value)}\n                className=\"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"Aggiungi localit√†...\"\n                onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addLocation())}\n              />\n              <button\n                type=\"button\"\n                onClick={addLocation}\n                className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600\"\n              >\n                Aggiungi\n              </button>\n            </div>\n            <div className=\"flex flex-wrap gap-2\">\n              {formData.locations?.map((location) => (\n                <span\n                  key={location}\n                  className=\"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-200 rounded-full text-sm\"\n                >\n                  {location}\n                  <button\n                    type=\"button\"\n                    onClick={() => removeLocation(location)}\n                    className=\"ml-1 text-orange-600 hover:text-orange-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              ))}\n            </div>\n          </div>\n\n          {/* Travel Types */}\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Tipi di Viaggio Compatibili\n            </label>\n            <div className=\"flex gap-2 mb-2\">\n              <input\n                type=\"text\"\n                value={travelTypeInput}\n                onChange={(e) => setTravelTypeInput(e.target.value)}\n                className=\"flex-1 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"es. imperial-cities, desert...\"\n                onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addTravelType())}\n              />\n              <button\n                type=\"button\"\n                onClick={addTravelType}\n                className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600\"\n              >\n                Aggiungi\n              </button>\n            </div>\n            <div className=\"flex flex-wrap gap-2\">\n              {formData.travelTypes?.map((type) => (\n                <span\n                  key={type}\n                  className=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-full text-sm\"\n                >\n                  {type}\n                  <button\n                    type=\"button\"\n                    onClick={() => removeTravelType(type)}\n                    className=\"ml-1 text-blue-600 hover:text-blue-800\"\n                  >\n                    √ó\n                  </button>\n                </span>\n              ))}\n            </div>\n          </div>\n\n          {/* Publishing */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Status\n              </label>\n              <select\n                value={formData.status}\n                onChange={(e) => setFormData(prev => ({ ...prev, status: e.target.value as any }))}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              >\n                <option value=\"draft\">Bozza</option>\n                <option value=\"published\">Pubblicato</option>\n              </select>\n            </div>\n            <div className=\"flex items-center space-x-3 pt-7\">\n              <label className=\"flex items-center space-x-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.published}\n                  onChange={(e) => setFormData(prev => ({ ...prev, published: e.target.checked }))}\n                  className=\"w-4 h-4 text-orange-500 border-border rounded focus:ring-orange-500\"\n                />\n                <span className=\"text-sm text-foreground\">Pubblica subito</span>\n              </label>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex gap-3 pt-4 border-t border-border\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-700 dark:text-gray-300 border border-border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800\"\n            >\n              Annulla\n            </button>\n            \n            <button\n              type=\"button\"\n              onClick={() => handleSave('draft')}\n              disabled={saving || !formData.name || !formData.slug}\n              className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n            >\n              {saving ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                  Salvataggio...\n                </>\n              ) : (\n                <>\n                  <FileText className=\"w-4 h-4\" />\n                  Salva Bozza\n                </>\n              )}\n            </button>\n            \n            <button\n              type=\"button\"\n              onClick={() => handleSave('published')}\n              disabled={saving || !formData.name || !formData.slug}\n              className=\"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n            >\n              {saving ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                  Pubblicando...\n                </>\n              ) : (\n                <>\n                  <Globe className=\"w-4 h-4\" />\n                  Pubblica\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}","size_bytes":17495},"lib/database-populator.ts":{"content":"// Complete Database Population System - Organized Content Structure\n// Separates cities, experiences, travels, services properly\n\nimport { adminDb } from '@/lib/auth-admin'\nimport { COLLECTIONS } from '@/lib/firestore-schema'\n\nexport async function populateCompleteDatabase(force: boolean = false) {\n  if (!adminDb) {\n    throw new Error('Admin database not available')\n  }\n\n  const results = {\n    cities: 0,\n    experiences: 0,\n    travels: 0,\n    services: 0,\n    blog: 0,\n    errors: [] as string[]\n  }\n\n  try {\n    // === CITIES DATA ===\n    const citiesData = [\n      {\n        name: \"Marrakech\",\n        slug: \"marrakech\",\n        title: \"La Perla Rossa\",\n        description: \"Citt√† vibrante con la famosa piazza Jemaa el-Fnaa e souks colorati\",\n        region: \"Marrakech-Safi\",\n        coordinates: { lat: 31.6295, lng: -7.9811 },\n        population: \"928,850\",\n        image: \"/images/marrakech-medina.png\",\n        gallery: [\"/images/marrakech-medina.png\", \"/images/marrakech-souks.png\"],\n        highlights: [\"Jemaa el-Fnaa\", \"Souks\", \"Giardini Majorelle\", \"Palazzo Bahia\", \"Koutoubia\"],\n        overview: {\n          description: \"Marrakech √® una delle quattro citt√† imperiali del Marocco, famosa per la sua energia vibrante e la ricca storia culturale.\",\n          history: \"Fondata nel 1062, √® stata la capitale di vari imperi berberi.\",\n          culture: \"Centro culturale con tradizioni millenarie di artigianato e commercio.\",\n          economy: [\"Turismo\", \"Artigianato\", \"Agricoltura\", \"Servizi\"]\n        },\n        category: 'imperial-cities' as const,\n        duration: \"2-3 giorni\",\n        bestTime: \"Ottobre - Aprile\",\n        rating: 4.9,\n        reviews: 234,\n        published: true,\n        featured: true\n      },\n      {\n        name: \"F√®s\",\n        slug: \"fes\",\n        title: \"Capitale Spirituale\",\n        description: \"La medina pi√π grande del mondo e centro della cultura islamica\",\n        region: \"F√®s-Mekn√®s\",\n        coordinates: { lat: 34.0181, lng: -5.0078 },\n        population: \"1,112,072\",\n        image: \"/images/fes-architecture.png\",\n        highlights: [\"Medina UNESCO\", \"Universit√† Al Quaraouiyine\", \"Concerie Chouara\", \"Palazzo Reale\"],\n        overview: {\n          description: \"F√®s √® il centro spirituale e culturale del Marocco, con la medina meglio conservata del mondo arabo.\",\n          history: \"Fondata nel 789, ospita la pi√π antica universit√† del mondo continuamente operativa.\",\n          culture: \"Centro dell'apprendimento islamico e delle arti tradizionali marocchine.\"\n        },\n        category: 'imperial-cities' as const,\n        duration: \"2-3 giorni\",\n        bestTime: \"Marzo - Maggio, Settembre - Novembre\",\n        rating: 4.8,\n        reviews: 189,\n        published: true,\n        featured: true\n      },\n      {\n        name: \"Chefchaouen\",\n        slug: \"chefchaouen\",\n        title: \"La Perla Blu\",\n        description: \"La perla blu del Rif, citt√† dalle case azzurre\",\n        region: \"Tanger-T√©touan-Al Hoceima\",\n        coordinates: { lat: 35.1688, lng: -5.2636 },\n        population: \"42,786\",\n        image: \"/images/chefchaouen-blue.png\",\n        highlights: [\"Medina blu\", \"Monti del Rif\", \"Artigianato\", \"Cascate Akchour\"],\n        overview: {\n          description: \"Citt√† montana unica per le sue case dipinte di blu, immersa nei monti del Rif.\",\n          culture: \"Influenze andaluse e berbere in un'atmosfera rilassata e artistica.\"\n        },\n        category: 'mountains' as const,\n        duration: \"1-2 giorni\",\n        bestTime: \"Aprile - Ottobre\",\n        rating: 4.9,\n        reviews: 298,\n        published: true,\n        featured: true\n      },\n      {\n        name: \"Essaouira\",\n        slug: \"essaouira\",\n        title: \"La Citt√† del Vento\",\n        description: \"La citt√† del vento, perla della costa atlantica\",\n        region: \"Marrakech-Safi\",\n        coordinates: { lat: 31.5085, lng: -9.7595 },\n        population: \"77,966\",\n        image: \"/images/essaouira-coast.png\",\n        highlights: [\"Medina UNESCO\", \"Porto\", \"Spiagge\", \"Argan\"],\n        overview: {\n          description: \"Citt√† costiera fortificata con un'atmosfera boh√©mien e venti costanti ideali per gli sport acquatici.\"\n        },\n        category: 'coast' as const,\n        duration: \"2-3 giorni\",\n        bestTime: \"Aprile - Ottobre\",\n        rating: 4.7,\n        reviews: 201,\n        published: true,\n        featured: true\n      }\n    ]\n\n    // Populate cities\n    for (const city of citiesData) {\n      try {\n        const docData = {\n          ...city,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }\n        \n        // Check if exists by slug\n        const existing = await adminDb.collection(COLLECTIONS.cities)\n          .where('slug', '==', city.slug).get()\n        \n        if (existing.empty || force) {\n          if (!existing.empty && force) {\n            await adminDb.collection(COLLECTIONS.cities).doc(existing.docs[0].id).delete()\n          }\n          \n          await adminDb.collection(COLLECTIONS.cities).add(docData)\n          results.cities++\n        }\n      } catch (error) {\n        results.errors.push(`City ${city.name}: ${error}`)\n      }\n    }\n\n    // === EXPERIENCES DATA ===\n    const experiencesData = [\n      {\n        title: \"Cucina Tradizionale Marocchina\",\n        slug: \"cucina-tradizionale\",\n        description: \"Impara a preparare i piatti iconici della cucina marocchina con chef locali\",\n        longDescription: \"Un'esperienza culinaria autentica per scoprire i segreti della cucina marocchina. Imparerai a preparare tagine, couscous e altri piatti tradizionali utilizzando spezie locali e tecniche tramandate da generazioni.\",\n        images: [\"/images/cooking-class.png\", \"/images/tagine-cooking.png\"],\n        price: 65,\n        currency: \"EUR\",\n        duration: \"4 ore\",\n        maxParticipants: 8,\n        category: 'cooking' as const,\n        includes: [\"Ingredienti freschi\", \"Ricette scritte\", \"Pasto completo\", \"T√® alla menta\", \"Certificato partecipazione\"],\n        location: \"Marrakech\",\n        meetingPoint: \"Riad della Medina\",\n        rating: 4.9,\n        reviews: 234,\n        published: true,\n        featured: true\n      },\n      {\n        title: \"Hammam Tradizionale\",\n        slug: \"hammam-tradizionale\",\n        description: \"Rituale completo secondo le antiche tradizioni marocchine\",\n        longDescription: \"Sperimenta l'autentico rituale del hammam berbero con sapone nero, guanto kessa e rilassamento totale.\",\n        images: [\"/images/traditional-hammam.jpg\"],\n        price: 45,\n        currency: \"EUR\", \n        duration: \"2-3 ore\",\n        maxParticipants: 12,\n        category: 'hammam' as const,\n        includes: [\"Bagno turco\", \"Scrub sapone nero\", \"Massaggio guanto\", \"Maschera argilla\", \"T√® alla menta\"],\n        location: \"Marrakech\",\n        rating: 4.9,\n        reviews: 234,\n        published: true,\n        featured: true\n      },\n      {\n        title: \"Trekking Alto Atlante\",\n        slug: \"trekking-alto-atlante\",\n        description: \"Attraversa villaggi berberi e valli mozzafiato nel cuore dell'Alto Atlante\",\n        images: [\"/images/atlas-mountains.png\"],\n        price: 180,\n        currency: \"EUR\",\n        duration: \"3-7 giorni\",\n        maxParticipants: 12,\n        difficulty: 'moderate' as const,\n        category: 'trekking' as const,\n        includes: [\"Guide locali\", \"Pernottamento rifugi\", \"Muli per bagagli\", \"Pasti tradizionali\"],\n        location: \"Alto Atlante\",\n        rating: 4.8,\n        reviews: 167,\n        published: true,\n        featured: true\n      },\n      {\n        title: \"Surf a Taghazout\",\n        slug: \"surf-taghazout\",\n        description: \"Lezioni di surf per tutti i livelli nelle acque di Taghazout\",\n        images: [\"/images/essaouira-coast.png\"],\n        price: 220,\n        currency: \"EUR\",\n        duration: \"4-7 giorni\",\n        maxParticipants: 10,\n        category: 'surf' as const,\n        includes: [\"Tavole e mute\", \"Istruttori certificati\", \"Spot sicuri\", \"Trasporti spiagge\"],\n        location: \"Taghazout\",\n        rating: 4.7,\n        reviews: 198,\n        published: true,\n        featured: false\n      },\n      {\n        title: \"Workshop Fotografia\",\n        slug: \"workshop-fotografia\",\n        description: \"Cattura la magia del Marocco con fotografi professionisti\",\n        images: [\"/images/photo-tour.png\"],\n        price: 150,\n        currency: \"EUR\",\n        duration: \"1-2 giorni\",\n        maxParticipants: 8,\n        category: 'photography' as const,\n        includes: [\"Coaching tecnico\", \"Golden/Blue Hour\", \"Elaborazione campo\", \"Portfolio review\"],\n        location: \"Merzouga\",\n        rating: 4.9,\n        reviews: 112,\n        published: true,\n        featured: true\n      }\n    ]\n\n    // Populate experiences\n    for (const experience of experiencesData) {\n      try {\n        const docData = {\n          ...experience,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }\n        \n        const existing = await adminDb.collection(COLLECTIONS.experiences)\n          .where('slug', '==', experience.slug).get()\n        \n        if (existing.empty || force) {\n          if (!existing.empty && force) {\n            await adminDb.collection(COLLECTIONS.experiences).doc(existing.docs[0].id).delete()\n          }\n          \n          await adminDb.collection(COLLECTIONS.experiences).add(docData)\n          results.experiences++\n        }\n      } catch (error) {\n        results.errors.push(`Experience ${experience.title}: ${error}`)\n      }\n    }\n\n    // === TRAVELS (PACKAGES) DATA ===\n    const travelsData = [\n      {\n        title: \"Grand Tour delle 4 Citt√† Imperiali\",\n        slug: \"grand-tour-citta-imperiali\",\n        description: \"Scopri tutte e quattro le citt√† imperiali del Marocco con guide locali esperte\",\n        images: [\"/images/imperial-cities-tour.png\"],\n        price: 890,\n        originalPrice: 1090,\n        currency: \"EUR\",\n        duration: \"8 giorni / 7 notti\",\n        category: 'imperial-cities' as const,\n        includes: [\"Tutte e 4 le citt√†\", \"Guide locali\", \"Trasporti privati\", \"Hotel 4*\", \"Colazioni\"],\n        notIncludes: [\"Voli internazionali\", \"Pranzi e cene\", \"Bevande\", \"Mance\"],\n        highlights: [\"Fes Medina UNESCO\", \"Meknes Bab Mansour\", \"Rabat Hassan Tower\", \"Marrakech Jemaa el-Fnaa\"],\n        rating: 4.9,\n        reviews: 127,\n        published: true,\n        featured: true\n      },\n      {\n        title: \"Tour del Deserto Sahara - 3 Giorni\",\n        slug: \"tour-deserto-sahara\",\n        description: \"Avventura nel deserto di Merzouga con notte nel campo tendato\",\n        images: [\"/images/sahara-sunset.png\"],\n        price: 320,\n        originalPrice: 420,\n        currency: \"EUR\",\n        duration: \"3 giorni / 2 notti\",\n        category: 'desert' as const,\n        includes: [\"4x4 privato\", \"Cammellata tramonto\", \"Campo berbero\", \"Pasti tradizionali\"],\n        highlights: [\"Dune Erg Chebbi\", \"Alba nel deserto\", \"Musica berbera\", \"Notte stelle\"],\n        rating: 4.9,\n        reviews: 203,\n        published: true,\n        featured: true\n      },\n      {\n        title: \"Costa Atlantica e Essaouira\",\n        slug: \"costa-atlantica-essaouira\",\n        description: \"Relax sulla costa atlantica con Essaouira e le spiagge pi√π belle del Marocco\",\n        images: [\"/images/essaouira-coast.png\"],\n        price: 450,\n        originalPrice: 580,\n        currency: \"EUR\",\n        duration: \"6 giorni / 5 notti\",\n        category: 'coast' as const,\n        includes: [\"Hotel vista mare\", \"Escursioni costiere\", \"Degustazioni pesce\"],\n        highlights: [\"Medina Essaouira\", \"Spiagge Agadir\", \"Cooperative argan\"],\n        rating: 4.6,\n        reviews: 134,\n        published: true,\n        featured: false\n      }\n    ]\n\n    // Populate travels\n    for (const travel of travelsData) {\n      try {\n        const docData = {\n          ...travel,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }\n        \n        const existing = await adminDb.collection(COLLECTIONS.travels)\n          .where('slug', '==', travel.slug).get()\n        \n        if (existing.empty || force) {\n          if (!existing.empty && force) {\n            await adminDb.collection(COLLECTIONS.travels).doc(existing.docs[0].id).delete()\n          }\n          \n          await adminDb.collection(COLLECTIONS.travels).add(docData)\n          results.travels++\n        }\n      } catch (error) {\n        results.errors.push(`Travel ${travel.title}: ${error}`)\n      }\n    }\n\n    // === SERVICES (EXTRAS) DATA ===\n    const servicesData = [\n      {\n        name: \"Trasferimento Aeroporto\",\n        slug: \"trasferimento-aeroporto\",\n        description: \"Servizio di trasferimento privato da/per aeroporto\",\n        category: 'transport' as const,\n        type: 'optional' as const,\n        price: 35,\n        priceType: 'per_group' as const,\n        currency: \"EUR\",\n        locations: [\"Marrakech\", \"Casablanca\", \"Fes\"],\n        published: true\n      },\n      {\n        name: \"Guida Turistica Privata\",\n        slug: \"guida-privata\",\n        description: \"Guida turistica privata certificata per mezza o intera giornata\",\n        category: 'guide' as const,\n        type: 'addon' as const,\n        price: 80,\n        priceType: 'per_day' as const,\n        currency: \"EUR\",\n        locations: [\"Marrakech\", \"Fes\", \"Rabat\", \"Meknes\"],\n        published: true\n      },\n      {\n        name: \"Assicurazione Viaggio\",\n        slug: \"assicurazione-viaggio\",\n        description: \"Copertura assicurativa completa per il viaggio\",\n        category: 'insurance' as const,\n        type: 'optional' as const,\n        price: 25,\n        priceType: 'per_person' as const,\n        currency: \"EUR\",\n        published: true\n      }\n    ]\n\n    // Populate services\n    for (const service of servicesData) {\n      try {\n        const docData = {\n          ...service,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }\n        \n        const existing = await adminDb.collection(COLLECTIONS.services)\n          .where('slug', '==', service.slug).get()\n        \n        if (existing.empty || force) {\n          if (!existing.empty && force) {\n            await adminDb.collection(COLLECTIONS.services).doc(existing.docs[0].id).delete()\n          }\n          \n          await adminDb.collection(COLLECTIONS.services).add(docData)\n          results.services++\n        }\n      } catch (error) {\n        results.errors.push(`Service ${service.name}: ${error}`)\n      }\n    }\n\n    return results\n\n  } catch (error) {\n    console.error('Database population error:', error)\n    results.errors.push(`General error: ${error}`)\n    return results\n  }\n}","size_bytes":14715},"components/dashboard/UserProfile.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { User, Mail, Phone, MapPin, Calendar, Bell, Shield, Save, Edit2 } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { firestoreService } from '@/lib/firestore';\n\nexport default function UserProfile() {\n  const { user, userProfile } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [isEditing, setIsEditing] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    displayName: '',\n    phone: '',\n    birthDate: '',\n    nationality: '',\n    preferences: {\n      newsletter: false,\n      notifications: false,\n      language: 'it'\n    },\n    profile: {\n      bio: '',\n      travelPreferences: [] as string[],\n      wishlist: [] as string[],\n      emergencyContact: {\n        name: '',\n        phone: '',\n        relationship: ''\n      }\n    }\n  });\n\n  useEffect(() => {\n    if (userProfile) {\n      setFormData({\n        displayName: userProfile.displayName || '',\n        phone: userProfile.profile?.phone || '',\n        birthDate: userProfile.profile?.birthDate || '',\n        nationality: userProfile.profile?.nationality || 'Italy',\n        preferences: {\n          newsletter: userProfile.preferences?.newsletter || false,\n          notifications: userProfile.preferences?.notifications || false,\n          language: userProfile.preferences?.language || 'it'\n        },\n        profile: {\n          bio: userProfile.profile?.bio || '',\n          travelPreferences: userProfile.profile?.travelPreferences || [],\n          wishlist: userProfile.profile?.wishlist || [],\n          emergencyContact: {\n            name: userProfile.profile?.emergencyContact?.name || '',\n            phone: userProfile.profile?.emergencyContact?.phone || '',\n            relationship: userProfile.profile?.emergencyContact?.relationship || ''\n          }\n        }\n      });\n    }\n  }, [userProfile]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    \n    if (name.includes('.')) {\n      // Handle deep nested paths like \"profile.emergencyContact.name\"\n      const keys = name.split('.');\n      const finalValue = type === 'checkbox' ? (e.target as HTMLInputElement).checked : value;\n      \n      setFormData(prev => {\n        const newData = { ...prev };\n        let current: any = newData;\n        \n        // Navigate to the parent of the final key\n        for (let i = 0; i < keys.length - 1; i++) {\n          if (!current[keys[i]]) {\n            current[keys[i]] = {};\n          } else {\n            current[keys[i]] = { ...current[keys[i]] };\n          }\n          current = current[keys[i]];\n        }\n        \n        // Set the final value\n        current[keys[keys.length - 1]] = finalValue;\n        \n        return newData;\n      });\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? (e.target as HTMLInputElement).checked : value\n      }));\n    }\n  };\n\n  const handleTravelPreferenceToggle = (preference: string) => {\n    setFormData(prev => ({\n      ...prev,\n      profile: {\n        ...prev.profile,\n        travelPreferences: prev.profile.travelPreferences.includes(preference)\n          ? prev.profile.travelPreferences.filter(p => p !== preference)\n          : [...prev.profile.travelPreferences, preference]\n      }\n    }));\n  };\n\n  const handleSave = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      // In a real implementation, you would update the profile in Firestore\n      console.log('Saving profile:', formData);\n      setSuccess('Profilo aggiornato con successo!');\n      setIsEditing(false);\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err: any) {\n      setError('Errore nell\\'aggiornamento del profilo');\n      console.error('Profile update error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const travelPreferenceOptions = [\n    'Avventura', 'Cultura', 'Gastronomia', 'Relax', 'Storia', 'Natura',\n    'Fotografia', 'Sport', 'Famiglia', 'Romantico', 'Economico', 'Lusso'\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Il Mio Profilo</h2>\n        <button\n          onClick={() => setIsEditing(!isEditing)}\n          className=\"flex items-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors\"\n        >\n          <Edit2 className=\"w-4 h-4\" />\n          <span>{isEditing ? 'Annulla' : 'Modifica'}</span>\n        </button>\n      </div>\n\n      {/* Success/Error Messages */}\n      {success && (\n        <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-green-700 dark:text-green-300\">\n          {success}\n        </div>\n      )}\n      \n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300\">\n          {error}\n        </div>\n      )}\n\n      <form onSubmit={handleSave} className=\"space-y-6\">\n        {/* Personal Information */}\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-foreground mb-4 flex items-center\">\n            <User className=\"w-5 h-5 mr-2 text-primary\" />\n            Informazioni Personali\n          </h3>\n          \n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Nome Completo\n              </label>\n              <input\n                type=\"text\"\n                name=\"displayName\"\n                value={formData.displayName}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground disabled:bg-muted disabled:text-muted-foreground\"\n                placeholder=\"Il tuo nome completo\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Email\n              </label>\n              <input\n                type=\"email\"\n                value={user?.email || ''}\n                disabled\n                className=\"w-full px-3 py-2 border border-border rounded-lg bg-muted text-muted-foreground\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Telefono\n              </label>\n              <input\n                type=\"tel\"\n                name=\"phone\"\n                value={formData.phone}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground disabled:bg-muted disabled:text-muted-foreground\"\n                placeholder=\"+39 123 456 7890\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Data di Nascita\n              </label>\n              <input\n                type=\"date\"\n                name=\"birthDate\"\n                value={formData.birthDate}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground disabled:bg-muted disabled:text-muted-foreground\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Nazionalit√†\n              </label>\n              <input\n                type=\"text\"\n                name=\"nationality\"\n                value={formData.nationality}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground disabled:bg-muted disabled:text-muted-foreground\"\n                placeholder=\"Italia\"\n              />\n            </div>\n\n          </div>\n        </div>\n\n        {/* Travel Preferences */}\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-foreground mb-4 flex items-center\">\n            <MapPin className=\"w-5 h-5 mr-2 text-orange-500\" />\n            Preferenze di Viaggio\n          </h3>\n          \n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Bio\n            </label>\n            <textarea\n              name=\"profile.bio\"\n              value={formData.profile.bio}\n              onChange={handleInputChange}\n              disabled={!isEditing}\n              rows={3}\n              className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground disabled:bg-gray-50 dark:disabled:bg-gray-700\"\n              placeholder=\"Raccontaci qualcosa di te e dei tuoi interessi di viaggio...\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Interessi di Viaggio\n            </label>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n              {travelPreferenceOptions.map((preference) => (\n                <label\n                  key={preference}\n                  className={`flex items-center space-x-2 p-2 rounded-lg border cursor-pointer transition-colors ${\n                    formData.profile.travelPreferences.includes(preference)\n                      ? 'bg-orange-50 border-orange-200 text-orange-700 dark:bg-orange-900/20 dark:border-orange-800 dark:text-orange-300'\n                      : 'bg-gray-50 border-gray-200 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300'\n                  } ${!isEditing ? 'opacity-60 cursor-not-allowed' : ''}`}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.profile.travelPreferences.includes(preference)}\n                    onChange={() => handleTravelPreferenceToggle(preference)}\n                    disabled={!isEditing}\n                    className=\"rounded text-orange-500 focus:ring-orange-500\"\n                  />\n                  <span className=\"text-sm\">{preference}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Emergency Contact */}\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-foreground mb-4 flex items-center\">\n            <Shield className=\"w-5 h-5 mr-2 text-orange-500\" />\n            Contatto di Emergenza\n          </h3>\n          \n          <div className=\"grid md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Nome\n              </label>\n              <input\n                type=\"text\"\n                name=\"profile.emergencyContact.name\"\n                value={formData.profile.emergencyContact.name}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground disabled:bg-muted disabled:text-muted-foreground\"\n                placeholder=\"Nome del contatto\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Telefono\n              </label>\n              <input\n                type=\"tel\"\n                name=\"profile.emergencyContact.phone\"\n                value={formData.profile.emergencyContact.phone}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground disabled:bg-muted disabled:text-muted-foreground\"\n                placeholder=\"+39 123 456 7890\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Parentela\n              </label>\n              <select\n                name=\"profile.emergencyContact.relationship\"\n                value={formData.profile.emergencyContact.relationship}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground disabled:bg-muted disabled:text-muted-foreground\"\n              >\n                <option value=\"\">Seleziona...</option>\n                <option value=\"parent\">Genitore</option>\n                <option value=\"spouse\">Coniuge</option>\n                <option value=\"sibling\">Fratello/Sorella</option>\n                <option value=\"child\">Figlio/a</option>\n                <option value=\"friend\">Amico/a</option>\n                <option value=\"other\">Altro</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Notification Preferences */}\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-foreground mb-4 flex items-center\">\n            <Bell className=\"w-5 h-5 mr-2 text-orange-500\" />\n            Preferenze Notifiche\n          </h3>\n          \n          <div className=\"space-y-4\">\n            <label className=\"flex items-center space-x-3\">\n              <input\n                type=\"checkbox\"\n                name=\"preferences.newsletter\"\n                checked={formData.preferences.newsletter}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"rounded text-orange-500 focus:ring-orange-500 disabled:opacity-60\"\n              />\n              <div>\n                <p className=\"font-medium text-gray-900 dark:text-white\">Newsletter</p>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  Ricevi offerte speciali e novit√† sui viaggi\n                </p>\n              </div>\n            </label>\n\n            <label className=\"flex items-center space-x-3\">\n              <input\n                type=\"checkbox\"\n                name=\"preferences.notifications\"\n                checked={formData.preferences.notifications}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"rounded text-orange-500 focus:ring-orange-500 disabled:opacity-60\"\n              />\n              <div>\n                <p className=\"font-medium text-gray-900 dark:text-white\">Notifiche Push</p>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  Aggiornamenti su prenotazioni e promemoria\n                </p>\n              </div>\n            </label>\n\n            <div>\n              <label className=\"block text-sm font-medium text-muted-foreground mb-1\">\n                Lingua Preferita\n              </label>\n              <select\n                name=\"preferences.language\"\n                value={formData.preferences.language}\n                onChange={handleInputChange}\n                disabled={!isEditing}\n                className=\"w-32 px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground disabled:bg-gray-50 dark:disabled:bg-gray-700\"\n              >\n                <option value=\"it\">Italiano</option>\n                <option value=\"en\">English</option>\n                <option value=\"fr\">Fran√ßais</option>\n                <option value=\"es\">Espa√±ol</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Save Button */}\n        {isEditing && (\n          <div className=\"flex justify-end\">\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold rounded-lg hover:from-orange-600 hover:to-red-600 transition-all disabled:opacity-50\"\n            >\n              <Save className=\"w-4 h-4\" />\n              <span>{loading ? 'Salvando...' : 'Salva Modifiche'}</span>\n            </button>\n          </div>\n        )}\n      </form>\n    </div>\n  );\n}","size_bytes":17418},"components/layout/Navbar.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { Menu, Search, Sun, Moon, ChevronDown, MapPin, Users, X, Camera, LogOut, User, Settings, Mail } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { usePathname, useRouter } from \"next/navigation\"\nimport Image from \"next/image\"\nimport { useAuth } from \"@/context/AuthContext\"\n\ninterface NavbarProps {\n  onSearchOpen: () => void\n}\n\nexport default function Navbar({ onSearchOpen }: NavbarProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [activeDropdown, setActiveDropdown] = useState<string | null>(null)\n  const [isMobile, setIsMobile] = useState(false)\n  const [isTablet, setIsTablet] = useState(false)\n  const [mounted, setMounted] = useState(false)\n  const [theme, setThemeState] = useState<\"light\" | \"dark\">(\"light\")\n  const navRef = useRef(null)\n  const pathname = usePathname()\n  const router = useRouter()\n  const { user, userProfile, loading, isAdmin, signOut } = useAuth()\n\n  const [lastScrollY, setLastScrollY] = useState(0)\n  const [isHidden, setIsHidden] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n    // Check system theme preference\n    const isDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n    setThemeState(isDark ? \"dark\" : \"light\")\n\n    const checkDevice = () => {\n      setIsMobile(window.innerWidth < 768)\n      setIsTablet(window.innerWidth >= 768 && window.innerWidth < 1024)\n    }\n\n    checkDevice()\n    window.addEventListener(\"resize\", checkDevice)\n    return () => window.removeEventListener(\"resize\", checkDevice)\n  }, [])\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (navRef.current && !(navRef.current as HTMLElement).contains(event.target as Node)) {\n        setActiveDropdown(null)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  // Close mobile menu on route change\n  useEffect(() => {\n    setIsOpen(false)\n    setActiveDropdown(null)\n  }, [pathname])\n\n  useEffect(() => {\n    if (!mounted) return\n    let ticking = false\n    const handleScroll = () => {\n      if (!ticking) {\n        window.requestAnimationFrame(() => {\n          const currentScrollY = window.scrollY\n          if (currentScrollY > lastScrollY && currentScrollY > 60) {\n            setIsHidden(true)\n          } else {\n            setIsHidden(false)\n          }\n          setLastScrollY(currentScrollY)\n          ticking = false\n        })\n        ticking = true\n      }\n    }\n    window.addEventListener(\"scroll\", handleScroll)\n    return () => window.removeEventListener(\"scroll\", handleScroll)\n  }, [lastScrollY, mounted])\n\n  const navItems = [\n    { name: \"Chi Siamo\", href: \"/about\", icon: Users },\n    {\n      name: \"Viaggi\",\n      href: \"/viaggi\",\n      icon: MapPin,\n      dropdown: [\n        { name: \"Viaggi di Gruppo\", href: \"/viaggi/gruppo\", description: \"Tour organizzati con altri viaggiatori\" },\n        { name: \"Viaggi su Misura\", href: \"/viaggi/su-misura\", description: \"Itinerari personalizzati per te\" },\n        { name: \"Tour del Deserto\", href: \"/viaggi/deserto\", description: \"Avventure nel Sahara\" },\n        { name: \"Citt√† Imperiali\", href: \"/viaggi/citta-imperiali\", description: \"Marrakech, Fes, Meknes, Rabat\" },\n        { name: \"Costa Atlantica\", href: \"/viaggi/costa-atlantica\", description: \"Essaouira, Agadir e spiagge\" },\n        { name: \"Montagne Atlas\", href: \"/viaggi/montagne-atlas\", description: \"Trekking e natura\" },\n      ],\n    },\n    {\n      name: \"Esperienze\",\n      href: \"/esperienze\",\n      icon: Camera,\n      dropdown: [\n        { name: \"Hammam & Spa\", href: \"/esperienze/hammam\", description: \"Benessere tradizionale marocchino\" },\n        { name: \"Cucina Marocchina\", href: \"/esperienze/cucina\", description: \"Corsi di cucina autentica\" },\n        { name: \"Trekking Atlante\", href: \"/esperienze/trekking\", description: \"Escursioni in montagna\" },\n        { name: \"Surf\", href: \"/esperienze/surf\", description: \"Onde perfette sulla costa\" },\n        { name: \"Artigianato\", href: \"/esperienze/artigianato\", description: \"Laboratori con maestri artigiani\" },\n        { name: \"Fotografia\", href: \"/esperienze/fotografia\", description: \"Workshop fotografici guidati\" },\n        { name: \"Quad e Cammelli\", href: \"/esperienze/quad-cammelli\", description: \"Avventure nel deserto\" },\n      ],\n    },\n    {\n      name: \"Servizi\",\n      href: \"/servizi\",\n      icon: Users,\n      dropdown: [\n        { name: \"Trasferimenti\", href: \"/servizi/trasferimenti\", description: \"Aeroporto e citt√†\" },\n        { name: \"Guide Private\", href: \"/servizi/guide-private\", description: \"Guide esperte locali\" },\n        { name: \"Noleggio Auto\", href: \"/servizi/noleggio-auto\", description: \"Veicoli per ogni esigenza\" },\n        { name: \"Assicurazioni\", href: \"/servizi/assicurazioni\", description: \"Protezione completa\" },\n      ],\n    },\n    { name: \"Blog\", href: \"/blog\", icon: Camera },\n    { name: \"Contatti\", href: \"/contatti\", icon: Mail },\n  ]\n\n  const isActiveRoute = (href: string) => {\n    if (href === \"/\") return pathname === \"/\"\n    return pathname.startsWith(href)\n  }\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"dark\" ? \"light\" : \"dark\"\n    setThemeState(newTheme)\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\")\n  }\n\n  const handleLogout = async () => {\n    try {\n      await signOut()\n      router.push('/')\n    } catch (error) {\n      console.error('Error signing out:', error)\n    }\n  }\n\n  // Get appropriate logo based on device and theme\n  const getLogoSrc = () => {\n    if (!mounted) return \"/placeholder.svg\"\n\n    if (isMobile) {\n      return theme === \"dark\"\n        ? \"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/MaroccoDreams_compatto_white-esK9LQBcJ2mGaingRuRkl4XWJp4pBb.png\"\n        : \"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/MaroccoDreams_compatto_gold-w40Hd0YYDmtt31HRTxAfD1SMob4Y2k.png\"\n    }\n    if (isTablet) {\n      return theme === \"dark\"\n        ? \"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/MaroccoDreams_compatto_white-esK9LQBcJ2mGaingRuRkl4XWJp4pBb.png\"\n        : \"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/MaroccoDreams_compatto_gold-w40Hd0YYDmtt31HRTxAfD1SMob4Y2k.png\"\n    }\n    return theme === \"dark\"\n      ? \"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/MaroccoDreams_orrizontale_white-IKSXx80rwYXglT1fPiH0ZffcA8ByqK.png\"\n      : \"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/MaroccoDreams_orrizontale_gold-1yU66LDNR61slC5F2AzysFae8BkwQF.png\"\n  }\n\n  const getLogoSize = () => {\n    if (isMobile) return { width: 96, height: 42 }\n    if (isTablet) return { width: 120, height: 54 }\n    return { width: 168, height: 60 }\n  }\n\n  if (!mounted) {\n    return null\n  }\n\n  return (\n    <nav\n      ref={navRef}\n      className={`fixed top-0 left-0 w-full z-50 transition-all duration-300\n  bg-background/80 backdrop-blur-lg shadow-lg border-b border-border\n  ${isHidden ? \"pointer-events-none select-none opacity-0 -translate-y-full\" : \"opacity-100 translate-y-0\"}\n`}\n    >\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-14 lg:h-17\">\n          {/* Logo */}\n          <Link href=\"/\" className=\"flex items-center group\">\n            <div className=\"relative transition-transform duration-300 group-hover:scale-105\">\n              <Image\n                src={getLogoSrc() || \"/placeholder.svg\"}\n                alt=\"Morocco Dreams - Viaggi in Marocco\"\n                width={getLogoSize().width}\n                height={getLogoSize().height}\n                className=\"h-auto w-auto max-h-10 sm:max-h-11 lg:max-h-13 object-contain\"\n                priority\n              />\n            </div>\n          </Link>\n\n          {/* Desktop Navigation */}\n          <div className=\"hidden lg:flex items-center space-x-1\">\n            {navItems.map((item) => (\n              <div key={item.name} className=\"relative\">\n                {item.dropdown ? (\n                  <div\n                    className=\"relative\"\n                    onMouseEnter={() => setActiveDropdown(item.name)}\n                    onMouseLeave={() => setActiveDropdown(null)}\n                  >\n                    <button\n                      className={`\n                        flex items-center space-x-2 px-4 py-3 rounded-full text-sm font-medium min-h-[44px]\n                        transition-all duration-200 hover:bg-muted\n                        ${\n                          isActiveRoute(item.href) || activeDropdown === item.name\n                            ? \"bg-muted text-orange-600 dark:text-orange-400\"\n                            : \"text-foreground hover:text-foreground\"\n                        }\n                      `}\n                    >\n                      <span>{item.name}</span>\n                      <ChevronDown\n                        className={`w-4 h-4 transition-transform duration-200 ${\n                          activeDropdown === item.name ? \"rotate-180\" : \"\"\n                        }`}\n                      />\n                    </button>\n\n                    {/* Dropdown Menu */}\n                    <div\n                      className={`\n    absolute top-full left-0 mt-2 w-80 \n    bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700\n    rounded-2xl shadow-xl overflow-hidden\n    transition-all duration-200 origin-top-left\n    ${activeDropdown === item.name ? \"opacity-100 scale-100 translate-y-0 visible\" : \"opacity-0 scale-95 -translate-y-2 invisible\"}\n  `}\n                    >\n                      <div className=\"p-2\">\n                        {item.dropdown.map((subItem) => (\n                          <Link\n                            key={subItem.href}\n                            href={subItem.href}\n                            className=\"block p-4 rounded-xl hover:bg-gradient-to-r hover:from-orange-500 hover:to-red-500 hover:text-white transition-all duration-200 group\"\n                          >\n                            <div className=\"flex flex-col gap-1\">\n                              <span className=\"font-medium text-gray-900 dark:text-gray-100 group-hover:text-white text-sm\">\n                                {subItem.name}\n                              </span>\n                              <span className=\"text-gray-600 dark:text-gray-400 group-hover:text-white text-xs\">\n                                {subItem.description}\n                              </span>\n                            </div>\n                          </Link>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <Link\n                    href={item.href}\n                    className={`\n                      flex items-center space-x-2 px-4 py-3 rounded-full text-sm font-medium min-h-[44px]\n                      transition-all duration-200 hover:bg-muted\n                      ${\n                        isActiveRoute(item.href)\n                          ? \"bg-muted text-orange-600 dark:text-orange-400\"\n                          : \"text-foreground hover:text-foreground\"\n                      }\n                    `}\n                  >\n                    <span>{item.name}</span>\n                  </Link>\n                )}\n              </div>\n            ))}\n            \n            {/* Viaggi su Misura - Prominent Button */}\n            <Link\n              href=\"/viaggi/su-misura\"\n              className=\"ml-2 px-5 py-3 rounded-full text-sm font-semibold min-h-[44px] flex items-center space-x-2 bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105\"\n            >\n              <span>‚ú® Viaggi su Misura</span>\n            </Link>\n          </div>\n\n          {/* Right Side Actions */}\n          <div className=\"flex items-center space-x-3\">\n            {/* Search Button */}\n            <button\n              onClick={onSearchOpen}\n              className=\"hidden sm:flex items-center space-x-2 px-4 py-3 bg-muted hover:bg-muted/80 rounded-full text-sm font-medium text-foreground transition-all duration-200 group min-h-[44px]\"\n            >\n              <Search className=\"w-4 h-4 group-hover:scale-110 transition-transform duration-200\" />\n              <span className=\"hidden md:inline\">Cerca</span>\n            </button>\n\n            {/* Theme Toggle */}\n            <button\n              onClick={toggleTheme}\n              className=\"p-3 rounded-full hover:bg-muted transition-all duration-200 group min-w-[44px] min-h-[44px] flex items-center justify-center\"\n            >\n              {theme === \"dark\" ? (\n                <Sun className=\"w-5 h-5 text-orange-500 group-hover:rotate-12 transition-transform duration-200\" />\n              ) : (\n                <Moon className=\"w-5 h-5 text-foreground group-hover:-rotate-12 transition-transform duration-200\" />\n              )}\n            </button>\n\n            {/* Authentication Buttons */}\n            {loading ? (\n              <div className=\"w-10 h-10 rounded-full bg-muted animate-pulse\" />\n            ) : user ? (\n              <div className=\"relative\">\n                <button\n                  onClick={() => setActiveDropdown(activeDropdown === 'user' ? null : 'user')}\n                  className=\"flex items-center space-x-2 px-4 py-3 rounded-full bg-muted hover:bg-muted/80 transition-all duration-200 min-h-[44px]\"\n                >\n                  {isAdmin ? (\n                    <Settings className=\"w-5 h-5 text-orange-600\" />\n                  ) : (\n                    <User className=\"w-5 h-5 text-foreground\" />\n                  )}\n                  <span className=\"hidden md:inline text-sm font-medium\">\n                    {isAdmin ? 'Admin' : userProfile?.displayName || 'Utente'}\n                  </span>\n                  <ChevronDown\n                    className={`w-4 h-4 transition-transform duration-200 ${\n                      activeDropdown === 'user' ? 'rotate-180' : ''\n                    }`}\n                  />\n                </button>\n\n                {/* User Dropdown */}\n                {activeDropdown === 'user' && (\n                  <div className=\"absolute right-0 top-full mt-2 w-48 bg-card border border-border rounded-xl shadow-lg py-2 z-50\">\n                    <Link\n                      href=\"/dashboard\"\n                      className=\"flex items-center space-x-3 px-4 py-3 text-sm text-foreground hover:bg-muted transition-colors\"\n                      onClick={() => setActiveDropdown(null)}\n                    >\n                      <User className=\"w-4 h-4\" />\n                      <span>La Mia Area</span>\n                    </Link>\n                    <button\n                      onClick={() => {\n                        setActiveDropdown(null)\n                        handleLogout()\n                      }}\n                      className=\"w-full flex items-center space-x-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\"\n                    >\n                      <LogOut className=\"w-4 h-4\" />\n                      <span>Logout</span>\n                    </button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-2\">\n                <Link\n                  href=\"/auth/signin\"\n                  className=\"hidden sm:inline-flex items-center px-4 py-3 rounded-full border border-border text-sm font-medium text-foreground hover:bg-muted transition-all duration-200 min-h-[44px]\"\n                >\n                  Accedi\n                </Link>\n                <Link\n                  href=\"/contatti\"\n                  className=\"inline-flex items-center px-6 py-3 rounded-full font-semibold text-sm min-h-[44px] transition-all duration-300 hover:scale-105 hover:shadow-lg\"\n                  style={{\n                    background: \"linear-gradient(to right, #f97316, #dc2626) !important\",\n                    color: \"#ffffff !important\",\n                  }}\n                >\n                  <span className=\"hidden sm:inline\">Pianifica Viaggio</span>\n                  <span className=\"sm:hidden\">Contatti</span>\n                </Link>\n              </div>\n            )}\n\n            {/* Mobile Menu Button */}\n            <button\n              onClick={() => setIsOpen(!isOpen)}\n              className=\"lg:hidden p-3 rounded-full hover:bg-muted transition-all duration-200 min-w-[44px] min-h-[44px] flex items-center justify-center\"\n            >\n              {isOpen ? <X className=\"w-5 h-5 text-foreground\" /> : <Menu className=\"w-5 h-5 text-foreground\" />}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Navigation */}\n      <div\n        className={`\n          lg:hidden absolute top-full left-0 w-full bg-card border-t border-border\n          transition-all duration-300 overflow-hidden\n          ${isOpen ? \"max-h-screen opacity-100\" : \"max-h-0 opacity-0\"}\n        `}\n      >\n        <div className=\"px-4 py-6 space-y-4 max-h-[80vh] overflow-y-auto\">\n          {/* Mobile Authentication */}\n          {loading ? (\n            <div className=\"w-full h-12 rounded-full bg-muted animate-pulse\" />\n          ) : user ? (\n            <div className=\"space-y-3\">\n              {/* Mobile User Info */}\n              <div className=\"flex items-center space-x-3 px-4 py-3 bg-muted rounded-xl\">\n                {isAdmin ? (\n                  <Settings className=\"w-6 h-6 text-orange-600\" />\n                ) : (\n                  <User className=\"w-6 h-6 text-foreground\" />\n                )}\n                <div className=\"flex-1\">\n                  <p className=\"font-semibold text-foreground\">\n                    {isAdmin ? 'Admin Panel' : userProfile?.displayName || 'Utente'}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">{user.email}</p>\n                </div>\n              </div>\n              \n              {/* Mobile User Actions */}\n              <Link\n                href=\"/dashboard\"\n                className=\"w-full flex items-center space-x-3 px-4 py-4 bg-muted hover:bg-muted/80 rounded-xl transition-colors\"\n                onClick={() => setIsOpen(false)}\n              >\n                <User className=\"w-5 h-5\" />\n                <span className=\"font-medium\">La Mia Area</span>\n              </Link>\n              <button\n                onClick={() => {\n                  setIsOpen(false)\n                  handleLogout()\n                }}\n                className=\"w-full flex items-center space-x-3 px-4 py-4 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-xl transition-colors\"\n              >\n                <LogOut className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Logout</span>\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              <Link\n                href=\"/auth/signin\"\n                className=\"w-full flex items-center justify-center px-6 py-4 border-2 border-border rounded-full font-semibold min-h-[48px] transition-all duration-300 text-foreground hover:bg-muted\"\n                onClick={() => setIsOpen(false)}\n              >\n                Accedi / Registrati\n              </Link>\n              <Link\n                href=\"/contatti\"\n                className=\"w-full flex items-center justify-center px-6 py-4 rounded-full font-semibold min-h-[48px] transition-all duration-300\"\n                style={{\n                  background: \"linear-gradient(to right, #f97316, #dc2626)\",\n                  color: \"#ffffff\",\n                }}\n                onClick={() => setIsOpen(false)}\n              >\n                Pianifica il Tuo Viaggio\n              </Link>\n            </div>\n          )}\n\n          {/* Mobile Search */}\n          <button\n            onClick={() => {\n              onSearchOpen()\n              setIsOpen(false)\n            }}\n            className=\"w-full flex items-center space-x-3 px-4 py-4 bg-muted rounded-xl text-left min-h-[48px]\"\n          >\n            <Search className=\"w-5 h-5 text-muted-foreground\" />\n            <span className=\"text-foreground\">Cerca destinazioni...</span>\n          </button>\n\n          {/* Mobile Menu Items */}\n          {navItems.map((item) => (\n            <div key={item.name}>\n              {item.dropdown ? (\n                <div>\n                  <button\n                    onClick={() => setActiveDropdown(activeDropdown === item.name ? null : item.name)}\n                    className={`\n                      w-full flex items-center justify-between px-4 py-4 text-left font-medium rounded-xl transition-colors duration-200 min-h-[48px]\n                      ${\n                        isActiveRoute(item.href)\n                          ? \"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400\"\n                          : \"text-foreground hover:bg-muted\"\n                      }\n                    `}\n                  >\n                    <div className=\"flex items-center space-x-3\">\n                      <item.icon className=\"w-5 h-5\" />\n                      <span>{item.name}</span>\n                    </div>\n                    <ChevronDown\n                      className={`w-4 h-4 transition-transform duration-200 ${\n                        activeDropdown === item.name ? \"rotate-180\" : \"\"\n                      }`}\n                    />\n                  </button>\n                  <div\n                    className={`\n                      overflow-hidden transition-all duration-200\n                      ${activeDropdown === item.name ? \"max-h-96 opacity-100 mt-2\" : \"max-h-0 opacity-0\"}\n                    `}\n                  >\n                    <div className=\"pl-12 space-y-2\">\n                      {item.dropdown.map((subItem) => (\n                        <Link\n                          key={subItem.href}\n                          href={subItem.href}\n                          className={`\n                            block px-4 py-4 text-sm rounded-lg transition-all duration-200 min-h-[48px]\n                            ${isActiveRoute(subItem.href) ? \"bg-orange-50 dark:bg-orange-900/20\" : \"hover:bg-muted\"}\n                          `}\n                        >\n                          <div\n                            className=\"font-medium\"\n                            style={{\n                              color: isActiveRoute(subItem.href)\n                                ? theme === \"dark\"\n                                  ? \"#fb923c\"\n                                  : \"#ea580c\"\n                                : theme === \"dark\"\n                                  ? \"#ffffff\"\n                                  : \"#111827\",\n                            }}\n                          >\n                            {subItem.name}\n                          </div>\n                          <div\n                            className=\"text-xs mt-1\"\n                            style={{\n                              color: isActiveRoute(subItem.href)\n                                ? theme === \"dark\"\n                                  ? \"#fb923c\"\n                                  : \"#ea580c\"\n                                : theme === \"dark\"\n                                  ? \"#e5e7eb\"\n                                  : \"#4b5563\",\n                            }}\n                          >\n                            {subItem.description}\n                          </div>\n                        </Link>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <Link\n                  href={item.href}\n                  className={`\n                    flex items-center space-x-3 px-4 py-4 font-medium rounded-xl transition-colors duration-200 min-h-[48px]\n                    ${\n                      isActiveRoute(item.href)\n                        ? \"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400\"\n                        : \"text-foreground hover:bg-muted\"\n                    }\n                  `}\n                >\n                  <item.icon className=\"w-5 h-5\" />\n                  <span>{item.name}</span>\n                </Link>\n              )}\n            </div>\n          ))}\n\n          {/* Viaggi su Misura - Mobile Prominent Button */}\n          <Link\n            href=\"/viaggi/su-misura\"\n            className=\"w-full flex items-center justify-center px-6 py-4 rounded-full font-semibold min-h-[48px] transition-all duration-300 shadow-md bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600\"\n            onClick={() => setIsOpen(false)}\n          >\n            <span>‚ú® Viaggi su Misura</span>\n          </Link>\n\n          {/* Mobile Actions */}\n          <div className=\"pt-4 border-t border-border space-y-3\">\n            <button\n              onClick={toggleTheme}\n              className=\"w-full flex items-center space-x-3 px-4 py-4 text-foreground hover:bg-muted rounded-xl transition-colors duration-200 min-h-[48px]\"\n            >\n              {theme === \"dark\" ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n              <span>Cambia Tema</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </nav>\n  )\n}\n","size_bytes":25634},"replit.md":{"content":"# Morocco Dreams - Travel Website\n\n### Overview\nProfessional travel CMS rebuilt with PostgreSQL database, unified content architecture, and modern admin dashboard for managing Moroccan travel experiences.\n\n### User Preferences\n- Development setup prioritizes Replit environment compatibility\n- Full-stack architecture with Next.js 14 and PostgreSQL\n- Zero hardcoded data - all content managed via admin panel\n\n### System Architecture\nThe \"Morocco Dreams\" website is a production-ready travel platform with a unified content management system.\n\n**Database (PostgreSQL):**\n- Neon Postgres database managed via Prisma ORM\n- Schema: 13 models (ContentItem, User, AdminUser, Booking, Wishlist, Friend, InstagramVideo, MenuItem, SiteSettings, FAQ, Testimonial, CustomTripRequest)\n- **Unified ContentItem Model**: Consolidates experiences, travels, services, and blog posts with type discriminator ('experience', 'travel', 'service', 'blog')\n- Type-specific metadata stored in JSON field (itinerary, highlights, included, notIncluded, pricing periods, features, etc.)\n- Separate models maintained for backward compatibility: Experience, Travel, Vehicle, BlogPost, City, Service\n- Admin access controlled via ADMIN_TOKEN environment variable\n\n**API Layer:**\n- `/api/content` - Unified CRUD endpoint for all content types (GET public, POST/PUT/DELETE admin-only)\n- `/api/bookings` - Full booking management with user/admin access\n- `/api/wishlist` - User wishlist management\n- `/api/friends` - Friend code system with shared wishlists\n- `/api/auth/check-admin` - Admin authentication check\n- Legacy endpoints maintained: `/api/experiences`, `/api/travels`, `/api/vehicles`, `/api/blog`, `/api/cities`, `/api/services`\n- All admin endpoints protected with Bearer token authorization (ADMIN_TOKEN)\n\n**Frontend Architecture:**\n- **Client-side rendering** with `useContent` hook for unified data fetching\n- **Public pages**: `/esperienze`, `/viaggi`, `/servizi`, `/blog` - all fetch from unified ContentItem API\n- **Detail pages**: `/esperienze/[slug]`, `/viaggi/[slug]`, `/servizi/[slug]`, `/blog/[slug]` - dynamic routes with SSG\n- **User dashboard**: `/dashboard` (bookings, wishlist, friends, profile)\n- **Admin dashboard**: `/admin/content` (unified CRUD), `/admin/bookings`, `/admin/users`\n\n**Authentication:**\n- Firebase Authentication for users\n- PostgreSQL AdminUser table for admin control\n- **Enterprise-grade security**: Multi-layer admin authentication\n  - Layer 1: Firebase Admin SDK verifies ID token\n  - Layer 2: PostgreSQL AdminUser table validates active admin status\n  - `lib/auth-helpers.ts` provides server-side `isAdmin()` function\n  - Zero client-side credential exposure (NEXT_PUBLIC_ADMIN_TOKEN removed)\n- Admin credentials: admin@moroccodreams.com (UID: 84BwELTSX9NQgORBBmJ7zbEZfwD2)\n\n**UI/UX:**\n- Mobile-first design with Tailwind CSS\n- shadcn/ui component library (Radix UI primitives)\n- Dark/light mode support\n- Interactive Mapbox maps for city exploration\n- Toast notifications for user feedback (sonner)\n- Loading states and error handling throughout\n\n### External Dependencies\n- **PostgreSQL**: Primary database (Neon hosted via Replit)\n- **Prisma**: ORM for type-safe database access\n- **Firebase Auth**: User authentication (legacy, still active for user accounts)\n- **Next.js 14**: React framework with App Router\n- **shadcn/ui**: UI component library\n- **Mapbox**: Interactive maps\n- **OpenAI**: Chatbot integration (optional)\n\n### Key Files\n- `prisma/schema.prisma` - Complete database schema with 13 models\n- `app/api/content/route.ts` - Unified content CRUD endpoint\n- `hooks/useContent.ts` - Client-side data fetching hook with loading/error states\n- `context/AuthContext.tsx` - Auth provider with admin check\n- `app/admin/content/page.tsx` - Unified admin content manager\n- `components/booking/BookingForm.tsx` - Multi-step booking wizard\n- `lib/db.ts` - Prisma client singleton\n- `lib/validators/content.ts` - Content type validation\n- `lib/auth-helpers.ts` - Server-side admin authentication helper\n- `lib/user-auth-server.ts` - Firebase Admin SDK initialization\n\n### Scripts\n- `npm run build` - Production build (Prisma generate + Next.js build)\n- `npm run dev` - Development server\n- `npm run db:push` - Push schema changes to database\n- `npm run db:studio` - Open Prisma Studio GUI\n- `npm run migrate` - Run database migrations\n- `npm run seed` - Seed database with initial data\n\n### Recent Changes (November 22, 2025)\n\n**COMPLETE SYSTEM REBUILD - FASE 7 COMPLETED:**\n- **Database Migration**: Successfully migrated from Firestore to PostgreSQL (Neon) with Prisma ORM 5.19.1\n- **Unified Content Model**: Created ContentItem model with type discriminator consolidating experiences, travels, services, and blog posts\n- **Data Integrity**: Migrated all content with zero data loss:\n    - ‚úÖ 16 Experiences migrated to ContentItem\n    - ‚úÖ 9 Travels migrated to ContentItem\n    - ‚úÖ 8 Blog Posts migrated to ContentItem\n    - ‚úÖ 19 Vehicles migrated to Vehicle model\n    - ‚úÖ 7 Cities migrated to City model\n    - ‚úÖ 3 Instagram Videos migrated\n    - Migration backup created: `backups/migration-backup-2025-11-22T18-30-15-203Z.json`\n- **API Unification**: Built `/api/content` unified CRUD endpoint with type-based filtering\n    - GET endpoint accepts type parameter ('experience', 'travel', 'service', 'blog')\n    - POST/PUT/DELETE protected with ADMIN_TOKEN Bearer authorization\n    - Legacy endpoints maintained for backward compatibility\n    - Cache invalidation via `revalidateTag` for real-time updates\n- **Auth System**: Migrated from Firestore to PostgreSQL\n    - AdminUser table in PostgreSQL for admin control\n    - Firebase Auth still active for user authentication\n    - Dual-layer security: Firebase tokens + PostgreSQL admin verification\n    - Admin user seeded: admin@moroccodreams.com\n- **Frontend Client Rendering**: Implemented `useContent` hook for unified data fetching\n    - Client-side hook with loading/error states\n    - Type-safe ContentItem interface\n    - Support for featured, bookable, category filtering\n    - Pagination with limit/offset\n- **Admin UI Rebuild**: Complete admin panel with unified content management\n    - `/admin/content` - ContentManager component with unified CRUD for all types\n    - `/admin/bookings` - BookingManager for reservation management\n    - `/admin/users` - User management panel\n    - Modal-driven UX with consistent patterns across all content types\n    - Real-time updates and toast notifications (useNotifications hook)\n- **User Features**: Complete user-facing functionality\n    - Multi-step BookingForm wizard with validation\n    - WishlistButton with authentication integration\n    - User Dashboard with tabs (bookings, wishlist, friends, profile)\n    - Friend code system with shared wishlists\n- **Production Build**: Successful production build with zero errors\n    - ‚úÖ TypeScript compilation successful\n    - ‚úÖ All 66 routes compiled\n    - ‚úÖ Static pages generated\n    - ‚úÖ Build artifacts optimized\n- **File Cleanup**: Deprecated files archived\n    - Archived `data/vehicles.ts` ‚Üí `data/vehicles.backup.ts`\n    - Archived `data/cities.ts` ‚Üí `data/cities.backup.ts`\n    - Archived `content/blog-posts.ts` ‚Üí `content/blog-posts.backup.ts`\n    - No hardcoded data remaining - all content in PostgreSQL database\n- **Documentation**: Complete system documentation updated in replit.md\n- **Production Ready**: All 7 phases complete, system ready for deployment\n\n**CRITICAL SECURITY HARDENING (November 22, 2025 - FINAL):**\n- **Security Vulnerability Fixed**: Eliminated client-exposed NEXT_PUBLIC_ADMIN_TOKEN vulnerability\n  - ‚ùå BEFORE: Admin token exposed in client code (anyone could extract and become admin)\n  - ‚úÖ AFTER: Multi-layer authentication (Firebase ID token + Postgres AdminUser check)\n- **Multi-Layer Authentication System**:\n  - Created `lib/auth-helpers.ts` with `isAdmin()` function\n  - Layer 1: Firebase Admin SDK verifies ID token authenticity\n  - Layer 2: PostgreSQL AdminUser table confirms active admin status\n  - All admin API endpoints now protected (content, bookings, legacy CRUD)\n- **Client-Side Token Removal**:\n  - Removed `lib/admin-token.ts` (client-side exposure point)\n  - Updated ALL 10 admin pages to use Firebase user tokens\n  - Updated ALL 5 admin modals to use secure authentication\n  - Zero client-side credential exposure achieved\n- **Build Fixes**:\n  - Fixed hardcoded data import errors (citta, vehicles pages)\n  - Exported `getFirebaseAdminApp()` from `lib/user-auth-server.ts`\n  - Production build: ‚úÖ Compiled successfully (zero errors)\n- **Architect Review**: ‚úÖ PASS - System approved for production deployment\n  - Security: No vulnerabilities detected beyond expected dynamic-route warnings\n  - Authentication: Multi-layer admin verification confirmed operational\n  - Build: All 66 routes compiled successfully\n- **Deployment Checklist**:\n  - ‚ö†Ô∏è CRITICAL: Remove NEXT_PUBLIC_ADMIN_TOKEN from environment variables before deployment\n  - ‚úÖ AdminUser table populated with admin@moroccodreams.com (UID: 84BwELTSX9NQgORBBmJ7zbEZfwD2)\n  - ‚úÖ All admin access requires Firebase sign-in + database role activation\n\n**Previous Migrations (November 20, 2025)**:\n- Migrated from Firestore to PostgreSQL with Prisma\n- Created separate models for Experience, Travel, Vehicle, BlogPost, City, Service\n- Built API routes for each content type with admin protection\n- Refactored admin panels to use PostgreSQL APIs instead of Firestore\n- Unified admin dashboard at `/admin` with sidebar navigation\n- Implemented URL validation system across all admin modals\n- Created FirestoreRulesBanner for security rule detection\n- Isolated admin layout from public site (no navbar/footer interference)","size_bytes":9750},"components/sections/MoroccoMapbox.tsx":{"content":"\"use client\"\n\nimport { useRef, useEffect, useState } from \"react\"\nimport { X, Star, ArrowRight } from \"lucide-react\"\n\n// Declare global types for Mapbox and GSAP\ndeclare global {\n  interface Window {\n    mapboxgl: any\n    gsap: any\n  }\n}\n\ninterface City {\n  id: string\n  name: string\n  description: string\n  coordinates: [number, number]\n  image: string\n  highlights: string[]\n  tours: string[]\n  icon: string\n}\n\ninterface MoroccoMapboxProps {\n  cities?: City[]\n}\n\nconst defaultCities: City[] = [\n  {\n    id: \"marrakech\",\n    name: \"Marrakech\",\n    description: \"La Perla Rossa del Marocco, famosa per la piazza Jemaa el-Fnaa e i suoi souks colorati.\",\n    coordinates: [-7.9811, 31.6295],\n    image: \"/images/marrakech-medina.png\",\n    icon: \"/images/marrakech-landmark-icon.png\",\n    highlights: [\"Jemaa el-Fnaa\", \"Souks\", \"Giardini Majorelle\", \"Palazzo Bahia\"],\n    tours: [\"Tour Citt√† Imperiali\", \"Marocco Completo\", \"Weekend a Marrakech\"],\n  },\n  {\n    id: \"casablanca\",\n    name: \"Casablanca\",\n    description: \"La capitale economica del Marocco, moderna e cosmopolita.\",\n    coordinates: [-7.5898, 33.5731],\n    image: \"/images/casablanca-hassan.png\",\n    icon: \"/images/casablanca-landmark-icon.png\",\n    highlights: [\"Moschea Hassan II\", \"Corniche\", \"Quartiere Habous\", \"Centro Moderno\"],\n    tours: [\"Marocco Moderno\", \"Tour Economico\", \"Citt√† Costiere\"],\n  },\n  {\n    id: \"fes\",\n    name: \"Fes\",\n    description: \"La capitale spirituale del Marocco, con la medina pi√π grande del mondo.\",\n    coordinates: [-5.0078, 34.0181],\n    image: \"/images/fes-architecture.png\",\n    icon: \"/images/fes-landmark-icon.png\",\n    highlights: [\"Medina UNESCO\", \"Universit√† Al Quaraouiyine\", \"Concerie Chouara\", \"Palazzo Reale\"],\n    tours: [\"Tour Citt√† Imperiali\", \"Cultura e Tradizioni\", \"Marocco del Nord\"],\n  },\n  {\n    id: \"rabat\",\n    name: \"Rabat\",\n    description: \"La capitale moderna del Marocco, patrimonio UNESCO.\",\n    coordinates: [-6.8498, 33.9716],\n    image: \"/images/imperial-cities-tour.png\",\n    icon: \"/images/rabat-landmark-icon.png\",\n    highlights: [\"Torre Hassan\", \"Kasbah Oudayas\", \"Mausoleo Mohammed V\", \"Chellah\"],\n    tours: [\"Tour Citt√† Imperiali\", \"Marocco Moderno\", \"Capitali del Mondo\"],\n  },\n  {\n    id: \"chefchaouen\",\n    name: \"Chefchaouen\",\n    description: \"La perla blu del Rif, citt√† dalle case azzurre.\",\n    coordinates: [-5.2636, 35.1688],\n    image: \"/images/chefchaouen-blue.png\",\n    icon: \"/images/chefchaouen-landmark-icon.png\",\n    highlights: [\"Medina blu\", \"Monti del Rif\", \"Artigianato\", \"Cascate Akchour\"],\n    tours: [\"Marocco del Nord\", \"Citt√† Colorate\", \"Trekking Rif\"],\n  },\n  {\n    id: \"essaouira\",\n    name: \"Essaouira\",\n    description: \"La citt√† del vento, perla della costa atlantica.\",\n    coordinates: [-9.7595, 31.5085],\n    image: \"/images/essaouira-coast.png\",\n    icon: \"/images/essaouira-landmark-icon.png\",\n    highlights: [\"Medina UNESCO\", \"Porto\", \"Spiagge\", \"Argan\"],\n    tours: [\"Costa Atlantica\", \"Surf e Relax\", \"Marocco Completo\"],\n  },\n  {\n    id: \"agadir\",\n    name: \"Agadir (Taghazout)\",\n    description: \"Moderna citt√† balneare con spiagge dorate e resort di lusso.\",\n    coordinates: [-9.5981, 30.4278],\n    image: \"/images/agadir-beach.png\",\n    icon: \"/images/agadir-landmark-icon.png\",\n    highlights: [\"Spiagge\", \"Souk El Had\", \"Kasbah\", \"Marina\"],\n    tours: [\"Costa Atlantica\", \"Relax Beach\", \"Sud del Marocco\"],\n  },\n  {\n    id: \"meknes\",\n    name: \"Meknes\",\n    description: \"La Versailles del Marocco, con i suoi grandiosi monumenti imperiali.\",\n    coordinates: [-5.5407, 33.873],\n    image: \"/images/imperial-cities.png\",\n    icon: \"/images/meknes-landmark-icon.png\",\n    highlights: [\"Bab Mansour\", \"Mausoleo Moulay Ismail\", \"Heri es-Souani\", \"Volubilis\"],\n    tours: [\"Tour Citt√† Imperiali\", \"Storia Antica\", \"Patrimoni UNESCO\"],\n  },\n  {\n    id: \"tangier\",\n    name: \"Tangeri\",\n    description: \"Porta d'ingresso al Marocco, crocevia tra Europa e Africa.\",\n    coordinates: [-5.834, 35.7595],\n    image: \"/images/tangier-strait.png\",\n    icon: \"/images/tangier-landmark-icon.png\",\n    highlights: [\"Stretto di Gibilterra\", \"Medina\", \"Kasbah\", \"Grotte di Ercole\"],\n    tours: [\"Marocco del Nord\", \"Porta d'Africa\", \"Storia Antica\"],\n  },\n  {\n    id: \"merzouga\",\n    name: \"Merzouga\",\n    description: \"Porta del Sahara, dune dorate di Erg Chebbi.\",\n    coordinates: [-4.0134, 31.0802],\n    image: \"/images/sahara-adventure.png\",\n    icon: \"/images/merzouga-landmark-icon.png\",\n    highlights: [\"Dune Erg Chebbi\", \"Notti stellate\", \"Cammelli\", \"Nomadi\"],\n    tours: [\"Tour del Deserto\", \"Sahara Adventure\", \"Marocco Completo\"],\n  },\n  {\n    id: \"ifrane\",\n    name: \"Ifrane\",\n    description: \"La Svizzera del Marocco, citt√† montana con architettura europea.\",\n    coordinates: [-5.1106, 33.5228],\n    image: \"/images/ifrane-mountains.png\",\n    icon: \"/images/ifrane-landmark-icon.png\",\n    highlights: [\"Architettura europea\", \"Parco nazionale\", \"Universit√† Al Akhawayn\", \"Cedri dell'Atlante\"],\n    tours: [\"Marocco del Nord\", \"Montagne Atlas\", \"Natura e Relax\"],\n  },\n  {\n    id: \"tetouan\",\n    name: \"T√©touan\",\n    description: \"La Colomba Bianca, patrimonio UNESCO con influenze andaluse.\",\n    coordinates: [-5.3684, 35.5889],\n    image: \"/images/tetouan-medina.png\",\n    icon: \"/images/tetouan-landmark-icon.png\",\n    highlights: [\"Medina UNESCO\", \"Architettura andalusa\", \"Museo etnografico\", \"Artigianato tradizionale\"],\n    tours: [\"Marocco del Nord\", \"Patrimoni UNESCO\", \"Cultura Andalusa\"],\n  },\n  {\n    id: \"nador\",\n    name: \"Nador\",\n    description: \"Citt√† costiera del Mediterraneo, porta verso l'Europa.\",\n    coordinates: [-2.9287, 35.1681],\n    image: \"/images/nador-coast.png\",\n    icon: \"/images/nador-landmark-icon.png\",\n    highlights: [\"Costa mediterranea\", \"Laguna di Marchica\", \"Porto commerciale\", \"Spiagge sabbiose\"],\n    tours: [\"Marocco del Nord\", \"Costa Mediterranea\", \"Natura Marina\"],\n  },\n]\n\nexport default function MoroccoMapbox({ cities = defaultCities }: MoroccoMapboxProps) {\n  const mapContainerRef = useRef<HTMLDivElement>(null)\n  const mapRef = useRef<any>(null)\n  const markersRef = useRef<any[]>([])\n  const [selectedCity, setSelectedCity] = useState<City | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    // Inject Google Fonts\n    const fontLink = document.createElement(\"link\")\n    fontLink.href =\n      \"https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Inter:wght@400;500;600&display=swap\"\n    fontLink.rel = \"stylesheet\"\n    document.head.appendChild(fontLink)\n\n    // Inject Mapbox CSS\n    const mapboxCSS = document.createElement(\"link\")\n    mapboxCSS.href = \"https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css\"\n    mapboxCSS.rel = \"stylesheet\"\n    mapboxCSS.crossOrigin = \"anonymous\"\n    document.head.appendChild(mapboxCSS)\n\n    // Inject GSAP\n    const gsapScript = document.createElement(\"script\")\n    gsapScript.src = \"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js\"\n    gsapScript.crossOrigin = \"anonymous\"\n    document.head.appendChild(gsapScript)\n\n    // Custom styles for Morocco Dreams theme\n    const customStyles = document.createElement(\"style\")\n    customStyles.textContent = `\n      /* Stile per il popup in hover */\n      .hover-popup {\n        z-index: 9;\n        pointer-events: auto !important;\n      }\n\n      /* Stile per il popup cliccato */\n      .modern-popup:not(.hover-popup) {\n        z-index: 10;\n      }\n\n      .hover-popup .mapboxgl-popup-content {\n        pointer-events: auto !important;\n      }\n\n      /* Mobile responsive */\n      @media screen and (max-width: 767px) {\n        .mapboxgl-popup-content {\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .mapboxgl-popup {\n          max-width: 90vw !important;\n          transform-origin: center center !important;\n          z-index: 1000 !important;\n        }\n        .mapboxgl-popup-content {\n          transition: transform 0.3s ease-out;\n          box-shadow: 0 3px 15px rgba(0, 0, 0, 0.2) !important;\n        }\n        .popup-image-container {\n          min-height: 180px;\n        }\n        .mapboxgl-popup {\n          will-change: transform;\n        }\n      }\n\n      .mapboxgl-canvas {\n        transition: transform 0.05s linear;\n      }\n\n      /* Mapbox Styles */\n      .mapboxgl-popup {\n        z-index: 10;\n        max-width: 320px !important;\n      }\n\n      .mapboxgl-popup-close-button {\n        display: none !important;\n      }\n\n      .mapboxgl-popup-content {\n        pointer-events: auto !important;\n        border-radius: 16px !important;\n        padding: 0 !important;\n        background-color: white !important;\n        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1) !important;\n        overflow: hidden !important;\n        transform-origin: 50% bottom !important;\n        font-family: 'Inter', sans-serif !important;\n      }\n\n      .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n        border-top-color: white !important;\n        transform-origin: center !important;\n      }\n\n      /* Custom Marker Styles */\n      .custom-marker {\n        width: 50px;\n        height: 50px;\n        background: linear-gradient(135deg, #f97316 0%, #dc2626 100%);\n        border: 3px solid #ffffff;\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.3s ease;\n        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);\n        position: relative;\n        z-index: 1;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 4px;\n      }\n\n      .custom-marker img {\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n        object-fit: cover;\n        border: 2px solid rgba(255,255,255,0.8);\n      }\n\n      .custom-marker:hover {\n        transform: scale(1.1);\n        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);\n        z-index: 10;\n      }\n\n      .custom-marker.clicked {\n        transform: scale(1.2);\n        box-shadow: 0 10px 30px rgba(249, 115, 22, 0.4);\n        border-color: #fbbf24;\n        z-index: 2;\n      }\n\n      .custom-marker:not(.clicked)::after {\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        background: rgba(249, 115, 22, 0.2);\n        border-radius: 50%;\n        opacity: 0;\n        transform: scale(1.5);\n        animation: marker-pulse 2s infinite;\n      }\n\n      @keyframes marker-pulse {\n        0% { transform: scale(1); opacity: 0.7; }\n        70% { transform: scale(1.5); opacity: 0; }\n        100% { transform: scale(1); opacity: 0; }\n      }\n\n      .mapboxgl-ctrl-attrib {\n        display: none !important;\n      }\n\n      /* Cities List Scrollbar */\n      .cities-list-container {\n        max-height: 600px;\n        overflow-y: auto;\n        position: relative;\n        scrollbar-width: thin;\n        scrollbar-color: #f97316 #f3f4f6;\n      }\n\n      .cities-list-container::-webkit-scrollbar {\n        width: 6px;\n      }\n\n      .cities-list-container::-webkit-scrollbar-track {\n        background: #f3f4f6;\n        border-radius: 3px;\n      }\n\n      .cities-list-container::-webkit-scrollbar-thumb {\n        background: linear-gradient(135deg, #f97316 0%, #dc2626 100%);\n        border-radius: 3px;\n      }\n\n      .cities-list-container::-webkit-scrollbar-thumb:hover {\n        background: linear-gradient(135deg, #ea580c 0%, #b91c1c 100%);\n      }\n\n      /* Fade effect at bottom */\n      .cities-list-container::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 40px;\n        background: linear-gradient(to bottom, transparent, rgba(249, 250, 251, 0.9));\n        pointer-events: none;\n        z-index: 1;\n      }\n\n      .dark .cities-list-container::after {\n        background: linear-gradient(to bottom, transparent, rgba(17, 24, 39, 0.9));\n      }\n\n      /* Popup Modern Styles */\n      .popup-modern {\n        width: 100%;\n        background: white;\n        position: relative;\n        border-radius: 16px;\n        overflow: hidden;\n      }\n\n      .popup-image-container {\n        position: relative;\n        width: 100%;\n        height: 180px;\n        overflow: hidden;\n        border-radius: 16px 16px 0 0;\n      }\n\n      .popup-image {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n        transition: transform 0.5s ease;\n      }\n\n      .popup-image:hover {\n        transform: scale(1.05);\n      }\n\n      .property-type-badge {\n        position: absolute;\n        top: 12px;\n        left: 12px;\n        background: rgba(255, 255, 255, 0.85);\n        padding: 6px 10px;\n        border-radius: 6px;\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        font-size: 12px;\n        font-weight: 600;\n        color: #333;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        z-index: 5;\n        font-family: 'Montserrat', sans-serif;\n        backdrop-filter: blur(2px);\n        -webkit-backdrop-filter: blur(2px);\n      }\n\n      .popup-content-wrapper {\n        padding: 16px;\n      }\n\n      .popup-title {\n        margin: 0 0 8px 0;\n        font-size: 18px;\n        font-weight: 600;\n        color: #1a1a1a;\n        line-height: 1.3;\n        font-family: 'Montserrat', sans-serif;\n      }\n\n      .popup-close-btn {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        background: rgba(255,255,255,0.9);\n        border: none;\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        color: #333;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.2);\n        z-index: 5;\n        transition: all 0.2s ease;\n      }\n\n      .popup-close-btn:hover {\n        background: white;\n        transform: scale(1.1);\n      }\n\n      .popup-close-btn svg {\n        width: 18px;\n        height: 18px;\n      }\n\n      .popup-actions {\n        display: flex;\n        gap: 8px;\n        margin-top: 16px;\n      }\n\n      .popup-btn {\n        flex: 1;\n        padding: 10px;\n        border-radius: 8px;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 6px;\n        transition: all 0.2s ease;\n        border: none;\n        text-decoration: none;\n        font-family: 'Montserrat', sans-serif;\n      }\n\n      .popup-btn.primary {\n        background: linear-gradient(135deg, #f97316 0%, #dc2626 100%);\n        color: white !important;\n      }\n\n      .popup-btn.primary:hover {\n        background: linear-gradient(135deg, #ea580c 0%, #b91c1c 100%);\n      }\n\n      .popup-btn.secondary {\n        background: #f5f5f5;\n        color: #333 !important;\n      }\n\n      .popup-btn.secondary:hover {\n        background: #e5e5e5;\n      }\n\n      .custom-marker:focus {\n        outline: 3px solid #4a90e2;\n        outline-offset: 2px;\n      }\n\n      .popup-btn:focus,\n      .popup-close-btn:focus {\n        outline: 3px solid #4a90e2;\n        outline-offset: 2px;\n      }\n\n      .mapboxgl-canvas-container {\n        transition: transform 0.5s ease;\n      }\n    `\n    document.head.appendChild(customStyles)\n\n    // Load Mapbox JS\n    const mapboxScript = document.createElement(\"script\")\n    mapboxScript.src = \"https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js\"\n    mapboxScript.crossOrigin = \"anonymous\"\n    mapboxScript.onload = initializeMap\n    document.head.appendChild(mapboxScript)\n\n    function initializeMap() {\n      if (!window.mapboxgl || !mapContainerRef.current) return\n\n      window.mapboxgl.accessToken =\n        \"pk.eyJ1IjoiZWRpc2JhbGkwMyIsImEiOiJjbTFvcnFvbjcxNTNnMmtxdnA0cjJkZGx0In0.gk1glAL0jkmWK1_Tyf4Fow\"\n\n      const map = new window.mapboxgl.Map({\n        container: mapContainerRef.current,\n        style: \"mapbox://styles/mapbox/satellite-streets-v12\",\n        center: [-6.2, 32.2],\n        zoom: 5.5,\n        attributionControl: false,\n      })\n\n      map.addControl(new window.mapboxgl.NavigationControl(), \"top-right\")\n\n      map.on(\"load\", () => {\n        setIsLoading(false)\n\n        // Clear existing markers\n        markersRef.current.forEach((marker) => marker.remove())\n        markersRef.current = []\n\n        const bounds = new window.mapboxgl.LngLatBounds()\n        let openPopup: any = null\n        let activeMarker: any = null\n        let hoverPopup: any = null\n        let hoverTimeout: any = null\n        let currentHoverMarker: any = null\n\n        cities.forEach((city) => {\n          // Create marker element with city-specific icon\n          const markerElement = document.createElement(\"div\")\n          markerElement.className = \"custom-marker\"\n          markerElement.setAttribute(\"aria-label\", city.name)\n          markerElement.setAttribute(\"role\", \"button\")\n          markerElement.setAttribute(\"tabindex\", \"0\")\n          markerElement.innerHTML = `\n            <img \n              src=\"${city.icon}\"\n              alt=\"${city.name}\"\n              style=\"width: 32px; height: 32px; border-radius: 50%; object-fit: cover;\"\n            />\n          `\n\n          // Create popup for hover\n          const popup = new window.mapboxgl.Popup({\n            closeButton: false,\n            closeOnClick: false,\n            offset: [0, -10],\n            className: \"hover-popup\",\n          }).setHTML(`\n            <div class=\"bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 min-w-[200px]\">\n              <h4 class=\"font-bold text-gray-900 dark:text-white mb-1\">${city.name}</h4>\n              <p class=\"text-sm text-gray-600 dark:text-gray-300 mb-2\">${city.description}</p>\n              <div class=\"text-xs text-orange-500 font-medium\">Clicca per esplorare</div>\n            </div>\n          `)\n\n          // Create marker with fixed positioning\n          const marker = new window.mapboxgl.Marker({\n            element: markerElement,\n            anchor: \"center\",\n          })\n            .setLngLat(city.coordinates)\n            .addTo(map)\n\n          markersRef.current.push(marker)\n          bounds.extend(city.coordinates)\n\n          // Add hover events for popup (desktop only)\n          if (window.innerWidth > 767) {\n            markerElement.addEventListener(\"mouseenter\", () => {\n              if (hoverTimeout) {\n                clearTimeout(hoverTimeout)\n                hoverTimeout = null\n              }\n              hoverTimeout = setTimeout(() => {\n                popup.setLngLat(city.coordinates).addTo(map)\n                hoverPopup = popup\n                currentHoverMarker = markerElement\n              }, 100)\n            })\n\n            markerElement.addEventListener(\"mouseleave\", () => {\n              if (hoverTimeout) {\n                clearTimeout(hoverTimeout)\n                hoverTimeout = null\n              }\n              if (hoverPopup) {\n                hoverPopup.remove()\n                hoverPopup = null\n              }\n              if (currentHoverMarker) {\n                currentHoverMarker.classList.remove(\"clicked\")\n                currentHoverMarker = null\n              }\n            })\n          }\n\n          markerElement.addEventListener(\"click\", () => {\n            if (hoverPopup) {\n              hoverPopup.remove()\n              hoverPopup = null\n            }\n\n            setSelectedCity(city)\n\n            // Aggiorna marker styles\n            document.querySelectorAll(\".custom-marker\").forEach((m) => m.classList.remove(\"clicked\"))\n            markerElement.classList.add(\"clicked\")\n\n            if (activeMarker && activeMarker !== markerElement) {\n              activeMarker.classList.remove(\"clicked\")\n            }\n            activeMarker = markerElement\n\n            // Chiudi eventuale popup gi√† aperto\n            if (openPopup) openPopup.remove()\n\n            // Fly to city e DOPO apri popup centrato\n            map.flyTo({\n              center: city.coordinates,\n              zoom: 8,\n              duration: 1500,\n            })\n\n            map.once(\"moveend\", () => {\n              openPopup = new window.mapboxgl.Popup({\n                offset: [0, -15],\n                closeButton: true,\n                closeOnClick: false,\n                className: \"modern-popup\",\n              })\n                .setLngLat(city.coordinates)\n                .setHTML(`\n                  <div class=\"bg-white p-4 rounded-xl shadow-lg min-w-[200px]\">\n                    <h4 class=\"font-bold text-gray-900 mb-1\">${city.name}</h4>\n                    <p class=\"text-sm text-gray-600 mb-2\">${city.description}</p>\n                    <div class=\"text-xs text-orange-500 font-medium\">Clicca per esplorare</div>\n                  </div>\n                `)\n                .addTo(map)\n            })\n          })\n\n          // Keyboard support\n          markerElement.addEventListener(\"keydown\", (e) => {\n            if (e.key === \"Enter\" || e.key === \" \") {\n              e.preventDefault()\n              markerElement.click()\n            }\n          })\n        })\n\n        // Fit map to bounds\n        if (cities.length > 0) {\n          map.fitBounds(bounds, {\n            padding: 50,\n            maxZoom: 6,\n          })\n        }\n\n        // Handle map click to close popups\n        map.on(\"click\", (e) => {\n          const target = e.originalEvent.target as Element\n          if (!target.closest(\".mapboxgl-popup\") && !target.closest(\".custom-marker\")) {\n            if (openPopup) {\n              openPopup.remove()\n              openPopup = null\n            }\n            if (hoverPopup) {\n              hoverPopup.remove()\n              hoverPopup = null\n            }\n            if (activeMarker) {\n              activeMarker.classList.remove(\"clicked\")\n              activeMarker = null\n            }\n            setSelectedCity(null)\n          }\n        })\n      })\n\n      mapRef.current = map\n    }\n\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.remove()\n      }\n    }\n  }, [cities])\n\n  const handleCitySelect = (city: City) => {\n    setSelectedCity(city)\n\n    if (mapRef.current) {\n      // Update marker styles\n      document.querySelectorAll(\".custom-marker\").forEach((m) => m.classList.remove(\"active\"))\n\n      // Fly to city\n      mapRef.current.flyTo({\n        center: city.coordinates,\n        zoom: 8,\n        duration: 1500,\n      })\n    }\n  }\n\n  return (\n    <div className=\"py-16 lg:py-24 bg-gray-50 dark:bg-gray-800\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-4\">\n            Esplora le Citt√† del Marocco\n          </h2>\n          <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\n            Clicca sui marker per scoprire le meraviglie di ogni destinazione\n          </p>\n        </div>\n\n        <div className=\"grid lg:grid-cols-4 gap-6 lg:gap-8\">\n          {/* Cities List - Mobile First with Scrollbar */}\n          <div className=\"lg:col-span-1 lg:order-1\">\n            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3 lg:mb-4\">Destinazioni</h3>\n            <div className=\"cities-list-container\">\n              <div className=\"space-y-2\">\n                {cities.map((city) => (\n                  <button\n                    key={city.id}\n                    onClick={() => handleCitySelect(city)}\n                    className={`\n                      w-full p-2 lg:p-3 rounded-lg text-left transition-all duration-300 hover:scale-105\n                      ${\n                        selectedCity?.id === city.id\n                          ? \"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                          : \"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 shadow-md hover:shadow-lg\"\n                      }\n                    `}\n                  >\n                    <div className=\"flex items-center space-x-2\">\n                      <div\n                        className={`\n                          w-6 h-6 lg:w-8 lg:h-8 rounded-full flex items-center justify-center text-xs font-bold overflow-hidden flex-shrink-0\n                          ${\n                            selectedCity?.id === city.id\n                              ? \"bg-white/20 text-white\"\n                              : \"bg-gradient-to-r from-orange-500 to-red-500 text-white\"\n                          }\n                        `}\n                      >\n                        <img\n                          src={city.icon || \"/placeholder.svg\"}\n                          alt={city.name}\n                          className=\"w-full h-full object-cover rounded-full\"\n                        />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h4\n                          className={`\n                            font-semibold text-xs lg:text-sm truncate\n                            ${selectedCity?.id === city.id ? \"text-white\" : \"text-gray-900 dark:text-white\"}\n                          `}\n                        >\n                          {city.name}\n                        </h4>\n                        <p\n                          className={`\n                            text-xs line-clamp-1 hidden lg:block\n                            ${selectedCity?.id === city.id ? \"text-white/80\" : \"text-gray-500 dark:text-gray-400\"}\n                          `}\n                        >\n                          {city.description}\n                        </p>\n                      </div>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Map Container */}\n          <div className=\"lg:col-span-3 lg:order-2\">\n            <div className=\"bg-white dark:bg-gray-900 rounded-3xl overflow-hidden shadow-xl\">\n              <div className=\"relative\">\n                {isLoading && (\n                  <div className=\"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center z-10\">\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500\"></div>\n                  </div>\n                )}\n                <div ref={mapContainerRef} className=\"w-full h-64 sm:h-80 lg:h-[600px]\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Selected City Details */}\n        {selectedCity && (\n          <div className=\"mt-8 lg:mt-12\">\n            <div className=\"bg-white dark:bg-gray-900 rounded-3xl p-6 lg:p-8 shadow-xl\">\n              <div className=\"flex items-start justify-between mb-6\">\n                <div>\n                  <h3 className=\"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n                    {selectedCity.name}\n                  </h3>\n                  <p className=\"text-gray-600 dark:text-gray-300 text-base lg:text-lg\">{selectedCity.description}</p>\n                </div>\n                <button\n                  onClick={() => setSelectedCity(null)}\n                  className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors duration-200\"\n                >\n                  <X className=\"w-5 h-5 text-gray-500\" />\n                </button>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-6 lg:gap-8\">\n                {/* Image */}\n                <div className=\"relative h-48 lg:h-64 rounded-2xl overflow-hidden\">\n                  <img\n                    src={selectedCity.image || \"/placeholder.svg?height=300&width=400\"}\n                    alt={selectedCity.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent\" />\n                  <div className=\"absolute bottom-4 left-4 text-white\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-sm font-medium\">Destinazione Top</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Details */}\n                <div className=\"space-y-6\">\n                  {/* Highlights */}\n                  <div>\n                    <h4 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3\">Cosa vedere</h4>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      {selectedCity.highlights.map((highlight, idx) => (\n                        <div key={idx} className=\"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300\">\n                          <div className=\"w-2 h-2 bg-orange-500 rounded-full flex-shrink-0\" />\n                          <span>{highlight}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Tours */}\n                  <div>\n                    <h4 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3\">Tour disponibili</h4>\n                    <div className=\"space-y-2\">\n                      {selectedCity.tours.map((tour, idx) => (\n                        <div\n                          key={idx}\n                          className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl\"\n                        >\n                          <span className=\"text-sm font-medium text-gray-900 dark:text-white\">{tour}</span>\n                          <ArrowRight className=\"w-4 h-4 text-orange-500\" />\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex flex-col sm:flex-row gap-3\">\n                    <button className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-6 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-sm\">\n                      Scopri {selectedCity.name}\n                    </button>\n                    <button className=\"flex-1 border-2 border-orange-500 text-orange-500 py-3 px-6 rounded-xl hover:bg-orange-500 hover:text-white transition-all duration-300 font-semibold text-sm\">\n                      Prenota Tour\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","size_bytes":30573},"app/auth/signin/page.tsx":{"content":"\"use client\";\n\nimport { useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport SignIn from '@/components/auth/SignIn';\n\n// Helper function to sanitize redirect paths\nfunction sanitizeRedirectPath(path: string | null): string {\n  if (!path) return '/dashboard';\n  \n  // Only allow internal paths starting with '/' and not containing '://'\n  if (path.startsWith('/') && !path.includes('://')) {\n    return path;\n  }\n  \n  return '/dashboard'; // Fallback to safe default\n}\n\nexport default function SignInPage() {\n  const searchParams = useSearchParams();\n  const rawRedirect = searchParams.get('from');\n  const redirectTo = sanitizeRedirectPath(rawRedirect);\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 dark:from-background dark:to-muted flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <Link href=\"/\" className=\"inline-block\">\n            <h1 className=\"text-3xl font-bold text-orange-600 mb-2\">Morocco Dreams</h1>\n          </Link>\n          <p className=\"text-muted-foreground\">\n            Accedi al tuo account\n          </p>\n        </div>\n\n        {/* Sign In Form */}\n        <div className=\"bg-card border border-border rounded-2xl shadow-xl p-8\">\n          <SignIn redirectTo={redirectTo} />\n        </div>\n\n        {/* Back to site */}\n        <div className=\"text-center mt-6\">\n          <Link \n            href=\"/\" \n            className=\"text-muted-foreground hover:text-foreground text-sm transition-colors\"\n          >\n            ‚Üê Torna al sito\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":1698},"lib/cms.ts":{"content":"// CMS Content Management System for Morocco Dreams\nimport { firestoreService, COLLECTIONS, CMSContent, City, PackageComponent, PackageTemplate, UserTheme, Guide, BlogPost } from './firestore';\nimport { Timestamp } from 'firebase/firestore';\n\n// Re-export types using export type for isolatedModules\nexport type { CMSContent, City, PackageComponent, PackageTemplate, UserTheme, Guide, BlogPost } from './firestore';\n\nexport interface CMSSection {\n  id?: string;\n  name: string;\n  component: string;\n  visible: boolean;\n  order: number;\n  props: Record<string, any>;\n  content: {\n    [language: string]: Record<string, any>;\n  };\n  updatedAt: Timestamp;\n}\n\nexport class CMSService {\n  // Content Management\n  static async getAllContent(type?: string): Promise<CMSContent[]> {\n    try {\n      if (type) {\n        return await firestoreService.getWhere(COLLECTIONS.cmsContent, 'type', '==', type);\n      }\n      return await firestoreService.getAll(COLLECTIONS.cmsContent);\n    } catch (error) {\n      console.error('Error fetching CMS content:', error);\n      return [];\n    }\n  }\n\n  static async getContentBySlug(slug: string): Promise<CMSContent | null> {\n    try {\n      const results = await firestoreService.getWhere<CMSContent>(COLLECTIONS.cmsContent, 'slug', '==', slug);\n      return results.length > 0 ? results[0] : null;\n    } catch (error) {\n      console.error('Error fetching content by slug:', error);\n      return null;\n    }\n  }\n\n  static async saveContent(content: Omit<CMSContent, 'id'>): Promise<string> {\n    try {\n      return await firestoreService.create(COLLECTIONS.cmsContent, content);\n    } catch (error) {\n      console.error('Error saving CMS content:', error);\n      throw error;\n    }\n  }\n\n  static async updateContent(id: string, content: Partial<CMSContent>): Promise<void> {\n    try {\n      await firestoreService.update(COLLECTIONS.cmsContent, id, content);\n    } catch (error) {\n      console.error('Error updating CMS content:', error);\n      throw error;\n    }\n  }\n\n  static async deleteContent(id: string): Promise<void> {\n    try {\n      await firestoreService.delete(COLLECTIONS.cmsContent, id);\n    } catch (error) {\n      console.error('Error deleting CMS content:', error);\n      throw error;\n    }\n  }\n\n  // Section Management\n  static async getAllSections(): Promise<CMSSection[]> {\n    try {\n      return await firestoreService.getAll(COLLECTIONS.cmsSections);\n    } catch (error) {\n      console.error('Error fetching CMS sections:', error);\n      return [];\n    }\n  }\n\n  static async saveSection(section: Omit<CMSSection, 'id'>): Promise<string> {\n    try {\n      return await firestoreService.create(COLLECTIONS.cmsSections, section);\n    } catch (error) {\n      console.error('Error saving CMS section:', error);\n      throw error;\n    }\n  }\n\n  static async updateSection(id: string, section: Partial<CMSSection>): Promise<void> {\n    try {\n      await firestoreService.update(COLLECTIONS.cmsSections, id, section);\n    } catch (error) {\n      console.error('Error updating CMS section:', error);\n      throw error;\n    }\n  }\n\n  // Bulk Operations\n  static async publishContent(ids: string[]): Promise<void> {\n    try {\n      const promises = ids.map(id => \n        firestoreService.update(COLLECTIONS.cmsContent, id, { published: true })\n      );\n      await Promise.all(promises);\n    } catch (error) {\n      console.error('Error bulk publishing content:', error);\n      throw error;\n    }\n  }\n\n  static async unpublishContent(ids: string[]): Promise<void> {\n    try {\n      const promises = ids.map(id => \n        firestoreService.update(COLLECTIONS.cmsContent, id, { published: false })\n      );\n      await Promise.all(promises);\n    } catch (error) {\n      console.error('Error bulk unpublishing content:', error);\n      throw error;\n    }\n  }\n\n  // City Management\n  static async getAllCities(): Promise<City[]> {\n    try {\n      return await firestoreService.getWhere(COLLECTIONS.cities, 'published', '==', true);\n    } catch (error) {\n      console.error('Error fetching cities:', error);\n      return [];\n    }\n  }\n\n  static async getCityBySlug(slug: string): Promise<City | null> {\n    try {\n      const results = await firestoreService.getWhere<City>(COLLECTIONS.cities, 'slug', '==', slug);\n      return results.length > 0 ? results[0] : null;\n    } catch (error) {\n      console.error('Error fetching city by slug:', error);\n      return null;\n    }\n  }\n\n  static async saveCity(city: Omit<City, 'id'>): Promise<string> {\n    try {\n      return await firestoreService.create(COLLECTIONS.cities, city);\n    } catch (error) {\n      console.error('Error saving city:', error);\n      throw error;\n    }\n  }\n\n  // Package Management\n  static async getAllPackageComponents(): Promise<PackageComponent[]> {\n    try {\n      return await firestoreService.getWhere(COLLECTIONS.packageComponents, 'available', '==', true);\n    } catch (error) {\n      console.error('Error fetching package components:', error);\n      return [];\n    }\n  }\n\n  static async getPackageTemplates(): Promise<PackageTemplate[]> {\n    try {\n      return await firestoreService.getWhere(COLLECTIONS.packageTemplates, 'published', '==', true);\n    } catch (error) {\n      console.error('Error fetching package templates:', error);\n      return [];\n    }\n  }\n\n  static async savePackageTemplate(template: Omit<PackageTemplate, 'id'>): Promise<string> {\n    try {\n      return await firestoreService.create(COLLECTIONS.packageTemplates, template);\n    } catch (error) {\n      console.error('Error saving package template:', error);\n      throw error;\n    }\n  }\n\n  // Blog Management\n  static async getAllBlogPosts(published?: boolean): Promise<BlogPost[]> {\n    try {\n      if (published !== undefined) {\n        return await firestoreService.getWhere(COLLECTIONS.blog, 'published', '==', published);\n      }\n      return await firestoreService.getAll(COLLECTIONS.blog);\n    } catch (error) {\n      console.error('Error fetching blog posts:', error);\n      return [];\n    }\n  }\n\n  static async getBlogPostBySlug(slug: string): Promise<BlogPost | null> {\n    try {\n      const results = await firestoreService.getWhere<BlogPost>(COLLECTIONS.blog, 'slug', '==', slug);\n      return results.length > 0 ? results[0] : null;\n    } catch (error) {\n      console.error('Error fetching blog post by slug:', error);\n      return null;\n    }\n  }\n\n  static async saveBlogPost(post: Omit<BlogPost, 'id'>): Promise<string> {\n    try {\n      return await firestoreService.create(COLLECTIONS.blog, post);\n    } catch (error) {\n      console.error('Error saving blog post:', error);\n      throw error;\n    }\n  }\n\n  // Guide Management\n  static async getAllGuides(): Promise<Guide[]> {\n    try {\n      return await firestoreService.getWhere(COLLECTIONS.guides, 'isPublic', '==', true);\n    } catch (error) {\n      console.error('Error fetching guides:', error);\n      return [];\n    }\n  }\n\n  static async saveGuide(guide: Omit<Guide, 'id'>): Promise<string> {\n    try {\n      return await firestoreService.create(COLLECTIONS.guides, guide);\n    } catch (error) {\n      console.error('Error saving guide:', error);\n      throw error;\n    }\n  }\n\n  // User Theme Management\n  static async getUserThemes(userId: string): Promise<UserTheme[]> {\n    try {\n      return await firestoreService.getWhere(COLLECTIONS.userThemes, 'userId', '==', userId);\n    } catch (error) {\n      console.error('Error fetching user themes:', error);\n      return [];\n    }\n  }\n\n  static async saveUserTheme(theme: Omit<UserTheme, 'id'>): Promise<string> {\n    try {\n      return await firestoreService.create(COLLECTIONS.userThemes, theme);\n    } catch (error) {\n      console.error('Error saving user theme:', error);\n      throw error;\n    }\n  }\n}","size_bytes":7731},"context/AuthContext.tsx":{"content":"\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { User } from 'firebase/auth';\nimport { onAuthStateChange, getUserProfile, handleRedirectResult, signIn as authSignIn, signUp as authSignUp, signOutUser, signInWithGoogle as authSignInWithGoogle } from '@/lib/auth';\nimport { UserProfile } from '@/lib/auth';\n\ninterface AuthContextType {\n  user: User | null;\n  userProfile: UserProfile | null;\n  loading: boolean;\n  isAdmin: boolean;\n  adminRole: string | null;\n  signIn: (email: string, password: string) => Promise<void>;\n  signUp: (email: string, password: string, displayName?: string) => Promise<void>;\n  signInWithGoogle: () => Promise<User | null>;\n  signOut: () => Promise<void>;\n  testGetIdToken: () => Promise<string | null>;\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  userProfile: null,\n  loading: true,\n  isAdmin: false,\n  adminRole: null,\n  signIn: async () => {},\n  signUp: async () => {},\n  signInWithGoogle: async () => null,\n  signOut: async () => {},\n  testGetIdToken: async () => null,\n});\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [adminRole, setAdminRole] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Check admin status from Postgres via API\n  const checkAdminStatus = async (user: User): Promise<{ isAdmin: boolean; role: string | null }> => {\n    try {\n      console.log('[AUTH] Checking admin status for user:', user.uid);\n      \n      // Get Firebase ID token\n      const token = await user.getIdToken();\n      \n      if (!token) {\n        console.warn('[AUTH] No ID token available');\n        return { isAdmin: false, role: null };\n      }\n      \n      console.log('[AUTH] Got ID token (first 20 chars):', token.substring(0, 20) + '...');\n      \n      // Call API to check admin status\n      const response = await fetch('/api/auth/check-admin', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (!response.ok) {\n        console.error('[AUTH] API error:', response.status, response.statusText);\n        return { isAdmin: false, role: null };\n      }\n      \n      const data = await response.json();\n      console.log('[AUTH] Admin check response:', data);\n      \n      return {\n        isAdmin: data.isAdmin || false,\n        role: data.role || null\n      };\n    } catch (error) {\n      console.error('[AUTH] Error checking admin status:', error);\n      return { isAdmin: false, role: null };\n    }\n  };\n\n  useEffect(() => {\n    console.log('[AUTH] Initializing AuthProvider...');\n    \n    // Handle redirect result on page load\n    handleRedirectResult().catch(console.error);\n\n    // Listen for auth state changes\n    const unsubscribe = onAuthStateChange(async (user) => {\n      console.log('[AUTH] Auth state changed:', user ? `User: ${user.email} (${user.uid})` : 'No user');\n      setUser(user);\n      \n      if (user) {\n        try {\n          console.log('[AUTH] Loading user profile and checking admin status...');\n          \n          const [profile, adminStatus] = await Promise.all([\n            getUserProfile(user.uid),\n            checkAdminStatus(user)\n          ]);\n          \n          setUserProfile(profile);\n          setIsAdmin(adminStatus.isAdmin);\n          setAdminRole(adminStatus.role);\n          \n          console.log('[AUTH] User profile loaded. isAdmin:', adminStatus.isAdmin, 'role:', adminStatus.role);\n        } catch (error) {\n          console.error('[AUTH] Error loading user profile:', error);\n          setIsAdmin(false);\n          setAdminRole(null);\n        }\n      } else {\n        console.log('[AUTH] User logged out, clearing state');\n        setUserProfile(null);\n        setIsAdmin(false);\n        setAdminRole(null);\n      }\n      \n      setLoading(false);\n      console.log('[AUTH] Auth state update complete');\n    });\n\n    return unsubscribe;\n  }, []);\n\n  // Auth functions\n  const signIn = async (email: string, password: string) => {\n    await authSignIn(email, password);\n  };\n\n  const signUp = async (email: string, password: string, displayName?: string) => {\n    await authSignUp(email, password, displayName);\n  };\n\n  const signInWithGoogle = async () => {\n    return await authSignInWithGoogle();\n  };\n\n  const signOut = async () => {\n    await signOutUser();\n  };\n\n  // Test ID token retrieval\n  const testGetIdToken = async (): Promise<string | null> => {\n    try {\n      if (!user) {\n        console.log('[AUTH TEST] No user logged in');\n        return null;\n      }\n      \n      console.log('[AUTH TEST] Testing getIdToken for user:', user.uid);\n      const token = await user.getIdToken();\n      \n      if (token) {\n        console.log('[AUTH TEST] Token retrieved successfully');\n        console.log('[AUTH TEST] Token (first 20 chars):', token.substring(0, 20) + '...');\n        console.log('[AUTH TEST] Token length:', token.length);\n        return token;\n      } else {\n        console.warn('[AUTH TEST] Token is null or undefined');\n        return null;\n      }\n    } catch (error) {\n      console.error('[AUTH TEST] Error getting ID token:', error);\n      return null;\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ \n      user, \n      userProfile, \n      loading, \n      isAdmin,\n      adminRole,\n      signIn,\n      signUp,\n      signInWithGoogle,\n      signOut,\n      testGetIdToken\n    }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};","size_bytes":5916},"components/admin/UsersManagement.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Users, Search, Filter, MoreVertical, Shield, User, Mail, Calendar, Trash2, Edit } from 'lucide-react';\nimport { AdminService } from '@/lib/admin';\nimport { UserProfile } from '@/lib/auth';\n\nexport default function UsersManagement() {\n  const [users, setUsers] = useState<UserProfile[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterRole, setFilterRole] = useState<string>('all');\n\n  useEffect(() => {\n    const loadUsers = async () => {\n      try {\n        const userData = await AdminService.getUsers(100);\n        setUsers(userData);\n      } catch (err: any) {\n        setError('Errore nel caricamento degli utenti');\n        console.error('Users loading error:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadUsers();\n  }, []);\n\n  const filteredUsers = users.filter(user => {\n    const matchesSearch = !searchTerm || \n      user.displayName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      user.email?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesRole = filterRole === 'all' || user.role === filterRole;\n    \n    return matchesSearch && matchesRole;\n  });\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'admin':\n        return 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300';\n      case 'editor':\n        return 'bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300';\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300';\n    }\n  };\n\n  const getRoleIcon = (role: string) => {\n    switch (role) {\n      case 'admin':\n        return <Shield className=\"w-4 h-4\" />;\n      case 'editor':\n        return <Edit className=\"w-4 h-4\" />;\n      default:\n        return <User className=\"w-4 h-4\" />;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Gestione Utenti</h2>\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(5)].map((_, i) => (\n              <div key={i} className=\"h-16 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Gestione Utenti</h2>\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300\">\n          {error}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Gestione Utenti</h2>\n        <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n          <Users className=\"w-4 h-4\" />\n          <span>{filteredUsers.length} di {users.length} utenti</span>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          {/* Search */}\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Cerca per nome o email...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground\"\n            />\n          </div>\n\n          {/* Role Filter */}\n          <div className=\"relative\">\n            <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <select\n              value={filterRole}\n              onChange={(e) => setFilterRole(e.target.value)}\n              className=\"pl-10 pr-8 py-2 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground\"\n            >\n              <option value=\"all\">Tutti i ruoli</option>\n              <option value=\"user\">Utenti</option>\n              <option value=\"editor\">Editor</option>\n              <option value=\"admin\">Admin</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-border overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700 border-b border-border\">\n              <tr>\n                <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Utente\n                </th>\n                <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Ruolo\n                </th>\n                <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Registrazione\n                </th>\n                <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Attivit√†\n                </th>\n                <th className=\"px-6 py-4 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Azioni\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-border\">\n              {filteredUsers.map((user) => (\n                <tr key={user.uid} className=\"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\n                  <td className=\"px-6 py-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold\">\n                        {user.displayName?.charAt(0)?.toUpperCase() || user.email?.charAt(0)?.toUpperCase() || 'U'}\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900 dark:text-white\">\n                          {user.displayName || 'Nome non disponibile'}\n                        </p>\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center\">\n                          <Mail className=\"w-3 h-3 mr-1\" />\n                          {user.email}\n                        </p>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <span className={`inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${getRoleColor(user.role)}`}>\n                      {getRoleIcon(user.role)}\n                      <span className=\"capitalize\">{user.role}</span>\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400\">\n                      <Calendar className=\"w-4 h-4 mr-1\" />\n                      {user.createdAt ? \n                        (user.createdAt instanceof Date ? \n                          user.createdAt.toLocaleDateString('it-IT') : \n                          new Date((user.createdAt as any).seconds * 1000).toLocaleDateString('it-IT')\n                        ) : 'N/A'}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <div className=\"text-sm\">\n                      <p className=\"text-gray-900 dark:text-white\">\n                        Newsletter: {user.preferences?.newsletter ? 'S√¨' : 'No'}\n                      </p>\n                      <p className=\"text-gray-500 dark:text-gray-400\">\n                        Notifiche: {user.preferences?.notifications ? 'Attive' : 'Disattive'}\n                      </p>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 text-right\">\n                    <button className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors\">\n                      <MoreVertical className=\"w-4 h-4 text-gray-500\" />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredUsers.length === 0 && (\n          <div className=\"p-8 text-center\">\n            <Users className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400\">\n              {users.length === 0 ? 'Nessun utente registrato' : 'Nessun utente trovato con i filtri selezionati'}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Stats Summary */}\n      <div className=\"grid md:grid-cols-3 gap-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center space-x-3\">\n            <User className=\"w-8 h-8 text-orange-600\" />\n            <div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Utenti Standard</p>\n              <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                {users.filter(u => u.role === 'user').length}\n              </p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center space-x-3\">\n            <Edit className=\"w-8 h-8 text-green-600\" />\n            <div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Editor</p>\n              <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                {users.filter(u => u.role === 'editor').length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center space-x-3\">\n            <Shield className=\"w-8 h-8 text-red-600\" />\n            <div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Amministratori</p>\n              <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                {users.filter(u => u.role === 'admin').length}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":11053},"components/forms/NewsletterForm.tsx":{"content":"\"use client\";\n\nimport { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { ArrowRight, Check, AlertCircle, Loader2 } from 'lucide-react';\nimport { firestoreService, COLLECTIONS } from '@/lib/firestore';\n\ninterface NewsletterSubscription {\n  email: string;\n  subscribedAt: Date;\n  active: boolean;\n  source: string;\n}\n\nexport default function NewsletterForm() {\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email) return;\n\n    setLoading(true);\n    setError('');\n\n    try {\n      // Basic email validation\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(email)) {\n        throw new Error('Per favore inserisci un indirizzo email valido');\n      }\n\n      // Check if email already exists\n      const existingSubscriptions = await firestoreService.getWhere<NewsletterSubscription>(\n        'newsletter_subscriptions', \n        'email', \n        '==', \n        email\n      );\n\n      if (existingSubscriptions.length > 0) {\n        throw new Error('Questa email √® gi√† iscritta alla newsletter');\n      }\n\n      // Create new subscription\n      const subscription: Omit<NewsletterSubscription, 'id'> = {\n        email: email.toLowerCase().trim(),\n        subscribedAt: new Date(),\n        active: true,\n        source: 'footer'\n      };\n\n      await firestoreService.create<NewsletterSubscription>('newsletter_subscriptions', subscription);\n\n      setEmail('');\n      setSuccess(true);\n\n      // Hide success message after 3 seconds\n      setTimeout(() => {\n        setSuccess(false);\n      }, 3000);\n\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore. Riprova pi√π tardi.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3\"\n      >\n        <motion.div\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          transition={{ delay: 0.2, type: \"spring\" }}\n          className=\"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0\"\n        >\n          <Check className=\"w-4 h-4 text-white\" />\n        </motion.div>\n        <div>\n          <p className=\"text-green-800 dark:text-green-200 font-medium text-sm\">\n            Iscrizione completata!\n          </p>\n          <p className=\"text-green-600 dark:text-green-400 text-xs\">\n            Riceverai le nostre migliori offerte\n          </p>\n        </div>\n      </motion.div>\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-3\">\n      <div>\n        <label htmlFor=\"newsletter-email\" className=\"block text-sm font-medium text-foreground mb-2\">\n          Newsletter\n        </label>\n        <p className=\"text-muted-foreground text-sm mb-3\">\n          Ricevi le migliori offerte e novit√† sui viaggi in Marocco\n        </p>\n      </div>\n\n      {error && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 flex items-center gap-2\"\n        >\n          <AlertCircle className=\"w-4 h-4 text-red-500 flex-shrink-0\" />\n          <p className=\"text-red-700 dark:text-red-300 text-xs\">{error}</p>\n        </motion.div>\n      )}\n\n      <div className=\"flex gap-2\">\n        <input\n          id=\"newsletter-email\"\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"la-tua-email@esempio.com\"\n          className=\"flex-1 px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n          required\n        />\n        <button\n          type=\"submit\"\n          disabled={loading || !email}\n          className=\"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors duration-300 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\"\n        >\n          {loading ? (\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n          ) : (\n            <>\n              Iscriviti\n              <ArrowRight className=\"w-4 h-4\" />\n            </>\n          )}\n        </button>\n      </div>\n    </form>\n  );\n}","size_bytes":4705},"lib/mapbox-enhanced.ts":{"content":"// Enhanced Mapbox Integration System for Morocco Dreams\nimport mapboxgl from 'mapbox-gl';\n\nexport interface MapConfig {\n  container: string;\n  style: string;\n  center: [number, number];\n  zoom: number;\n  interactive: boolean;\n}\n\nexport interface MarkerData {\n  id: string;\n  coordinates: [number, number];\n  title: string;\n  description?: string;\n  type: 'city' | 'destination' | 'experience' | 'hotel' | 'activity';\n  image?: string;\n  price?: number;\n  rating?: number;\n  duration?: string;\n}\n\nexport interface ItineraryRoute {\n  id: string;\n  name: string;\n  coordinates: [number, number][];\n  color: string;\n  duration: string;\n  highlights: string[];\n  type: 'driving' | 'walking' | 'flight';\n}\n\nexport class EnhancedMapboxService {\n  private static instance: EnhancedMapboxService | null = null;\n  private map: mapboxgl.Map | null = null;\n  private markers: mapboxgl.Marker[] = [];\n  private apiKey: string = '';\n\n  constructor(apiKey?: string) {\n    this.apiKey = apiKey || process.env.NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN || '';\n    if (this.apiKey) {\n      mapboxgl.accessToken = this.apiKey;\n    }\n  }\n\n  static getInstance(): EnhancedMapboxService {\n    if (!EnhancedMapboxService.instance) {\n      EnhancedMapboxService.instance = new EnhancedMapboxService();\n    }\n    return EnhancedMapboxService.instance;\n  }\n\n  // Initialize map with enhanced features\n  initializeMap(config: MapConfig): mapboxgl.Map {\n    this.map = new mapboxgl.Map({\n      container: config.container,\n      style: config.style || 'mapbox://styles/mapbox/satellite-streets-v12',\n      center: config.center,\n      zoom: config.zoom,\n      interactive: config.interactive !== false\n    });\n\n    // Add navigation controls\n    this.map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n\n    // Add fullscreen control\n    this.map.addControl(new mapboxgl.FullscreenControl(), 'top-right');\n\n    // Add geolocation control\n    this.map.addControl(\n      new mapboxgl.GeolocateControl({\n        positionOptions: {\n          enableHighAccuracy: true\n        },\n        trackUserLocation: true,\n        showUserHeading: true\n      }), \n      'top-right'\n    );\n\n    return this.map;\n  }\n\n  // Add custom markers with popups\n  addMarkers(markersData: MarkerData[]): void {\n    if (!this.map) return;\n\n    markersData.forEach((markerData) => {\n      // Create custom marker element\n      const markerElement = this.createCustomMarkerElement(markerData);\n\n      // Create marker\n      const marker = new mapboxgl.Marker(markerElement)\n        .setLngLat(markerData.coordinates)\n        .addTo(this.map!);\n\n      // Create popup content\n      const popupContent = this.createPopupContent(markerData);\n\n      // Add popup\n      const popup = new mapboxgl.Popup({ \n        offset: 25,\n        closeButton: true,\n        closeOnClick: false \n      }).setHTML(popupContent);\n\n      marker.setPopup(popup);\n      this.markers.push(marker);\n    });\n  }\n\n  // Create custom marker element\n  private createCustomMarkerElement(markerData: MarkerData): HTMLElement {\n    const element = document.createElement('div');\n    element.className = 'custom-marker';\n    \n    const iconMap = {\n      city: 'üèõÔ∏è',\n      destination: 'üìç',\n      experience: 'üéØ',\n      hotel: 'üè®',\n      activity: '‚≠ê'\n    };\n\n    element.innerHTML = `\n      <div class=\"marker-icon ${markerData.type}\">\n        <span class=\"marker-emoji\">${iconMap[markerData.type] || 'üìç'}</span>\n      </div>\n    `;\n\n    // Add styles\n    element.style.cssText = `\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      background: linear-gradient(135deg, #ea580c, #dc2626);\n      border: 3px solid white;\n      box-shadow: 0 4px 8px rgba(0,0,0,0.3);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      transition: transform 0.2s ease;\n    `;\n\n    // Add hover effect\n    element.addEventListener('mouseenter', () => {\n      element.style.transform = 'scale(1.1)';\n    });\n\n    element.addEventListener('mouseleave', () => {\n      element.style.transform = 'scale(1)';\n    });\n\n    return element;\n  }\n\n  // Create popup content\n  private createPopupContent(markerData: MarkerData): string {\n    return `\n      <div class=\"custom-popup\" style=\"min-width: 250px;\">\n        ${markerData.image ? `\n          <img src=\"${markerData.image}\" alt=\"${markerData.title}\" \n               style=\"width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 12px;\">\n        ` : ''}\n        \n        <h3 style=\"margin: 0 0 8px 0; font-size: 16px; font-weight: 600; color: #1f2937;\">\n          ${markerData.title}\n        </h3>\n        \n        ${markerData.description ? `\n          <p style=\"margin: 0 0 12px 0; font-size: 14px; color: #6b7280; line-height: 1.4;\">\n            ${markerData.description}\n          </p>\n        ` : ''}\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;\">\n          ${markerData.rating ? `\n            <div style=\"display: flex; align-items: center; gap: 4px;\">\n              <span style=\"color: #f59e0b;\">‚≠ê</span>\n              <span style=\"font-size: 14px; font-weight: 500;\">${markerData.rating}</span>\n            </div>\n          ` : ''}\n          \n          ${markerData.duration ? `\n            <span style=\"font-size: 12px; color: #6b7280; background: #f3f4f6; padding: 2px 8px; border-radius: 12px;\">\n              ${markerData.duration}\n            </span>\n          ` : ''}\n        </div>\n        \n        ${markerData.price ? `\n          <div style=\"text-align: center; margin-top: 12px;\">\n            <span style=\"font-size: 18px; font-weight: 700; color: #ea580c;\">\n              ‚Ç¨${markerData.price}\n            </span>\n            <button onclick=\"window.openBookingModal('${markerData.id}')\" \n                    style=\"display: block; width: 100%; margin-top: 8px; background: linear-gradient(135deg, #ea580c, #dc2626); \n                           color: white; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 500; cursor: pointer;\">\n              Prenota Ora\n            </button>\n          </div>\n        ` : ''}\n      </div>\n    `;\n  }\n\n  // Add itinerary route\n  addItineraryRoute(route: ItineraryRoute): void {\n    if (!this.map) return;\n\n    const routeId = `route-${route.id}`;\n\n    // Add source\n    this.map.addSource(routeId, {\n      type: 'geojson',\n      data: {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'LineString',\n          coordinates: route.coordinates\n        }\n      }\n    });\n\n    // Add layer\n    this.map.addLayer({\n      id: routeId,\n      type: 'line',\n      source: routeId,\n      layout: {\n        'line-join': 'round',\n        'line-cap': 'round'\n      },\n      paint: {\n        'line-color': route.color,\n        'line-width': 4,\n        'line-opacity': 0.8\n      }\n    });\n\n    // Add animated route (optional)\n    this.animateRoute(routeId, route.coordinates);\n  }\n\n  // Animate route drawing\n  private animateRoute(routeId: string, coordinates: [number, number][]): void {\n    if (!this.map) return;\n\n    let step = 0;\n    const numSteps = coordinates.length;\n\n    const animate = () => {\n      if (step < numSteps) {\n        const currentCoords = coordinates.slice(0, step + 1);\n        \n        const source = this.map!.getSource(routeId);\n        if (source && 'setData' in source) {\n          (source as any).setData({\n            type: 'Feature',\n            properties: {},\n            geometry: {\n              type: 'LineString',\n              coordinates: currentCoords\n            }\n          });\n        }\n\n        step++;\n        setTimeout(animate, 100);\n      }\n    };\n\n    animate();\n  }\n\n  // Fit map to show all markers\n  fitToMarkers(): void {\n    if (!this.map || this.markers.length === 0) return;\n\n    const bounds = new mapboxgl.LngLatBounds();\n    \n    this.markers.forEach(marker => {\n      bounds.extend(marker.getLngLat());\n    });\n\n    this.map.fitBounds(bounds, {\n      padding: 50,\n      maxZoom: 12\n    });\n  }\n\n  // Search locations (geocoding)\n  async searchLocation(query: string): Promise<any[]> {\n    try {\n      const response = await fetch(\n        `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(query)}.json?access_token=${this.apiKey}&country=ma&limit=5`\n      );\n      const data = await response.json();\n      return data.features || [];\n    } catch (error) {\n      console.error('Error searching location:', error);\n      return [];\n    }\n  }\n\n  // Get directions between points\n  async getDirections(origin: [number, number], destination: [number, number]): Promise<any> {\n    try {\n      const response = await fetch(\n        `https://api.mapbox.com/directions/v5/mapbox/driving/${origin[0]},${origin[1]};${destination[0]},${destination[1]}?access_token=${this.apiKey}&geometries=geojson`\n      );\n      return await response.json();\n    } catch (error) {\n      console.error('Error getting directions:', error);\n      return null;\n    }\n  }\n\n  // Clear all markers\n  clearMarkers(): void {\n    this.markers.forEach(marker => marker.remove());\n    this.markers = [];\n  }\n\n  // Update map style\n  updateStyle(styleUrl: string): void {\n    if (this.map) {\n      this.map.setStyle(styleUrl);\n    }\n  }\n\n  // Destroy map\n  destroy(): void {\n    if (this.map) {\n      this.map.remove();\n      this.map = null;\n    }\n    this.markers = [];\n  }\n\n  // Get Morocco-specific locations\n  static getMoroccoLocations(): MarkerData[] {\n    return [\n      {\n        id: 'marrakech',\n        coordinates: [-7.9811, 31.6295],\n        title: 'Marrakech',\n        description: 'La Perla Rossa del Marocco',\n        type: 'city',\n        image: '/images/marrakech-medina.png',\n        rating: 4.8,\n        duration: '3-4 giorni'\n      },\n      {\n        id: 'fes',\n        coordinates: [-5.0003, 34.0181],\n        title: 'Fes',\n        description: 'Capitale spirituale e culturale',\n        type: 'city',\n        image: '/images/fes-architecture.png',\n        rating: 4.7,\n        duration: '2-3 giorni'\n      },\n      {\n        id: 'sahara',\n        coordinates: [-4.0, 30.0],\n        title: 'Deserto del Sahara',\n        description: 'Dune di Erg Chebbi e notti stellate',\n        type: 'destination',\n        image: '/images/sahara-dunes.png',\n        rating: 4.9,\n        duration: '2-3 giorni',\n        price: 320\n      },\n      {\n        id: 'essaouira',\n        coordinates: [-9.7767, 31.5085],\n        title: 'Essaouira',\n        description: 'Perla dell\\'Atlantico',\n        type: 'city',\n        image: '/images/essaouira-port.png',\n        rating: 4.6,\n        duration: '1-2 giorni'\n      },\n      {\n        id: 'atlas-mountains',\n        coordinates: [-7.9, 31.0],\n        title: 'Montagne dell\\'Atlante',\n        description: 'Trekking e villaggi berberi',\n        type: 'destination',\n        image: '/images/atlas-mountains.png',\n        rating: 4.5,\n        duration: '3-5 giorni',\n        price: 180\n      }\n    ];\n  }\n}","size_bytes":11028},"components/admin/PageManager.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { Plus, Edit, Trash2, Eye, Globe, FileText, Save, Check } from 'lucide-react'\nimport { useAuth } from '@/context/AuthContext'\nimport { useNotifications } from '../NotificationSystem'\nimport VisualEditor from './VisualEditor'\n\ninterface Page {\n  id?: string\n  title: string\n  slug: string\n  pageType: 'homepage' | 'city' | 'experience' | 'travel' | 'about' | 'contact' | 'custom'\n  blocks: any[]\n  status: 'draft' | 'published'\n  seoTitle?: string\n  seoDescription?: string\n  createdAt?: any\n  updatedAt?: any\n}\n\nexport default function PageManager() {\n  const { user } = useAuth()\n  const { showSuccess, showError } = useNotifications()\n  const [pages, setPages] = useState<Page[]>([])\n  const [selectedPage, setSelectedPage] = useState<Page | null>(null)\n  const [isCreating, setIsCreating] = useState(false)\n  const [isEditing, setIsEditing] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n\n  // New page form data\n  const [newPageData, setNewPageData] = useState({\n    title: '',\n    slug: '',\n    pageType: 'custom' as const,\n    seoTitle: '',\n    seoDescription: ''\n  })\n\n  // Load all pages\n  useEffect(() => {\n    loadPages()\n  }, [])\n\n  const loadPages = async () => {\n    try {\n      setLoading(true)\n      const token = user ? await user.getIdToken() : null\n      \n      const response = await fetch('/api/admin/content?collection=pages', {\n        headers: {\n          ...(token && { 'Authorization': `Bearer ${token}` })\n        }\n      })\n      \n      if (response.ok) {\n        const data = await response.json()\n        setPages(data.items || [])\n      } else {\n        console.error('Failed to load pages')\n      }\n    } catch (error) {\n      console.error('Error loading pages:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Create new page\n  const createPageWithStatus = async (status: 'draft' | 'published') => {\n    if (!newPageData.title || !newPageData.slug) return\n\n    try {\n      setSaving(true)\n      const token = user ? await user.getIdToken() : null\n      if (!token) throw new Error('Authentication required')\n\n      const pageData: Page = {\n        title: newPageData.title,\n        slug: newPageData.slug,\n        pageType: newPageData.pageType,\n        blocks: [],\n        status,\n        seoTitle: newPageData.seoTitle || newPageData.title,\n        seoDescription: newPageData.seoDescription\n      }\n\n      const response = await fetch('/api/admin/content', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          collection: 'pages',\n          data: pageData\n        })\n      })\n\n      if (response.ok) {\n        const result = await response.json()\n        const newPage = { ...pageData, id: result.id }\n        setPages(prev => [...prev, newPage])\n        setSelectedPage(newPage)\n        setIsCreating(false)\n        setIsEditing(true)\n        \n        // Show success notification\n        if (status === 'published') {\n          showSuccess('Pagina Pubblicata', `\"${newPageData.title}\" √® ora pubblica.`)\n        } else {\n          showSuccess('Bozza Creata', `\"${newPageData.title}\" salvata come bozza.`)\n        }\n        \n        // Reset form\n        setNewPageData({\n          title: '',\n          slug: '',\n          pageType: 'custom',\n          seoTitle: '',\n          seoDescription: ''\n        })\n      } else {\n        const error = await response.json()\n        showError('Errore Creazione', `Errore: ${error.error}`)\n      }\n    } catch (error) {\n      console.error('Error creating page:', error)\n      showError('Errore Creazione', 'Errore durante la creazione della pagina')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  // Save page content\n  const savePage = async (pageId: string, blocks: any[]) => {\n    try {\n      setSaving(true)\n      const token = user ? await user.getIdToken() : null\n      if (!token) throw new Error('Authentication required')\n\n      const response = await fetch('/api/admin/content', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          collection: 'pages',\n          id: pageId,\n          data: { blocks }\n        })\n      })\n\n      if (response.ok) {\n        // Update local state\n        setPages(prev => prev.map(page => \n          page.id === pageId ? { ...page, blocks } : page\n        ))\n        if (selectedPage?.id === pageId) {\n          setSelectedPage(prev => prev ? { ...prev, blocks } : null)\n        }\n        showSuccess('Pagina Salvata', 'Contenuto della pagina aggiornato con successo!')\n      } else {\n        const error = await response.json()\n        showError('Errore Salvataggio', `Errore: ${error.error}`)\n      }\n    } catch (error) {\n      console.error('Error saving page:', error)\n      showError('Errore Sistema', 'Errore durante il salvataggio della pagina')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  // Publish/unpublish page\n  const togglePageStatus = async (page: Page) => {\n    try {\n      const token = user ? await user.getIdToken() : null\n      if (!token) throw new Error('Authentication required')\n\n      const newStatus = page.status === 'published' ? 'draft' : 'published'\n\n      const response = await fetch('/api/admin/content', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          collection: 'pages',\n          id: page.id,\n          data: { status: newStatus }\n        })\n      })\n\n      if (response.ok) {\n        setPages(prev => prev.map(p => \n          p.id === page.id ? { ...p, status: newStatus } : p\n        ))\n      }\n    } catch (error) {\n      console.error('Error updating page status:', error)\n    }\n  }\n\n  // Delete page\n  const deletePage = async (page: Page) => {\n    if (!confirm(`Sei sicuro di voler eliminare la pagina \"${page.title}\"?`)) return\n\n    try {\n      const token = user ? await user.getIdToken() : null\n      if (!token) throw new Error('Authentication required')\n\n      const response = await fetch(`/api/admin/content?collection=pages&id=${page.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (response.ok) {\n        setPages(prev => prev.filter(p => p.id !== page.id))\n        if (selectedPage?.id === page.id) {\n          setSelectedPage(null)\n          setIsEditing(false)\n        }\n      }\n    } catch (error) {\n      console.error('Error deleting page:', error)\n    }\n  }\n\n  // Auto-generate slug from title\n  const generateSlug = (title: string) => {\n    return title\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-+|-+$/g, '')\n  }\n\n  if (isEditing && selectedPage) {\n    return (\n      <div className=\"h-full\">\n        <div className=\"mb-4 flex items-center justify-between bg-white p-4 border-b\">\n          <div>\n            <h2 className=\"text-xl font-semibold\">Modifica Pagina: {selectedPage.title}</h2>\n            <p className=\"text-sm text-gray-600\">\n              Tipo: {selectedPage.pageType} | Stato: {selectedPage.status}\n            </p>\n          </div>\n          <button\n            onClick={() => {\n              setIsEditing(false)\n              setSelectedPage(null)\n            }}\n            className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\"\n          >\n            Torna alla Lista\n          </button>\n        </div>\n        \n        <VisualEditor\n          pageId={selectedPage.id}\n          pageType={selectedPage.pageType}\n          onSave={(blocks) => selectedPage.id && savePage(selectedPage.id, blocks)}\n        />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Gestione Pagine</h2>\n        <button\n          onClick={() => setIsCreating(true)}\n          className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Nuova Pagina\n        </button>\n      </div>\n\n      {/* Create Page Modal */}\n      {isCreating && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n          <div className=\"bg-white rounded-xl p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Crea Nuova Pagina</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Titolo *</label>\n                <input\n                  type=\"text\"\n                  value={newPageData.title}\n                  onChange={(e) => {\n                    const title = e.target.value\n                    setNewPageData(prev => ({\n                      ...prev,\n                      title,\n                      slug: generateSlug(title),\n                      seoTitle: title\n                    }))\n                  }}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                  placeholder=\"Titolo della pagina\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Slug *</label>\n                <input\n                  type=\"text\"\n                  value={newPageData.slug}\n                  onChange={(e) => setNewPageData(prev => ({ ...prev, slug: e.target.value }))}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                  placeholder=\"url-della-pagina\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Tipo Pagina</label>\n                <select\n                  value={newPageData.pageType}\n                  onChange={(e) => setNewPageData(prev => ({ ...prev, pageType: e.target.value as any }))}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                >\n                  <option value=\"custom\">Pagina Personalizzata</option>\n                  <option value=\"homepage\">Homepage</option>\n                  <option value=\"about\">Chi Siamo</option>\n                  <option value=\"contact\">Contatti</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Descrizione SEO</label>\n                <textarea\n                  value={newPageData.seoDescription}\n                  onChange={(e) => setNewPageData(prev => ({ ...prev, seoDescription: e.target.value }))}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                  rows={3}\n                  placeholder=\"Descrizione per i motori di ricerca\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={() => setIsCreating(false)}\n                className=\"px-4 py-2 text-gray-700 border rounded-lg hover:bg-gray-50\"\n              >\n                Annulla\n              </button>\n              \n              <button\n                onClick={() => createPageWithStatus('draft')}\n                disabled={saving || !newPageData.title || !newPageData.slug}\n                className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 flex items-center gap-2\"\n              >\n                {saving ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                    Salvando...\n                  </>\n                ) : (\n                  <>\n                    <FileText className=\"w-4 h-4\" />\n                    Salva Bozza\n                  </>\n                )}\n              </button>\n              \n              <button\n                onClick={() => createPageWithStatus('published')}\n                disabled={saving || !newPageData.title || !newPageData.slug}\n                className=\"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 flex items-center gap-2\"\n              >\n                {saving ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                    Pubblicando...\n                  </>\n                ) : (\n                  <>\n                    <Globe className=\"w-4 h-4\" />\n                    Pubblica\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Pages List */}\n      <div className=\"bg-white rounded-lg border\">\n        {loading ? (\n          <div className=\"p-8 text-center\">\n            <div className=\"w-8 h-8 border-2 border-orange-500/30 border-t-orange-500 rounded-full animate-spin mx-auto mb-4\" />\n            <p>Caricamento pagine...</p>\n          </div>\n        ) : pages.length === 0 ? (\n          <div className=\"p-8 text-center text-gray-500\">\n            <FileText className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n            <p>Nessuna pagina presente. Crea la prima pagina per iniziare.</p>\n          </div>\n        ) : (\n          <div className=\"divide-y\">\n            {pages.map((page) => (\n              <div key={page.id} className=\"p-4 flex items-center justify-between hover:bg-gray-50\">\n                <div className=\"flex-1\">\n                  <h3 className=\"font-medium\">{page.title}</h3>\n                  <div className=\"text-sm text-gray-600 mt-1\">\n                    <span>/{page.slug}</span>\n                    <span className=\"mx-2\">‚Ä¢</span>\n                    <span className=\"capitalize\">{page.pageType}</span>\n                    <span className=\"mx-2\">‚Ä¢</span>\n                    <span className={`px-2 py-1 rounded text-xs ${\n                      page.status === 'published' \n                        ? 'bg-green-100 text-green-700' \n                        : 'bg-yellow-100 text-yellow-700'\n                    }`}>\n                      {page.status}\n                    </span>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => togglePageStatus(page)}\n                    className={`p-2 rounded ${\n                      page.status === 'published'\n                        ? 'text-green-600 hover:bg-green-50'\n                        : 'text-yellow-600 hover:bg-yellow-50'\n                    }`}\n                    title={page.status === 'published' ? 'Nascondi' : 'Pubblica'}\n                  >\n                    <Globe className=\"w-4 h-4\" />\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      setSelectedPage(page)\n                      setIsEditing(true)\n                    }}\n                    className=\"p-2 text-blue-600 hover:bg-blue-50 rounded\"\n                    title=\"Modifica\"\n                  >\n                    <Edit className=\"w-4 h-4\" />\n                  </button>\n                  \n                  <button\n                    onClick={() => deletePage(page)}\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded\"\n                    title=\"Elimina\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}","size_bytes":15913},"components/auth/SignIn.tsx":{"content":"\"use client\";\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Mail, Lock, Loader2, Eye, EyeOff, ArrowRight, ArrowLeft } from 'lucide-react';\nimport Link from 'next/link';\nimport { useAuth } from '@/context/AuthContext';\nimport { resetPassword } from '@/lib/auth';\n\ninterface SignInProps {\n  onSuccess?: () => void;\n  redirectTo?: string;\n  className?: string;\n}\n\nexport default function SignIn({ onSuccess, redirectTo = '/dashboard', className = '' }: SignInProps) {\n  const router = useRouter();\n  const { signIn, signInWithGoogle } = useAuth();\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [googleLoading, setGoogleLoading] = useState(false);\n  const [resetLoading, setResetLoading] = useState(false);\n  const [showResetForm, setShowResetForm] = useState(false);\n  const [resetEmail, setResetEmail] = useState('');\n  const [resetMessage, setResetMessage] = useState('');\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      await signIn(formData.email, formData.password);\n      \n      if (onSuccess) {\n        onSuccess();\n      } else {\n        router.push(redirectTo);\n      }\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore durante il login');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    setGoogleLoading(true);\n    setError('');\n\n    try {\n      await signInWithGoogle();\n      \n      if (onSuccess) {\n        onSuccess();\n      } else {\n        router.push(redirectTo);\n      }\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore durante il login con Google');\n    } finally {\n      setGoogleLoading(false);\n    }\n  };\n\n  const handleResetPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setResetLoading(true);\n    setError('');\n    setResetMessage('');\n\n    try {\n      await resetPassword(resetEmail);\n      setResetMessage('Email di reset inviata! Controlla la tua casella di posta.');\n      setResetEmail('');\n    } catch (err: any) {\n      setError(err.message || 'Errore durante l\\'invio dell\\'email di reset');\n    } finally {\n      setResetLoading(false);\n    }\n  };\n\n  return (\n    <div className={`w-full max-w-md mx-auto ${className}`}>\n      {!showResetForm ? (\n        // Regular Login Form\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {error && (\n            <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300 text-sm\">\n              {error}\n            </div>\n          )}\n\n        {/* Email */}\n        <div>\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-foreground mb-2\">\n            Email\n          </label>\n          <div className=\"relative\">\n            <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n              className=\"w-full pl-10 pr-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground placeholder-muted-foreground\"\n              placeholder=\"inserisci@email.com\"\n            />\n          </div>\n        </div>\n\n        {/* Password */}\n        <div>\n          <label htmlFor=\"password\" className=\"block text-sm font-medium text-foreground mb-2\">\n            Password\n          </label>\n          <div className=\"relative\">\n            <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type={showPassword ? \"text\" : \"password\"}\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n              className=\"w-full pl-10 pr-12 py-3 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground placeholder-muted-foreground\"\n              placeholder=\"Inserisci la password\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(!showPassword)}\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n            >\n              {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n            </button>\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <button\n          type=\"submit\"\n          disabled={loading || googleLoading}\n          className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-lg font-semibold hover:from-orange-600 hover:to-red-600 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n        >\n          {loading ? (\n            <Loader2 className=\"w-5 h-5 animate-spin\" />\n          ) : (\n            <>\n              Accedi\n              <ArrowRight className=\"w-5 h-5\" />\n            </>\n          )}\n        </button>\n\n        {/* Divider */}\n        <div className=\"relative my-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <span className=\"w-full border-t border-border\" />\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"bg-background px-2 text-muted-foreground\">oppure</span>\n          </div>\n        </div>\n\n        {/* Google Sign In */}\n        <button\n          type=\"button\"\n          onClick={handleGoogleSignIn}\n          disabled={loading || googleLoading}\n          className=\"w-full bg-white dark:bg-white border border-border text-gray-700 py-3 px-4 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-100 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-background transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n        >\n          {googleLoading ? (\n            <Loader2 className=\"w-5 h-5 animate-spin\" />\n          ) : (\n            <>\n              {/* Official Google colorful logo (compliant with branding guidelines) */}\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n              </svg>\n              Continua con Google\n            </>\n          )}\n        </button>\n\n        {/* Password Reset Link */}\n        <div className=\"text-center text-sm text-muted-foreground\">\n          <button\n            type=\"button\"\n            onClick={() => setShowResetForm(true)}\n            className=\"text-orange-600 hover:text-orange-500 font-medium underline\"\n          >\n            Password dimenticata?\n          </button>\n        </div>\n\n        {/* Sign Up Link */}\n        <div className=\"text-center text-sm text-muted-foreground\">\n          Non hai ancora un account?{' '}\n          <Link href=\"/auth/signup\" className=\"text-orange-600 hover:text-orange-500 font-medium\">\n            Registrati qui\n          </Link>\n        </div>\n      </form>\n      ) : (\n        // Password Reset Form\n        <form onSubmit={handleResetPassword} className=\"space-y-6\">\n          <div className=\"text-center mb-6\">\n            <h3 className=\"text-lg font-semibold text-foreground\">Recupera Password</h3>\n            <p className=\"text-sm text-muted-foreground mt-2\">\n              Inserisci la tua email per ricevere il link di reset\n            </p>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300 text-sm\">\n              {error}\n            </div>\n          )}\n\n          {resetMessage && (\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-green-700 dark:text-green-300 text-sm\">\n              {resetMessage}\n            </div>\n          )}\n\n          {/* Email for Reset */}\n          <div>\n            <label htmlFor=\"resetEmail\" className=\"block text-sm font-medium text-foreground mb-2\">\n              Email\n            </label>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n              <input\n                type=\"email\"\n                id=\"resetEmail\"\n                value={resetEmail}\n                onChange={(e) => setResetEmail(e.target.value)}\n                required\n                className=\"w-full pl-10 pr-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground placeholder-muted-foreground\"\n                placeholder=\"inserisci@email.com\"\n              />\n            </div>\n          </div>\n\n          {/* Reset Button */}\n          <button\n            type=\"submit\"\n            disabled={resetLoading}\n            className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-lg font-semibold hover:from-orange-600 hover:to-red-600 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {resetLoading ? (\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n            ) : (\n              <>\n                Invia Email di Reset\n                <ArrowRight className=\"w-5 h-5\" />\n              </>\n            )}\n          </button>\n\n          {/* Back to Login */}\n          <button\n            type=\"button\"\n            onClick={() => {\n              setShowResetForm(false);\n              setResetEmail('');\n              setResetMessage('');\n              setError('');\n            }}\n            className=\"w-full text-muted-foreground hover:text-foreground transition-colors flex items-center justify-center gap-2\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            Torna al Login\n          </button>\n        </form>\n      )}\n    </div>\n  );\n}","size_bytes":11382},"app/servizi/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Car, Users, Shield, MapPin, Phone, Star, CheckCircle, Clock, UserCheck } from \"lucide-react\"\nimport { getPublishedServices } from \"@/lib/public-data\"\nimport { Service } from \"@/lib/firestore-schema\"\nimport { ServiceCard } from \"@/components/cards/ServiceCard\"\n\nconst testimonials = [\n  {\n    name: \"Marco Rossi\",\n    location: \"Milano, Italia\",\n    service: \"Trasferimenti + Guida Privata\",\n    rating: 5,\n    comment:\n      \"Servizio impeccabile dall'inizio alla fine. La guida Hassan √® stata fantastica, ci ha fatto scoprire angoli nascosti di Marrakech che non avremmo mai trovato da soli.\",\n    date: \"20 Gennaio 2024\",\n  },\n  {\n    name: \"Sophie Dubois\",\n    location: \"Paris, France\",\n    service: \"Noleggio Auto\",\n    rating: 5,\n    comment:\n      \"Voiture parfaite pour notre road trip au Maroc. Service client excellent et v√©hicule en parfait √©tat. Je recommande vivement!\",\n    date: \"15 Gennaio 2024\",\n  },\n  {\n    name: \"James Wilson\",\n    location: \"London, UK\",\n    service: \"Pacchetto Completo\",\n    rating: 5,\n    comment:\n      \"Amazing experience! From airport pickup to guided tours, everything was perfectly organized. Morocco Dreams made our trip unforgettable.\",\n    date: \"10 Gennaio 2024\",\n  },\n]\n\nconst advantages = [\n  {\n    icon: CheckCircle,\n    title: \"Qualit√† Garantita\",\n    description: \"Servizi certificati e partner affidabili selezionati con cura\",\n  },\n  {\n    icon: Clock,\n    title: \"Disponibilit√† 24/7\",\n    description: \"Assistenza continua durante tutto il tuo soggiorno in Marocco\",\n  },\n  {\n    icon: Users,\n    title: \"Team Locale\",\n    description: \"Staff marocchino esperto che conosce ogni angolo del paese\",\n  },\n  {\n    icon: Shield,\n    title: \"Sicurezza Totale\",\n    description: \"Tutti i servizi sono assicurati e rispettano gli standard internazionali\",\n  },\n]\n\nexport default function ServiziPage() {\n  const [services, setServices] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n\n  // Load published services from database\n  useEffect(() => {\n    const loadServices = async () => {\n      try {\n        setLoading(true)\n        const publishedServices = await getPublishedServices({ limit: 20 })\n        setServices(publishedServices as any[])\n        setError(\"\")\n      } catch (err) {\n        console.error('Error loading services:', err)\n        setError(\"Errore nel caricamento dei servizi\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadServices()\n  }, [])\n\n  const getServiceIcon = (category: string) => {\n    switch (category) {\n      case 'transport':\n        return Car\n      case 'guide':\n        return UserCheck\n      case 'insurance':\n        return Shield\n      default:\n        return Users\n    }\n  }\n\n  const getServiceColor = (category: string) => {\n    switch (category) {\n      case 'transport':\n        return 'orange'\n      case 'guide':\n        return 'blue'\n      case 'insurance':\n        return 'purple'\n      case 'accommodation':\n        return 'green'\n      default:\n        return 'gray'\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n          <div className=\"text-center mb-16\">\n            <h1 className=\"text-4xl lg:text-5xl font-bold text-foreground mb-6\">I Nostri Servizi</h1>\n            <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto\">\n              Servizi professionali per rendere il tuo viaggio in Marocco perfetto e senza pensieri\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n            {[...Array(8)].map((_, i) => (\n              <div key={i} className=\"bg-card rounded-2xl p-6 shadow-lg animate-pulse\">\n                <div className=\"h-48 bg-gray-200 dark:bg-gray-700 rounded-xl mb-4\"></div>\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2\"></div>\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2\"></div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n          <div className=\"text-center\">\n            <h1 className=\"text-4xl lg:text-5xl font-bold text-foreground mb-6\">I Nostri Servizi</h1>\n            <p className=\"text-red-600 dark:text-red-400 text-lg\">{error}</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <section className=\"relative py-20 overflow-hidden bg-gradient-to-b from-muted/50 to-background\">\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"p-4 bg-orange-100 dark:bg-orange-900/30 rounded-full\">\n                <Users className=\"h-12 w-12 text-orange-600 dark:text-orange-400\" />\n              </div>\n            </div>\n            <h1 className=\"text-4xl md:text-6xl font-bold text-foreground mb-6\">\n              I Nostri <span className=\"text-orange-600 dark:text-orange-400\">Servizi</span>\n            </h1>\n            <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto mb-8\">\n              Servizi professionali per rendere il tuo viaggio in Marocco indimenticabile. Dalla pianificazione al\n              ritorno a casa, ci occupiamo di ogni dettaglio.\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                <span>Servizi certificati</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                <span>Assistenza 24/7</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                <span>Prezzi trasparenti</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Services Grid */}\n      <section className=\"py-20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Scegli il Servizio Perfetto</h2>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              Ogni servizio √® progettato per offrirti la massima comodit√† e sicurezza durante il tuo viaggio\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n            {services.map((service) => {\n              const Icon = getServiceIcon(service.category)\n              \n              return (\n                <ServiceCard\n                  key={service.id}\n                  id={service.id || service.slug || ''}\n                  title={service.name}\n                  description={service.description}\n                  icon={Icon}\n                  price={service.price}\n                  priceType={service.priceType as 'per_person' | 'per_day' | 'per_trip' | 'fixed'}\n                  locations={service.locations || []}\n                  badges={[\n                    { label: service.category, variant: 'default' },\n                    { label: service.type, variant: 'default' }\n                  ]}\n                  ctas={[\n                    { \n                      label: 'Scopri di pi√π', \n                      href: `/servizi/${service.slug || service.id}`, \n                      variant: 'primary' \n                    }\n                  ]}\n                />\n              )\n            })}\n          </div>\n\n          {services.length === 0 && !loading && (\n            <div className=\"text-center py-12\">\n              <p className=\"text-muted-foreground text-lg\">\n                Nessun servizio disponibile al momento.\n              </p>\n            </div>\n          )}\n        </div>\n      </section>\n\n      {/* Advantages */}\n      <section className=\"py-20 bg-muted/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Perch√© Scegliere Morocco Dreams</h2>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              La nostra esperienza e dedizione fanno la differenza\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {advantages.map((advantage, index) => (\n              <div key={index} className=\"text-center group\">\n                <div className=\"w-16 h-16 mx-auto mb-4 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-200\">\n                  <advantage.icon className=\"h-8 w-8 text-orange-600 dark:text-orange-400\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-foreground mb-2\">{advantage.title}</h3>\n                <p className=\"text-muted-foreground text-sm\">{advantage.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Testimonials */}\n      <section className=\"py-20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Cosa Dicono i Nostri Clienti</h2>\n            <p className=\"text-lg text-muted-foreground\">Recensioni autentiche sui nostri servizi</p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8\">\n            {testimonials.map((testimonial, index) => (\n              <Card key={index} className=\"hover:shadow-lg transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center gap-1 mb-4\">\n                    {[...Array(testimonial.rating)].map((_, i) => (\n                      <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                    ))}\n                  </div>\n\n                  <p className=\"text-muted-foreground mb-4 italic\">\"{testimonial.comment}\"</p>\n\n                  <div className=\"border-t pt-4\">\n                    <p className=\"font-medium text-foreground\">{testimonial.name}</p>\n                    <p className=\"text-sm text-muted-foreground\">{testimonial.location}</p>\n                    <p className=\"text-sm text-orange-600 dark:text-orange-400\">Servizio: {testimonial.service}</p>\n                    <p className=\"text-xs text-muted-foreground mt-1\">{testimonial.date}</p>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"py-20 bg-gradient-to-r from-orange-600 to-red-600\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">Hai Bisogno di Aiuto?</h2>\n          <p className=\"text-xl text-orange-100 mb-8\">\n            Il nostro team √® sempre disponibile per consigliarti il servizio pi√π adatto alle tue esigenze\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link href=\"/contatti\">\n              <Button size=\"lg\" variant=\"secondary\" className=\"bg-white text-orange-600 hover:bg-orange-50\">\n                <Phone className=\"mr-2 h-5 w-5\" />\n                Contattaci Ora\n              </Button>\n            </Link>\n            <Link href=\"/contatti\">\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-white text-white hover:bg-white hover:text-orange-600 bg-transparent\"\n              >\n                <MapPin className=\"mr-2 h-5 w-5\" />\n                Richiedi Preventivo\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </section>\n    </div>\n  )\n}\n","size_bytes":12618},"app/esperienze/cucina/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { ChefHat, Utensils, Clock, Users, Star, Flame, Leaf, Heart } from \"lucide-react\"\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\nimport BookingModal from \"@/components/modals/BookingModal\"\n\nexport default function CucinaPage() {\n  const [bookingModal, setBookingModal] = useState<{\n    isOpen: boolean;\n    course: any;\n  }>({ isOpen: false, course: null });\n\n  const openBookingModal = (course: any) => {\n    setBookingModal({ isOpen: true, course });\n  };\n\n  const closeBookingModal = () => {\n    setBookingModal({ isOpen: false, course: null });\n  };\n\n  const cookingClasses = [\n    {\n      id: \"tradizionale\",\n      name: \"Cucina Tradizionale\",\n      title: \"I Classici della Tradizione\",\n      description: \"Impara a preparare i piatti iconici della cucina marocchina\",\n      image: \"/images/cooking-class.png\",\n      duration: \"4 ore\",\n      price: \"‚Ç¨65\",\n      dishes: [\"Tagine di pollo\", \"Couscous\", \"Pastilla\", \"T√® alla menta\"],\n      level: \"Principiante\",\n      maxParticipants: 8,\n      rating: 4.9,\n      reviews: 234,\n    },\n    {\n      id: \"vegetariana\",\n      name: \"Cucina Vegetariana\",\n      title: \"Sapori Vegetali del Marocco\",\n      description: \"Scopri la ricchezza della cucina vegetariana marocchina\",\n      image: \"/images/vegetarian-cooking.png\",\n      duration: \"3.5 ore\",\n      price: \"‚Ç¨55\",\n      dishes: [\"Tagine di verdure\", \"Couscous vegetariano\", \"Briouats\", \"Harira\"],\n      level: \"Principiante\",\n      maxParticipants: 10,\n      rating: 4.8,\n      reviews: 156,\n    },\n    {\n      id: \"avanzata\",\n      name: \"Cucina Avanzata\",\n      title: \"Tecniche da Chef\",\n      description: \"Perfeziona le tue abilit√† con tecniche avanzate\",\n      image: \"/images/advanced-cooking.png\",\n      duration: \"6 ore\",\n      price: \"‚Ç¨120\",\n      dishes: [\"Mechoui\", \"Pastilla complessa\", \"Dolci tradizionali\", \"Conserve\"],\n      level: \"Avanzato\",\n      maxParticipants: 6,\n      rating: 4.9,\n      reviews: 89,\n    },\n  ]\n\n  const dishes = [\n    {\n      name: \"Tagine\",\n      description: \"Stufato cotto lentamente nel caratteristico piatto conico\",\n      image: \"/images/tagine-dish.png\",\n      difficulty: 2,\n      cookingTime: \"2 ore\",\n      ingredients: [\"Carne o verdure\", \"Spezie\", \"Olive\", \"Limoni conservati\"],\n    },\n    {\n      name: \"Couscous\",\n      description: \"Il piatto nazionale del Marocco, servito il venerd√¨\",\n      image: \"/images/couscous-dish.png\",\n      difficulty: 3,\n      cookingTime: \"3 ore\",\n      ingredients: [\"Semola\", \"Verdure\", \"Carne\", \"Brodo speziato\"],\n    },\n    {\n      name: \"Pastilla\",\n      description: \"Torta salata con pasta fillo, piccione e mandorle\",\n      image: \"/images/pastilla-dish.png\",\n      difficulty: 4,\n      cookingTime: \"4 ore\",\n      ingredients: [\"Pasta fillo\", \"Piccione/pollo\", \"Mandorle\", \"Spezie dolci\"],\n    },\n    {\n      name: \"Harira\",\n      description: \"Zuppa tradizionale consumata durante il Ramadan\",\n      image: \"/images/harira-soup.png\",\n      difficulty: 2,\n      cookingTime: \"1.5 ore\",\n      ingredients: [\"Lenticchie\", \"Pomodori\", \"Carne\", \"Erbe fresche\"],\n    },\n  ]\n\n  const locations = [\n    {\n      id: \"marrakech\",\n      name: \"Marrakech\",\n      venues: [\n        {\n          name: \"Riad Cooking School\",\n          type: \"Riad tradizionale\",\n          rating: 4.9,\n          price: \"‚Ç¨65\",\n          image: \"/images/riad-cooking.png\",\n          specialty: \"Cucina familiare\",\n        },\n        {\n          name: \"Souk Cooking Class\",\n          type: \"Tour + Cucina\",\n          rating: 4.8,\n          price: \"‚Ç¨85\",\n          image: \"/images/souk-cooking.png\",\n          specialty: \"Mercato + Cucina\",\n        },\n      ],\n    },\n    {\n      id: \"fes\",\n      name: \"Fes\",\n      venues: [\n        {\n          name: \"Medina Culinary\",\n          type: \"Scuola tradizionale\",\n          rating: 4.7,\n          price: \"‚Ç¨60\",\n          image: \"/images/medina-cooking.png\",\n          specialty: \"Ricette antiche\",\n        },\n      ],\n    },\n  ]\n\n  const spices = [\n    { name: \"Ras el Hanout\", description: \"Miscela di 20+ spezie\", color: \"bg-orange-500\" },\n    { name: \"Curcuma\", description: \"Colore dorato\", color: \"bg-yellow-500\" },\n    { name: \"Cannella\", description: \"Dolce e aromatica\", color: \"bg-amber-600\" },\n    { name: \"Zenzero\", description: \"Piccante e fresco\", color: \"bg-orange-400\" },\n    { name: \"Cumino\", description: \"Terroso e intenso\", color: \"bg-amber-700\" },\n    { name: \"Coriandolo\", description: \"Fresco e citrico\", color: \"bg-green-500\" },\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-orange-500 to-red-600 overflow-hidden\">\n        {/* Wishlist Button */}\n        <div className=\"absolute top-6 right-6 z-10\">\n          <WishlistButton\n            itemId=\"cucina-marocchina\"\n            itemType=\"experience\"\n            itemTitle=\"Corsi di Cucina Marocchina\"\n            itemImage=\"/images/cooking-class.png\"\n            itemPrice={65}\n            itemDescription=\"Impara a preparare i piatti iconici della cucina marocchina con chef locali\"\n          />\n        </div>\n        <div className=\"absolute inset-0\">\n          <img\n            src=\"/images/cooking-class.png\"\n            alt=\"Cucina Marocchina\"\n            className=\"w-full h-full object-cover opacity-30\"\n          />\n          <div className=\"absolute inset-0 bg-black/40\" />\n        </div>\n\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6\">\n            Cucina\n            <span className=\"block text-3xl md:text-4xl lg:text-5xl mt-2 bg-gradient-to-r from-yellow-300 to-orange-200 bg-clip-text text-transparent\">\n              Marocchina\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto mb-8\">\n            Impara i segreti della cucina marocchina con chef locali esperti\n          </p>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Chef Locali</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Ricette Autentiche</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Ingredienti Freschi</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Cooking Classes */}\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Corsi di Cucina</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Scegli il corso perfetto per il tuo livello e i tuoi interessi culinari\n            </p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-3 gap-8 lg:gap-12\">\n            {cookingClasses.map((course, idx) => (\n              <div\n                key={course.id}\n                className=\"group bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-border\"\n              >\n                <div className=\"relative h-64 lg:h-80 overflow-hidden\">\n                  <img\n                    src={course.image || \"/placeholder.svg?height=400&width=600\"}\n                    alt={course.name}\n                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n\n                  {/* Price Badge */}\n                  <div className=\"absolute top-4 right-4 bg-background/90 backdrop-blur-sm px-4 py-2 rounded-full border border-border\">\n                    <span className=\"font-bold text-lg text-foreground\">{course.price}</span>\n                  </div>\n\n                  {/* Level Badge */}\n                  <div className=\"absolute top-4 left-4 bg-orange-500 px-3 py-1 rounded-full\">\n                    <span className=\"text-white text-sm font-semibold\">{course.level}</span>\n                  </div>\n\n                  {/* Rating */}\n                  <div className=\"absolute bottom-20 right-4 bg-black/30 backdrop-blur-sm px-3 py-1 rounded-full\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-white text-sm font-semibold\">{course.rating}</span>\n                    </div>\n                  </div>\n\n                  {/* Title Overlay */}\n                  <div className=\"absolute bottom-6 left-6 text-white\">\n                    <h3 className=\"text-2xl lg:text-3xl font-bold mb-2\">{course.title}</h3>\n                    <p className=\"text-gray-200 text-sm lg:text-base\">{course.description}</p>\n                  </div>\n                </div>\n\n                <div className=\"p-6 lg:p-8\">\n                  {/* Info Grid */}\n                  <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                    <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                      <Clock className=\"w-4 h-4 text-orange-500\" />\n                      <span>{course.duration}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                      <Users className=\"w-4 h-4 text-orange-500\" />\n                      <span>Max {course.maxParticipants}</span>\n                    </div>\n                  </div>\n\n                  {/* Dishes */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-card-foreground mb-3\">Imparerai a cucinare:</h4>\n                    <div className=\"space-y-2\">\n                      {course.dishes.map((dish, didx) => (\n                        <div key={didx} className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                          <ChefHat className=\"w-4 h-4 text-orange-500\" />\n                          <span>{dish}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3\">\n                    <button\n                      onClick={() => openBookingModal(course)}\n                      className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      Prenota Corso\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Signature Dishes */}\n      <div className=\"py-16 lg:py-24 bg-muted/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Piatti Iconici</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              I capolavori della cucina marocchina che imparerai a preparare\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {dishes.map((dish, idx) => (\n              <div\n                key={idx}\n                className=\"bg-card rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 border border-border\"\n              >\n                <div className=\"relative h-48 overflow-hidden\">\n                  <img\n                    src={dish.image || \"/placeholder.svg?height=300&width=400\"}\n                    alt={dish.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute bottom-4 left-4 flex items-center space-x-1\">\n                    {[...Array(5)].map((_, i) => (\n                      <div\n                        key={i}\n                        className={`w-2 h-2 rounded-full ${i < dish.difficulty ? \"bg-orange-400\" : \"bg-white/50\"}`}\n                      />\n                    ))}\n                    <span className=\"text-white text-xs ml-2\">Difficolt√†</span>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <h3 className=\"text-lg font-bold text-card-foreground mb-2\">{dish.name}</h3>\n                  <p className=\"text-muted-foreground text-sm mb-4\">{dish.description}</p>\n\n                  <div className=\"flex items-center space-x-2 text-sm text-muted-foreground mb-4\">\n                    <Clock className=\"w-4 h-4 text-orange-500\" />\n                    <span>{dish.cookingTime}</span>\n                  </div>\n\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-semibold text-card-foreground mb-2 text-sm\">Ingredienti principali:</h4>\n                    <div className=\"flex flex-wrap gap-1\">\n                      {dish.ingredients.map((ingredient, iidx) => (\n                        <span\n                          key={iidx}\n                          className=\"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 px-2 py-1 rounded-full text-xs\"\n                        >\n                          {ingredient}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Spices Section */}\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Le Spezie del Marocco</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Scopri i segreti delle spezie che rendono unica la cucina marocchina\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {spices.map((spice, idx) => (\n              <div\n                key={idx}\n                className=\"bg-card rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 border border-border\"\n              >\n                <div className=\"flex items-center space-x-4\">\n                  <div className={`w-12 h-12 ${spice.color} rounded-full flex items-center justify-center`}>\n                    <Leaf className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-bold text-card-foreground\">{spice.name}</h3>\n                    <p className=\"text-muted-foreground text-sm\">{spice.description}</p>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Locations */}\n      <div className=\"py-16 lg:py-24 bg-muted/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Dove Cucinare</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Le migliori scuole di cucina nelle citt√† imperiali\n            </p>\n          </div>\n\n          {locations.map((location, idx) => (\n            <div key={location.id} className=\"mb-12 lg:mb-16\">\n              <h3 className=\"text-2xl font-bold text-foreground mb-8 text-center\">{location.name}</h3>\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {location.venues.map((venue, vidx) => (\n                  <div\n                    key={vidx}\n                    className=\"bg-card rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 border border-border\"\n                  >\n                    <div className=\"relative h-48 overflow-hidden\">\n                      <img\n                        src={venue.image || \"/placeholder.svg?height=300&width=400\"}\n                        alt={venue.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                      <div className=\"absolute top-4 right-4 bg-background/90 backdrop-blur-sm px-3 py-1 rounded-full border border-border\">\n                        <span className=\"font-bold text-foreground\">{venue.price}</span>\n                      </div>\n                      <div className=\"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm px-3 py-1 rounded-full\">\n                        <span className=\"text-white text-sm\">{venue.type}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"p-6\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <h4 className=\"text-lg font-bold text-card-foreground\">{venue.name}</h4>\n                        <div className=\"flex items-center space-x-1\">\n                          <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                          <span className=\"text-sm font-semibold\">{venue.rating}</span>\n                        </div>\n                      </div>\n\n                      <p className=\"text-muted-foreground text-sm mb-4\">Specialit√†: {venue.specialty}</p>\n\n                      <Link\n                        href=\"/contatti\"\n                        className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-center block\"\n                      >\n                        Prenota da {venue.name}\n                      </Link>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* What You'll Learn */}\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Cosa Imparerai</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Molto pi√π di semplici ricette: una vera immersione culturale\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {[\n              {\n                icon: ChefHat,\n                title: \"Tecniche Tradizionali\",\n                description: \"Metodi di cottura tramandati da generazioni\",\n              },\n              {\n                icon: Utensils,\n                title: \"Uso delle Spezie\",\n                description: \"Come bilanciare e combinare le spezie marocchine\",\n              },\n              {\n                icon: Flame,\n                title: \"Cottura nel Tagine\",\n                description: \"Padroneggia l'arte della cottura lenta\",\n              },\n              {\n                icon: Heart,\n                title: \"Cultura Culinaria\",\n                description: \"Storia e tradizioni dietro ogni piatto\",\n              },\n            ].map((skill, idx) => (\n              <div\n                key={idx}\n                className=\"bg-muted/50 rounded-2xl p-6 text-center hover:shadow-lg transition-all duration-300 border border-border\"\n              >\n                <div className=\"w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <skill.icon className=\"w-8 h-8 text-orange-600 dark:text-orange-400\" />\n                </div>\n                <h3 className=\"text-lg font-bold text-foreground mb-3\">{skill.title}</h3>\n                <p className=\"text-muted-foreground text-sm\">{skill.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-r from-orange-500 to-red-600\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">Pronto a Diventare uno Chef Marocchino?</h2>\n          <p className=\"text-lg lg:text-xl mb-8 max-w-2xl mx-auto\">\n            Unisciti ai nostri corsi di cucina e porta a casa i sapori autentici del Marocco\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <button\n              onClick={() => openBookingModal(cookingClasses[0])}\n              className=\"bg-white text-orange-600 px-8 py-4 rounded-xl hover:bg-gray-100 transition-all duration-300 font-semibold text-lg\"\n            >\n              Prenota Corso\n            </button>\n            <Link\n              href=\"/contatti\"\n              className=\"border-2 border-white text-white px-8 py-4 rounded-xl hover:bg-white hover:text-orange-600 transition-all duration-300 font-semibold text-lg\"\n            >\n              Informazioni\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      {/* Booking Modal */}\n      {bookingModal.isOpen && bookingModal.course && (\n        <BookingModal\n          isOpen={bookingModal.isOpen}\n          onClose={closeBookingModal}\n          itemId={bookingModal.course.id}\n          itemType=\"experience\"\n          itemTitle={bookingModal.course.name}\n          basePrice={parseFloat(bookingModal.course.price.replace(/[^0-9]/g, \"\"))}\n          duration={bookingModal.course.duration}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":22257},"components/design-system/DesignSystemGuide.tsx":{"content":"/**\n * Morocco Dreams Design System Guide\n *\n * This component serves as the single source of truth for all design system\n * standards, ensuring consistency across the entire website.\n *\n * Based on the comprehensive style guide provided in the PDF attachment.\n */\n\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\n\nexport default function DesignSystemGuide() {\n  return (\n    <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24 space-y-16\">\n      {/* Typography Hierarchy */}\n      <section data-slot=\"typography-section\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-8\">Typography Hierarchy</h2>\n        <div className=\"space-y-6\">\n          <div>\n            <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-balance\">H1 - Hero Titles</h1>\n            <code className=\"text-sm text-muted-foreground\">text-4xl md:text-5xl lg:text-6xl font-bold</code>\n          </div>\n          <div>\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-balance\">H2 - Section Titles</h2>\n            <code className=\"text-sm text-muted-foreground\">text-3xl lg:text-4xl font-bold</code>\n          </div>\n          <div>\n            <h3 className=\"text-2xl lg:text-3xl font-bold text-balance\">H3 - Subsection Titles</h3>\n            <code className=\"text-sm text-muted-foreground\">text-2xl lg:text-3xl font-bold</code>\n          </div>\n          <div>\n            <h4 className=\"text-lg lg:text-xl font-bold\">H4 - Card Titles</h4>\n            <code className=\"text-sm text-muted-foreground\">text-lg lg:text-xl font-bold</code>\n          </div>\n          <div>\n            <p className=\"text-lg lg:text-xl text-pretty leading-relaxed\">Body Large - Important content</p>\n            <code className=\"text-sm text-muted-foreground\">text-lg lg:text-xl</code>\n          </div>\n          <div>\n            <p className=\"text-base lg:text-lg text-pretty leading-relaxed\">Body Regular - Standard content</p>\n            <code className=\"text-sm text-muted-foreground\">text-base lg:text-lg</code>\n          </div>\n        </div>\n      </section>\n\n      {/* Color System */}\n      <section data-slot=\"color-system\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-8\">Color System</h2>\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Primary Colors</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-primary rounded-full\"></div>\n                <span className=\"text-sm\">Primary (Warm Amber)</span>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-secondary rounded-full\"></div>\n                <span className=\"text-sm\">Secondary (Orange)</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Semantic Colors</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-background border rounded-full\"></div>\n                <span className=\"text-sm\">Background</span>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-card border rounded-full\"></div>\n                <span className=\"text-sm\">Card</span>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-muted rounded-full\"></div>\n                <span className=\"text-sm\">Muted</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Text Colors</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-foreground rounded-full\"></div>\n                <span className=\"text-sm\">Foreground</span>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-muted-foreground rounded-full\"></div>\n                <span className=\"text-sm\">Muted Foreground</span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      {/* Button Variants */}\n      <section data-slot=\"button-variants\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-8\">Button System</h2>\n        <div className=\"space-y-6\">\n          <div>\n            <h3 className=\"text-xl font-bold mb-4\">Primary Actions</h3>\n            <div className=\"flex flex-wrap gap-4\">\n              <Button variant=\"cta\" size=\"lg\">\n                CTA Gradient\n              </Button>\n              <Button variant=\"default\">Default</Button>\n              <Button variant=\"secondary\">Secondary</Button>\n            </div>\n          </div>\n          <div>\n            <h3 className=\"text-xl font-bold mb-4\">Secondary Actions</h3>\n            <div className=\"flex flex-wrap gap-4\">\n              <Button variant=\"outline\">Outline</Button>\n              <Button variant=\"ghost\">Ghost</Button>\n              <Button variant=\"link\">Link</Button>\n            </div>\n          </div>\n          <div>\n            <h3 className=\"text-xl font-bold mb-4\">Sizes</h3>\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <Button size=\"sm\">Small</Button>\n              <Button size=\"default\">Default</Button>\n              <Button size=\"lg\">Large</Button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Card System */}\n      <section data-slot=\"card-system\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-8\">Card System</h2>\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <Card className=\"hover:shadow-xl transition-all duration-300\">\n            <CardHeader>\n              <CardTitle>Standard Card</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground text-pretty leading-relaxed\">\n                This is a standard card with semantic structure using CardHeader, CardTitle, and CardContent components.\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"group overflow-hidden hover:shadow-xl transition-all duration-500 hover:scale-105\">\n            <div className=\"relative h-32 bg-gradient-to-r from-orange-500 to-red-500\"></div>\n            <CardContent>\n              <CardTitle className=\"mb-2\">Experience Card</CardTitle>\n              <p className=\"text-muted-foreground text-sm text-pretty\">\n                Cards with images and hover effects for experiences and destinations.\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      {/* Badge System */}\n      <section data-slot=\"badge-system\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-8\">Badge System</h2>\n        <div className=\"flex flex-wrap gap-4\">\n          <Badge variant=\"default\">Default</Badge>\n          <Badge variant=\"secondary\">Secondary</Badge>\n          <Badge variant=\"primary\">Primary</Badge>\n          <Badge variant=\"outline\">Outline</Badge>\n          <Badge variant=\"destructive\">Destructive</Badge>\n        </div>\n      </section>\n\n      {/* Spacing System */}\n      <section data-slot=\"spacing-system\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-8\">Spacing System</h2>\n        <div className=\"space-y-6\">\n          <div>\n            <h3 className=\"text-xl font-bold mb-4\">Section Spacing</h3>\n            <ul className=\"space-y-2 text-muted-foreground\">\n              <li>\n                <code>py-16 lg:py-24</code> - Standard sections\n              </li>\n              <li>\n                <code>py-20 lg:py-32</code> - Hero sections\n              </li>\n              <li>\n                <code>py-12 lg:py-16</code> - Compact sections\n              </li>\n            </ul>\n          </div>\n          <div>\n            <h3 className=\"text-xl font-bold mb-4\">Container System</h3>\n            <ul className=\"space-y-2 text-muted-foreground\">\n              <li>\n                <code>max-w-7xl mx-auto px-4 sm:px-6 lg:px-8</code> - Main containers\n              </li>\n              <li>\n                <code>max-w-6xl mx-auto px-4 sm:px-6 lg:px-8</code> - Content containers\n              </li>\n              <li>\n                <code>max-w-4xl mx-auto px-4 sm:px-6 lg:px-8</code> - Text-focused containers\n              </li>\n            </ul>\n          </div>\n        </div>\n      </section>\n\n      {/* Accessibility Guidelines */}\n      <section data-slot=\"accessibility-guidelines\">\n        <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-8\">Accessibility Standards</h2>\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Touch Targets</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ul className=\"space-y-2 text-muted-foreground\">\n                <li>\n                  Minimum: <code>min-h-[44px] min-w-[44px]</code>\n                </li>\n                <li>\n                  Buttons: <code>px-6 py-3</code> or larger\n                </li>\n                <li>All interactive elements meet WCAG guidelines</li>\n              </ul>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Text & Contrast</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ul className=\"space-y-2 text-muted-foreground\">\n                <li>\n                  Primary text: <code>text-foreground</code>\n                </li>\n                <li>\n                  Secondary text: <code>text-muted-foreground</code>\n                </li>\n                <li>All text meets WCAG AA contrast ratios</li>\n                <li>\n                  Use <code>text-balance</code> and <code>text-pretty</code>\n                </li>\n              </ul>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n    </div>\n  )\n}\n","size_bytes":10510},"app/servizi/noleggio-auto/page.tsx":{"content":"import NoleggioAutoClientPage from \"./NoleggioAutoClientPage\"\n\nexport const metadata = {\n  title: \"Noleggio Auto Marrakech | Tariffe Trasparenti | Morocco Dreams\",\n  description:\n    \"Noleggio auto a Marrakech con tariffe trasparenti. Chilometraggio illimitato, assistenza 24/7, consegna gratuita. Prenota ora!\",\n  keywords: \"noleggio auto marrakech, car rental morocco, auto economiche marrakech, suv marocco\",\n  openGraph: {\n    title: \"Noleggio Auto Marrakech - Tariffe Trasparenti\",\n    description: \"Scopri il Marocco in libert√† con la nostra flotta di veicoli selezionati.\",\n    type: \"website\",\n    images: [\"/images/car-rental-hero.jpg\"],\n  },\n  twitter: {\n    card: \"summary_large_image\",\n    title: \"Noleggio Auto Marrakech\",\n    description: \"Tariffe trasparenti e assistenza 24/7\",\n  },\n}\n\nexport default function NoleggioAutoPage() {\n  return <NoleggioAutoClientPage />\n}\n","size_bytes":886},"app/esperienze/trekking/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport { Mountain, Map, Compass, Sun, Users, Clock, Shield, Star } from \"lucide-react\"\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\nimport BookingModal from \"@/components/modals/BookingModal\"\n\nexport default function TrekkingAtlantePage() {\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  \n  const trekkingData = {\n    id: \"trekking-atlante\",\n    name: \"Trekking nell'Alto Atlante\",\n    price: 35,\n    duration: \"1-7 giorni\"\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <ContactBanner\n        title=\"Trekking nell'Alto Atlante\"\n        subtitle=\"Prenota subito una consulenza gratuita: itinerari su misura con guide locali certificate.\"\n      />\n\n      {/* Hero Image */}\n      <header className=\"relative\">\n        <div className=\"h-[320px] sm:h-[420px] lg:h-[520px] relative overflow-hidden\">\n          {/* Wishlist Button */}\n          <div className=\"absolute top-6 right-6 z-10\">\n            <WishlistButton\n              itemId=\"trekking-atlante\"\n              itemType=\"experience\"\n              itemTitle=\"Trekking nell'Alto Atlante\"\n              itemImage=\"/images/atlas-mountains.png\"\n              itemPrice={35}\n              itemDescription=\"Esplora i villaggi berberi e le vette maestose dell'Alto Atlante con guide certificate\"\n            />\n          </div>\n          <img\n            src=\"/images/atlas-mountains.png\"\n            alt=\"Trekking nell'Alto Atlante\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-black/30\" />\n          <div className=\"absolute bottom-8 left-8 text-white\">\n            <h1 className=\"text-3xl lg:text-4xl font-bold mb-2\">Trekking nell'Alto Atlante</h1>\n            <p className=\"text-lg opacity-90\">Tra villaggi berberi e vette maestose</p>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <section className=\"py-12 lg:py-16\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            {/* Content */}\n            <div className=\"lg:col-span-2\">\n              <div className=\"prose prose-lg max-w-none\">\n                <h2 className=\"text-2xl lg:text-3xl font-bold mb-4 text-foreground\">\n                  Scopri l'Alto Atlante: tra villaggi berberi e valli alpine\n                </h2>\n                <p className=\"text-muted-foreground text-lg mb-8\">\n                  L'Alto Atlante marocchino offre alcuni dei paesaggi pi√π spettacolari del Nord Africa. I nostri\n                  trekking ti porteranno attraverso valli verdeggianti, villaggi berberi autentici e sentieri che si\n                  snodano tra vette che superano i 4.000 metri. Ogni percorso √® adatto a diversi livelli di esperienza,\n                  dalle passeggiate giornaliere ai trekking di pi√π giorni con pernottamento in rifugi tradizionali.\n                </p>\n\n                {/* Features Grid */}\n                <div className=\"grid sm:grid-cols-2 gap-6 mb-10\">\n                  {[\n                    {\n                      icon: Mountain,\n                      title: \"Livelli per tutti\",\n                      text: \"Da principianti ad esperti, itinerari personalizzati in base alla tua preparazione fisica\",\n                    },\n                    {\n                      icon: Map,\n                      title: \"Guide certificate\",\n                      text: \"Guide UIAGM e accompagnatori berberi locali con esperienza pluriennale\",\n                    },\n                    {\n                      icon: Sun,\n                      title: \"Stagioni ideali\",\n                      text: \"Primavera (marzo-maggio) e autunno (settembre-novembre) con clima perfetto\",\n                    },\n                    {\n                      icon: Compass,\n                      title: \"Destinazioni iconiche\",\n                      text: \"Imlil, Toubkal, Valle Ourika, Ait Bouguemez e sentieri nascosti\",\n                    },\n                  ].map((feature, i) => (\n                    <div key={i} className=\"p-6 rounded-2xl bg-card border border-border\">\n                      <feature.icon className=\"w-8 h-8 text-orange-600 dark:text-orange-400 mb-4\" />\n                      <h3 className=\"font-bold text-lg mb-2 text-card-foreground\">{feature.title}</h3>\n                      <p className=\"text-muted-foreground text-sm leading-relaxed\">{feature.text}</p>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Sample Itinerary */}\n                <div className=\"bg-muted/50 rounded-2xl p-6 lg:p-8 mb-10 border border-border\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">\n                    Programma suggerito 3 giorni - Circuito Imlil\n                  </h3>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        1\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Marrakech ‚Üí Imlil ‚Üí Aroumd</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Partenza da Marrakech, arrivo a Imlil (1.740m). Trekking verso il villaggio di Aroumd, pranzo\n                          con famiglia berbera, pernottamento in guesthouse tradizionale.\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        2\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Ascesa verso Tizi n'Tamatert</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Trekking verso il passo Tizi n'Tamatert (2.279m), panorami mozzafiato sulla valle Imnane,\n                          discesa ad Ait Souka, pernottamento in rifugio.\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        3\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Villaggi berberi e rientro</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Circuito nei villaggi berberi, visita a un laboratorio di pane tradizionale, rientro a\n                          Marrakech nel pomeriggio.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* What's Included */}\n                <div className=\"mb-10\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">Cosa √® incluso</h3>\n                  <div className=\"grid sm:grid-cols-2 gap-4\">\n                    {[\n                      \"Guida certificata di montagna\",\n                      \"Mulattiere per il trasporto bagagli\",\n                      \"Pernottamenti in rifugi/guesthouse\",\n                      \"Tutti i pasti durante il trekking\",\n                      \"Trasferimenti privati da/per Marrakech\",\n                      \"Assicurazione locale e assistenza 24/7\",\n                      \"Attrezzatura di sicurezza\",\n                      \"Permessi e tasse locali\",\n                    ].map((item, idx) => (\n                      <div key={idx} className=\"flex items-center gap-3\">\n                        <div className=\"w-2 h-2 bg-green-500 rounded-full\" />\n                        <span className=\"text-muted-foreground\">{item}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Equipment List */}\n                <div className=\"mb-10\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">Equipaggiamento consigliato</h3>\n                  <div className=\"bg-orange-50 dark:bg-orange-900/20 rounded-2xl p-6 border border-border\">\n                    <div className=\"grid sm:grid-cols-2 gap-4 text-sm\">\n                      <div>\n                        <h4 className=\"font-semibold mb-2 text-foreground\">Abbigliamento</h4>\n                        <ul className=\"space-y-1 text-muted-foreground\">\n                          <li>‚Ä¢ Scarponi da trekking</li>\n                          <li>‚Ä¢ Abbigliamento a strati</li>\n                          <li>‚Ä¢ Giacca impermeabile</li>\n                          <li>‚Ä¢ Cappello e occhiali da sole</li>\n                        </ul>\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold mb-2 text-foreground\">Attrezzatura</h4>\n                        <ul className=\"space-y-1 text-muted-foreground\">\n                          <li>‚Ä¢ Zaino da trekking (30-40L)</li>\n                          <li>‚Ä¢ Sacco a pelo (fornito)</li>\n                          <li>‚Ä¢ Borraccia e purificatore</li>\n                          <li>‚Ä¢ Kit di primo soccorso</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Sidebar */}\n            <aside className=\"lg:col-span-1\">\n              <div className=\"sticky top-24 space-y-6\">\n                {/* Pricing Card */}\n                <div className=\"p-6 rounded-2xl bg-muted/50 border border-border\">\n                  <div className=\"text-center mb-4\">\n                    <h3 className=\"text-xl font-bold text-foreground mb-2\">Prezzo indicativo</h3>\n                    <div className=\"text-3xl font-extrabold text-orange-600 dark:text-orange-400 mb-1\">da ‚Ç¨180</div>\n                    <p className=\"text-sm text-muted-foreground\">per persona, gruppo 4+, 3 giorni</p>\n                  </div>\n\n                  <div className=\"space-y-3 mb-6\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Users className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Gruppo: 2-8 persone</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Clock className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Durata: 3-7 giorni</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Shield className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Assicurazione inclusa</span>\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={() => setShowBookingModal(true)}\n                    className=\"block w-full text-center px-6 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-300\"\n                  >\n                    Prenota / Richiedi Info\n                  </button>\n\n                  <p className=\"text-xs text-muted-foreground mt-3 text-center\">\n                    Il prezzo varia in base a stagione, numero partecipanti e servizi aggiuntivi.\n                  </p>\n                </div>\n\n                {/* Reviews */}\n                <div className=\"p-6 rounded-2xl bg-card border border-border\">\n                  <h3 className=\"text-lg font-bold text-card-foreground mb-4\">Recensioni</h3>\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <div className=\"flex\">\n                      {[...Array(5)].map((_, i) => (\n                        <Star key={i} className=\"w-4 h-4 fill-yellow-400 text-yellow-400\" />\n                      ))}\n                    </div>\n                    <span className=\"text-sm text-muted-foreground\">4.9/5 (127 recensioni)</span>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"text-sm\">\n                      <p className=\"text-muted-foreground italic\">\n                        \"Esperienza incredibile! La guida Hassan ci ha fatto scoprire luoghi magici.\"\n                      </p>\n                      <p className=\"text-muted-foreground/70 text-xs mt-1\">- Marco, Milano</p>\n                    </div>\n                    <div className=\"text-sm\">\n                      <p className=\"text-muted-foreground italic\">\n                        \"Organizzazione perfetta, paesaggi mozzafiato. Consigliatissimo!\"\n                      </p>\n                      <p className=\"text-muted-foreground/70 text-xs mt-1\">- Sarah, Roma</p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Contact Info */}\n                <div className=\"p-6 rounded-2xl bg-muted/50 border border-border\">\n                  <h3 className=\"text-lg font-bold text-foreground mb-4\">Hai domande?</h3>\n                  <div className=\"space-y-3 text-sm\">\n                    <a\n                      href=\"tel:+393292333370\"\n                      className=\"flex items-center gap-2 text-muted-foreground hover:text-orange-600\"\n                    >\n                      üìû +39 329 233 3370\n                    </a>\n                    <a\n                      href=\"mailto:info@moroccodreams.it\"\n                      className=\"flex items-center gap-2 text-muted-foreground hover:text-orange-600\"\n                    >\n                      ‚úâÔ∏è info@moroccodreams.it\n                    </a>\n                    <a\n                      href=\"https://wa.me/393292333370\"\n                      className=\"flex items-center gap-2 text-muted-foreground hover:text-green-600\"\n                    >\n                      üí¨ WhatsApp 24/7\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </aside>\n          </div>\n        </div>\n      </section>\n\n      {/* Booking Modal */}\n      {showBookingModal && (\n        <BookingModal\n          isOpen={showBookingModal}\n          onClose={() => setShowBookingModal(false)}\n          itemId={trekkingData.id}\n          itemType=\"experience\"\n          itemTitle={trekkingData.name}\n          basePrice={trekkingData.price}\n          duration={trekkingData.duration}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":14962},"app/api/public/content/route.ts":{"content":"// Public Content API - Client-side safe access to published content\nimport { NextRequest, NextResponse } from 'next/server'\nimport { adminDb } from '@/lib/auth-admin'\n\n// Public read-only access to published content\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const collection = searchParams.get('collection')\n    const id = searchParams.get('id')\n    const slug = searchParams.get('slug')\n    const featured = searchParams.get('featured')\n    const category = searchParams.get('category')\n    const limit = parseInt(searchParams.get('limit') || '50')\n    \n    if (!collection) {\n      return NextResponse.json({ error: 'Collection parameter required' }, { status: 400 })\n    }\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    let query = adminDb.collection(collection)\n    \n    // Always filter by published = true for public API\n    query = query.where('published', '==', true)\n    \n    // Get specific document by ID\n    if (id) {\n      const doc = await adminDb.collection(collection).doc(id).get()\n      if (!doc.exists) {\n        return NextResponse.json({ error: 'Document not found' }, { status: 404 })\n      }\n      \n      const data = doc.data()\n      if (!data?.published) {\n        return NextResponse.json({ error: 'Document not published' }, { status: 404 })\n      }\n      \n      return NextResponse.json({ \n        id: doc.id, \n        ...data \n      })\n    }\n    \n    // Get specific document by slug\n    if (slug) {\n      const slugQuery = query.where('slug', '==', slug)\n      const snapshot = await slugQuery.get()\n      \n      if (snapshot.empty) {\n        return NextResponse.json({ error: 'Document not found' }, { status: 404 })\n      }\n      \n      const doc = snapshot.docs[0]\n      return NextResponse.json({ \n        id: doc.id, \n        ...doc.data() \n      })\n    }\n    \n    // Filter by featured\n    if (featured === 'true') {\n      query = query.where('featured', '==', true)\n    }\n    \n    // Filter by category\n    if (category) {\n      query = query.where('category', '==', category)\n    }\n    \n    // Apply limit and ordering - with Firestore index fallback\n    let items: any[] = []\n    let indexMissing = false\n    \n    try {\n      // Try query with ordering (requires composite index)\n      query = query.orderBy('updatedAt', 'desc').limit(Math.min(limit, 100))\n      const snapshot = await query.get()\n      items = snapshot.docs.map((doc: any) => ({\n        id: doc.id,\n        ...doc.data()\n      }))\n    } catch (error: any) {\n      // Check if it's a Firestore index error\n      if (error?.code === 9 || error?.message?.includes('requires an index')) {\n        console.warn(`üî• Firestore index missing for collection '${collection}'. Using fallback query without ordering.`)\n        indexMissing = true\n        \n        // Fallback: Query without ordering (no index required)\n        let fallbackQuery = adminDb.collection(collection).where('published', '==', true)\n        \n        // Re-apply filters\n        if (featured === 'true') {\n          fallbackQuery = fallbackQuery.where('featured', '==', true)\n        }\n        if (category) {\n          fallbackQuery = fallbackQuery.where('category', '==', category)\n        }\n        \n        fallbackQuery = fallbackQuery.limit(Math.min(limit, 100))\n        const snapshot = await fallbackQuery.get()\n        items = snapshot.docs.map((doc: any) => ({\n          id: doc.id,\n          ...doc.data()\n        }))\n      } else {\n        // Re-throw non-index errors\n        throw error\n      }\n    }\n    \n    // Add pagination info with index status\n    const response = {\n      items,\n      count: items.length,\n      hasMore: items.length === limit,\n      filters: {\n        collection,\n        ...(featured && { featured }),\n        ...(category && { category }),\n        limit\n      },\n      // Include index status for debugging\n      meta: {\n        indexMissing,\n        ...(indexMissing && {\n          message: `‚ö†Ô∏è Database optimization needed: Create Firestore composite index for faster queries`,\n          indexNeeded: `Collection: ${collection}, Fields: (published, updatedAt)`,\n          performance: \"Queries are working but not optimized - results may be unordered\"\n        })\n      }\n    }\n    \n    return NextResponse.json(response)\n    \n  } catch (error) {\n    console.error('Public content API error:', error)\n    return NextResponse.json({ \n      error: 'Error fetching content' \n    }, { status: 500 })\n  }\n}\n\n// OPTIONS: CORS preflight for public API\nexport async function OPTIONS(request: NextRequest) {\n  return new NextResponse(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  })\n}","size_bytes":4897},"components/admin/CMSInterface.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Plus, Edit, Trash2, Save, Eye, EyeOff, Calendar, Image, Type, Layout, Database } from 'lucide-react';\nimport { CMSService, CMSContent, CMSSection } from '@/lib/cms';\n\ninterface CMSTab {\n  id: string;\n  name: string;\n  icon: React.ComponentType<{ className?: string }>;\n}\n\nexport default function CMSInterface() {\n  const [activeTab, setActiveTab] = useState('content');\n  const [contents, setContents] = useState<CMSContent[]>([]);\n  const [sections, setSections] = useState<CMSSection[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [editingItem, setEditingItem] = useState<CMSContent | null>(null);\n  const [showEditor, setShowEditor] = useState(false);\n  const [populatingDb, setPopulatingDb] = useState(false);\n  const [populationResult, setPopulationResult] = useState<any>(null);\n\n  const tabs: CMSTab[] = [\n    { id: 'content', name: 'Gestione Contenuti', icon: Type },\n    { id: 'sections', name: 'Sezioni Homepage', icon: Layout },\n    { id: 'blog', name: 'Blog', icon: Calendar },\n    { id: 'cities', name: 'Pagine Citt√†', icon: Image },\n    { id: 'database', name: 'Database Setup', icon: Database }\n  ];\n\n  useEffect(() => {\n    loadData();\n  }, [activeTab]);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      if (activeTab === 'content' || activeTab === 'blog' || activeTab === 'cities') {\n        const contentData = await CMSService.getAllContent();\n        setContents(contentData);\n      } else if (activeTab === 'sections') {\n        const sectionsData = await CMSService.getAllSections();\n        setSections(sectionsData);\n      } else if (activeTab === 'database') {\n        // Database tab doesn't need to load data initially\n      }\n    } catch (error) {\n      console.error('Error loading CMS data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateContent = () => {\n    const newContent: Partial<CMSContent> = {\n      type: activeTab === 'blog' ? 'blog' : activeTab === 'cities' ? 'page' : 'section',\n      title: '',\n      slug: '',\n      content: {\n        it: {\n          title: '',\n          description: '',\n          body: ''\n        }\n      },\n      published: false,\n      featured: false,\n      category: '',\n      tags: [],\n      images: [],\n      author: 'Admin'\n    };\n    setEditingItem(newContent as CMSContent);\n    setShowEditor(true);\n  };\n\n  const handleSaveContent = async (content: CMSContent) => {\n    try {\n      if (content.id) {\n        await CMSService.updateContent(content.id, content);\n      } else {\n        await CMSService.saveContent(content);\n      }\n      setShowEditor(false);\n      setEditingItem(null);\n      loadData();\n    } catch (error) {\n      console.error('Error saving content:', error);\n    }\n  };\n\n  const togglePublish = async (content: CMSContent) => {\n    try {\n      if (content.id) {\n        await CMSService.updateContent(content.id, { published: !content.published });\n        loadData();\n      }\n    } catch (error) {\n      console.error('Error toggling publish:', error);\n    }\n  };\n\n  const handlePopulateDatabase = async () => {\n    setPopulatingDb(true);\n    setPopulationResult(null);\n    \n    try {\n      // Import the population data directly (client-side approach for admin)\n      const { populateDatabaseDirect } = await import('@/lib/populate-database-direct');\n      const result = await populateDatabaseDirect();\n      setPopulationResult(result);\n      \n      if (result.success) {\n        // Reload data if we're on a content tab\n        if (['content', 'blog', 'cities', 'sections'].includes(activeTab)) {\n          loadData();\n        }\n      }\n    } catch (error) {\n      console.error('Error populating database:', error);\n      setPopulationResult({ \n        success: false, \n        error: 'Errore durante la popolazione del database: ' + (error as Error).message\n      });\n    } finally {\n      setPopulatingDb(false);\n    }\n  };\n\n  const renderDatabaseTab = () => {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex justify-between items-center\">\n          <h3 className=\"text-lg font-semibold\">Database Management</h3>\n        </div>\n        \n        <div className=\"bg-card border border-border rounded-lg p-6\">\n          <h4 className=\"text-md font-medium mb-4\">Popola Database</h4>\n          <p className=\"text-sm text-muted-foreground mb-4\">\n            Popola il database con i dati esistenti dalle pagine del sito (citt√†, esperienze, viaggi, componenti pacchetti).\n            Utilizza logica upsert per evitare duplicati.\n          </p>\n          \n          <button\n            onClick={handlePopulateDatabase}\n            disabled={populatingDb}\n            className=\"flex items-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50\"\n          >\n            <Database className=\"w-4 h-4\" />\n            <span>{populatingDb ? 'Popolando...' : 'Popola Database'}</span>\n          </button>\n          \n          {populationResult && (\n            <div className=\"mt-4 p-4 border rounded-lg\">\n              {populationResult.success ? (\n                <div className=\"text-green-600\">\n                  <p className=\"font-medium\">‚úÖ Database popolato con successo!</p>\n                  {populationResult.summary && (\n                    <div className=\"mt-2 text-sm\">\n                      <p>Citt√†: {populationResult.summary.cities}</p>\n                      <p>Esperienze: {populationResult.summary.experiences}</p>\n                      <p>Viaggi: {populationResult.summary.travels}</p>\n                      <p>Blog: {populationResult.summary.blog}</p>\n                      <p>Componenti: {populationResult.summary.packageComponents}</p>\n                      {populationResult.summary.errors > 0 && (\n                        <p className=\"text-orange-600\">Errori: {populationResult.summary.errors}</p>\n                      )}\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"text-red-600\">\n                  <p className=\"font-medium\">‚ùå Errore durante la popolazione</p>\n                  <p className=\"text-sm mt-1\">{populationResult.error}</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderContentList = () => {\n    const filteredContents = contents.filter(content => {\n      if (activeTab === 'blog') return content.type === 'blog';\n      if (activeTab === 'cities') return content.category === 'city';\n      return content.type !== 'blog' && content.category !== 'city';\n    });\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex justify-between items-center\">\n          <h3 className=\"text-lg font-semibold\">\n            {activeTab === 'blog' ? 'Articoli Blog' : \n             activeTab === 'cities' ? 'Pagine Citt√†' : 'Contenuti'}\n          </h3>\n          <button\n            onClick={handleCreateContent}\n            className=\"flex items-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:opacity-90\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            <span>Nuovo</span>\n          </button>\n        </div>\n\n        {loading ? (\n          <div className=\"space-y-3\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"bg-card p-4 rounded-lg animate-pulse\">\n                <div className=\"h-4 bg-muted rounded w-1/3 mb-2\"></div>\n                <div className=\"h-3 bg-muted rounded w-2/3\"></div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {filteredContents.map((content) => (\n              <div key={content.id} className=\"bg-card border border-border rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-3\">\n                      <h4 className=\"font-medium\">{content.title}</h4>\n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        content.published \n                          ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300'\n                          : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300'\n                      }`}>\n                        {content.published ? 'Pubblicato' : 'Bozza'}\n                      </span>\n                      {content.featured && (\n                        <span className=\"px-2 py-1 text-xs rounded-full bg-primary/10 text-primary\">\n                          In Evidenza\n                        </span>\n                      )}\n                    </div>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {content.slug} ‚Ä¢ {content.category || 'Nessuna categoria'}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <button\n                      onClick={() => togglePublish(content)}\n                      className=\"p-2 hover:bg-muted rounded-lg\"\n                      title={content.published ? 'Nascondi' : 'Pubblica'}\n                    >\n                      {content.published ? (\n                        <EyeOff className=\"w-4 h-4\" />\n                      ) : (\n                        <Eye className=\"w-4 h-4\" />\n                      )}\n                    </button>\n                    <button\n                      onClick={() => {\n                        setEditingItem(content);\n                        setShowEditor(true);\n                      }}\n                      className=\"p-2 hover:bg-muted rounded-lg\"\n                      title=\"Modifica\"\n                    >\n                      <Edit className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => handleDeleteContent(content.id!)}\n                      className=\"p-2 hover:bg-muted text-destructive rounded-lg\"\n                      title=\"Elimina\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const handleDeleteContent = async (contentId: string) => {\n    if (confirm('Sei sicuro di voler eliminare questo contenuto?')) {\n      try {\n        await CMSService.deleteContent(contentId);\n        loadData();\n      } catch (error) {\n        console.error('Error deleting content:', error);\n      }\n    }\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n          Content Management System\n        </h1>\n        <p className=\"text-gray-600 dark:text-gray-300 mt-2\">\n          Gestisci tutti i contenuti del sito in modo centralizzato\n        </p>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"border-b border-border mb-6\">\n        <nav className=\"flex space-x-8\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === tab.id\n                  ? 'border-primary text-primary'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <tab.icon className=\"w-4 h-4\" />\n              <span>{tab.name}</span>\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      {/* Content Area */}\n      <div className=\"bg-background rounded-lg\">\n        {activeTab === 'database' ? renderDatabaseTab() : renderContentList()}\n      </div>\n\n      {/* Content Editor Modal */}\n      {showEditor && editingItem && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-background border border-border rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n            <div className=\"p-6 border-b border-border\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold\">\n                  {editingItem.id ? 'Modifica Contenuto' : 'Nuovo Contenuto'}\n                </h3>\n                <button\n                  onClick={() => setShowEditor(false)}\n                  className=\"p-2 hover:bg-muted rounded-lg\"\n                >\n                  √ó\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\">\n              <ContentEditor\n                content={editingItem}\n                onSave={handleSaveContent}\n                onCancel={() => setShowEditor(false)}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface ContentEditorProps {\n  content: CMSContent;\n  onSave: (content: CMSContent) => void;\n  onCancel: () => void;\n}\n\nfunction ContentEditor({ content, onSave, onCancel }: ContentEditorProps) {\n  const [formData, setFormData] = useState(content);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSave(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Titolo</label>\n          <input\n            type=\"text\"\n            value={formData.title}\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n            className=\"w-full px-3 py-2 border border-border rounded-lg\"\n            required\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Slug URL</label>\n          <input\n            type=\"text\"\n            value={formData.slug}\n            onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\n            className=\"w-full px-3 py-2 border border-border rounded-lg\"\n            required\n          />\n        </div>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium mb-2\">Descrizione</label>\n        <textarea\n          value={formData.content?.it?.description || ''}\n          onChange={(e) => setFormData({\n            ...formData,\n            content: {\n              ...formData.content,\n              it: {\n                ...formData.content?.it,\n                title: formData.title,\n                description: e.target.value\n              }\n            }\n          })}\n          rows={3}\n          className=\"w-full px-3 py-2 border border-border rounded-lg\"\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium mb-2\">Contenuto</label>\n        <textarea\n          value={formData.content?.it?.body || ''}\n          onChange={(e) => setFormData({\n            ...formData,\n            content: {\n              ...formData.content,\n              it: {\n                ...formData.content?.it,\n                title: formData.title,\n                description: formData.content?.it?.description || '',\n                body: e.target.value\n              }\n            }\n          })}\n          rows={8}\n          className=\"w-full px-3 py-2 border border-border rounded-lg\"\n          placeholder=\"Contenuto principale...\"\n        />\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Categoria</label>\n          <input\n            type=\"text\"\n            value={formData.category || ''}\n            onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n            className=\"w-full px-3 py-2 border border-border rounded-lg\"\n          />\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <label className=\"flex items-center\">\n            <input\n              type=\"checkbox\"\n              checked={formData.published}\n              onChange={(e) => setFormData({ ...formData, published: e.target.checked })}\n              className=\"mr-2\"\n            />\n            Pubblicato\n          </label>\n          <label className=\"flex items-center\">\n            <input\n              type=\"checkbox\"\n              checked={formData.featured}\n              onChange={(e) => setFormData({ ...formData, featured: e.target.checked })}\n              className=\"mr-2\"\n            />\n            In Evidenza\n          </label>\n        </div>\n      </div>\n\n      <div className=\"flex justify-end space-x-3\">\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"px-4 py-2 border border-border rounded-lg hover:bg-muted\"\n        >\n          Annulla\n        </button>\n        <button\n          type=\"submit\"\n          className=\"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:opacity-90\"\n        >\n          Salva\n        </button>\n      </div>\n    </form>\n  );\n}","size_bytes":17220},"app/esperienze/fotografia/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Camera, Sun, Map, Users, Clock, Star, Aperture, MessageCircle, Check } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function FotografiaPage() {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    numPeople: \"1\",\n    workshopType: \"street\" as \"street\" | \"portrait\" | \"landscape\" | \"architecture\" | \"mixed\",\n    duration: \"half-day\" as \"half-day\" | \"full-day\" | \"multi-day\",\n    preferredLocation: \"\",\n    experienceLevel: \"beginner\" as \"beginner\" | \"intermediate\" | \"advanced\",\n    notes: \"\",\n    extras: {\n      equipmentRental: false,\n      postProduction: false,\n      privateTour: false,\n    }\n  })\n\n  const workshopTypes = [\n    { id: \"street\", name: \"Street Photography\", description: \"Medine, mercati, vita quotidiana\" },\n    { id: \"portrait\", name: \"Ritratto Culturale\", description: \"Berberi, nomadi, artigiani\" },\n    { id: \"landscape\", name: \"Paesaggio\", description: \"Deserto, montagne, costa\" },\n    { id: \"architecture\", name: \"Architettura\", description: \"Moschee, riad, kasbe\" },\n    { id: \"mixed\", name: \"Mix Completo\", description: \"Tutti gli stili combinati\" },\n  ]\n\n  const handleWhatsappBooking = () => {\n    const workshopTypeName = workshopTypes.find(t => t.id === formData.workshopType)?.name || \"\"\n    const durationText = formData.duration === \"half-day\" ? \"Mezza giornata\" : formData.duration === \"full-day\" ? \"Giornata intera\" : \"Pi√π giorni\"\n    const levelText = formData.experienceLevel === \"beginner\" ? \"Principiante\" : formData.experienceLevel === \"intermediate\" ? \"Intermedio\" : \"Avanzato\"\n    \n    const extras = []\n    if (formData.extras.equipmentRental) extras.push(\"Noleggio attrezzatura\")\n    if (formData.extras.postProduction) extras.push(\"Post-produzione\")\n    if (formData.extras.privateTour) extras.push(\"Tour privato\")\n    \n    let message = `üé® *PRENOTAZIONE WORKSHOP FOTOGRAFIA*\\n\\n`\n    message += `üë§ *Nome:* ${formData.name}\\n`\n    message += `üìß *Email:* ${formData.email}\\n`\n    message += `üì± *Telefono:* ${formData.phone}\\n\\n`\n    message += `üë• *Numero partecipanti:* ${formData.numPeople}\\n`\n    message += `üì∏ *Tipo workshop:* ${workshopTypeName}\\n`\n    message += `‚è±Ô∏è *Durata:* ${durationText}\\n`\n    message += `üìä *Livello esperienza:* ${levelText}\\n`\n    \n    if (formData.preferredLocation) {\n      message += `üìç *Luogo preferito:* ${formData.preferredLocation}\\n`\n    }\n    \n    if (extras.length > 0) {\n      message += `\\n‚ú® *Servizi extra:*\\n${extras.map(e => `‚Ä¢ ${e}`).join('\\n')}\\n`\n    }\n    \n    if (formData.notes) {\n      message += `\\nüí¨ *Note:* ${formData.notes}`\n    }\n\n    const whatsappUrl = `https://wa.me/393292333370?text=${encodeURIComponent(message)}`\n    window.open(whatsappUrl, '_blank')\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <ContactBanner\n        title=\"Workshop di Fotografia\"\n        subtitle=\"Dalla luce del deserto alle medine colorate: uscite fotografiche e coaching personalizzato.\"\n      />\n\n      <header className=\"relative\">\n        <div className=\"h-[320px] sm:h-[420px] lg:h-[520px] relative overflow-hidden\">\n          {/* Wishlist Button */}\n          <div className=\"absolute top-6 right-6 z-10\">\n            <WishlistButton\n              itemId=\"fotografia-workshop\"\n              itemType=\"experience\"\n              itemTitle=\"Workshop di Fotografia\"\n              itemImage=\"/images/photo-tour.png\"\n              itemDescription=\"Cattura l'essenza del Marocco con coaching fotografico professionale\"\n            />\n          </div>\n          <img\n            src=\"/images/photo-tour.png\"\n            alt=\"Workshop di Fotografia in Marocco\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-black/30\" />\n          <div className=\"absolute bottom-8 left-8 text-white\">\n            <h1 className=\"text-3xl lg:text-4xl font-bold mb-2\">Workshop di Fotografia</h1>\n            <p className=\"text-lg opacity-90\">Cattura l'essenza del Marocco</p>\n          </div>\n        </div>\n      </header>\n\n      <section className=\"py-12 lg:py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2\">\n              <div className=\"prose prose-lg max-w-none\">\n                <h2 className=\"text-2xl lg:text-3xl font-bold mb-4 text-foreground\">\n                  Fotografia in Marocco: raccontare storie con la luce\n                </h2>\n                <p className=\"text-muted-foreground text-lg mb-8\">\n                  Il Marocco offre scenari fotografici unici al mondo: dalla luce dorata del deserto del Sahara ai\n                  colori vibranti delle medine, dai ritratti berberi alle architetture islamiche. I nostri workshop\n                  fotografici sono guidati da fotografi professionisti che conoscono i luoghi migliori e i momenti\n                  perfetti per ogni scatto.\n                </p>\n\n                <div className=\"grid sm:grid-cols-2 gap-6 mb-10\">\n                  {[\n                    {\n                      icon: Camera,\n                      title: \"Coaching tecnico\",\n                      text: \"Esposizione, composizione, uso della luce naturale e post-produzione sul campo\",\n                    },\n                    {\n                      icon: Sun,\n                      title: \"Golden/Blue Hour\",\n                      text: \"Pianificazione accurata con app specializzate per la luce perfetta\",\n                    },\n                    {\n                      icon: Map,\n                      title: \"Location esclusive\",\n                      text: \"Spot selezionati lontani dal turismo di massa\",\n                    },\n                    {\n                      icon: Users,\n                      title: \"Piccoli gruppi\",\n                      text: \"Massimo 6 partecipanti per attenzione personalizzata\",\n                    },\n                  ].map((feature, i) => (\n                    <div key={i} className=\"p-6 rounded-2xl bg-card border border-border\">\n                      <feature.icon className=\"w-8 h-8 text-purple-600 dark:text-purple-400 mb-4\" />\n                      <h3 className=\"font-bold text-lg mb-2 text-card-foreground\">{feature.title}</h3>\n                      <p className=\"text-muted-foreground text-sm leading-relaxed\">{feature.text}</p>\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"bg-muted/50 rounded-2xl p-6 lg:p-8 mb-10 border border-border\">\n                  <h3 className=\"text-2xl font-bold mb-6 text-foreground\">Tipologie di workshop</h3>\n                  <div className=\"grid md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-4\">\n                      <div className=\"p-4 bg-card/50 rounded-xl border border-border\">\n                        <h4 className=\"font-semibold text-card-foreground mb-2\">Street Photography</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Medine di Marrakech e Fes, mercati, artigiani al lavoro, vita quotidiana autentica\n                        </p>\n                      </div>\n                      <div className=\"p-4 bg-card/50 rounded-xl border border-border\">\n                        <h4 className=\"font-semibold text-card-foreground mb-2\">Ritratto Culturale</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Berberi dell'Atlante, nomadi del deserto, artigiani, con rispetto e autorizzazioni\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"space-y-4\">\n                      <div className=\"p-4 bg-card/50 rounded-xl border border-border\">\n                        <h4 className=\"font-semibold text-card-foreground mb-2\">Paesaggio</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Sahara all'alba, Atlante innevato, costa atlantica, oasi e palmeti\n                        </p>\n                      </div>\n                      <div className=\"p-4 bg-card/50 rounded-xl border border-border\">\n                        <h4 className=\"font-semibold text-card-foreground mb-2\">Architettura</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Moschee, riad, kasbe, dettagli decorativi, giochi di luce e ombra\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl p-6 lg:p-8 border border-border\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground flex items-center gap-2\">\n                    <Star className=\"w-6 h-6 text-purple-600\" />\n                    Cosa include\n                  </h3>\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    {[\n                      \"Guida fotografo professionista\",\n                      \"Permessi per location esclusive\",\n                      \"Trasporto durante il workshop\",\n                      \"Briefing tecnico personalizzato\",\n                      \"Revisione portfolio al termine\",\n                      \"Consigli post-produzione\",\n                    ].map((item, i) => (\n                      <div key={i} className=\"flex items-start gap-2\">\n                        <Check className=\"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5\" />\n                        <span className=\"text-muted-foreground\">{item}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"lg:col-span-1\">\n              <Card className=\"sticky top-24\">\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-2xl font-bold mb-6 text-foreground\">Prenota il tuo Workshop</h3>\n                  \n                  <div className=\"space-y-6\">\n                    <div>\n                      <Label htmlFor=\"name\">Nome e Cognome *</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                        placeholder=\"Mario Rossi\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"email\">Email *</Label>\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        value={formData.email}\n                        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                        placeholder=\"mario@email.com\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"phone\">Telefono *</Label>\n                      <Input\n                        id=\"phone\"\n                        type=\"tel\"\n                        value={formData.phone}\n                        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                        placeholder=\"+39 123 456 7890\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"numPeople\">Numero Partecipanti</Label>\n                      <Input\n                        id=\"numPeople\"\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"6\"\n                        value={formData.numPeople}\n                        onChange={(e) => setFormData({ ...formData, numPeople: e.target.value })}\n                      />\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Tipo di Workshop *</Label>\n                      <RadioGroup\n                        value={formData.workshopType}\n                        onValueChange={(value: string) => setFormData({ ...formData, workshopType: value as \"street\" | \"portrait\" | \"landscape\" | \"architecture\" | \"mixed\" })}\n                      >\n                        {workshopTypes.map((type) => (\n                          <div key={type.id} className=\"flex items-start space-x-3 mb-3\">\n                            <RadioGroupItem value={type.id} id={type.id} className=\"mt-1\" />\n                            <div className=\"flex-1\">\n                              <Label htmlFor={type.id} className=\"cursor-pointer font-medium\">\n                                {type.name}\n                              </Label>\n                              <p className=\"text-xs text-muted-foreground\">{type.description}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </RadioGroup>\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Durata</Label>\n                      <RadioGroup\n                        value={formData.duration}\n                        onValueChange={(value: string) => setFormData({ ...formData, duration: value as \"half-day\" | \"full-day\" | \"multi-day\" })}\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"half-day\" id=\"half-day\" />\n                          <Label htmlFor=\"half-day\" className=\"cursor-pointer\">Mezza giornata (4 ore)</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"full-day\" id=\"full-day\" />\n                          <Label htmlFor=\"full-day\" className=\"cursor-pointer\">Giornata intera (8 ore)</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"multi-day\" id=\"multi-day\" />\n                          <Label htmlFor=\"multi-day\" className=\"cursor-pointer\">Pi√π giorni (personalizzato)</Label>\n                        </div>\n                      </RadioGroup>\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Livello di Esperienza</Label>\n                      <RadioGroup\n                        value={formData.experienceLevel}\n                        onValueChange={(value: string) => setFormData({ ...formData, experienceLevel: value as \"beginner\" | \"intermediate\" | \"advanced\" })}\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"beginner\" id=\"beginner\" />\n                          <Label htmlFor=\"beginner\" className=\"cursor-pointer\">Principiante</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"intermediate\" id=\"intermediate\" />\n                          <Label htmlFor=\"intermediate\" className=\"cursor-pointer\">Intermedio</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"advanced\" id=\"advanced\" />\n                          <Label htmlFor=\"advanced\" className=\"cursor-pointer\">Avanzato</Label>\n                        </div>\n                      </RadioGroup>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"preferredLocation\">Luogo Preferito (opzionale)</Label>\n                      <Input\n                        id=\"preferredLocation\"\n                        value={formData.preferredLocation}\n                        onChange={(e) => setFormData({ ...formData, preferredLocation: e.target.value })}\n                        placeholder=\"Es: Medina di Marrakech, Deserto...\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Servizi Extra</Label>\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id=\"equipmentRental\"\n                            checked={formData.extras.equipmentRental}\n                            onCheckedChange={(checked: boolean) =>\n                              setFormData({\n                                ...formData,\n                                extras: { ...formData.extras, equipmentRental: checked }\n                              })\n                            }\n                          />\n                          <Label htmlFor=\"equipmentRental\" className=\"cursor-pointer text-sm\">\n                            Noleggio attrezzatura fotografica\n                          </Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id=\"postProduction\"\n                            checked={formData.extras.postProduction}\n                            onCheckedChange={(checked: boolean) =>\n                              setFormData({\n                                ...formData,\n                                extras: { ...formData.extras, postProduction: checked }\n                              })\n                            }\n                          />\n                          <Label htmlFor=\"postProduction\" className=\"cursor-pointer text-sm\">\n                            Sessione post-produzione (Lightroom/Photoshop)\n                          </Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id=\"privateTour\"\n                            checked={formData.extras.privateTour}\n                            onCheckedChange={(checked: boolean) =>\n                              setFormData({\n                                ...formData,\n                                extras: { ...formData.extras, privateTour: checked }\n                              })\n                            }\n                          />\n                          <Label htmlFor=\"privateTour\" className=\"cursor-pointer text-sm\">\n                            Tour privato esclusivo\n                          </Label>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"notes\">Note Aggiuntive</Label>\n                      <textarea\n                        id=\"notes\"\n                        value={formData.notes}\n                        onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                        placeholder=\"Esigenze particolari, attrezzatura disponibile, preferenze...\"\n                        className=\"w-full min-h-[100px] px-3 py-2 rounded-md border border-input bg-background text-sm\"\n                      />\n                    </div>\n\n                    <Button\n                      onClick={handleWhatsappBooking}\n                      className=\"w-full bg-green-600 hover:bg-green-700 text-lg py-6\"\n                      size=\"lg\"\n                      disabled={!formData.name || !formData.email || !formData.phone}\n                    >\n                      <MessageCircle className=\"mr-2 h-5 w-5\" />\n                      Prenota su WhatsApp\n                    </Button>\n\n                    <p className=\"text-xs text-muted-foreground text-center\">\n                      Ti risponderemo entro 24 ore con un preventivo personalizzato\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-20 bg-gradient-to-r from-purple-600 to-pink-600\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">Pronto a Catturare il Marocco?</h2>\n          <p className=\"text-xl text-purple-100 mb-8\">\n            Workshop personalizzati ‚Ä¢ Fotografi professionisti ‚Ä¢ Location esclusive\n          </p>\n          <div className=\"flex justify-center\">\n            <Button\n              size=\"lg\"\n              variant=\"outline\"\n              className=\"border-white text-white hover:bg-white hover:text-purple-600 bg-transparent\"\n              onClick={() => document.querySelector(\"input[type='text']\")?.scrollIntoView({ behavior: \"smooth\" })}\n            >\n              <Camera className=\"mr-2 h-5 w-5\" />\n              Prenota Ora\n            </Button>\n          </div>\n        </div>\n      </section>\n    </div>\n  )\n}\n","size_bytes":21352},"components/ui/button.tsx":{"content":"import type * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        cta: \"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg hover:from-orange-600 hover:to-red-600 hover:shadow-xl transition-all duration-300\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        \"outline-white\":\n          \"border-2 border-white text-white hover:bg-white hover:text-orange-600 transition-all duration-300\",\n        secondary: \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-11 px-4 py-2 has-[>svg]:px-3 min-h-[44px]\",\n        sm: \"h-10 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 min-h-[40px]\",\n        lg: \"h-12 rounded-xl px-6 lg:px-8 py-3 lg:py-4 has-[>svg]:px-4 min-h-[48px] font-semibold\",\n        icon: \"size-11 min-w-[44px] min-h-[44px]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return <Comp data-slot=\"button\" className={cn(buttonVariants({ variant, size, className }))} {...props} />\n}\n\nexport { Button, buttonVariants }\n","size_bytes":2470},"app/viaggi/su-misura/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { ArrowRight, ArrowLeft, CheckCircle, MessageCircle, Phone, FileText } from \"lucide-react\"\n\nimport { useRef } from \"react\"\nimport jsPDF from \"jspdf\"\nimport autoTable from \"jspdf-autotable\"\nimport { useAuth } from \"@/context/AuthContext\"\nimport { useNotifications } from \"@/components/NotificationSystem\"\nimport { db } from \"@/lib/firebase\"\nimport { collection, addDoc, Timestamp } from \"firebase/firestore\"\nimport { COLLECTIONS, CustomTripRequest } from \"@/lib/firestore-schema\"\n\nexport default function CustomTripsPage() {\n  const { user } = useAuth()\n  const { showSuccess, showWarning, showError, showInfo } = useNotifications()\n  const [currentStep, setCurrentStep] = useState(1)\n  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({})\n  const [isSaving, setIsSaving] = useState(false)\n  const [formData, setFormData] = useState({\n    // Step 1 - Basic Info\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    travelers: 2,\n    children: 0,\n    childrenAges: \"\",\n    departureDate: \"\",\n    returnDate: \"\",\n    duration: 7,\n    departureCity: \"\",\n    budget: 1500,\n\n    // Step 2 - Travel Style\n    travelStyle: [] as string[],\n    travelPace: \"moderate\",\n    interests: [] as string[],\n\n    // Step 3 - Destinations\n    destinations: [] as string[],\n    mustVisit: \"\",\n\n    // Step 4 - Accommodation & Transport\n    accommodation: \"riad\",\n    accommodationPreferences: [] as string[],\n    transport: \"private-driver\",\n    additionalServices: [] as string[],\n\n    // Step 5 - Final Details\n    specialRequests: \"\",\n    dietaryRestrictions: \"\",\n    accessibility: \"\",\n    occasion: \"\",\n  })\n\n  const WHATSAPP_NUMBER = \"393292333370\" // Solo numeri!\n\n  const privacyRef = useRef<HTMLInputElement>(null)\n\n  const composeWhatsappMessage = () => {\n    return `Ciao Morocco Dreams! Vorrei ricevere una proposta di viaggio personalizzata. Ecco i miei dettagli:\nüë§ *Dati personali*\nNome: ${formData.name || \"-\"}\nEmail: ${formData.email || \"-\"}\nTelefono: ${formData.phone || \"-\"}\nüéí *Viaggiatori*: ${formData.travelers} adulto/i${formData.children ? \", \" + formData.children + \" bambino/i\" : \"\"}\nüóì *Date*: ${formData.departureDate || \"?\"} ‚Üí ${formData.returnDate || \"?\"}\nBudget/persona: ‚Ç¨${formData.budget || \"-\"}\nüìç *Destinazioni*: ${(formData.destinations || []).join(\", \") || \"-\"}\nüé® *Interessi*: ${(formData.interests || []).join(\", \") || \"-\"}\nüè† *Alloggio*: ${formData.accommodation || \"-\"}\nüöó *Trasporto*: ${formData.transport || \"-\"}\nüí° *Preferenze alloggio*: ${(formData.accommodationPreferences || []).join(\", \") || \"-\"}\n‚ûï *Servizi aggiuntivi*: ${(formData.additionalServices || []).join(\", \") || \"-\"}\nüéâ *Occasione speciale*: ${formData.occasion || \"-\"}\nü•ó *Restr. alimentari*: ${formData.dietaryRestrictions || \"-\"}\n‚ôøÔ∏è *Accessibilit√†*: ${formData.accessibility || \"-\"}\nüìù *Richieste*: ${formData.specialRequests || \"-\"}\n_Grazie!_`\n  }\n\n  const handleWhatsapp = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!privacyRef.current?.checked) {\n      privacyRef.current?.focus()\n      showWarning(\"Privacy\", \"Devi accettare la privacy policy per continuare\")\n      return\n    }\n    \n    // For guest users: open WhatsApp directly without saving\n    if (!user) {\n      showInfo(\n        \"Richiesta Inviata\", \n        \"La tua richiesta sar√† inviata via WhatsApp. Effettua il login per salvare le richieste nella dashboard.\"\n      )\n      const msg = encodeURIComponent(composeWhatsappMessage())\n      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`, \"_blank\")\n      return\n    }\n    \n    // Save to Firestore\n    setIsSaving(true)\n    try {\n      const tripRequest: Omit<CustomTripRequest, 'id'> = {\n        userId: user.uid,\n        userEmail: user.email || formData.email,\n        name: formData.name,\n        email: formData.email,\n        phone: formData.phone,\n        travelers: formData.travelers,\n        children: formData.children,\n        childrenAges: formData.childrenAges,\n        departureDate: formData.departureDate,\n        returnDate: formData.returnDate,\n        duration: formData.duration,\n        departureCity: formData.departureCity,\n        budget: formData.budget,\n        travelStyle: formData.travelStyle,\n        travelPace: formData.travelPace,\n        interests: formData.interests,\n        destinations: formData.destinations,\n        mustVisit: formData.mustVisit,\n        accommodation: formData.accommodation,\n        accommodationPreferences: formData.accommodationPreferences,\n        transport: formData.transport,\n        additionalServices: formData.additionalServices,\n        specialRequests: formData.specialRequests,\n        dietaryRestrictions: formData.dietaryRestrictions,\n        accessibility: formData.accessibility,\n        occasion: formData.occasion,\n        status: 'pending',\n        estimatedCost: calculateEstimatedCost(),\n        createdAt: Timestamp.now(),\n        updatedAt: Timestamp.now(),\n        sentToWhatsApp: true,\n        whatsAppSentAt: Timestamp.now()\n      }\n      \n      const docRef = await addDoc(collection(db, COLLECTIONS.customTripRequests), tripRequest)\n      \n      showSuccess(\n        \"Richiesta Salvata!\",\n        \"La tua richiesta √® stata salvata nella dashboard. Ora ti reindirizziamo a WhatsApp.\"\n      )\n      \n      // Open WhatsApp after save\n      setTimeout(() => {\n        const msg = encodeURIComponent(composeWhatsappMessage())\n        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`, \"_blank\")\n      }, 1500)\n      \n    } catch (error) {\n      console.error(\"Error saving trip request:\", error)\n      showError(\n        \"Errore Salvataggio\",\n        \"Impossibile salvare la richiesta. Puoi comunque procedere con WhatsApp.\",\n        [\n          {\n            label: 'Continua con WhatsApp',\n            onClick: () => {\n              const msg = encodeURIComponent(composeWhatsappMessage())\n              window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`, \"_blank\")\n            },\n            variant: 'primary'\n          }\n        ]\n      )\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const handlePdf = () => {\n    const doc = new jsPDF()\n    doc.setFontSize(18)\n    doc.text(\"Riepilogo Viaggio su Misura\", 14, 18)\n    autoTable(doc, {\n      startY: 28,\n      head: [[\"Campo\", \"Valore\"]],\n      body: [\n        [\"Nome\", formData.name || \"-\"],\n        [\"Email\", formData.email || \"-\"],\n        [\"Telefono\", formData.phone || \"-\"],\n        [\n          \"Viaggiatori\",\n          `${formData.travelers} adulto/i${formData.children ? \", \" + formData.children + \" bambino/i\" : \"\"}`,\n        ],\n        [\"Budget persona\", `‚Ç¨${formData.budget || \"-\"}`],\n        [\"Budget stimato\", `‚Ç¨${calculateEstimatedCost()}`],\n        [\"Partenza\", formData.departureDate || \"-\"],\n        [\"Ritorno\", formData.returnDate || \"-\"],\n        [\"Stile viaggio\", formData.travelPace || \"-\"],\n        [\"Destinazioni\", (formData.destinations || []).join(\", \") || \"-\"],\n        [\"Interessi\", (formData.interests || []).join(\", \") || \"-\"],\n        [\"Alloggio\", formData.accommodation || \"-\"],\n        [\"Preferenze alloggio\", (formData.accommodationPreferences || []).join(\", \") || \"-\"],\n        [\"Trasporto\", formData.transport || \"-\"],\n        [\"Servizi aggiuntivi\", (formData.additionalServices || []).join(\", \") || \"-\"],\n        [\"Occasione speciale\", formData.occasion || \"-\"],\n        [\"Dietary\", formData.dietaryRestrictions || \"-\"],\n        [\"Accessibilit√†\", formData.accessibility || \"-\"],\n        [\"Richieste\", formData.specialRequests || \"-\"],\n      ],\n    })\n    doc.save(\"MoroccoDreams_Riepilogo.pdf\")\n  }\n\n  const totalSteps = 5\n\n  const travelStyles = [\n    { id: \"adventurous\", label: \"Avventuroso\", icon: \"üèîÔ∏è\" },\n    { id: \"relaxed\", label: \"Rilassato\", icon: \"üßò\" },\n    { id: \"cultural\", label: \"Culturale\", icon: \"üèõÔ∏è\" },\n    { id: \"gastronomic\", label: \"Gastronomico\", icon: \"üçΩÔ∏è\" },\n    { id: \"naturalistic\", label: \"Naturalistico\", icon: \"üåø\" },\n    { id: \"shopping\", label: \"Shopping\", icon: \"üõçÔ∏è\" },\n  ]\n\n  const interests = [\n    { id: \"desert\", label: \"Deserto del Sahara\", icon: \"üèúÔ∏è\", description: \"Notti sotto le stelle e cammelli\" },\n    { id: \"culture\", label: \"Cultura e Storia\", icon: \"üèõÔ∏è\", description: \"Citt√† imperiali, siti UNESCO, musei\" },\n    { id: \"sea\", label: \"Mare e Relax\", icon: \"üèñÔ∏è\", description: \"Costa atlantica, Essaouira, tempo in spiaggia\" },\n    { id: \"mountains\", label: \"Montagna e Trekking\", icon: \"üèîÔ∏è\", description: \"Monti dell'Atlante, escursioni\" },\n    { id: \"gastronomy\", label: \"Gastronomia\", icon: \"üçΩÔ∏è\", description: \"Tour enogastronomici, mercati, degustazioni\" },\n    { id: \"wellness\", label: \"Benessere\", icon: \"üßò\", description: \"Hammam tradizionale, SPA, meditazione\" },\n    { id: \"adventure\", label: \"Avventura\", icon: \"üöµ\", description: \"Sport outdoor: surf, quad, arrampicata\" },\n    {\n      id: \"shopping\",\n      label: \"Shopping e Artigianato\",\n      icon: \"üõçÔ∏è\",\n      description: \"Souk, artigianato locale, cooperative\",\n    },\n    { id: \"photography\", label: \"Fotografia\", icon: \"üì∏\", description: \"Spot panoramici, tour fotografici\" },\n  ]\n\n  const destinations = [\n    { id: \"marrakech\", label: \"Marrakech\", description: \"La Perla Rossa\" },\n    { id: \"fes\", label: \"Fes\", description: \"Capitale spirituale\" },\n    { id: \"casablanca\", label: \"Casablanca\", description: \"Metropoli moderna\" },\n    { id: \"rabat\", label: \"Rabat\", description: \"Capitale del regno\" },\n    { id: \"essaouira\", label: \"Essaouira\", description: \"Citt√† del vento\" },\n    { id: \"agadir\", label: \"Agadir\", description: \"Riviera marocchina\" },\n    { id: \"chefchaouen\", label: \"Chefchaouen\", description: \"Perla blu\" },\n    { id: \"merzouga\", label: \"Merzouga (Deserto)\", description: \"Erg Chebbi\" },\n    { id: \"ouarzazate\", label: \"Ouarzazate\", description: \"Porta del deserto\" },\n    { id: \"atlas\", label: \"Monti Atlas\", description: \"Trekking e natura\" },\n  ]\n\n  const accommodationTypes = [\n    { id: \"riad\", label: \"Riad Tradizionale\", description: \"Autentico e caratteristico\" },\n    { id: \"hotel\", label: \"Hotel di Lusso\", description: \"Comfort e servizi moderni\" },\n    { id: \"mix\", label: \"Mix di Entrambi\", description: \"Variet√† di esperienze\" },\n  ]\n\n  const transportOptions = [\n    { id: \"private-driver\", label: \"Auto privata con autista\", description: \"Tour in comfort totale\" },\n    { id: \"self-drive\", label: \"Self-drive (Auto a noleggio)\", description: \"Guida autonomamente\" },\n    { id: \"organized-tour\", label: \"Tour organizzato in minivan\", description: \"Piccoli gruppi privati\" },\n  ]\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData((prev) => ({ ...prev, [field]: value }))\n  }\n\n  const handleArrayToggle = (field: string, value: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: (prev[field as keyof typeof prev] as string[]).includes(value)\n        ? (prev[field as keyof typeof prev] as string[]).filter((item) => item !== value)\n        : [...(prev[field as keyof typeof prev] as string[]), value],\n    }))\n  }\n\n  const validateStep1 = (): boolean => {\n    const errors: Record<string, string> = {}\n    \n    if (!formData.name.trim()) {\n      errors.name = \"Nome e cognome obbligatorio\"\n    }\n    if (!formData.email.trim()) {\n      errors.email = \"Email obbligatoria\"\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      errors.email = \"Email non valida\"\n    }\n    if (!formData.phone.trim()) {\n      errors.phone = \"Telefono obbligatorio\"\n    }\n    if (!formData.departureCity.trim()) {\n      errors.departureCity = \"Citt√† di partenza obbligatoria\"\n    }\n    if (!formData.travelers || formData.travelers < 1) {\n      errors.travelers = \"Numero di adulti obbligatorio (minimo 1)\"\n    }\n    if (formData.children === null || formData.children === undefined || isNaN(formData.children)) {\n      errors.children = \"Numero di bambini obbligatorio (inserire 0 se nessuno)\"\n    }\n    if (!formData.departureDate) {\n      errors.departureDate = \"Data di partenza obbligatoria\"\n    }\n    if (!formData.returnDate) {\n      errors.returnDate = \"Data di ritorno obbligatoria\"\n    }\n    \n    setValidationErrors(errors)\n    return Object.keys(errors).length === 0\n  }\n\n  const nextStep = () => {\n    // Validate Step 1 before advancing\n    if (currentStep === 1) {\n      if (!validateStep1()) {\n        // Scroll to first error\n        window.scrollTo({ top: 300, behavior: 'smooth' })\n        return\n      }\n    }\n    \n    if (currentStep < totalSteps) {\n      setValidationErrors({}) // Clear errors when advancing\n      setCurrentStep(currentStep + 1)\n    }\n  }\n\n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1)\n    }\n  }\n\n  const calculateEstimatedCost = () => {\n    const baseCost = formData.budget * formData.travelers\n    return baseCost\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 bg-gradient-to-r from-orange-500 to-red-500 overflow-hidden\">\n        <div className=\"absolute inset-0 bg-black/20\" />\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-5xl md:text-6xl font-bold mb-6\">Viaggi su Misura</h1>\n          <p className=\"text-xl md:text-2xl max-w-3xl mx-auto mb-8\">\n            Ogni viaggio √® unico. Raccontaci il tuo sogno, lo realizziamo noi.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-gradient-to-r from-orange-500 to-red-500 dark:bg-orange-900/40 rounded-full px-6 py-3 border-none shadow-lg\">\n              <span className=\"font-semibold text-white dark:text-orange-200\">100% Personalizzabile</span>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-orange-500 to-red-500 dark:bg-orange-900/40 rounded-full px-6 py-3 border-none shadow-lg\">\n              <span className=\"font-semibold text-white dark:text-orange-200\">Preventivo Gratuito</span>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-orange-500 to-red-500 dark:bg-orange-900/40 rounded-full px-6 py-3 border-none shadow-lg\">\n              <span className=\"font-semibold text-white dark:text-orange-200\">Risposta in 24h</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Process Timeline */}\n      <div className=\"py-16 bg-background\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold text-foreground mb-4\">Come Funziona</h2>\n            <p className=\"text-xl text-muted-foreground\">Il processo di creazione del tuo viaggio perfetto</p>\n          </div>\n\n          <div className=\"grid md:grid-cols-5 gap-8\">\n            {[\n              { step: 1, title: \"Analisi Preferenze\", description: \"Compila il configuratore dettagliato\", icon: \"üìù\" },\n              { step: 2, title: \"Proposta Itinerario\", description: \"Ricevi la proposta entro 48h\", icon: \"‚úàÔ∏è\" },\n              { step: 3, title: \"Feedback e Modifiche\", description: \"Personalizziamo insieme\", icon: \"üîÑ\" },\n              { step: 4, title: \"Conferma e Prenotazione\", description: \"Finalizzi il tuo viaggio\", icon: \"‚úÖ\" },\n              { step: 5, title: \"Partenza\", description: \"Vivi la tua avventura!\", icon: \"üéâ\" },\n            ].map((item, idx) => (\n              <div key={idx} className=\"text-center\">\n                <div className=\"w-16 h-16 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-2xl mb-4 mx-auto shadow-lg\">\n                  <span className=\"text-white text-2xl\" role=\"img\" aria-label={item.title}>\n                    {item.icon}\n                  </span>\n                </div>\n                <h3 className=\"font-bold text-foreground mb-2\">{item.title}</h3>\n                <p className=\"text-sm text-muted-foreground\">{item.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Main Form */}\n      <div className=\"py-16\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"bg-card rounded-3xl shadow-2xl overflow-hidden border border-border\">\n            {/* Progress Bar */}\n            <div className=\"bg-muted px-8 py-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-2xl font-bold text-card-foreground\">Configuratore di Viaggio</h2>\n                <span className=\"text-sm text-muted-foreground\">\n                  Passo {currentStep} di {totalSteps}\n                </span>\n              </div>\n\n              <div className=\"flex items-center space-x-4 mb-4\">\n                {Array.from({ length: totalSteps }, (_, i) => (\n                  <div key={i} className=\"flex items-center\">\n                    <div\n                      className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${\n                        i + 1 <= currentStep\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"bg-muted-foreground/20 text-muted-foreground\"\n                      }`}\n                    >\n                      {i + 1 <= currentStep ? (\n                        <CheckCircle className=\"w-5 h-5 text-white\" />\n                      ) : (\n                        <span className=\"text-foreground font-bold\">{i + 1}</span>\n                      )}\n                    </div>\n                    {i < totalSteps - 1 && (\n                      <div className={`w-12 h-1 mx-2 ${i + 1 < currentStep ? \"bg-primary\" : \"bg-border\"}`} />\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"w-full bg-border rounded-full h-2\">\n                <div\n                  className=\"bg-gradient-to-r from-primary to-secondary h-2 rounded-full transition-all duration-500\"\n                  style={{ width: `${(currentStep / totalSteps) * 100}%` }}\n                />\n              </div>\n            </div>\n\n            {/* Form Content */}\n            <div className=\"p-8\">\n              {/* Step 1: Basic Information */}\n              {currentStep === 1 && (\n                <div className=\"space-y-8\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-card-foreground mb-4\">Le tue informazioni di base</h3>\n                    <p className=\"text-muted-foreground\">Iniziamo con i dettagli essenziali del tuo viaggio</p>\n                  </div>\n\n                  <div className=\"grid md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Nome e Cognome <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={formData.name}\n                        onChange={(e) => handleInputChange(\"name\", e.target.value)}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.name ? 'border-red-500' : 'border-border'\n                        }`}\n                        placeholder=\"Il tuo nome completo\"\n                      />\n                      {validationErrors.name && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.name}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Email <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        value={formData.email}\n                        onChange={(e) => handleInputChange(\"email\", e.target.value)}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.email ? 'border-red-500' : 'border-border'\n                        }`}\n                        placeholder=\"la-tua-email@esempio.com\"\n                      />\n                      {validationErrors.email && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.email}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Telefono <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"tel\"\n                        value={formData.phone}\n                        onChange={(e) => handleInputChange(\"phone\", e.target.value)}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.phone ? 'border-red-500' : 'border-border'\n                        }`}\n                        placeholder=\"+39 123 456 7890\"\n                      />\n                      {validationErrors.phone && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.phone}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Citt√† di partenza <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={formData.departureCity}\n                        onChange={(e) => handleInputChange(\"departureCity\", e.target.value)}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.departureCity ? 'border-red-500' : 'border-border'\n                        }`}\n                        placeholder=\"Milano, Roma, etc.\"\n                      />\n                      {validationErrors.departureCity && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.departureCity}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"grid md:grid-cols-3 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Numero di adulti <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"20\"\n                        value={formData.travelers}\n                        onChange={(e) => handleInputChange(\"travelers\", Number.parseInt(e.target.value))}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.travelers ? 'border-red-500' : 'border-border'\n                        }`}\n                      />\n                      {validationErrors.travelers && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.travelers}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Numero di bambini <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"10\"\n                        value={formData.children}\n                        onChange={(e) => handleInputChange(\"children\", Number.parseInt(e.target.value))}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.children ? 'border-red-500' : 'border-border'\n                        }`}\n                      />\n                      {validationErrors.children && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.children}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">Et√† bambini</label>\n                      <input\n                        type=\"text\"\n                        value={formData.childrenAges}\n                        onChange={(e) => handleInputChange(\"childrenAges\", e.target.value)}\n                        className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground\"\n                        placeholder=\"es. 8, 12 anni\"\n                        disabled={formData.children === 0}\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"grid md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Data di partenza preferita <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"date\"\n                        value={formData.departureDate}\n                        onChange={(e) => handleInputChange(\"departureDate\", e.target.value)}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.departureDate ? 'border-red-500' : 'border-border'\n                        }`}\n                      />\n                      {validationErrors.departureDate && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.departureDate}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                        Data di ritorno preferita <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"date\"\n                        value={formData.returnDate}\n                        onChange={(e) => handleInputChange(\"returnDate\", e.target.value)}\n                        className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${\n                          validationErrors.returnDate ? 'border-red-500' : 'border-border'\n                        }`}\n                      />\n                      {validationErrors.returnDate && (\n                        <p className=\"text-red-500 text-sm mt-1\">{validationErrors.returnDate}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div>\n  <label className=\"block text-sm font-medium text-card-foreground mb-2 flex items-center gap-2\">\n    Budget orientativo per persona:\n    <span className=\"font-semibold text-orange-600 ml-2\">‚Ç¨{formData.budget}</span>\n  </label>\n  <div className=\"flex items-center space-x-3\">\n    <input\n      type=\"range\"\n      min=\"500\"\n      max=\"5000\"\n      step=\"100\"\n      value={formData.budget}\n      onChange={(e) => handleInputChange(\"budget\", Number(e.target.value))}\n      className=\"w-full h-3 rounded-full appearance-none bg-gradient-to-r from-orange-400 via-orange-500 to-red-500 outline-none\"\n      style={{\n        accentColor: \"#ea580c\"\n      }}\n    />\n    <span className=\"text-2xl text-orange-500 font-black\">‚Ç¨</span>\n  </div>\n  <div className=\"flex justify-between text-xs text-muted-foreground mt-1\">\n    <span>‚Ç¨500</span>\n    <span>‚Ç¨1250</span>\n    <span>‚Ç¨2500</span>\n    <span>‚Ç¨4000</span>\n    <span>‚Ç¨5000+</span>\n  </div>\n</div>\n\n                </div>\n              )}\n\n              {currentStep === 2 && (\n                <div className=\"space-y-8\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-card-foreground mb-4\">Stile di viaggio</h3>\n                    <p className=\"text-muted-foreground\">\n                      Raccontaci che tipo di viaggiatore sei e cosa ti interessa di pi√π\n                    </p>\n                  </div>\n\n                  {/* Tipo di viaggiatore - SELEZIONE MULTIPLA */}\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Che tipo di viaggiatore ti consideri? (puoi selezionare pi√π opzioni)\n                    </label>\n                    <div className=\"grid md:grid-cols-3 gap-4\">\n                      {travelStyles.map((style) => (\n                        <button\n                          key={style.id}\n                          onClick={() => handleArrayToggle(\"travelStyle\", style.id)}\n                          className={`p-4 rounded-xl border-2 transition-all duration-300 text-left\n              ${\n                formData.travelStyle.includes(style.id)\n                  ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                  : \"border-border hover:border-primary text-card-foreground\"\n              }\n            `}\n                          type=\"button\"\n                        >\n                          <div className=\"flex items-center space-x-3\">\n                            <span className=\"text-2xl\">{style.icon}</span>\n                            <span className=\"font-medium\">{style.label}</span>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Ritmo di viaggio - SELEZIONE SINGOLA */}\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Ritmo di viaggio preferito\n                    </label>\n                    <div className=\"grid md:grid-cols-3 gap-4\">\n                      {[\n                        { id: \"intense\", label: \"Intenso\", description: \"Vedere pi√π cose possibili\" },\n                        { id: \"moderate\", label: \"Moderato\", description: \"Equilibrio tra visite e relax\" },\n                        { id: \"relaxed\", label: \"Rilassato\", description: \"Molti momenti liberi\" },\n                      ].map((pace) => (\n                        <button\n                          key={pace.id}\n                          onClick={() => handleInputChange(\"travelPace\", pace.id)}\n                          className={`p-4 rounded-xl border-2 transition-all duration-300 text-left\n              ${\n                formData.travelPace === pace.id\n                  ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                  : \"border-border hover:border-primary text-card-foreground\"\n              }\n            `}\n                          type=\"button\"\n                        >\n                          <h4 className=\"font-medium\">{pace.label}</h4>\n                          <p className=\"text-sm text-muted-foreground mt-1\">{pace.description}</p>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Interessi specifici - SELEZIONE MULTIPLA */}\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Interessi specifici (seleziona tutto ci√≤ che ti interessa)\n                    </label>\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      {interests.map((interest) => (\n                        <button\n                          key={interest.id}\n                          onClick={() => handleArrayToggle(\"interests\", interest.id)}\n                          className={`p-4 rounded-xl border-2 transition-all duration-300 text-left\n              ${\n                formData.interests.includes(interest.id)\n                  ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                  : \"border-border hover:border-primary text-card-foreground\"\n              }\n            `}\n                          type=\"button\"\n                        >\n                          <div className=\"flex items-start space-x-3\">\n                            <span className=\"text-2xl flex-shrink-0\">{interest.icon}</span>\n                            <div>\n                              <h4 className=\"font-medium\">{interest.label}</h4>\n                              <p className=\"text-sm text-muted-foreground mt-1\">{interest.description}</p>\n                            </div>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Step 3: Destinations */}\n              {currentStep === 3 && (\n                <div className=\"space-y-8\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-card-foreground mb-4\">Destinazioni desiderate</h3>\n                    <p className=\"text-muted-foreground\">Seleziona i luoghi che vorresti assolutamente visitare</p>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Destinazioni che ti interessano\n                    </label>\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      {destinations.map((destination) => (\n                        <button\n                          key={destination.id}\n                          onClick={() => handleArrayToggle(\"destinations\", destination.id)}\n                          className={`p-4 rounded-xl border-2 transition-all duration-300 text-left ${\n                            formData.destinations.includes(destination.id)\n                              ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                              : \"border-border hover:border-primary text-card-foreground\"\n                          }`}\n                          type=\"button\"\n                        >\n                          <h4 className=\"font-medium\">{destination.label}</h4>\n                          <p className=\"text-sm text-muted-foreground mt-1\">{destination.description}</p>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-2\">\n                      Luoghi che vorresti assolutamente vedere (opzionale)\n                    </label>\n                    <textarea\n                      value={formData.mustVisit}\n                      onChange={(e) => handleInputChange(\"mustVisit\", e.target.value)}\n                      rows={4}\n                      className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground resize-none\"\n                      placeholder=\"Descrivi luoghi specifici, esperienze particolari o sogni che vorresti realizzare...\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* Step 4: Accommodation & Transport */}\n              {currentStep === 4 && (\n                <div className=\"space-y-8\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-card-foreground mb-4\">Alloggi e Trasporti</h3>\n                    <p className=\"text-muted-foreground\">Definisci il livello di comfort e lo stile del tuo viaggio</p>\n                  </div>\n\n                  {/* Tipologia di alloggio preferita (singola) */}\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Tipologia di alloggio preferita\n                    </label>\n                    <div className=\"grid md:grid-cols-3 gap-4\">\n                      {accommodationTypes.map((type) => (\n                        <button\n                          key={type.id}\n                          onClick={() => handleInputChange(\"accommodation\", type.id)}\n                          className={`p-4 rounded-xl border-2 transition-all duration-300 text-left ${\n                            formData.accommodation === type.id\n                              ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                              : \"border-border hover:border-primary text-card-foreground\"\n                          }`}\n                          type=\"button\"\n                        >\n                          <h4 className=\"font-medium\">{type.label}</h4>\n                          <p className=\"text-sm text-muted-foreground mt-1\">{type.description}</p>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Preferenze alloggio (multi) */}\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Preferenze particolari di alloggio (opzionale)\n                    </label>\n                    <div className=\"grid md:grid-cols-2 gap-3\">\n                      {[\n                        \"Piscina\",\n                        \"SPA\",\n                        \"Posizione centrale nella medina\",\n                        \"Zona silenziosa\",\n                        \"Vista panoramica\",\n                        \"Camere familiari comunicanti\",\n                      ].map((pref) => (\n                        <button\n                          key={pref}\n                          onClick={() => handleArrayToggle(\"accommodationPreferences\", pref)}\n                          className={`p-3 rounded-lg border transition-all duration-200 text-left ${\n                            formData.accommodationPreferences.includes(pref)\n                              ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                              : \"border-border hover:border-primary text-card-foreground\"\n                          }`}\n                          type=\"button\"\n                        >\n                          <span className=\"text-sm font-medium\">{pref}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Mezzo di trasporto (singola) */}\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Come ti piacerebbe spostarti?\n                    </label>\n                    <div className=\"space-y-4\">\n                      {transportOptions.map((option) => (\n                        <button\n                          key={option.id}\n                          onClick={() => handleInputChange(\"transport\", option.id)}\n                          className={`w-full p-4 rounded-xl border-2 transition-all duration-300 text-left ${\n                            formData.transport === option.id\n                              ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                              : \"border-border hover:border-primary text-card-foreground\"\n                          }`}\n                          type=\"button\"\n                        >\n                          <h4 className=\"font-medium\">{option.label}</h4>\n                          <p className=\"text-sm text-muted-foreground mt-1\">{option.description}</p>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Servizi aggiuntivi (multi) */}\n                  <div>\n                    <label className=\"block text-lg font-medium text-card-foreground mb-4\">\n                      Servizi aggiuntivi (opzionale)\n                    </label>\n                    <div className=\"grid md:grid-cols-2 gap-3\">\n                      {[\n                        \"Guida locale dedicata\",\n                        \"Supporto guida per tutto il tour\",\n                        \"Trasferimenti aeroporto inclusi\",\n                        \"Assicurazione di viaggio completa\",\n                        \"Servizio fotografico professionale\",\n                        \"Assistenza 24/7 in italiano\",\n                      ].map((service) => (\n                        <button\n                          key={service}\n                          onClick={() => handleArrayToggle(\"additionalServices\", service)}\n                          className={`p-3 rounded-lg border transition-all duration-200 text-left ${\n                            formData.additionalServices.includes(service)\n                              ? \"border-transparent bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg\"\n                              : \"border-border hover:border-primary text-card-foreground\"\n                          }`}\n                          type=\"button\"\n                        >\n                          <span className=\"text-sm font-medium\">{service}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {currentStep === 5 && (\n                <div className=\"space-y-8\">\n                  {/* ... tutti gli input summary ... */}\n\n                  {/* Privacy Consent */}\n                  <div className=\"flex items-start space-x-3\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"privacy\"\n                      className=\"mt-1 w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500\"\n                      ref={privacyRef}\n                      required\n                    />\n                    <label htmlFor=\"privacy\" className=\"text-sm text-muted-foreground\">\n                      Accetto la{\" \"}\n                      <a href=\"/privacy\" className=\"text-orange-600 hover:text-orange-700 underline\">\n                        Privacy Policy\n                      </a>{\" \"}\n                      e autorizzo il trattamento dei miei dati personali per ricevere la proposta di viaggio\n                      personalizzata.\n                    </label>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex flex-col sm:flex-row gap-4 mt-6 justify-center\">\n                    <button\n                      onClick={handleWhatsapp}\n                      className=\"flex items-center justify-center space-x-2 px-8 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 hover:scale-105 font-semibold text-lg shadow-lg\"\n                    >\n                      <MessageCircle className=\"w-5 h-5\" />\n                      <span>Invia richiesta su WhatsApp</span>\n                    </button>\n                    <button\n                      onClick={handlePdf}\n                      className=\"flex items-center justify-center space-x-2 px-8 py-4 bg-gradient-to-r from-slate-500 to-slate-800 text-white rounded-xl hover:from-slate-700 hover:to-slate-900 transition-all duration-300 hover:scale-105 font-semibold text-lg shadow-lg\"\n                    >\n                      <FileText className=\"w-5 h-5\" />\n                      <span>Scarica PDF riepilogo</span>\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Navigation Buttons */}\n              <div className=\"flex justify-between items-center mt-12 pt-8 border-t border-border\">\n                <button\n                  onClick={prevStep}\n                  disabled={currentStep === 1}\n                  className=\"flex items-center space-x-2 px-6 py-3 border border-border text-muted-foreground rounded-xl hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <ArrowLeft className=\"w-4 h-4\" />\n                  <span>Indietro</span>\n                </button>\n\n                {currentStep < totalSteps ? (\n                  <button\n                    onClick={nextStep}\n                    className=\"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-primary to-secondary text-primary-foreground rounded-xl hover:from-primary/90 hover:to-secondary/90 transition-all duration-300 hover:scale-105\"\n                  >\n                    <span>Avanti</span>\n                    <ArrowRight className=\"w-4 h-4\" />\n                  </button>\n                ) : (\n                  <button className=\"flex items-center space-x-2 px-8 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 hover:scale-105 font-semibold text-lg\">\n                    <CheckCircle className=\"w-5 h-5\" />\n                    <span>Invia Richiesta</span>\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Bottom CTA */}\n      <div className=\"py-16 bg-gradient-to-r from-orange-500 to-red-500\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h2 className=\"text-3xl font-bold mb-4\">Hai bisogno di aiuto?</h2>\n          <p className=\"text-xl mb-8 max-w-2xl mx-auto\">\n            I nostri esperti sono sempre disponibili per aiutarti a creare il viaggio perfetto\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <a\n              href=\"https://wa.me/393123456789?text=Ciao! Ho bisogno di aiuto per configurare il mio viaggio su misura in Marocco.\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"inline-flex items-center space-x-2 bg-white text-orange-600 px-6 py-3 rounded-xl hover:bg-gray-100 transition-all duration-300 font-semibold\"\n            >\n              <MessageCircle className=\"w-5 h-5\" />\n              <span>Chatta su WhatsApp</span>\n            </a>\n            <a\n              href=\"/contatti\"\n              className=\"inline-flex items-center space-x-2 border-2 border-white text-white px-6 py-3 rounded-xl hover:bg-white hover:text-orange-600 transition-all duration-300 font-semibold\"\n            >\n              <Phone className=\"w-5 h-5\" />\n              <span>Chiamaci</span>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":47606},"lib/firebase.ts":{"content":"// Firebase configuration - based on firebase_barebones_javascript integration\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, GoogleAuthProvider } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\n\n// Validate required environment variables\nconst requiredEnvVars = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\nconst missingVars = Object.entries(requiredEnvVars)\n  .filter(([_, value]) => !value)\n  .map(([key]) => key);\n\nif (missingVars.length > 0) {\n  console.error('[FIREBASE] Missing environment variables:', missingVars.join(', '));\n  console.error('[FIREBASE] Please check your .env file and ensure all Firebase variables are set');\n  throw new Error(`Missing Firebase environment variables: ${missingVars.join(', ')}`);\n}\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.firebaseapp.com`,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.firebasestorage.app`,\n  messagingSenderId: \"869999205295\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: \"G-G6326PNFLF\"\n};\n\nconsole.log('[FIREBASE] Initializing Firebase...');\nconsole.log('[FIREBASE] Project ID:', firebaseConfig.projectId);\n\nlet app;\ntry {\n  app = initializeApp(firebaseConfig);\n  console.log('[FIREBASE] ‚úÖ Firebase app initialized successfully');\n} catch (error) {\n  console.error('[FIREBASE] ‚ùå Failed to initialize Firebase app:', error);\n  throw error;\n}\n\n// Initialize Firebase services\nlet auth, db, storage, googleProvider;\n\ntry {\n  auth = getAuth(app);\n  console.log('[FIREBASE] ‚úÖ Firebase Auth initialized');\n} catch (error) {\n  console.error('[FIREBASE] ‚ùå Failed to initialize Auth:', error);\n  throw error;\n}\n\ntry {\n  db = getFirestore(app);\n  console.log('[FIREBASE] ‚úÖ Firestore initialized');\n} catch (error) {\n  console.error('[FIREBASE] ‚ùå Failed to initialize Firestore:', error);\n  throw error;\n}\n\ntry {\n  storage = getStorage(app);\n  console.log('[FIREBASE] ‚úÖ Storage initialized');\n} catch (error) {\n  console.error('[FIREBASE] ‚ùå Failed to initialize Storage:', error);\n  throw error;\n}\n\ntry {\n  googleProvider = new GoogleAuthProvider();\n  console.log('[FIREBASE] ‚úÖ Google Auth Provider initialized');\n} catch (error) {\n  console.error('[FIREBASE] ‚ùå Failed to initialize Google Auth Provider:', error);\n  throw error;\n}\n\nexport { auth, db, storage, googleProvider };\nexport default app;","size_bytes":2678},"components/auth/RoleBasedAccess.tsx":{"content":"'use client';\n\nimport { useAuth } from '@/context/AuthContext';\n\ninterface RoleBasedAccessProps {\n  children: React.ReactNode;\n  allowedRoles: ('user' | 'admin')[];\n  fallback?: React.ReactNode;\n}\n\nexport default function RoleBasedAccess({ \n  children, \n  allowedRoles, \n  fallback = null \n}: RoleBasedAccessProps) {\n  const { user, userProfile, loading } = useAuth();\n\n  // Don't render anything while loading\n  if (loading) {\n    return null;\n  }\n\n  // Not authenticated\n  if (!user || !userProfile) {\n    return fallback;\n  }\n\n  // Check if user has allowed role\n  const userRole = userProfile.role as 'user' | 'admin';\n  const hasAccess = allowedRoles.includes(userRole);\n\n  return hasAccess ? <>{children}</> : fallback;\n}","size_bytes":727},"app/servizi/[slug]/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useParams } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { ArrowLeft, MapPin, Star, Calendar, Check, Phone, Mail } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { db } from \"@/lib/firebase\"\nimport { collection, query, where, getDocs, doc, getDoc } from \"firebase/firestore\"\nimport { Service } from \"@/lib/firestore-schema\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function ServiceDetailPage() {\n  const params = useParams()\n  const slug = params.slug as string\n  \n  const [service, setService] = useState<Service | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n\n  useEffect(() => {\n    const fetchService = async () => {\n      try {\n        setLoading(true)\n        \n        // Try query by slug first\n        let q = query(\n          collection(db, 'services'),\n          where('slug', '==', slug),\n          where('status', '==', 'published')\n        )\n        \n        let snapshot = await getDocs(q)\n        \n        // If not found by slug, try by document ID (fallback during migration)\n        if (snapshot.empty) {\n          try {\n            const docRef = doc(db, 'services', slug)\n            const docSnap = await getDoc(docRef)\n            \n            if (docSnap.exists() && docSnap.data()?.status === 'published') {\n              setService({ id: docSnap.id, ...docSnap.data() } as Service)\n              return\n            }\n          } catch (idError) {\n            console.log('Document ID lookup failed:', idError)\n          }\n          \n          setError(\"Servizio non trovato\")\n          return\n        }\n        \n        const doc = snapshot.docs[0]\n        setService({ id: doc.id, ...doc.data() } as Service)\n        \n      } catch (err) {\n        console.error('Error fetching service:', err)\n        setError(\"Errore nel caricamento del servizio\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (slug) {\n      fetchService()\n    }\n  }, [slug])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-4xl mx-auto px-4 py-12\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-64 bg-gray-200 dark:bg-gray-700 rounded-xl mb-8\"></div>\n            <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4\"></div>\n            <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-8\"></div>\n            <div className=\"space-y-4\">\n              {[...Array(5)].map((_, i) => (\n                <div key={i} className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !service) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-foreground mb-4\">Oops!</h1>\n          <p className=\"text-muted-foreground mb-6\">{error || \"Servizio non trovato\"}</p>\n          <Button asChild>\n            <Link href=\"/servizi\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Torna ai Servizi\n            </Link>\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  const getServiceIcon = (category: string) => {\n    switch (category) {\n      case 'transport':\n        return 'üöó'\n      case 'guide':\n        return 'üë®‚Äçüè´'\n      case 'insurance':\n        return 'üõ°Ô∏è'\n      case 'accommodation':\n        return 'üè®'\n      default:\n        return '‚≠ê'\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <section className=\"relative bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 py-20\">\n        {/* Wishlist Button - top right */}\n        <div className=\"absolute top-4 right-4 z-20\">\n          <WishlistButton\n            itemId={`service-${service.id}`}\n            itemType=\"service\"\n            itemTitle={service.name}\n            itemImage={service.images?.[0]}\n            itemPrice={service.price || 0}\n            itemDescription={service.description}\n          />\n        </div>\n        \n        <div className=\"max-w-4xl mx-auto px-4 text-center\">\n          <div className=\"text-6xl mb-4\">{getServiceIcon(service.category)}</div>\n          <h1 className=\"text-4xl lg:text-5xl font-bold text-foreground mb-6\">{service.name}</h1>\n          <p className=\"text-xl text-muted-foreground mb-8\">{service.description}</p>\n          \n          <div className=\"flex flex-wrap justify-center gap-4 text-sm\">\n            <Badge variant=\"secondary\" className=\"text-lg px-4 py-2\">\n              {service.category}\n            </Badge>\n            <Badge variant=\"outline\" className=\"text-lg px-4 py-2\">\n              ‚Ç¨{service.price} {service.priceType.replace('_', ' ')}\n            </Badge>\n          </div>\n        </div>\n      </section>\n\n      <div className=\"max-w-6xl mx-auto px-4 py-12 grid lg:grid-cols-3 gap-8\">\n        {/* Main Content */}\n        <div className=\"lg:col-span-2 space-y-8\">\n          {/* Description */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Descrizione del Servizio</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground leading-relaxed\">{service.description}</p>\n            </CardContent>\n          </Card>\n\n          {/* Features */}\n          {service.features && service.features.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Caratteristiche Incluse</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  {service.features.map((feature, index) => (\n                    <div key={index} className=\"flex items-center\">\n                      <Check className=\"w-5 h-5 text-green-500 mr-3 flex-shrink-0\" />\n                      <span className=\"text-muted-foreground\">{feature}</span>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Locations */}\n          {service.locations && service.locations.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Disponibile nelle seguenti localit√†</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex flex-wrap gap-2\">\n                  {service.locations.map((location, index) => (\n                    <Badge key={index} variant=\"outline\" className=\"flex items-center\">\n                      <MapPin className=\"w-3 h-3 mr-1\" />\n                      {location}\n                    </Badge>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Service Details */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Dettagli del Servizio</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div>\n                  <h4 className=\"font-semibold text-foreground mb-2\">Categoria</h4>\n                  <p className=\"text-muted-foreground capitalize\">{service.category}</p>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-foreground mb-2\">Tipo</h4>\n                  <p className=\"text-muted-foreground capitalize\">{service.type}</p>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-foreground mb-2\">Prezzo</h4>\n                  <p className=\"text-2xl font-bold text-orange-600\">\n                    ‚Ç¨{service.price}\n                    <span className=\"text-sm text-muted-foreground ml-2\">\n                      {service.priceType.replace('_', ' ')}\n                    </span>\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-foreground mb-2\">Disponibilit√†</h4>\n                  <p className=\"text-muted-foreground\">\n                    {service.locations?.length || 0} localit√†\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Booking Card */}\n          <Card className=\"sticky top-4\">\n            <CardHeader>\n              <CardTitle className=\"text-center\">Prenota Questo Servizio</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-center mb-6\">\n                <div className=\"text-3xl font-bold text-foreground mb-2\">\n                  ‚Ç¨{service.price}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  {service.priceType.replace('_', ' ')}\n                </p>\n              </div>\n\n              <div className=\"space-y-4\">\n                <Button className=\"w-full bg-orange-500 hover:bg-orange-600\" size=\"lg\">\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  Prenota Ora\n                </Button>\n                \n                <Button variant=\"outline\" className=\"w-full\" asChild>\n                  <Link href=\"/contatti\">\n                    <Phone className=\"w-4 h-4 mr-2\" />\n                    Richiedi Info\n                  </Link>\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Contact Info */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Hai domande?</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground text-sm mb-4\">\n                Il nostro team √® sempre disponibile per aiutarti a scegliere il servizio pi√π adatto alle tue esigenze.\n              </p>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center text-sm\">\n                  <Phone className=\"w-4 h-4 mr-2 text-orange-500\" />\n                  <span>+212 524 123 456</span>\n                </div>\n                <div className=\"flex items-center text-sm\">\n                  <Mail className=\"w-4 h-4 mr-2 text-orange-500\" />\n                  <span>info@moroccotours.com</span>\n                </div>\n              </div>\n\n              <Button variant=\"outline\" className=\"w-full mt-4\" asChild>\n                <Link href=\"/contatti\">\n                  Contattaci\n                </Link>\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":10905},"components/sections/blog-teaser.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { Calendar, ArrowRight, Clock, Loader2 } from \"lucide-react\"\nimport { getPublishedBlogPosts, type BlogPost } from \"@/lib/public-data\"\n\nexport default function BlogTeaser() {\n  const [blogPosts, setBlogPosts] = useState<BlogPost[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const loadBlogPosts = async () => {\n      try {\n        setLoading(true)\n        const data = await getPublishedBlogPosts({ limit: 3 })\n        setBlogPosts(data)\n      } catch (error) {\n        console.error('Error loading blog posts:', error)\n        setBlogPosts([])\n      } finally {\n        setLoading(false)\n      }\n    }\n    \n    loadBlogPosts()\n  }, [])\n\n  if (loading) {\n    return (\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-orange-500\" />\n            <span className=\"ml-3 text-muted-foreground\">Caricamento articoli...</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (blogPosts.length === 0) {\n    return null\n  }\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    return date.toLocaleDateString('it-IT', { year: 'numeric', month: 'long', day: 'numeric' })\n  }\n\n  const getCategory = (tags: string[] | null) => {\n    return tags?.[0] || 'Blog'\n  }\n\n  return (\n    <div className=\"py-16 lg:py-24 bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Dal Nostro Blog</h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n            Consigli, guide e storie per preparare al meglio il tuo viaggio in Marocco\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          {blogPosts.map((post) => (\n            <article\n              key={post.slug}\n              className=\"group bg-card rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-500 hover:scale-105\"\n            >\n              <div className=\"relative h-48 overflow-hidden\">\n                <img\n                  src={post.cover || \"/placeholder.svg?height=300&width=400\"}\n                  alt={post.title}\n                  className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                />\n                <div className=\"absolute top-4 left-4 bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-medium\">\n                  {getCategory(post.tags)}\n                </div>\n              </div>\n\n              <div className=\"p-6\">\n                <div className=\"flex items-center space-x-4 text-sm text-muted-foreground mb-3\">\n                  <div className=\"flex items-center space-x-1\">\n                    <Calendar className=\"w-4 h-4\" />\n                    <span>{formatDate(post.date)}</span>\n                  </div>\n                  <div className=\"flex items-center space-x-1\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>{post.readingMinutes} min</span>\n                  </div>\n                </div>\n\n                <h3 className=\"text-xl font-bold text-foreground mb-3 group-hover:text-orange-600 transition-colors duration-300\">\n                  {post.title}\n                </h3>\n\n                <p className=\"text-muted-foreground mb-4 leading-relaxed\">{post.excerpt}</p>\n\n                <Link\n                  href={`/blog/${post.slug}`}\n                  className=\"inline-flex items-center space-x-2 text-orange-600 hover:text-orange-700 font-semibold group-hover:translate-x-1 transition-all duration-300\"\n                >\n                  <span>Leggi di pi√π</span>\n                  <ArrowRight className=\"w-4 h-4\" />\n                </Link>\n              </div>\n            </article>\n          ))}\n        </div>\n\n        <div className=\"text-center mt-12\">\n          <Link\n            href=\"/blog\"\n            className=\"inline-flex items-center space-x-2 bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-4 rounded-2xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-lg hover:scale-105\"\n          >\n            <span>Vedi Tutti gli Articoli</span>\n            <ArrowRight className=\"w-5 h-5\" />\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":4632},"app/viaggi/deserto/page.tsx":{"content":"\"use client\"\n\nimport Link from \"next/link\"\nimport { ArrowRight, Sun, Mountain, Star, Clock } from \"lucide-react\"\nimport { TravelCard } from \"@/components/cards/TravelCard\"\n\nexport default function DesertChoicePage() {\n  const desertTypes = [\n    {\n      id: \"sahara\",\n      name: \"Deserto del Sahara\",\n      slug: \"/viaggi/deserto/sahara\",\n      subtitle: \"Le leggendarie dune dorate del Sahara\",\n      description: \"Vivi l'esperienza autentica del grande deserto con le sue dune di sabbia dorata, notti stellate indimenticabili e l'ospitalit√† berbera\",\n      image: \"/images/sahara-sunset.png\",\n      gradient: \"from-orange-600 via-red-500 to-orange-500\",\n      darkGradient: \"dark:from-orange-900 dark:via-red-900 dark:to-orange-900\",\n      icon: Sun,\n      highlights: [\n        \"Dune di Erg Chebbi\",\n        \"Notti sotto le stelle\",\n        \"Escursioni in cammello\",\n        \"Campi berberi autentici\",\n        \"Musica tradizionale\"\n      ],\n      tours: \"4 tour disponibili\",\n      duration: \"2-4 giorni\",\n      distance: \"550 km da Marrakech\",\n      bestSeason: \"Mar-Mag, Set-Nov\"\n    },\n    {\n      id: \"agafay\",\n      name: \"Deserto di Agafay\",\n      slug: \"/viaggi/deserto/agafay\",\n      subtitle: \"Il deserto roccioso vicino a Marrakech\",\n      description: \"A soli 40 minuti da Marrakech, scopri un paesaggio lunare fatto di colline rocciose, con vista mozzafiato sulle montagne dell'Atlante\",\n      image: \"/images/agafay-desert.png\",\n      gradient: \"from-amber-600 via-yellow-600 to-amber-500\",\n      darkGradient: \"dark:from-amber-900 dark:via-yellow-900 dark:to-amber-900\",\n      icon: Mountain,\n      highlights: [\n        \"40 min da Marrakech\",\n        \"Paesaggio roccioso\",\n        \"Vista sull'Atlante\",\n        \"Glamping di lusso\",\n        \"Quad e cammelli\"\n      ],\n      tours: \"3 tour disponibili\",\n      duration: \"1 giorno / 1 notte\",\n      distance: \"40 km da Marrakech\",\n      bestSeason: \"Tutto l'anno\"\n    }\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 md:py-32 bg-gradient-to-r from-orange-600 via-red-500 to-amber-600 dark:from-orange-900 dark:via-red-900 dark:to-amber-900 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <div className=\"absolute inset-0 bg-black/40 dark:bg-black/60\" />\n        </div>\n\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-4xl md:text-6xl lg:text-7xl font-bold mb-6\">\n            Scegli il Tuo\n            <span className=\"block bg-gradient-to-r from-yellow-300 to-orange-200 bg-clip-text text-transparent\">\n              Deserto\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto mb-8\">\n            Due deserti, due esperienze uniche: dal Sahara leggendario al fascino lunare di Agafay\n          </p>\n        </div>\n      </div>\n\n      {/* Desert Comparison Cards */}\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">\n              Quale Deserto Vuoi Esplorare?\n            </h2>\n            <p className=\"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Confronta le due destinazioni e scegli l'avventura perfetta per te\n            </p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-2 gap-8\">\n            {desertTypes.map((desert) => {\n              const IconComponent = desert.icon\n              return (\n                <TravelCard\n                  key={desert.id}\n                  id={desert.id}\n                  image={desert.image}\n                  title={desert.name}\n                  description={`${desert.subtitle}. ${desert.description}`}\n                  duration={desert.duration}\n                  location={desert.distance}\n                  highlights={desert.highlights}\n                  badges={[\n                    { label: desert.tours, variant: 'default' },\n                    { label: desert.bestSeason, variant: 'default' }\n                  ]}\n                  ctas={[\n                    { \n                      label: `Esplora ${desert.id === 'sahara' ? 'Sahara' : 'Agafay'}`,\n                      href: desert.slug,\n                      variant: 'primary',\n                      icon: ArrowRight\n                    }\n                  ]}\n                />\n              )\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Comparison Table */}\n      <div className=\"py-16 bg-muted\">\n        <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-center text-foreground mb-12\">\n            Confronto Rapido\n          </h2>\n          \n          <div className=\"bg-card rounded-2xl overflow-hidden shadow-lg border border-border\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gradient-to-r from-orange-500 to-red-500 dark:from-orange-900 dark:to-red-900 text-white\">\n                  <tr>\n                    <th className=\"px-6 py-4 text-left font-semibold\">Caratteristica</th>\n                    <th className=\"px-6 py-4 text-left font-semibold\">Sahara</th>\n                    <th className=\"px-6 py-4 text-left font-semibold\">Agafay</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-border\">\n                  {[\n                    { label: \"Tipo di Deserto\", sahara: \"Sabbia (Erg)\", agafay: \"Roccioso\" },\n                    { label: \"Distanza da Marrakech\", sahara: \"550 km (7-8 ore)\", agafay: \"40 km (40 min)\" },\n                    { label: \"Durata Minima\", sahara: \"2 giorni\", agafay: \"1 giorno\" },\n                    { label: \"Esperienza\", sahara: \"Avventura autentica\", agafay: \"Escapade di lusso\" },\n                    { label: \"Prezzo da\", sahara: \"‚Ç¨180\", agafay: \"‚Ç¨50\" },\n                    { label: \"Livello Difficolt√†\", sahara: \"Medio-Alto\", agafay: \"Basso\" },\n                    { label: \"Migliore per\", sahara: \"Avventurieri, fotografi\", agafay: \"Coppie, famiglie, chi ha poco tempo\" }\n                  ].map((row, idx) => (\n                    <tr key={idx} className=\"hover:bg-muted/50 transition-colors\">\n                      <td className=\"px-6 py-4 font-medium text-foreground\">{row.label}</td>\n                      <td className=\"px-6 py-4 text-muted-foreground\">{row.sahara}</td>\n                      <td className=\"px-6 py-4 text-muted-foreground\">{row.agafay}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Final CTA */}\n      <div className=\"py-16 lg:py-20 bg-gradient-to-r from-orange-600 via-red-500 to-amber-600 dark:from-orange-900 dark:via-red-900 dark:to-amber-900\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-6\">\n            Non Riesci a Decidere?\n          </h2>\n          <p className=\"text-lg md:text-xl mb-8\">\n            Contattaci per una consulenza personalizzata e ti aiuteremo a scegliere l'esperienza perfetta\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link href=\"/contatti\">\n              <button className=\"px-8 py-4 bg-white text-orange-600 rounded-xl hover:bg-gray-100 transition-all duration-300 font-semibold text-lg shadow-lg\">\n                Contattaci\n              </button>\n            </Link>\n            <Link href=\"/viaggi/su-misura\">\n              <button className=\"px-8 py-4 border-2 border-white text-white rounded-xl hover:bg-white hover:text-orange-600 transition-all duration-300 font-semibold text-lg\">\n                Viaggio su Misura\n              </button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":8120},"scripts/populate-database.ts":{"content":"import { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, addDoc, doc, setDoc } from 'firebase/firestore';\n\n// Firebase config (utilizziamo le variabili d'ambiente)\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.firebaseapp.com`,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.appspot.com`,\n  messagingSenderId: \"123456789\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\n// Sample travels data\nconst sampleTravels = [\n  {\n    title: \"Tour delle Citt√† Imperiali\",\n    description: \"Scopri le quattro citt√† imperiali del Marocco in un viaggio indimenticabile attraverso storia, cultura e tradizioni millenarie.\",\n    category: \"imperial-cities\",\n    duration: \"8 giorni / 7 notti\",\n    price: 890,\n    originalPrice: 1090,\n    rating: 4.9,\n    reviews: 127,\n    images: [\"/images/imperial-cities-tour.png\", \"/images/fez-medina.jpg\"],\n    highlights: [\"Medine UNESCO\", \"Palazzi reali\", \"Souks autentici\", \"Guide esperte\"],\n    itinerary: [\n      { day: 1, title: \"Arrivo a Marrakech\", description: \"Transfer dall'aeroporto, check-in hotel, visita Jemaa el-Fnaa\" },\n      { day: 2, title: \"Marrakech\", description: \"Visita completa: Palazzo Bahia, Saadian Tombs, Koutoubia\" },\n      { day: 3, title: \"Marrakech - Casablanca\", description: \"Viaggio verso Casablanca, visita Hassan II Mosque\" }\n    ],\n    included: [\"Hotel 4 stelle\", \"Prima colazione\", \"Guide locali\", \"Trasporti\"],\n    excluded: [\"Voli internazionali\", \"Pranzi e cene\", \"Extra personali\"],\n    status: \"published\",\n    published: true,\n    featured: true,\n    slug: \"tour-citta-imperiali\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  },\n  {\n    title: \"Avventura nel Deserto del Sahara\",\n    description: \"Vivi l'esperienza magica del Sahara con notti sotto le stelle e tramonti mozzafiato sulle dune dorate.\",\n    category: \"desert\",\n    duration: \"4 giorni / 3 notti\",\n    price: 450,\n    originalPrice: 550,\n    rating: 4.8,\n    reviews: 89,\n    images: [\"/images/sahara-adventure.png\", \"/images/desert-camp.jpg\"],\n    highlights: [\"Notte nel deserto\", \"Cammelli\", \"Alba sulle dune\", \"Campo berbero\"],\n    itinerary: [\n      { day: 1, title: \"Marrakech - Ouarzazate\", description: \"Partenza via Atlas Mountains, visita Kasbah Ait Ben Haddou\" },\n      { day: 2, title: \"Ouarzazate - Merzouga\", description: \"Viaggio verso il deserto, escursione in cammello al tramonto\" },\n      { day: 3, title: \"Merzouga - Erfoud\", description: \"Alba sulle dune, visita fossili, rientro verso citt√†\" }\n    ],\n    included: [\"Campo nel deserto\", \"Escursione cammelli\", \"Cena berbera\", \"Trasporti 4x4\"],\n    excluded: [\"Hotel citt√†\", \"Pranzi\", \"Bevande alcooliche\"],\n    status: \"published\",\n    published: true,\n    featured: true,\n    slug: \"avventura-sahara\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  },\n  {\n    title: \"Costa Atlantica e Surfing\",\n    description: \"Esplora la costa atlantica del Marocco con le sue spiagge infinite e i migliori spot per il surf.\",\n    category: \"coast\",\n    duration: \"6 giorni / 5 notti\",\n    price: 650,\n    rating: 4.7,\n    reviews: 65,\n    images: [\"/images/atlantic-coast.png\", \"/images/essaouira.jpg\"],\n    highlights: [\"Lezioni di surf\", \"Essaouira medina\", \"Spiagge infinite\", \"Pesce fresco\"],\n    itinerary: [\n      { day: 1, title: \"Arrivo Agadir\", description: \"Transfer, check-in, orientamento citt√†\" },\n      { day: 2, title: \"Surf e relax\", description: \"Lezioni di surf mattina, pomeriggio libero spiaggia\" },\n      { day: 3, title: \"Essaouira\", description: \"Escursione giornata intera nella citt√† del vento\" }\n    ],\n    included: [\"Hotel fronte mare\", \"Lezioni surf\", \"Trasporti\", \"Guide locali\"],\n    excluded: [\"Voli\", \"Pranzi\", \"Attrezzatura surf avanzata\"],\n    status: \"published\",\n    published: true,\n    featured: false,\n    slug: \"costa-atlantica-surf\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  }\n];\n\n// Sample experiences data\nconst sampleExperiences = [\n  {\n    title: \"Corso di Cucina Marocchina\",\n    description: \"Impara i segreti della cucina tradizionale marocchina con chef locali esperti.\",\n    category: \"cooking\",\n    duration: \"4 ore\",\n    price: 85,\n    rating: 4.9,\n    reviews: 156,\n    images: [\"/images/cooking-class.png\", \"/images/tagine-cooking.jpg\"],\n    highlights: [\"Chef professionali\", \"Ricette autentiche\", \"Mercato locale\", \"Cena inclusa\"],\n    included: [\"Ingredienti\", \"Ricettario\", \"Cena\", \"Certificato\"],\n    excluded: [\"Trasporto\", \"Bevande alcooliche\"],\n    locations: [\"Marrakech\", \"Fez\", \"Casablanca\"],\n    status: \"published\",\n    published: true,\n    featured: true,\n    slug: \"corso-cucina-marocchina\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  },\n  {\n    title: \"Trekking Monte Toubkal\",\n    description: \"Conquista la vetta pi√π alta del Nord Africa con guide esperte berbere.\",\n    category: \"trekking\",\n    duration: \"3 giorni / 2 notti\",\n    price: 320,\n    rating: 4.6,\n    reviews: 78,\n    images: [\"/images/toubkal-trek.png\", \"/images/atlas-mountains.jpg\"],\n    highlights: [\"Vetta 4167m\", \"Guide berbere\", \"Rifugio montagna\", \"Panorami incredibili\"],\n    included: [\"Guide\", \"Rifugio\", \"Attrezzatura base\", \"Trasporto\"],\n    excluded: [\"Attrezzatura tecnica\", \"Assicurazione\", \"Pranzi\"],\n    locations: [\"Imlil\", \"Atlas Mountains\"],\n    status: \"published\",\n    published: true,\n    featured: true,\n    slug: \"trekking-toubkal\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  }\n];\n\n// Sample services data\nconst sampleServices = [\n  {\n    name: \"Trasferimenti Aeroporto\",\n    description: \"Servizio di trasferimento professionale dall'aeroporto al tuo hotel con comfort e sicurezza.\",\n    category: \"transport\",\n    type: \"transfer\",\n    price: 25,\n    priceType: \"per_trip\",\n    locations: [\"Marrakech\", \"Casablanca\", \"Fez\", \"Agadir\"],\n    features: [\"Disponibile 24/7\", \"Meet & Greet\", \"Veicoli moderni\", \"Autisti professionali\"],\n    status: \"published\",\n    published: true,\n    slug: \"trasferimenti-aeroporto\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  },\n  {\n    name: \"Guide Private Certificate\",\n    description: \"Guide esperte locali per un'esperienza autentica e personalizzata della cultura marocchina.\",\n    category: \"guide\",\n    type: \"private\",\n    price: 80,\n    priceType: \"per_day\",\n    locations: [\"Marrakech\", \"Fez\", \"Casablanca\", \"Meknes\", \"Chefchaouen\"],\n    features: [\"Guide certificate\", \"Lingue multiple\", \"Conoscenza locale\", \"Flessibilit√† totale\"],\n    status: \"published\",\n    published: true,\n    slug: \"guide-private\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  },\n  {\n    name: \"Noleggio Auto Completo\",\n    description: \"Flotta moderna di veicoli per esplorare il Marocco in totale libert√† e sicurezza.\",\n    category: \"transport\",\n    type: \"rental\",\n    price: 18,\n    priceType: \"per_day\",\n    locations: [\"Marrakech\", \"Casablanca\", \"Agadir\", \"Fez\", \"Rabat\"],\n    features: [\"Km illimitati\", \"Assicurazione completa\", \"Assistenza 24/7\", \"Consegna aeroporto\"],\n    status: \"published\",\n    published: true,\n    slug: \"noleggio-auto\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  },\n  {\n    name: \"Assicurazione Viaggio Premium\",\n    description: \"Protezione completa per viaggiare in sicurezza e serenit√† con copertura medica estesa.\",\n    category: \"insurance\",\n    type: \"comprehensive\",\n    price: 15,\n    priceType: \"per_person\",\n    locations: [\"Globale\"],\n    features: [\"Copertura medica\", \"Annullamento viaggio\", \"Bagagli protetti\", \"Assistenza H24\"],\n    status: \"published\",\n    published: true,\n    slug: \"assicurazione-premium\",\n    createdAt: new Date(),\n    updatedAt: new Date()\n  }\n];\n\nasync function populateDatabase() {\n  try {\n    console.log('üöÄ Inizio popolamento database...');\n    \n    // Add travels\n    console.log('üìç Aggiunta viaggi...');\n    for (const travel of sampleTravels) {\n      const docRef = await addDoc(collection(db, 'travels'), travel);\n      console.log(`‚úÖ Viaggio aggiunto: ${travel.title} (ID: ${docRef.id})`);\n    }\n    \n    // Add experiences  \n    console.log('üéØ Aggiunta esperienze...');\n    for (const experience of sampleExperiences) {\n      const docRef = await addDoc(collection(db, 'experiences'), experience);\n      console.log(`‚úÖ Esperienza aggiunta: ${experience.title} (ID: ${docRef.id})`);\n    }\n    \n    // Add services\n    console.log('üîß Aggiunta servizi...');\n    for (const service of sampleServices) {\n      const docRef = await addDoc(collection(db, 'services'), service);\n      console.log(`‚úÖ Servizio aggiunto: ${service.name} (ID: ${docRef.id})`);\n    }\n    \n    // Add sample cities\n    console.log('üèôÔ∏è Aggiunta citt√†...');\n    const sampleCities = [\n      {\n        name: \"Marrakech\",\n        description: \"La citt√† rossa, cuore pulsante del Marocco\",\n        image: \"/images/marrakech.jpg\",\n        coordinates: { lat: 31.6295, lng: -7.9811 },\n        attractions: [\"Jemaa el-Fnaa\", \"Koutoubia\", \"Palazzo Bahia\"],\n        status: \"published\",\n        published: true\n      },\n      {\n        name: \"Fez\",\n        description: \"Capitale culturale e spirituale, con la medina pi√π grande al mondo\",\n        image: \"/images/fez.jpg\", \n        coordinates: { lat: 34.0181, lng: -5.0078 },\n        attractions: [\"Medina di Fez\", \"Universit√† Al-Karaouine\", \"Concerie\"],\n        status: \"published\",\n        published: true\n      }\n    ];\n    \n    for (const city of sampleCities) {\n      const docRef = await addDoc(collection(db, 'cities'), city);\n      console.log(`‚úÖ Citt√† aggiunta: ${city.name} (ID: ${docRef.id})`);\n    }\n    \n    console.log('üéâ Database popolato con successo!');\n    console.log('üìä Statistiche:');\n    console.log(`- ${sampleTravels.length} viaggi`);\n    console.log(`- ${sampleExperiences.length} esperienze`); \n    console.log(`- ${sampleServices.length} servizi`);\n    console.log(`- ${sampleCities.length} citt√†`);\n    \n  } catch (error) {\n    console.error('‚ùå Errore durante il popolamento:', error);\n    throw error;\n  }\n}\n\n// Run the population script\npopulateDatabase()\n  .then(() => {\n    console.log('‚úÖ Script completato con successo');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('‚ùå Script fallito:', error);\n    process.exit(1);\n  });","size_bytes":10465},"components/modals/TripDetailsModal.tsx":{"content":"\"use client\"\nimport { X, Clock, Users, Star, Check, Phone, Mail } from \"lucide-react\"\nimport Link from \"next/link\"\n\ninterface TripDetailsModalProps {\n  trip: any\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport default function TripDetailsModal({ trip, isOpen, onClose }: TripDetailsModalProps) {\n  if (!isOpen || !trip) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl sm:rounded-3xl max-w-xs sm:max-w-md md:max-w-2xl lg:max-w-4xl w-full max-h-[92vh] overflow-y-auto\">\n        <div className=\"relative\">\n          <img\n            src={\n              trip.image ||\n              `/placeholder.svg?height=300&width=800&query=${encodeURIComponent(trip.title + \" marocco viaggio\")}`\n            }\n            alt={trip.title}\n            className=\"w-full h-48 sm:h-64 object-cover rounded-t-2xl sm:rounded-t-3xl\"\n          />\n          <button\n            onClick={onClose}\n            className=\"absolute top-2 right-2 sm:top-4 sm:right-4 w-8 h-8 sm:w-10 sm:h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors touch-manipulation\"\n          >\n            <X className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-900\" />\n          </button>\n          {trip.badge && (\n            <div className=\"absolute bottom-2 left-2 sm:bottom-4 sm:left-4\">\n              <span className=\"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-orange-500 to-red-500 text-white dark:bg-orange-900/40 dark:text-orange-200 shadow-sm transition-colors\">\n                {trip.badge}\n              </span>\n            </div>\n          )}\n        </div>\n\n        <div className=\"p-4 sm:p-6 lg:p-8\">\n          <div className=\"flex flex-col sm:flex-row sm:items-start justify-between mb-4 sm:mb-6\">\n            <div className=\"mb-4 sm:mb-0\">\n              <h2 className=\"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-2 text-balance\">\n                {trip.title}\n              </h2>\n              <p className=\"text-gray-600 dark:text-gray-300 text-sm sm:text-base lg:text-lg mb-3 sm:mb-4 text-pretty\">\n                {trip.subtitle || trip.description}\n              </p>\n              <div className=\"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\n                <div className=\"flex items-center space-x-1\">\n                  <Clock className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n                  <span>{trip.duration}</span>\n                </div>\n                <div className=\"flex items-center space-x-1\">\n                  <Users className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n                  <span>{trip.groupSize || trip.maxParticipants || \"2-12 persone\"}</span>\n                </div>\n                {trip.rating && (\n                  <div className=\"flex items-center space-x-1\">\n                    <Star className=\"w-3 h-3 sm:w-4 sm:h-4 text-yellow-400 fill-current\" />\n                    <span>\n                      {trip.rating} ({trip.reviews} recensioni)\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"text-left sm:text-right\">\n              <div className=\"text-2xl sm:text-3xl font-bold text-orange-600\">{trip.price}</div>\n              {trip.originalPrice && (\n                <div className=\"text-base sm:text-lg text-gray-500 line-through\">{trip.originalPrice}</div>\n              )}\n              <div className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400\">per persona</div>\n            </div>\n          </div>\n\n          <div className=\"grid lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8\">\n            <div className=\"lg:col-span-2 space-y-4 sm:space-y-6 lg:space-y-8\">\n              {/* Detailed Description */}\n              <div>\n                <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-3 sm:mb-4\">\n                  Descrizione Completa\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-300 leading-relaxed text-sm sm:text-base text-pretty\">\n                  {trip.detailedDescription || trip.description}\n                </p>\n              </div>\n\n              {/* Highlights */}\n              {trip.highlights && (\n                <div>\n                  <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-3 sm:mb-4\">\n                    Punti Salienti\n                  </h3>\n                  <div className=\"grid gap-2 sm:gap-3\">\n                    {trip.highlights.map((highlight: string, index: number) => (\n                      <div key={index} className=\"flex items-center space-x-2\">\n                        <Check className=\"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0\" />\n                        <span className=\"text-gray-600 dark:text-gray-300 text-sm sm:text-base\">{highlight}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Itinerary */}\n              {trip.itinerary && (\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Itinerario Dettagliato</h3>\n                  <div className=\"space-y-4\">\n                    {trip.itinerary.map((day: any, index: number) => (\n                      <div key={index} className=\"flex space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl\">\n                        <div className=\"flex-shrink-0 w-12 h-12 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold\">\n                          {day.day}\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-gray-900 dark:text-white\">{day.title}</h4>\n                          <p className=\"text-gray-600 dark:text-gray-300 text-sm\">{day.description}</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* What's Included/Not Included */}\n              {(trip.includes || trip.included) && (\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"bg-green-50 dark:bg-green-900/20 p-6 rounded-xl\">\n                    <h3 className=\"text-lg font-bold text-green-800 dark:text-green-300 mb-4\">‚úÖ Incluso</h3>\n                    <ul className=\"space-y-2\">\n                      {(trip.includes || trip.included).map((item: string, index: number) => (\n                        <li\n                          key={index}\n                          className=\"flex items-start space-x-2 text-sm text-green-700 dark:text-green-400\"\n                        >\n                          <Check className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n                          <span>{item}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n\n                  {(trip.notIncludes || trip.notIncluded) && (\n                    <div className=\"bg-red-50 dark:bg-red-900/20 p-6 rounded-xl\">\n                      <h3 className=\"text-lg font-bold text-red-800 dark:text-red-300 mb-4\">‚ùå Non Incluso</h3>\n                      <ul className=\"space-y-2\">\n                        {(trip.notIncludes || trip.notIncluded).map((item: string, index: number) => (\n                          <li key={index} className=\"flex items-start space-x-2 text-sm text-red-700 dark:text-red-400\">\n                            <X className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n                            <span>{item}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* Sidebar */}\n            <div className=\"space-y-6\">\n              {/* Booking Info */}\n              <div className=\"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-bold text-orange-800 dark:text-orange-300 mb-4\">Informazioni Prenotazione</h3>\n                <div className=\"space-y-3 text-sm\">\n                  {trip.nextDeparture && (\n                    <div>\n                      <span className=\"font-medium text-blue-700 dark:text-blue-400\">Prossima Partenza:</span>\n                      <p className=\"text-blue-600 dark:text-blue-300\">{trip.nextDeparture}</p>\n                    </div>\n                  )}\n                  {trip.spotsLeft && (\n                    <div>\n                      <span className=\"font-medium text-blue-700 dark:text-blue-400\">Posti Disponibili:</span>\n                      <p className=\"text-blue-600 dark:text-blue-300\">{trip.spotsLeft} posti rimasti</p>\n                    </div>\n                  )}\n                  {trip.meetingPoint && (\n                    <div>\n                      <span className=\"font-medium text-blue-700 dark:text-blue-400\">Punto di Ritrovo:</span>\n                      <p className=\"text-blue-600 dark:text-blue-300\">{trip.meetingPoint}</p>\n                    </div>\n                  )}\n                  {trip.cancellationPolicy && (\n                    <div>\n                      <span className=\"font-medium text-blue-700 dark:text-blue-400\">Cancellazione:</span>\n                      <p className=\"text-blue-600 dark:text-blue-300\">{trip.cancellationPolicy}</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Contact Info */}\n              <div className=\"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-xl\">\n                <h3 className=\"text-lg font-bold text-orange-800 dark:text-orange-300 mb-4\">Hai Domande?</h3>\n                <div className=\"space-y-3\">\n                  <a\n                    href=\"tel:+393292333370\"\n                    className=\"flex items-center space-x-2 text-orange-700 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-300\"\n                  >\n                    <Phone className=\"w-4 h-4\" />\n                    <span>+39 329 233 3370</span>\n                  </a>\n                  <a\n                    href=\"mailto:info@moroccodreams.it\"\n                    className=\"flex items-center space-x-2 text-orange-700 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-300\"\n                  >\n                    <Mail className=\"w-4 h-4\" />\n                    <span>info@moroccodreams.it</span>\n                  </a>\n                  <a\n                    href=\"https://wa.me/393292333370\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center space-x-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors text-sm\"\n                  >\n                    <span>üí¨</span>\n                    <span>WhatsApp</span>\n                  </a>\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                <Link\n                  href=\"/contatti\"\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 sm:py-4 px-4 sm:px-6 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-sm sm:text-base lg:text-lg text-center block transform hover:scale-105 active:scale-95 touch-manipulation\"\n                >\n                  Prenota Ora - {trip.price}\n                </Link>\n                <Link\n                  href=\"/contatti\"\n                  className=\"w-full border-2 border-orange-500 text-orange-500 dark:text-orange-400 py-2 sm:py-3 px-4 sm:px-6 rounded-xl hover:bg-orange-500 hover:text-white dark:hover:text-white transition-all duration-300 font-semibold text-sm sm:text-base text-center block transform hover:scale-105 active:scale-95 touch-manipulation\"\n                >\n                  Richiedi Informazioni\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":12239},"app/esperienze/quad-cammelli/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Zap, Mountain, Users, Clock, Star, MapPin, MessageCircle, Check, Utensils } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function QuadCammelliPage() {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    numPeople: \"1\",\n    vehicleType: \"quad\" as \"quad\" | \"buggy\" | \"motocross\" | \"cammelli\" | \"mixed\",\n    duration: \"2h\" as \"2h\" | \"4h\" | \"fullday\",\n    preferredTime: \"sunset\" as \"sunset\" | \"sunrise\" | \"morning\" | \"afternoon\",\n    notes: \"\",\n    extras: {\n      panoramicDinner: false,\n      sandboarding: false,\n      stargazing: false,\n      photography: false,\n    }\n  })\n\n  const vehicleTypes = [\n    { id: \"quad\", name: \"Quad\", description: \"Yamaha 350cc automatici\" },\n    { id: \"buggy\", name: \"Buggy\", description: \"2 posti, ideale per coppie\" },\n    { id: \"motocross\", name: \"Motocross\", description: \"Per esperti, adrenalina pura\" },\n    { id: \"cammelli\", name: \"Cammelli\", description: \"Tradizione berbera autentica\" },\n    { id: \"mixed\", name: \"Mix Completo\", description: \"Quad + Cammelli combinati\" },\n  ]\n\n  const handleWhatsappBooking = () => {\n    const vehicleTypeName = vehicleTypes.find(t => t.id === formData.vehicleType)?.name || \"\"\n    const durationText = formData.duration === \"2h\" ? \"2 ore\" : formData.duration === \"4h\" ? \"4 ore\" : \"Giornata intera\"\n    const timeText = formData.preferredTime === \"sunset\" ? \"Tramonto\" : formData.preferredTime === \"sunrise\" ? \"Alba\" : formData.preferredTime === \"morning\" ? \"Mattina\" : \"Pomeriggio\"\n    \n    const extras = []\n    if (formData.extras.panoramicDinner) extras.push(\"Cena panoramica mozzafiato\")\n    if (formData.extras.sandboarding) extras.push(\"Sandboarding\")\n    if (formData.extras.stargazing) extras.push(\"Osservazione stelle\")\n    if (formData.extras.photography) extras.push(\"Servizio fotografico professionale\")\n    \n    let message = `üèúÔ∏è *PRENOTAZIONE QUAD & CAMMELLI DESERTO*\\n\\n`\n    message += `üë§ *Nome:* ${formData.name}\\n`\n    message += `üìß *Email:* ${formData.email}\\n`\n    message += `üì± *Telefono:* ${formData.phone}\\n\\n`\n    message += `üë• *Numero partecipanti:* ${formData.numPeople}\\n`\n    message += `üèçÔ∏è *Tipo veicolo:* ${vehicleTypeName}\\n`\n    message += `‚è±Ô∏è *Durata:* ${durationText}\\n`\n    message += `üåÖ *Orario preferito:* ${timeText}\\n`\n    \n    if (extras.length > 0) {\n      message += `\\n‚ú® *Servizi extra:*\\n${extras.map(e => `‚Ä¢ ${e}`).join('\\n')}\\n`\n    }\n    \n    if (formData.notes) {\n      message += `\\nüí¨ *Note:* ${formData.notes}`\n    }\n\n    const whatsappUrl = `https://wa.me/393292333370?text=${encodeURIComponent(message)}`\n    window.open(whatsappUrl, '_blank')\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <ContactBanner\n        title=\"Quad e Cammelli - Avventura nel Deserto\"\n        subtitle=\"Prenota ora la tua esperienza unica tra adrenalina e tradizione nel Sahara marocchino.\"\n      />\n\n      <header className=\"relative\">\n        <div className=\"h-[400px] sm:h-[500px] lg:h-[600px] relative overflow-hidden\">\n          {/* Wishlist Button */}\n          <div className=\"absolute top-6 right-6 z-10\">\n            <WishlistButton\n              itemId=\"quad-cammelli-deserto\"\n              itemType=\"experience\"\n              itemTitle=\"Quad e Cammelli nel Deserto\"\n              itemImage=\"/images/sahara-sunset.png\"\n              itemDescription=\"Esplora le dune dorate tra adrenalina e tradizione\"\n            />\n          </div>\n          <img\n            src=\"/images/sahara-sunset.png\"\n            alt=\"Quad e Cammelli nel deserto del Sahara\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent\" />\n          <div className=\"absolute bottom-8 left-8 text-white max-w-2xl\">\n            <h1 className=\"text-4xl lg:text-5xl font-bold mb-4 text-balance\">Quad e Cammelli</h1>\n            <p className=\"text-xl lg:text-2xl opacity-90 text-pretty\">\n              Esplora le dune dorate tra adrenalina e tradizione\n            </p>\n          </div>\n        </div>\n      </header>\n\n      <section className=\"py-12 lg:py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2\">\n              <div className=\"mb-12\">\n                <h2 className=\"text-3xl lg:text-4xl font-bold mb-6 text-foreground\">\n                  L'Avventura Perfetta nel Deserto\n                </h2>\n                <p className=\"text-lg text-muted-foreground leading-relaxed mb-6\">\n                  Vivi un'esperienza unica combinando l'emozione dei quad sulle dune sabbiose con la magia di un\n                  trekking in cammello al tramonto. Questa avventura ti permetter√† di esplorare il deserto del Sahara da\n                  due prospettive completamente diverse: l'adrenalina moderna e la tradizione millenaria.\n                </p>\n              </div>\n\n              <div className=\"grid md:grid-cols-2 gap-8 mb-12\">\n                <div className=\"bg-card rounded-2xl p-6 border border-border\">\n                  <div className=\"flex items-center gap-3 mb-4\">\n                    <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center\">\n                      <Zap className=\"w-6 h-6 text-primary\" />\n                    </div>\n                    <h3 className=\"text-2xl font-bold text-card-foreground\">Avventure in Quad</h3>\n                  </div>\n                  <p className=\"text-muted-foreground mb-4\">\n                    Sfreccia sulle dune con quad, buggy o motocross. Percorsi adatti a tutti i livelli di esperienza.\n                  </p>\n                  <ul className=\"space-y-2 text-sm\">\n                    {[\n                      \"Quad Yamaha 350cc automatici\",\n                      \"Buggy biposto per coppie\",\n                      \"Motocross per esperti\",\n                      \"Equipaggiamento di sicurezza\",\n                      \"Istruttore qualificato\"\n                    ].map((item, i) => (\n                      <li key={i} className=\"flex items-center gap-2\">\n                        <div className=\"w-2 h-2 bg-primary rounded-full\" />\n                        <span>{item}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                <div className=\"bg-card rounded-2xl p-6 border border-border\">\n                  <div className=\"flex items-center gap-3 mb-4\">\n                    <div className=\"w-12 h-12 bg-secondary/10 rounded-full flex items-center justify-center\">\n                      <Mountain className=\"w-6 h-6 text-secondary\" />\n                    </div>\n                    <h3 className=\"text-2xl font-bold text-card-foreground\">Trekking in Cammello</h3>\n                  </div>\n                  <p className=\"text-muted-foreground mb-4\">\n                    Immergiti nella tradizione berbera con un'esperienza autentica sui \"vascelli del deserto\".\n                  </p>\n                  <ul className=\"space-y-2 text-sm\">\n                    {[\n                      \"Cammelli docili e addestrati\",\n                      \"Guide berbere esperte\",\n                      \"Tramonti spettacolari\",\n                      \"Fotografie memorabili\",\n                      \"T√® nel deserto\"\n                    ].map((item, i) => (\n                      <li key={i} className=\"flex items-center gap-2\">\n                        <div className=\"w-2 h-2 bg-secondary rounded-full\" />\n                        <span>{item}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n\n              <div className=\"bg-gradient-to-r from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-2xl p-6 lg:p-8 border border-border mb-12\">\n                <h3 className=\"text-2xl font-bold mb-4 text-foreground flex items-center gap-2\">\n                  <Star className=\"w-6 h-6 text-orange-600\" />\n                  Cosa Include\n                </h3>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  {[\n                    \"Guida esperta parlante italiano\",\n                    \"Equipaggiamento di sicurezza completo\",\n                    \"Acqua e snack durante il tour\",\n                    \"Assicurazione RC inclusa\",\n                    \"Pick-up dal tuo riad/hotel\",\n                    \"Foto ricordo professionali\",\n                  ].map((item, i) => (\n                    <div key={i} className=\"flex items-start gap-2\">\n                      <Check className=\"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5\" />\n                      <span className=\"text-muted-foreground\">{item}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"bg-muted/50 rounded-2xl p-6 lg:p-8 border border-border\">\n                <h3 className=\"text-2xl font-bold mb-6 text-foreground flex items-center gap-2\">\n                  <Utensils className=\"w-6 h-6 text-orange-600\" />\n                  Cena Panoramica Opzionale\n                </h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  Aggiungi una cena berbera tradizionale con vista mozzafiato sulle dune al tramonto. \n                  Tajine, couscous, pane fresco e t√® alla menta serviti in un campo tendato autentico \n                  con musica tradizionale e cielo stellato.\n                </p>\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <MapPin className=\"w-4 h-4 text-orange-600\" />\n                  <span className=\"text-muted-foreground\">Location esclusiva tra le dune di Merzouga</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"lg:col-span-1\">\n              <Card className=\"sticky top-24\">\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-2xl font-bold mb-6 text-foreground\">Prenota la Tua Avventura</h3>\n                  \n                  <div className=\"space-y-6\">\n                    <div>\n                      <Label htmlFor=\"name\">Nome e Cognome *</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                        placeholder=\"Mario Rossi\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"email\">Email *</Label>\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        value={formData.email}\n                        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                        placeholder=\"mario@email.com\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"phone\">Telefono *</Label>\n                      <Input\n                        id=\"phone\"\n                        type=\"tel\"\n                        value={formData.phone}\n                        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                        placeholder=\"+39 123 456 7890\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"numPeople\">Numero Partecipanti</Label>\n                      <Input\n                        id=\"numPeople\"\n                        type=\"number\"\n                        min=\"1\"\n                        value={formData.numPeople}\n                        onChange={(e) => setFormData({ ...formData, numPeople: e.target.value })}\n                      />\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Tipo di Veicolo/Esperienza *</Label>\n                      <RadioGroup\n                        value={formData.vehicleType}\n                        onValueChange={(value: string) => setFormData({ ...formData, vehicleType: value as \"quad\" | \"buggy\" | \"motocross\" | \"cammelli\" | \"mixed\" })}\n                      >\n                        {vehicleTypes.map((type) => (\n                          <div key={type.id} className=\"flex items-start space-x-3 mb-3\">\n                            <RadioGroupItem value={type.id} id={type.id} className=\"mt-1\" />\n                            <div className=\"flex-1\">\n                              <Label htmlFor={type.id} className=\"cursor-pointer font-medium\">\n                                {type.name}\n                              </Label>\n                              <p className=\"text-xs text-muted-foreground\">{type.description}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </RadioGroup>\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Durata</Label>\n                      <RadioGroup\n                        value={formData.duration}\n                        onValueChange={(value: string) => setFormData({ ...formData, duration: value as \"2h\" | \"4h\" | \"fullday\" })}\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"2h\" id=\"2h\" />\n                          <Label htmlFor=\"2h\" className=\"cursor-pointer\">2 ore</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"4h\" id=\"4h\" />\n                          <Label htmlFor=\"4h\" className=\"cursor-pointer\">4 ore</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"fullday\" id=\"fullday\" />\n                          <Label htmlFor=\"fullday\" className=\"cursor-pointer\">Giornata intera</Label>\n                        </div>\n                      </RadioGroup>\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Orario Preferito</Label>\n                      <RadioGroup\n                        value={formData.preferredTime}\n                        onValueChange={(value: string) => setFormData({ ...formData, preferredTime: value as \"sunset\" | \"sunrise\" | \"morning\" | \"afternoon\" })}\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"sunset\" id=\"sunset\" />\n                          <Label htmlFor=\"sunset\" className=\"cursor-pointer\">Tramonto (consigliato)</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"sunrise\" id=\"sunrise\" />\n                          <Label htmlFor=\"sunrise\" className=\"cursor-pointer\">Alba</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"morning\" id=\"morning\" />\n                          <Label htmlFor=\"morning\" className=\"cursor-pointer\">Mattina</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"afternoon\" id=\"afternoon\" />\n                          <Label htmlFor=\"afternoon\" className=\"cursor-pointer\">Pomeriggio</Label>\n                        </div>\n                      </RadioGroup>\n                    </div>\n\n                    <div>\n                      <Label className=\"mb-3 block\">Servizi Extra</Label>\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id=\"panoramicDinner\"\n                            checked={formData.extras.panoramicDinner}\n                            onCheckedChange={(checked: boolean) =>\n                              setFormData({\n                                ...formData,\n                                extras: { ...formData.extras, panoramicDinner: checked }\n                              })\n                            }\n                          />\n                          <Label htmlFor=\"panoramicDinner\" className=\"cursor-pointer text-sm\">\n                            üçΩÔ∏è Cena panoramica con vista mozzafiato sulle dune\n                          </Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id=\"sandboarding\"\n                            checked={formData.extras.sandboarding}\n                            onCheckedChange={(checked: boolean) =>\n                              setFormData({\n                                ...formData,\n                                extras: { ...formData.extras, sandboarding: checked }\n                              })\n                            }\n                          />\n                          <Label htmlFor=\"sandboarding\" className=\"cursor-pointer text-sm\">\n                            üèÑ Sandboarding sulle dune\n                          </Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id=\"stargazing\"\n                            checked={formData.extras.stargazing}\n                            onCheckedChange={(checked: boolean) =>\n                              setFormData({\n                                ...formData,\n                                extras: { ...formData.extras, stargazing: checked }\n                              })\n                            }\n                          />\n                          <Label htmlFor=\"stargazing\" className=\"cursor-pointer text-sm\">\n                            ‚≠ê Osservazione stelle con guida astronomo\n                          </Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id=\"photography\"\n                            checked={formData.extras.photography}\n                            onCheckedChange={(checked: boolean) =>\n                              setFormData({\n                                ...formData,\n                                extras: { ...formData.extras, photography: checked }\n                              })\n                            }\n                          />\n                          <Label htmlFor=\"photography\" className=\"cursor-pointer text-sm\">\n                            üì∏ Servizio fotografico professionale\n                          </Label>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"notes\">Note Aggiuntive</Label>\n                      <textarea\n                        id=\"notes\"\n                        value={formData.notes}\n                        onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                        placeholder=\"Esperienza di guida, esigenze particolari, allergie alimentari...\"\n                        className=\"w-full min-h-[100px] px-3 py-2 rounded-md border border-input bg-background text-sm\"\n                      />\n                    </div>\n\n                    <Button\n                      onClick={handleWhatsappBooking}\n                      className=\"w-full bg-green-600 hover:bg-green-700 text-lg py-6\"\n                      size=\"lg\"\n                      disabled={!formData.name || !formData.email || !formData.phone}\n                    >\n                      <MessageCircle className=\"mr-2 h-5 w-5\" />\n                      Prenota su WhatsApp\n                    </Button>\n\n                    <p className=\"text-xs text-muted-foreground text-center\">\n                      Ti risponderemo entro 24 ore con preventivo personalizzato\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-20 bg-gradient-to-r from-orange-600 to-yellow-600\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">Pronto per l'Avventura?</h2>\n          <p className=\"text-xl text-orange-100 mb-8\">\n            Quad, Buggy, Motocross o Cammelli ‚Ä¢ Guide esperte ‚Ä¢ Sicurezza garantita\n          </p>\n          <div className=\"flex justify-center\">\n            <Button\n              size=\"lg\"\n              variant=\"outline\"\n              className=\"border-white text-white hover:bg-white hover:text-orange-600 bg-transparent\"\n              onClick={() => document.querySelector(\"input[type='text']\")?.scrollIntoView({ behavior: \"smooth\" })}\n            >\n              <Zap className=\"mr-2 h-5 w-5\" />\n              Prenota Ora\n            </Button>\n          </div>\n        </div>\n      </section>\n    </div>\n  )\n}\n","size_bytes":21791},"lib/auth.ts":{"content":"// Authentication utilities - based on firebase_barebones_javascript integration\nimport { \n  signInWithRedirect, \n  signInWithPopup, \n  signOut,\n  getRedirectResult,\n  GoogleAuthProvider,\n  User,\n  onAuthStateChanged,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  updateProfile,\n  sendPasswordResetEmail\n} from 'firebase/auth';\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\nimport { auth, googleProvider, db } from './firebase';\n\nexport interface WishlistItem {\n  id: string;\n  type: 'vehicle' | 'experience' | 'travel' | 'city' | 'activity';\n  title: string;\n  image?: string;\n  price?: number;\n  description?: string;\n}\n\nexport interface UserProfile {\n  uid: string;\n  email: string;\n  displayName: string;\n  photoURL?: string;\n  role: 'user' | 'admin' | 'editor';\n  createdAt: Date;\n  preferences: {\n    newsletter: boolean;\n    notifications: boolean;\n    language: string;\n  };\n  profile: {\n    phone?: string;\n    birthDate?: string;\n    nationality?: string;\n    travelPreferences: string[];\n    wishlist: string[];\n    wishlistItems?: WishlistItem[];\n    cart: Array<{\n      id: string;\n      type: 'travel' | 'experience';\n      title: string;\n      price: number;\n      quantity: number;\n      addedAt: Date;\n    }>;\n  };\n}\n\n// Sign in with Google (popup for desktop, redirect for mobile)\nexport const signInWithGoogle = async () => {\n  try {\n    // Use popup for better UX on desktop\n    const result = await signInWithPopup(auth, googleProvider);\n    await createUserProfile(result.user);\n    return result.user;\n  } catch (error: any) {\n    console.error('Google sign-in error:', error);\n    if (error.code === 'auth/popup-blocked') {\n      try {\n        // Fallback to redirect for mobile or when popup is blocked\n        await signInWithRedirect(auth, googleProvider);\n        return null; // Redirect in progress\n      } catch (redirectError: any) {\n        console.error('Redirect sign-in error:', redirectError);\n        throw new Error('Impossibile accedere con Google. Riprova pi√π tardi.');\n      }\n    } else if (error.code === 'auth/cancelled-popup-request') {\n      throw new Error('Accesso annullato. Riprova se necessario.');\n    } else if (error.code === 'auth/network-request-failed') {\n      throw new Error('Errore di connessione. Controlla la tua connessione internet.');\n    }\n    throw new Error('Errore durante l\\'accesso con Google. Riprova.');\n  }\n};\n\n// Handle redirect result after sign-in\nexport const handleRedirectResult = async () => {\n  try {\n    const result = await getRedirectResult(auth);\n    if (result?.user) {\n      await createUserProfile(result.user);\n      return result.user;\n    }\n  } catch (error) {\n    console.error('Error handling redirect result:', error);\n    throw error;\n  }\n};\n\n// Sign out\nexport const signOutUser = async () => {\n  try {\n    await signOut(auth);\n  } catch (error) {\n    console.error('Error signing out:', error);\n    throw error;\n  }\n};\n\n// Send password reset email\nexport const resetPassword = async (email: string) => {\n  try {\n    await sendPasswordResetEmail(auth, email, {\n      url: `${window.location.origin}/auth/login`, // Redirect after reset\n      handleCodeInApp: false\n    });\n    console.log('Password reset email sent successfully');\n  } catch (error: any) {\n    console.error('Error sending password reset email:', error);\n    \n    // Handle specific Firebase errors\n    if (error.code === 'auth/user-not-found') {\n      throw new Error('Nessun account trovato con questa email');\n    } else if (error.code === 'auth/invalid-email') {\n      throw new Error('Formato email non valido');\n    } else if (error.code === 'auth/too-many-requests') {\n      throw new Error('Troppe richieste di reset. Riprova pi√π tardi');\n    } else {\n      throw new Error('Errore nell\\'invio dell\\'email di reset. Riprova');\n    }\n  }\n};\n\n// Create or update user profile in Firestore\nexport const createUserProfile = async (user: User) => {\n  if (!user) return;\n\n  const userRef = doc(db, 'users', user.uid);\n  const userSnap = await getDoc(userRef);\n\n  if (!userSnap.exists()) {\n    const userProfile: UserProfile = {\n      uid: user.uid,\n      email: user.email || '',\n      displayName: user.displayName || '',\n      photoURL: user.photoURL || '',\n      role: 'user',\n      createdAt: new Date(),\n      preferences: {\n        newsletter: false,\n        notifications: true,\n        language: 'it'\n      },\n      profile: {\n        travelPreferences: [],\n        wishlist: [],\n        wishlistItems: [],\n        cart: []\n      }\n    };\n\n    try {\n      await setDoc(userRef, userProfile);\n      console.log('User profile created successfully');\n    } catch (error) {\n      console.error('Error creating user profile:', error);\n      throw error;\n    }\n  }\n};\n\n// Get user profile from Firestore\nexport const getUserProfile = async (uid: string): Promise<UserProfile | null> => {\n  try {\n    const userRef = doc(db, 'users', uid);\n    const userSnap = await getDoc(userRef);\n    \n    if (userSnap.exists()) {\n      return userSnap.data() as UserProfile;\n    }\n    return null;\n  } catch (error) {\n    console.error('Error getting user profile:', error);\n    throw error;\n  }\n};\n\n// Sign up with email and password\nexport const signUp = async (email: string, password: string, displayName?: string) => {\n  try {\n    const result = await createUserWithEmailAndPassword(auth, email, password);\n    \n    // Update user profile with display name\n    if (displayName && result.user) {\n      await updateProfile(result.user, {\n        displayName: displayName\n      });\n    }\n    \n    // Create user profile in Firestore\n    await createUserProfile(result.user);\n    return result.user;\n  } catch (error) {\n    console.error('Error signing up:', error);\n    throw error;\n  }\n};\n\n// Sign in with email and password\nexport const signIn = async (email: string, password: string) => {\n  try {\n    const result = await signInWithEmailAndPassword(auth, email, password);\n    return result.user;\n  } catch (error) {\n    console.error('Error signing in:', error);\n    throw error;\n  }\n};\n\n// Create admin user\nexport const createAdminUser = async (email: string, password: string, displayName: string) => {\n  try {\n    const result = await createUserWithEmailAndPassword(auth, email, password);\n    \n    // Update user profile with display name\n    if (result.user) {\n      await updateProfile(result.user, {\n        displayName: displayName\n      });\n    }\n    \n    // Create admin profile in Firestore\n    await createAdminProfile(result.user, displayName);\n    return result.user;\n  } catch (error) {\n    console.error('Error creating admin user:', error);\n    throw error;\n  }\n};\n\n// Create admin profile in Firestore\nexport const createAdminProfile = async (user: User, displayName: string) => {\n  if (!user) return;\n\n  const userRef = doc(db, 'users', user.uid);\n  const adminProfile: UserProfile = {\n    uid: user.uid,\n    email: user.email || '',\n    displayName: displayName,\n    photoURL: user.photoURL || '',\n    role: 'admin', // Set role as admin\n    createdAt: new Date(),\n    preferences: {\n      newsletter: true,\n      notifications: true,\n      language: 'it'\n    },\n    profile: {\n      travelPreferences: [],\n      wishlist: [],\n      cart: []\n    }\n  };\n\n  try {\n    await setDoc(userRef, adminProfile);\n    console.log('Admin profile created successfully');\n  } catch (error) {\n    console.error('Error creating admin profile:', error);\n    throw error;\n  }\n};\n\n// Update user role (admin function)\nexport const updateUserRole = async (uid: string, role: 'user' | 'admin' | 'editor') => {\n  try {\n    const userRef = doc(db, 'users', uid);\n    await setDoc(userRef, { role }, { merge: true });\n    console.log(`User role updated to ${role}`);\n  } catch (error) {\n    console.error('Error updating user role:', error);\n    throw error;\n  }\n};\n\n// Auth state listener\nexport const onAuthStateChange = (callback: (user: User | null) => void) => {\n  return onAuthStateChanged(auth, callback);\n};","size_bytes":8011},"app/about/page.tsx":{"content":"import { Users, Shield, Heart, Award } from \"lucide-react\"\n\nexport default function AboutPage() {\n  return (\n    <div className=\"min-h-screen\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-orange-500 to-red-500\">\n        <div className=\"absolute inset-0 bg-black/20\" />\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6\">Chi Siamo</h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto\">\n            La tua finestra sul Marocco autentico, dove ogni viaggio diventa un'esperienza indimenticabile\n          </p>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center mb-16 lg:mb-24\">\n            <div>\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-6\">La Nostra Storia</h2>\n              <p className=\"text-base lg:text-lg text-muted-foreground mb-6 leading-relaxed\">\n                Morocco Dreams nasce dalla passione per questa terra magica e dal desiderio di condividere la sua\n                bellezza autentica con viaggiatori di tutto il mondo. Fondata da esperti locali che conoscono ogni\n                angolo del regno, offriamo esperienze genuine e rispettose delle tradizioni locali.\n              </p>\n              <p className=\"text-base lg:text-lg text-muted-foreground mb-8 leading-relaxed\">\n                La nostra missione √® quella di creare ponti culturali attraverso viaggi responsabili, permettendo ai\n                nostri ospiti di vivere il vero spirito marocchino attraverso incontri autentici con le comunit√† locali.\n              </p>\n\n              <div className=\"grid grid-cols-3 gap-6 lg:gap-8\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl lg:text-3xl font-bold text-orange-600 mb-2\">500+</div>\n                  <div className=\"text-sm text-muted-foreground\">Viaggiatori Felici</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl lg:text-3xl font-bold text-orange-600 mb-2\">10</div>\n                  <div className=\"text-sm text-muted-foreground\">Anni di Esperienza</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl lg:text-3xl font-bold text-orange-600 mb-2\">50+</div>\n                  <div className=\"text-sm text-muted-foreground\">Tour Organizzati</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"relative\">\n              <img\n                src=\"/images/moroccan-team.png\"\n                alt=\"Il nostro team\"\n                className=\"w-full h-80 lg:h-96 object-cover rounded-3xl shadow-2xl\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-3xl\" />\n              <div className=\"absolute bottom-6 left-6 text-white\">\n                <h3 className=\"text-xl lg:text-2xl font-bold mb-2\">Il Nostro Team</h3>\n                <p className=\"text-gray-200\">Guide esperte e staff dedicato</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Values Section */}\n          <div className=\"mb-16 lg:mb-24\">\n            <div className=\"text-center mb-12 lg:mb-16\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">I Nostri Valori</h2>\n              <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n                Principi che guidano ogni nostro viaggio e ogni esperienza che creiamo\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8\">\n              {[\n                {\n                  icon: Shield,\n                  title: \"Sicurezza\",\n                  description: \"La sicurezza dei nostri viaggiatori √® sempre la nostra priorit√† assoluta\",\n                },\n                {\n                  icon: Heart,\n                  title: \"Autenticit√†\",\n                  description: \"Esperienze genuine che rispettano le tradizioni e la cultura locale\",\n                },\n                {\n                  icon: Users,\n                  title: \"Comunit√†\",\n                  description: \"Supportiamo le comunit√† locali attraverso il turismo responsabile\",\n                },\n                {\n                  icon: Award,\n                  title: \"Eccellenza\",\n                  description: \"Standard elevati in ogni aspetto del servizio che offriamo\",\n                },\n              ].map((value, idx) => (\n                <div\n  key={idx}\n  className=\"text-center p-6 bg-card rounded-2xl hover:shadow-lg transition-all duration-300\"\n>\n  <div\n  className=\"\n    w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg transition-colors\n    bg-gradient-to-r from-orange-500 to-red-500\n    dark:bg-none dark:bg-orange-900/40\n  \"\n>\n  <value.icon className=\"w-8 h-8 text-white dark:text-orange-400 transition-colors\" />\n</div>\n\n  <h3 className=\"text-lg lg:text-xl font-bold text-card-foreground mb-3\">{value.title}</h3>\n  <p className=\"text-muted-foreground text-sm lg:text-base\">{value.description}</p>\n</div>\n\n              ))}\n            </div>\n          </div>\n\n          {/* Team Section */}\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Il Nostro Team</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Professionisti appassionati che rendono ogni viaggio speciale\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-6 lg:gap-8 max-w-4xl mx-auto\">\n            {[\n              {\n                name: \"El Kharroubi Omar\",\n                role: \"Fondatore e CEO\",\n                image: \"/images/team-ahmed.png\",\n                description: \"Guida esperta con 15 anni di esperienza nel turismo marocchino\",\n              },\n              {\n                name: \"Latifa Abkal\",\n                role: \"Responsabile Esperienze\",\n                image: \"/images/team-fatima.png\",\n                description: \"Specialista in cultura berbera e tradizioni locali\",\n              },\n            ].map((member, idx) => (\n              <div\n                key={idx}\n                className=\"bg-card rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300\"\n              >\n                <img\n                  src={member.image || \"/placeholder.svg?height=300&width=300&text=Team+Member\"}\n                  alt={member.name}\n                  className=\"w-full h-56 lg:h-64 object-cover\"\n                />\n                <div className=\"p-6\">\n                  <h3 className=\"text-lg lg:text-xl font-bold text-foreground mb-2\">{member.name}</h3>\n                  <p className=\"text-orange-600 dark:text-orange-400 font-semibold mb-3\">{member.role}</p>\n                  <p className=\"text-muted-foreground text-sm lg:text-base\">{member.description}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-r from-orange-500 to-red-500\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">Pronto per la Tua Avventura?</h2>\n          <p className=\"text-lg lg:text-xl mb-8 max-w-2xl mx-auto\">\n            Lascia che il nostro team di esperti crei per te un'esperienza indimenticabile nel cuore del Marocco\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <a\n              href=\"/contatti\"\n              className=\"\n  border-2 border-white text-white\n  px-6 lg:px-8 py-3 lg:py-4 rounded-xl\n  hover:bg-white hover:text-orange-600 hover:border-orange-600\n  transition-all duration-300 font-semibold text-base lg:text-lg\n\"\n\n            >\n              Contattaci Ora\n            </a>\n            <a\n              href=\"/viaggi/su-misura\"\n              className=\"border-2 border-white text-white px-6 lg:px-8 py-3 lg:py-4 rounded-xl hover:bg-white hover:text-orange-600 transition-all duration-300 font-semibold text-base lg:text-lg\"\n            >\n              Pianifica il Tuo Viaggio\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":8687},"app/blog/loading.tsx":{"content":"import { Skeleton } from \"@/components/ui/skeleton\"\n\nexport default function BlogLoading() {\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n      {/* Hero Section Skeleton */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-indigo-600 to-purple-600\">\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <Skeleton className=\"h-16 w-96 mx-auto mb-6 bg-white/20\" />\n          <Skeleton className=\"h-8 w-full max-w-3xl mx-auto mb-8 bg-white/20\" />\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Skeleton className=\"h-12 w-40 bg-white/20\" />\n            <Skeleton className=\"h-12 w-40 bg-white/20\" />\n            <Skeleton className=\"h-12 w-40 bg-white/20\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Search and Filters Skeleton */}\n      <div className=\"py-8 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col lg:flex-row gap-4 items-center justify-between\">\n            <Skeleton className=\"h-12 w-full max-w-md\" />\n            <div className=\"flex flex-wrap gap-2\">\n              <Skeleton className=\"h-10 w-32\" />\n              <Skeleton className=\"h-10 w-28\" />\n              <Skeleton className=\"h-10 w-24\" />\n              <Skeleton className=\"h-10 w-36\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Featured Post Skeleton */}\n      <div className=\"py-16 lg:py-24 bg-white dark:bg-gray-900\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <Skeleton className=\"h-10 w-80 mx-auto mb-4\" />\n            <Skeleton className=\"h-6 w-96 mx-auto\" />\n          </div>\n          <div className=\"bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-2xl\">\n            <div className=\"grid lg:grid-cols-2 gap-0\">\n              <Skeleton className=\"h-64 lg:h-96\" />\n              <div className=\"p-8 lg:p-12\">\n                <div className=\"flex items-center space-x-4 mb-4\">\n                  <Skeleton className=\"h-6 w-24\" />\n                  <Skeleton className=\"h-4 w-16\" />\n                </div>\n                <Skeleton className=\"h-8 w-full mb-4\" />\n                <Skeleton className=\"h-6 w-full mb-2\" />\n                <Skeleton className=\"h-6 w-3/4 mb-6\" />\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center space-x-3\">\n                    <Skeleton className=\"w-10 h-10 rounded-full\" />\n                    <div>\n                      <Skeleton className=\"h-4 w-24 mb-1\" />\n                      <Skeleton className=\"h-3 w-20\" />\n                    </div>\n                  </div>\n                </div>\n                <Skeleton className=\"h-12 w-48\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Blog Posts Grid Skeleton */}\n      <div className=\"py-16 lg:py-24 bg-gray-50 dark:bg-gray-800\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-4 gap-8\">\n            {/* Main Content */}\n            <div className=\"lg:col-span-3\">\n              <div className=\"mb-8\">\n                <Skeleton className=\"h-8 w-48 mb-4\" />\n                <Skeleton className=\"h-5 w-96\" />\n              </div>\n              <div className=\"grid md:grid-cols-2 gap-8\">\n                {Array.from({ length: 6 }).map((_, i) => (\n                  <div\n                    key={i}\n                    className=\"bg-white dark:bg-gray-900 rounded-2xl overflow-hidden border border-gray-200/60 dark:border-gray-800\"\n                  >\n                    <Skeleton className=\"aspect-[16/9]\" />\n                    <div className=\"p-6\">\n                      <Skeleton className=\"h-3 w-32 mb-2\" />\n                      <Skeleton className=\"h-6 w-full mb-2\" />\n                      <Skeleton className=\"h-4 w-full mb-1\" />\n                      <Skeleton className=\"h-4 w-3/4 mb-4\" />\n                      <div className=\"flex gap-2\">\n                        <Skeleton className=\"h-6 w-16\" />\n                        <Skeleton className=\"h-6 w-20\" />\n                        <Skeleton className=\"h-6 w-14\" />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Sidebar */}\n            <div className=\"lg:col-span-1 space-y-8\">\n              {/* Categories Skeleton */}\n              <div className=\"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg\">\n                <Skeleton className=\"h-6 w-24 mb-4\" />\n                <div className=\"space-y-3\">\n                  {Array.from({ length: 6 }).map((_, i) => (\n                    <div key={i} className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <Skeleton className=\"w-3 h-3 rounded-full\" />\n                        <Skeleton className=\"h-4 w-24\" />\n                      </div>\n                      <Skeleton className=\"h-6 w-8\" />\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Popular Tags Skeleton */}\n              <div className=\"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg\">\n                <Skeleton className=\"h-6 w-28 mb-4\" />\n                <div className=\"flex flex-wrap gap-2\">\n                  {Array.from({ length: 8 }).map((_, i) => (\n                    <Skeleton key={i} className=\"h-6 w-16\" />\n                  ))}\n                </div>\n              </div>\n\n              {/* Recent Posts Skeleton */}\n              <div className=\"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg\">\n                <Skeleton className=\"h-6 w-32 mb-4\" />\n                <div className=\"space-y-4\">\n                  {Array.from({ length: 3 }).map((_, i) => (\n                    <div key={i}>\n                      <Skeleton className=\"h-4 w-full mb-2\" />\n                      <Skeleton className=\"h-3 w-24\" />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":6392},"app/cities/[slug]/page.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useParams } from 'next/navigation';\nimport { Clock, MapPin, Star, Users, Calendar, Car, Utensils, Camera, ArrowLeft } from 'lucide-react';\nimport Link from 'next/link';\nimport { City } from '@/lib/firestore-schema';\nimport { EnhancedMapboxService, MarkerData } from '@/lib/mapbox-enhanced';\n\nexport default function CityPage() {\n  const params = useParams();\n  const slug = params.slug as string;\n  \n  const [city, setCity] = useState<City | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('overview');\n\n  useEffect(() => {\n    const loadCity = async () => {\n      try {\n        // Use public API for database-driven content with publication system\n        const response = await fetch(`/api/public/content?collection=cities&slug=${slug}`);\n        \n        if (response.ok) {\n          const cityData = await response.json();\n          setCity(cityData);\n        } else if (response.status === 404) {\n          setError('Citt√† non trovata o non pubblicata');\n        } else {\n          throw new Error('Failed to load city');\n        }\n      } catch (err) {\n        setError('Errore nel caricamento della citt√†');\n        console.error('City loading error:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadCity();\n  }, [slug]);\n\n  // Initialize Mapbox when city data is loaded\n  useEffect(() => {\n    if (city && city.coordinates) {\n      const initMap = async () => {\n        try {\n          const mapbox = EnhancedMapboxService.getInstance();\n          if (mapbox) {\n            await mapbox.initializeMap({\n              container: 'city-map',\n              center: city.coordinates,\n              zoom: 12,\n              style: 'mapbox://styles/mapbox/satellite-streets-v12',\n              interactive: true\n            });\n            \n            // Add city marker\n            const marker: MarkerData = {\n              id: `city-${city.id}`,\n              coordinates: city.coordinates,\n              title: city.name,\n              description: city.description,\n              color: '#ff6b35',\n              type: 'city'\n            };\n            await mapbox.addMarkers([marker]);\n          }\n        } catch (error) {\n          console.error('Mapbox initialization error:', error);\n        }\n      };\n\n      initMap();\n    }\n  }, [city]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"animate-pulse space-y-6\">\n            <div className=\"h-64 bg-muted rounded-xl\"></div>\n            <div className=\"h-8 bg-muted rounded w-1/2\"></div>\n            <div className=\"h-4 bg-muted rounded w-3/4\"></div>\n            <div className=\"grid md:grid-cols-3 gap-6\">\n              {[...Array(3)].map((_, i) => (\n                <div key={i} className=\"h-48 bg-muted rounded-lg\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !city) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-foreground mb-4\">\n            {error || 'Citt√† non trovata'}\n          </h1>\n          <Link\n            href=\"/viaggi\"\n            className=\"inline-flex items-center space-x-2 text-primary hover:underline\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            <span>Torna ai viaggi</span>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const tabs = [\n    { id: 'overview', name: 'Panoramica', icon: MapPin },\n    { id: 'attractions', name: 'Attrazioni', icon: Camera },\n    { id: 'practical', name: 'Info Pratiche', icon: Clock },\n    { id: 'experiences', name: 'Esperienze', icon: Star }\n  ];\n\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'overview':\n        return (\n          <div className=\"space-y-8\">\n            {/* City Facts */}\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div className=\"bg-card border border-border rounded-lg p-4\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Users className=\"w-5 h-5 text-primary\" />\n                  <span className=\"font-medium\">Popolazione</span>\n                </div>\n                <p className=\"text-2xl font-bold\">{city.population.toLocaleString()}</p>\n              </div>\n              <div className=\"bg-card border border-border rounded-lg p-4\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <MapPin className=\"w-5 h-5 text-primary\" />\n                  <span className=\"font-medium\">Regione</span>\n                </div>\n                <p className=\"text-lg font-semibold\">{city.region}</p>\n              </div>\n              <div className=\"bg-card border border-border rounded-lg p-4\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Calendar className=\"w-5 h-5 text-primary\" />\n                  <span className=\"font-medium\">Clima</span>\n                </div>\n                <p className=\"text-lg font-semibold\">{city.climate.type}</p>\n              </div>\n              <div className=\"bg-card border border-border rounded-lg p-4\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Clock className=\"w-5 h-5 text-primary\" />\n                  <span className=\"font-medium\">Miglior periodo</span>\n                </div>\n                <p className=\"text-sm\">{city.climate.bestVisitMonths.join(', ')}</p>\n              </div>\n            </div>\n\n            {/* Description */}\n            <div className=\"bg-card border border-border rounded-lg p-6\">\n              <h3 className=\"text-xl font-semibold mb-4\">Storia</h3>\n              <p className=\"text-muted-foreground leading-relaxed\">{city.overview.history}</p>\n            </div>\n\n            {/* Districts */}\n            <div>\n              <h3 className=\"text-xl font-semibold mb-4\">Quartieri</h3>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                {city.districts.map((district, index) => (\n                  <div key={index} className=\"bg-card border border-border rounded-lg p-6\">\n                    <h4 className=\"font-semibold text-lg mb-2\">{district.name}</h4>\n                    <p className=\"text-muted-foreground mb-4\">{district.description}</p>\n                    <div className=\"space-y-2\">\n                      <h5 className=\"font-medium\">Caratteristiche:</h5>\n                      <ul className=\"list-disc list-inside text-sm text-muted-foreground space-y-1\">\n                        {district.characteristics.map((char, i) => (\n                          <li key={i}>{char}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'attractions':\n        return (\n          <div className=\"grid md:grid-cols-2 gap-6\">\n            {city.attractions.map((attraction, index) => (\n              <div key={index} className=\"bg-card border border-border rounded-lg overflow-hidden\">\n                {attraction.images && attraction.images.length > 0 && (\n                  <div className=\"h-48 bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center\">\n                    <Camera className=\"w-12 h-12 text-primary/50\" />\n                  </div>\n                )}\n                <div className=\"p-6\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <h4 className=\"font-semibold text-lg\">{attraction.name}</h4>\n                    {attraction.unescoBySite && (\n                      <span className=\"bg-primary/10 text-primary px-2 py-1 rounded-full text-xs font-medium\">\n                        UNESCO\n                      </span>\n                    )}\n                  </div>\n                  <p className=\"text-muted-foreground mb-4\">{attraction.description}</p>\n                  \n                  <div className=\"flex items-center space-x-4 mb-4\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-500 fill-current\" />\n                      <span className=\"font-medium\">{attraction.rating}</span>\n                      <span className=\"text-muted-foreground text-sm\">({attraction.reviews})</span>\n                    </div>\n                    {attraction.entryFee && (\n                      <div className=\"text-sm text-muted-foreground\">\n                        ‚Ç¨{attraction.entryFee.adult} adulti\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"text-sm text-muted-foreground space-y-1\">\n                    <div className=\"flex items-center space-x-2\">\n                      <MapPin className=\"w-4 h-4\" />\n                      <span>{attraction.address}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Clock className=\"w-4 h-4\" />\n                      <span>{attraction.openingHours}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        );\n\n      case 'practical':\n        return (\n          <div className=\"space-y-8\">\n            {/* Transportation */}\n            <div className=\"bg-card border border-border rounded-lg p-6\">\n              <h3 className=\"text-xl font-semibold mb-4 flex items-center\">\n                <Car className=\"w-6 h-6 mr-2 text-primary\" />\n                Trasporti\n              </h3>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                {city.transportation.airport && (\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Aeroporto</h4>\n                    <p className=\"text-muted-foreground\">\n                      {city.transportation.airport.name} ({city.transportation.airport.code})\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {city.transportation.airport.distance}\n                    </p>\n                  </div>\n                )}\n                {city.transportation.trainStation && (\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Stazione ferroviaria</h4>\n                    <p className=\"text-muted-foreground\">{city.transportation.trainStation.name}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Connessioni: {city.transportation.trainStation.connections.join(', ')}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Emergency Info */}\n            <div className=\"bg-card border border-border rounded-lg p-6\">\n              <h3 className=\"text-xl font-semibold mb-4\">Emergenze</h3>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <p><strong>Polizia:</strong> {city.practicalInfo.emergencyNumbers.police}</p>\n                </div>\n                <div>\n                  <p><strong>Emergenze mediche:</strong> {city.practicalInfo.emergencyNumbers.medical}</p>\n                </div>\n                <div>\n                  <p><strong>Vigili del fuoco:</strong> {city.practicalInfo.emergencyNumbers.fire}</p>\n                </div>\n                <div>\n                  <p><strong>Informazioni turistiche:</strong> {city.practicalInfo.emergencyNumbers.tourist}</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Tips */}\n            <div className=\"bg-card border border-border rounded-lg p-6\">\n              <h3 className=\"text-xl font-semibold mb-4\">Consigli Utili</h3>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div>\n                  <h4 className=\"font-medium mb-3\">Culturali</h4>\n                  <ul className=\"list-disc list-inside text-sm text-muted-foreground space-y-1\">\n                    {city.practicalInfo.tips.cultural.map((tip, i) => (\n                      <li key={i}>{tip}</li>\n                    ))}\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-3\">Sicurezza</h4>\n                  <ul className=\"list-disc list-inside text-sm text-muted-foreground space-y-1\">\n                    {city.practicalInfo.tips.safety.map((tip, i) => (\n                      <li key={i}>{tip}</li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'experiences':\n        return (\n          <div className=\"grid md:grid-cols-2 gap-6\">\n            {city.experiences.map((experience, index) => (\n              <div key={index} className=\"bg-card border border-border rounded-lg p-6\">\n                <h4 className=\"font-semibold text-lg mb-2\">{experience.name}</h4>\n                <p className=\"text-muted-foreground mb-4\">{experience.description}</p>\n                \n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center space-x-4\">\n                    <span className=\"text-sm text-muted-foreground\">{experience.duration}</span>\n                    <div className=\"flex\">\n                      {[...Array(5)].map((_, i) => (\n                        <Star\n                          key={i}\n                          className={`w-4 h-4 ${\n                            i < experience.difficulty\n                              ? 'text-yellow-500 fill-current'\n                              : 'text-gray-300'\n                          }`}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"font-semibold\">\n                      ‚Ç¨{experience.priceRange.min} - ‚Ç¨{experience.priceRange.max}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"text-sm text-muted-foreground\">\n                  <p><strong>Tipo:</strong> {experience.type}</p>\n                  <p><strong>Miglior periodo:</strong> {experience.bestTime.join(', ')}</p>\n                  {experience.bookingRequired && (\n                    <p className=\"text-primary font-medium mt-2\">Prenotazione richiesta</p>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative h-96 bg-gradient-to-br from-primary/20 to-secondary/20\">\n        <div className=\"absolute inset-0 bg-black/20\"></div>\n        <div className=\"relative container mx-auto px-4 h-full flex items-center\">\n          <div className=\"text-white max-w-2xl\">\n            <div className=\"mb-4\">\n              <Link\n                href=\"/viaggi\"\n                className=\"inline-flex items-center space-x-2 text-white/80 hover:text-white transition-colors\"\n              >\n                <ArrowLeft className=\"w-4 h-4\" />\n                <span>Torna ai viaggi</span>\n              </Link>\n            </div>\n            <h1 className=\"text-4xl lg:text-6xl font-bold mb-4\">\n              {city.name}\n            </h1>\n            <p className=\"text-xl mb-2\">{city.nameArabic}</p>\n            <p className=\"text-lg opacity-90 leading-relaxed\">\n              {city.overview.description}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10\">\n        <div className=\"container mx-auto px-4\">\n          <nav className=\"flex space-x-8\">\n            {tabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center space-x-2 py-4 px-2 border-b-2 transition-colors ${\n                  activeTab === tab.id\n                    ? 'border-primary text-primary'\n                    : 'border-transparent text-muted-foreground hover:text-foreground'\n                }`}\n              >\n                <tab.icon className=\"w-5 h-5\" />\n                <span className=\"font-medium\">{tab.name}</span>\n              </button>\n            ))}\n          </nav>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"container mx-auto px-4 py-8\">\n        {renderTabContent()}\n        \n        {/* Mapbox Container */}\n        {activeTab === 'overview' && (\n          <div className=\"mt-8\">\n            <h3 className=\"text-xl font-semibold mb-4\">Posizione</h3>\n            <div id=\"city-map\" className=\"w-full h-96 rounded-xl border border-border\"></div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":17230},"components/forms/BookingForm.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { Calendar, Users, Baby, MapPin, CreditCard, Check, AlertCircle, Loader2, Download } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { firestoreService, COLLECTIONS, Booking } from '@/lib/firestore';\nimport ConfirmationDialog from '@/components/modals/ConfirmationDialog';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\n\ninterface BookingFormData {\n  name: string;\n  email: string;\n  phone: string;\n  travelers: number;\n  children: number;\n  childrenAges: string;\n  departureDate: string;\n  returnDate: string;\n  departureCity: string;\n  customRequests: string;\n}\n\ninterface BookingFormProps {\n  itemId: string;\n  itemType: 'travel' | 'experience';\n  itemTitle: string;\n  basePrice: number;\n  duration: string;\n  className?: string;\n  onSuccess?: () => void;\n}\n\nexport default function BookingForm({ \n  itemId, \n  itemType, \n  itemTitle, \n  basePrice, \n  duration,\n  className = '',\n  onSuccess \n}: BookingFormProps) {\n  const { user } = useAuth();\n  const router = useRouter();\n  const [formData, setFormData] = useState<BookingFormData>({\n    name: user?.displayName || '',\n    email: user?.email || '',\n    phone: '',\n    travelers: 2,\n    children: 0,\n    childrenAges: '',\n    departureDate: '',\n    returnDate: '',\n    departureCity: '',\n    customRequests: ''\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n  const [error, setError] = useState('');\n  const [dynamicPrice, setDynamicPrice] = useState(basePrice);\n  const [daysDuration, setDaysDuration] = useState(0);\n  const [fieldErrors, setFieldErrors] = useState<Record<string, string>>({});\n\n  useEffect(() => {\n    if (formData.departureDate && formData.returnDate) {\n      const start = new Date(formData.departureDate);\n      const end = new Date(formData.returnDate);\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      \n      if (diffDays > 0) {\n        setDaysDuration(diffDays);\n        setDynamicPrice(basePrice * diffDays);\n      } else {\n        setDaysDuration(0);\n        setDynamicPrice(basePrice);\n      }\n    } else {\n      setDaysDuration(0);\n      setDynamicPrice(basePrice);\n    }\n  }, [formData.departureDate, formData.returnDate, basePrice]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    if (fieldErrors[name]) {\n      setFieldErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const errors: Record<string, string> = {};\n\n    if (!formData.name.trim()) {\n      errors.name = 'Inserisci il tuo nome completo';\n    }\n\n    if (!formData.email.trim()) {\n      errors.email = 'Inserisci la tua email';\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      errors.email = 'Inserisci un indirizzo email valido';\n    }\n\n    if (!formData.departureDate) {\n      errors.departureDate = 'Seleziona una data di partenza';\n    }\n\n    setFieldErrors(errors);\n    \n    if (Object.keys(errors).length > 0) {\n      const firstErrorField = Object.keys(errors)[0];\n      const errorElement = document.getElementsByName(firstErrorField)[0];\n      if (errorElement) {\n        errorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        errorElement.focus();\n      }\n      return false;\n    }\n\n    return true;\n  };\n\n  const calculateTotalPrice = () => {\n    const adultPrice = dynamicPrice * formData.travelers;\n    const childPrice = dynamicPrice * 0.7 * formData.children;\n    return Math.round(adultPrice + childPrice);\n  };\n\n  const generateBookingPDF = () => {\n    const pdf = new jsPDF();\n    let yPosition = 20;\n\n    // Header with Morocco Dreams branding\n    pdf.setFillColor(234, 88, 12); // Orange background\n    pdf.rect(0, 0, 210, 30, 'F');\n    \n    pdf.setFontSize(24);\n    pdf.setTextColor(255, 255, 255);\n    pdf.text('Morocco Dreams', 20, yPosition);\n    yPosition += 10;\n    \n    pdf.setFontSize(14);\n    pdf.text('Conferma Prenotazione', 20, yPosition);\n    yPosition += 20;\n\n    // Booking details\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text('Dettagli Prenotazione', 20, yPosition);\n    yPosition += 10;\n\n    const bookingData = [\n      ['Esperienza', itemTitle],\n      ['Nome', formData.name],\n      ['Email', formData.email],\n      ['Telefono', formData.phone || 'Non specificato'],\n      ['Viaggiatori', `${formData.travelers} adulti`],\n      ['Bambini', formData.children > 0 ? `${formData.children} bambini` : 'Nessuno'],\n      ['Data partenza', formData.departureDate],\n      ['Data ritorno', formData.returnDate || 'Non specificata'],\n      ['Citt√† partenza', formData.departureCity || 'Non specificata'],\n      ['Durata', duration],\n      ['Prezzo totale', `‚Ç¨${calculateTotalPrice()}`],\n      ['Stato', 'In attesa di conferma']\n    ];\n\n    (pdf as any).autoTable({\n      startY: yPosition,\n      head: [['Campo', 'Valore']],\n      body: bookingData,\n      theme: 'grid',\n      styles: { fontSize: 10 },\n      headStyles: { fillColor: [234, 88, 12] }\n    });\n\n    yPosition = (pdf as any).lastAutoTable.finalY + 15;\n\n    if (formData.customRequests) {\n      pdf.setFontSize(14);\n      pdf.text('Richieste Speciali:', 20, yPosition);\n      yPosition += 8;\n      pdf.setFontSize(10);\n      const requestLines = pdf.splitTextToSize(formData.customRequests, 170);\n      pdf.text(requestLines, 20, yPosition);\n      yPosition += requestLines.length * 4 + 10;\n    }\n\n    // Footer\n    pdf.setFontSize(10);\n    pdf.setTextColor(100, 100, 100);\n    pdf.text('Ti contatteremo entro 24 ore per confermare la prenotazione.', 20, yPosition + 10);\n    pdf.text('WhatsApp: +39 329 233 3370 | Email: info@moroccodreams.com', 20, yPosition + 20);\n\n    pdf.save(`MoroccoDreams_Prenotazione_${formData.name.replace(/\\s+/g, '_')}.pdf`);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (!validateForm()) {\n      setError(`Compila tutti i campi obbligatori (${Object.keys(fieldErrors).length} campi mancanti)`);\n      return;\n    }\n\n    if (!user) {\n      setError('Devi essere loggato per effettuare una prenotazione');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n\n      // Create booking object\n      const booking: Omit<Booking, 'id' | 'createdAt' | 'updatedAt'> = {\n        userId: user.uid,\n        ...(itemType === 'travel' ? { travelId: itemId } : { experienceId: itemId }),\n        status: 'pending',\n        personalDetails: {\n          name: formData.name,\n          email: formData.email,\n          phone: formData.phone,\n          travelers: formData.travelers,\n          children: formData.children > 0 ? formData.children : undefined,\n          childrenAges: formData.children > 0 ? formData.childrenAges : undefined,\n          departureDate: formData.departureDate,\n          returnDate: formData.returnDate || undefined,\n          departureCity: formData.departureCity || undefined,\n        },\n        customRequests: formData.customRequests || undefined,\n        totalPrice: calculateTotalPrice(),\n      };\n\n      // Save to Firestore\n      const bookingId = await firestoreService.create<Booking>(COLLECTIONS.bookings, booking);\n\n      // Create inquiry for follow-up\n      await firestoreService.create(COLLECTIONS.inquiries, {\n        name: formData.name,\n        email: formData.email,\n        phone: formData.phone,\n        message: `Nuova prenotazione per ${itemTitle}. ID prenotazione: ${bookingId}. Richieste speciali: ${formData.customRequests || 'Nessuna'}`,\n        type: 'booking',\n        status: 'new'\n      });\n\n      setSuccess(true);\n      setShowConfirmation(true);\n      if (onSuccess) onSuccess();\n\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore. Riprova pi√π tardi.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCloseConfirmation = () => {\n    setShowConfirmation(false);\n  };\n\n  const handleGoToDashboard = () => {\n    setShowConfirmation(false);\n    router.push('/dashboard?tab=bookings');\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className={`space-y-6 ${className}`}>\n      {error && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3\"\n        >\n          <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0\" />\n          <p className=\"text-red-700 dark:text-red-300 text-sm\">{error}</p>\n        </motion.div>\n      )}\n\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-lg p-4\">\n        <h3 className=\"text-lg font-semibold text-foreground mb-2\">Prenota: {itemTitle}</h3>\n        <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n          <span>Durata: {duration}</span>\n          <span className=\"font-semibold text-orange-600\">Da ‚Ç¨{basePrice} per persona</span>\n        </div>\n      </div>\n\n      {/* Personal Details */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            Nome Completo *\n          </label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={formData.name}\n            onChange={handleChange}\n            required\n            className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:border-transparent bg-background text-foreground transition-colors ${\n              fieldErrors.name \n                ? 'border-red-500 focus:ring-red-500' \n                : 'border-border focus:ring-orange-500'\n            }`}\n            placeholder=\"Il tuo nome completo\"\n          />\n          {fieldErrors.name && (\n            <p className=\"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1\">\n              <AlertCircle className=\"w-4 h-4\" />\n              {fieldErrors.name}\n            </p>\n          )}\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            Email *\n          </label>\n          <input\n            type=\"email\"\n            name=\"email\"\n            value={formData.email}\n            onChange={handleChange}\n            required\n            className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:border-transparent bg-background text-foreground transition-colors ${\n              fieldErrors.email \n                ? 'border-red-500 focus:ring-red-500' \n                : 'border-border focus:ring-orange-500'\n            }`}\n            placeholder=\"la-tua-email@esempio.com\"\n          />\n          {fieldErrors.email && (\n            <p className=\"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1\">\n              <AlertCircle className=\"w-4 h-4\" />\n              {fieldErrors.email}\n            </p>\n          )}\n        </div>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\n          Telefono\n        </label>\n        <input\n          type=\"tel\"\n          name=\"phone\"\n          value={formData.phone}\n          onChange={handleChange}\n          className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n          placeholder=\"+39 329 233 3370\"\n        />\n      </div>\n\n      {/* Group Details */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            <Users className=\"w-4 h-4 inline mr-1\" />\n            Adulti *\n          </label>\n          <select\n            name=\"travelers\"\n            value={formData.travelers}\n            onChange={handleChange}\n            required\n            className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n          >\n            {[1,2,3,4,5,6,7,8,9,10].map(num => (\n              <option key={num} value={num}>{num} {num === 1 ? 'persona' : 'persone'}</option>\n            ))}\n          </select>\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            <Baby className=\"w-4 h-4 inline mr-1\" />\n            Bambini (0-12 anni)\n          </label>\n          <select\n            name=\"children\"\n            value={formData.children}\n            onChange={handleChange}\n            className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n          >\n            {[0,1,2,3,4,5].map(num => (\n              <option key={num} value={num}>{num}</option>\n            ))}\n          </select>\n        </div>\n        {formData.children > 0 && (\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Et√† bambini\n            </label>\n            <input\n              type=\"text\"\n              name=\"childrenAges\"\n              value={formData.childrenAges}\n              onChange={handleChange}\n              className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n              placeholder=\"es. 8, 12\"\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Dates */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            <Calendar className=\"w-4 h-4 inline mr-1\" />\n            Data Partenza *\n          </label>\n          <input\n            type=\"date\"\n            name=\"departureDate\"\n            value={formData.departureDate}\n            onChange={handleChange}\n            required\n            min={new Date().toISOString().split('T')[0]}\n            className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:border-transparent bg-background text-foreground transition-colors ${\n              fieldErrors.departureDate \n                ? 'border-red-500 focus:ring-red-500' \n                : 'border-border focus:ring-orange-500'\n            }`}\n          />\n          {fieldErrors.departureDate && (\n            <p className=\"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1\">\n              <AlertCircle className=\"w-4 h-4\" />\n              {fieldErrors.departureDate}\n            </p>\n          )}\n        </div>\n        {itemType === 'travel' && (\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Data Ritorno\n            </label>\n            <input\n              type=\"date\"\n              name=\"returnDate\"\n              value={formData.returnDate}\n              onChange={handleChange}\n              min={formData.departureDate || new Date().toISOString().split('T')[0]}\n              className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n            />\n          </div>\n        )}\n      </div>\n\n      {daysDuration > 0 && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl p-4 flex items-center justify-between shadow-lg\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <Calendar className=\"w-6 h-6\" />\n            <div>\n              <p className=\"text-sm font-medium\">Prezzo calcolato per la durata</p>\n              <p className=\"text-xs opacity-90\">{daysDuration} {daysDuration === 1 ? 'giorno' : 'giorni'}</p>\n            </div>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-2xl font-bold\">‚Ç¨{dynamicPrice}</p>\n            <p className=\"text-xs opacity-90\">per persona</p>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Departure City */}\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\n          <MapPin className=\"w-4 h-4 inline mr-1\" />\n          Citt√† di Partenza\n        </label>\n        <select\n          name=\"departureCity\"\n          value={formData.departureCity}\n          onChange={handleChange}\n          className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n        >\n          <option value=\"\">Seleziona...</option>\n          <option value=\"marrakech\">Marrakech</option>\n          <option value=\"casablanca\">Casablanca</option>\n          <option value=\"fes\">Fes</option>\n          <option value=\"rabat\">Rabat</option>\n          <option value=\"agadir\">Agadir</option>\n          <option value=\"aeroporto\">Dall'aeroporto</option>\n          <option value=\"hotel\">Dal mio hotel</option>\n          <option value=\"altro\">Altro (specificare nelle richieste)</option>\n        </select>\n      </div>\n\n      {/* Custom Requests */}\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\n          Richieste Speciali\n        </label>\n        <textarea\n          name=\"customRequests\"\n          value={formData.customRequests}\n          onChange={handleChange}\n          rows={3}\n          className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors resize-vertical\"\n          placeholder=\"Diete speciali, esigenze particolari, richieste speciali...\"\n        />\n      </div>\n\n      {/* Price Summary */}\n      <div className=\"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-lg p-4\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Prezzo totale stimato</p>\n            <p className=\"text-xs text-muted-foreground\">\n              {formData.travelers} {formData.travelers === 1 ? 'adulto' : 'adulti'} \n              {formData.children > 0 && ` + ${formData.children} ${formData.children === 1 ? 'bambino' : 'bambini'} (sconto 30%)`}\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-2xl font-bold text-orange-600\">‚Ç¨{calculateTotalPrice()}</p>\n            <p className=\"text-xs text-muted-foreground\">Prezzo finale da confermare</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Submit Button */}\n      <button\n        type=\"submit\"\n        disabled={loading}\n        className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-4 px-6 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {loading ? (\n          <>\n            <Loader2 className=\"w-5 h-5 animate-spin\" />\n            Invio in corso...\n          </>\n        ) : (\n          <>\n            <CreditCard className=\"w-5 h-5\" />\n            Richiedi Prenotazione\n          </>\n        )}\n      </button>\n\n      <p className=\"text-xs text-muted-foreground text-center\">\n        Cliccando su \"Richiedi Prenotazione\" invii una richiesta di prenotazione. \n        Ti contatteremo per confermare la disponibilit√† e finalizzare la prenotazione con il pagamento.\n      </p>\n\n      <ConfirmationDialog\n        isOpen={showConfirmation}\n        onClose={handleCloseConfirmation}\n        itemTitle={itemTitle}\n        startDate={formData.departureDate ? new Date(formData.departureDate) : undefined}\n        endDate={formData.returnDate ? new Date(formData.returnDate) : undefined}\n        participants={formData.travelers + formData.children}\n        totalPrice={calculateTotalPrice()}\n        onGoToDashboard={handleGoToDashboard}\n      />\n    </form>\n  );\n}","size_bytes":20630},"app/servizi/trasferimenti/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\n\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Car, Clock, Users, Shield, MapPin, Phone, Star, CheckCircle, ArrowRight } from \"lucide-react\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nconst transferTypes = [\n  {\n    id: \"economy\",\n    name: \"Economy\",\n    description: \"Trasferimenti convenienti e affidabili\",\n    vehicles: [\"Dacia Logan\", \"Renault Symbol\", \"Hyundai i10\"],\n    capacity: \"1-3 persone\",\n    luggage: \"2 valigie medie\",\n    price: 25,\n    features: [\"Aria condizionata\", \"Autista professionale\", \"Meet & Greet\"],\n    image: \"/images/services/economy-transfer.png\",\n  },\n  {\n    id: \"comfort\",\n    name: \"Comfort\",\n    description: \"Il giusto equilibrio tra comfort e prezzo\",\n    vehicles: [\"Toyota Corolla\", \"Volkswagen Jetta\", \"Nissan Sentra\"],\n    capacity: \"1-4 persone\",\n    luggage: \"3 valigie grandi\",\n    price: 45,\n    features: [\"Aria condizionata\", \"Sedili in pelle\", \"WiFi gratuito\", \"Acqua in omaggio\"],\n    image: \"/images/services/comfort-transfer.png\",\n  },\n  {\n    id: \"premium\",\n    name: \"Premium\",\n    description: \"Lusso e comfort per viaggi indimenticabili\",\n    vehicles: [\"BMW Serie 3\", \"Mercedes Classe C\", \"Audi A4\"],\n    capacity: \"1-4 persone\",\n    luggage: \"4 valigie grandi\",\n    price: 85,\n    features: [\"Interni in pelle\", \"WiFi premium\", \"Snack e bevande\", \"Giornali internazionali\"],\n    image: \"/images/services/premium-transfer.png\",\n  },\n  {\n    id: \"van\",\n    name: \"Van/Minibus\",\n    description: \"Perfetto per gruppi e famiglie numerose\",\n    vehicles: [\"Mercedes Vito\", \"Volkswagen Crafter\", \"Ford Transit\"],\n    capacity: \"5-8 persone\",\n    luggage: \"8+ valigie\",\n    price: 120,\n    features: [\"Spazio extra\", \"Aria condizionata\", \"Porte scorrevoli\", \"Bagagliaio ampio\"],\n    image: \"/images/services/van-transfer.png\",\n  },\n]\n\nconst routes = [\n  { from: \"Aeroporto Casablanca\", to: \"Centro Casablanca\", duration: \"45 min\", price: 25 },\n  { from: \"Aeroporto Marrakech\", to: \"Medina Marrakech\", duration: \"30 min\", price: 20 },\n  { from: \"Aeroporto Fes\", to: \"Centro Fes\", duration: \"25 min\", price: 18 },\n  { from: \"Marrakech\", to: \"Essaouira\", duration: \"2h 30min\", price: 120 },\n  { from: \"Casablanca\", to: \"Rabat\", duration: \"1h 15min\", price: 65 },\n  { from: \"Fes\", to: \"Chefchaouen\", duration: \"4h\", price: 180 },\n]\n\nconst testimonials = [\n  {\n    name: \"Marco Rossi\",\n    location: \"Milano, Italia\",\n    rating: 5,\n    comment: \"Servizio impeccabile! Autista puntuale e molto professionale. Auto pulita e confortevole.\",\n    date: \"15 Gennaio 2024\",\n  },\n  {\n    name: \"Sarah Johnson\",\n    location: \"London, UK\",\n    rating: 5,\n    comment: \"Excellent service from airport to hotel. Driver was waiting with name sign and helped with luggage.\",\n    date: \"8 Gennaio 2024\",\n  },\n  {\n    name: \"Pierre Dubois\",\n    location: \"Paris, France\",\n    rating: 5,\n    comment: \"Transfer parfait! V√©hicule moderne et chauffeur tr√®s sympa. Je recommande vivement.\",\n    date: \"22 Dicembre 2023\",\n  },\n]\n\nexport default function TrasferimentiPage() {\n  const [selectedTransfer, setSelectedTransfer] = useState(transferTypes[0])\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <section className=\"relative py-20 overflow-hidden\n  bg-gradient-to-r from-orange-100 via-amber-100 to-yellow-50\n  dark:bg-gradient-to-r dark:from-orange-950 dark:via-amber-900 dark:to-yellow-900\">\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"p-4 bg-orange-100 dark:bg-orange-900/30 rounded-full\">\n                <Car className=\"h-12 w-12 text-orange-600 dark:text-orange-400\" />\n              </div>\n            </div>\n            <h1 className=\"text-4xl md:text-6xl font-bold text-foreground mb-6\">\n              Trasferimenti <span className=\"text-orange-600 dark:text-orange-400\">Premium</span>\n            </h1>\n            <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto mb-8\">\n              Viaggia in comfort e sicurezza con i nostri servizi di trasferimento professionale. Dall'aeroporto al tuo\n              hotel, ovunque tu voglia andare in Marocco.\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                <span>Disponibile 24/7</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                <span>Meet & Greet incluso</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                <span>Cancellazione gratuita</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-20 bg-muted/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Scegli il Tuo Trasferimento</h2>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              Offriamo diverse categorie di veicoli per soddisfare ogni esigenza e budget\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12\">\n            {transferTypes.map((transfer) => (\n              <Card\n                key={transfer.id}\n                className={`relative cursor-pointer transition-all duration-300 hover:shadow-xl ${\n                  selectedTransfer.id === transfer.id ? \"ring-2 ring-orange-500 shadow-lg\" : \"hover:shadow-lg\"\n                }`}\n                onClick={() => setSelectedTransfer(transfer)}\n              >\n                {/* Wishlist Button */}\n                <div className=\"absolute top-2 right-2 z-10\" onClick={(e) => e.stopPropagation()}>\n                  <WishlistButton\n                    itemId={`transfer-${transfer.id}`}\n                    itemType=\"service\"\n                    itemTitle={`Trasferimento ${transfer.name}`}\n                    itemImage={transfer.image}\n                    itemPrice={transfer.price}\n                    itemDescription={transfer.description}\n                  />\n                </div>\n                \n                <CardHeader className=\"text-center\">\n                  <div className=\"w-16 h-16 mx-auto mb-4 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center\">\n                    <Car className=\"h-8 w-8 text-orange-600 dark:text-orange-400\" />\n                  </div>\n                  <CardTitle className=\"text-xl text-card-foreground\">{transfer.name}</CardTitle>\n                  <CardDescription className=\"text-muted-foreground\">{transfer.description}</CardDescription>\n                </CardHeader>\n                <CardContent className=\"text-center\">\n                  <div className=\"text-3xl font-bold text-orange-600 dark:text-orange-400 mb-2\">‚Ç¨{transfer.price}</div>\n                  <p className=\"text-sm text-muted-foreground mb-4\">da aeroporto a citt√†</p>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <Users className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">{transfer.capacity}</span>\n                    </div>\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <Shield className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">{transfer.luggage}</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          <Card className=\"mb-12\">\n            <CardHeader>\n              <CardTitle className=\"text-2xl flex items-center gap-3 text-card-foreground\">\n                <Car className=\"h-6 w-6 text-orange-600\" />\n                {selectedTransfer.name} - Dettagli\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-2 gap-8\">\n                <div>\n                  <h4 className=\"font-semibold mb-4 text-card-foreground\">Veicoli Disponibili:</h4>\n                  <ul className=\"space-y-2 mb-6\">\n                    {selectedTransfer.vehicles.map((vehicle, index) => (\n                      <li key={index} className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span className=\"text-muted-foreground\">{vehicle}</span>\n                      </li>\n                    ))}\n                  </ul>\n\n                  <h4 className=\"font-semibold mb-4 text-card-foreground\">Servizi Inclusi:</h4>\n                  <ul className=\"space-y-2\">\n                    {selectedTransfer.features.map((feature, index) => (\n                      <li key={index} className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span className=\"text-muted-foreground\">{feature}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                <div className=\"space-y-6\">\n                  <div className=\"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-lg\">\n                    <h4 className=\"font-semibold mb-4 text-card-foreground\">Informazioni Importanti:</h4>\n                    <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                      <li>‚Ä¢ Prenotazione confermata entro 2 ore</li>\n                      <li>‚Ä¢ Autista ti aspetta con cartello nominativo</li>\n                      <li>‚Ä¢ Assistenza bagagli inclusa</li>\n                      <li>‚Ä¢ Monitoraggio voli in tempo reale</li>\n                      <li>‚Ä¢ Cancellazione gratuita fino a 24h prima</li>\n                    </ul>\n                  </div>\n\n                  <Link href=\"/contatti\">\n                    <Button className=\"w-full bg-orange-600 hover:bg-orange-700\">\n                      Prenota {selectedTransfer.name} - ‚Ç¨{selectedTransfer.price}\n                      <ArrowRight className=\"ml-2 h-4 w-4\" />\n                    </Button>\n                  </Link>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      <section className=\"py-20 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Rotte Popolari</h2>\n            <p className=\"text-lg text-muted-foreground\">Le destinazioni pi√π richieste dai nostri clienti</p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {routes.map((route, index) => (\n              <Card key={index} className=\"hover:shadow-lg transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <MapPin className=\"h-4 w-4 text-orange-600\" />\n                        <span className=\"font-medium text-card-foreground\">{route.from}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2 text-muted-foreground\">\n                        <ArrowRight className=\"h-4 w-4\" />\n                        <span>{route.to}</span>\n                      </div>\n                    </div>\n                    <Badge\n                      variant=\"secondary\"\n                      className=\"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-orange-500 to-red-500 text-white dark:bg-orange-900/40 dark:text-orange-200 shadow-sm transition-colors\"\n                    >\n                      ‚Ç¨{route.price}\n                    </Badge>\n                  </div>\n\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-4\">\n                    <Clock className=\"h-4 w-4\" />\n                    <span>Durata: {route.duration}</span>\n                  </div>\n\n                  <Link href=\"/contatti\">\n                    <Button\n                      variant=\"outline\"\n                      className=\"w-full bg-transparent border-border text-foreground hover:bg-muted\"\n                    >\n                      Prenota Trasferimento\n                    </Button>\n                  </Link>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-20 bg-muted/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Cosa Dicono i Nostri Clienti</h2>\n            <p className=\"text-lg text-muted-foreground\">Recensioni autentiche dai nostri viaggiatori</p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8\">\n            {testimonials.map((testimonial, index) => (\n              <Card key={index} className=\"hover:shadow-lg transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center gap-1 mb-4\">\n                    {[...Array(testimonial.rating)].map((_, i) => (\n                      <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                    ))}\n                  </div>\n\n                  <p className=\"text-muted-foreground mb-4 italic\">\"{testimonial.comment}\"</p>\n\n                  <div className=\"border-t border-border pt-4\">\n                    <p className=\"font-medium text-card-foreground\">{testimonial.name}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {testimonial.location} ‚Ä¢ {testimonial.date}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-20 bg-gradient-to-r from-orange-600 to-amber-600\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">Prenota il Tuo Trasferimento Ora</h2>\n          <p className=\"text-xl text-orange-100 mb-8\">\n            Servizio disponibile 24/7 ‚Ä¢ Conferma immediata ‚Ä¢ Cancellazione gratuita\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link href=\"/contatti\">\n              <Button size=\"lg\" variant=\"secondary\" className=\"bg-white text-orange-600 hover:bg-orange-50\">\n                <Phone className=\"mr-2 h-5 w-5\" />\n                Chiama Ora: +39 329 233 3370\n              </Button>\n            </Link>\n            <Link href=\"/contatti\">\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-white text-white hover:bg-white hover:text-orange-600 bg-transparent\"\n              >\n                Prenota Online\n                <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </section>\n    </div>\n  )\n}\n","size_bytes":15888},"components/ui/skeleton.tsx":{"content":"import { cn } from '@/lib/utils'\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn('bg-accent animate-pulse rounded-md', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":276},"components/admin/VisualEditor.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { Plus, Edit, Trash2, Eye, Move, Type, Image, Square as ButtonIcon, Layout } from 'lucide-react'\n\ninterface Block {\n  id: string\n  type: 'text' | 'image' | 'button' | 'heading' | 'spacer'\n  content: any\n  styling?: {\n    colors?: { background?: string; text?: string; accent?: string }\n    typography?: { fontSize?: string; fontWeight?: string }\n    spacing?: { padding?: string; margin?: string }\n    layout?: { width?: string; alignment?: string }\n  }\n}\n\ninterface VisualEditorProps {\n  pageId?: string\n  pageType: 'homepage' | 'city' | 'experience' | 'travel' | 'about' | 'contact' | 'custom'\n  onSave: (blocks: Block[]) => void\n}\n\nexport default function VisualEditor({ pageId, pageType, onSave }: VisualEditorProps) {\n  const [blocks, setBlocks] = useState<Block[]>([])\n  const [selectedBlockId, setSelectedBlockId] = useState<string | null>(null)\n  const [isEditing, setIsEditing] = useState(false)\n  const [previewMode, setPreviewMode] = useState(false)\n  \n  // Block templates\n  const blockTemplates = {\n    text: {\n      type: 'text' as const,\n      content: { text: 'Inserisci il tuo testo qui...', tag: 'p' },\n      styling: { typography: { fontSize: '16px', fontWeight: '400' } }\n    },\n    heading: {\n      type: 'heading' as const,\n      content: { text: 'Titolo della sezione', tag: 'h2' },\n      styling: { typography: { fontSize: '32px', fontWeight: '700' } }\n    },\n    image: {\n      type: 'image' as const,\n      content: { src: '/placeholder.jpg', alt: 'Immagine', caption: '' },\n      styling: { layout: { width: '100%', alignment: 'center' } }\n    },\n    button: {\n      type: 'button' as const,\n      content: { text: 'Clicca qui', href: '#', variant: 'primary' },\n      styling: { \n        colors: { background: '#ea580c', text: '#ffffff' },\n        spacing: { padding: '12px 24px' }\n      }\n    },\n    spacer: {\n      type: 'spacer' as const,\n      content: { height: '40px' },\n      styling: { spacing: { margin: '20px 0' } }\n    }\n  }\n\n  // Add new block\n  const addBlock = (type: keyof typeof blockTemplates) => {\n    const newBlock: Block = {\n      id: Date.now().toString(),\n      ...blockTemplates[type]\n    }\n    setBlocks(prev => [...prev, newBlock])\n    setSelectedBlockId(newBlock.id)\n    setIsEditing(true)\n  }\n\n  // Update block content\n  const updateBlock = (blockId: string, updates: Partial<Block>) => {\n    setBlocks(prev => prev.map(block => \n      block.id === blockId ? { ...block, ...updates } : block\n    ))\n  }\n\n  // Delete block\n  const deleteBlock = (blockId: string) => {\n    setBlocks(prev => prev.filter(block => block.id !== blockId))\n    setSelectedBlockId(null)\n  }\n\n  // Move block up/down\n  const moveBlock = (blockId: string, direction: 'up' | 'down') => {\n    setBlocks(prev => {\n      const index = prev.findIndex(block => block.id === blockId)\n      if (index === -1) return prev\n      \n      const newIndex = direction === 'up' ? index - 1 : index + 1\n      if (newIndex < 0 || newIndex >= prev.length) return prev\n      \n      const newBlocks = [...prev]\n      const [block] = newBlocks.splice(index, 1)\n      newBlocks.splice(newIndex, 0, block)\n      return newBlocks\n    })\n  }\n\n  // Render block in editor\n  const renderBlock = (block: Block) => {\n    const isSelected = selectedBlockId === block.id\n    const styling = block.styling || {}\n    \n    const baseStyle = {\n      padding: styling.spacing?.padding || '8px',\n      margin: styling.spacing?.margin || '4px 0',\n      backgroundColor: styling.colors?.background,\n      color: styling.colors?.text,\n      fontSize: styling.typography?.fontSize,\n      fontWeight: styling.typography?.fontWeight,\n      width: styling.layout?.width || 'auto',\n      textAlign: styling.layout?.alignment as any || 'left'\n    }\n\n    let content\n    switch (block.type) {\n      case 'text':\n        content = (\n          <div style={baseStyle}>\n            {React.createElement(\n              block.content.tag || 'p',\n              {},\n              block.content.text\n            )}\n          </div>\n        )\n        break\n      case 'heading':\n        content = (\n          <div style={baseStyle}>\n            {React.createElement(\n              block.content.tag || 'h2',\n              {},\n              block.content.text\n            )}\n          </div>\n        )\n        break\n      case 'image':\n        content = (\n          <div style={baseStyle}>\n            <img \n              src={block.content.src} \n              alt={block.content.alt}\n              style={{ maxWidth: '100%', height: 'auto' }}\n            />\n            {block.content.caption && (\n              <p className=\"text-sm text-gray-600 mt-2\">{block.content.caption}</p>\n            )}\n          </div>\n        )\n        break\n      case 'button':\n        content = (\n          <div style={baseStyle}>\n            <button \n              style={{\n                backgroundColor: styling.colors?.background || '#ea580c',\n                color: styling.colors?.text || '#ffffff',\n                padding: styling.spacing?.padding || '12px 24px',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer'\n              }}\n            >\n              {block.content.text}\n            </button>\n          </div>\n        )\n        break\n      case 'spacer':\n        content = (\n          <div \n            style={{\n              height: block.content.height,\n              ...baseStyle\n            }}\n          />\n        )\n        break\n      default:\n        content = <div>Tipo blocco non supportato</div>\n    }\n\n    return (\n      <div\n        key={block.id}\n        className={`relative group border-2 ${\n          isSelected ? 'border-orange-500' : 'border-transparent hover:border-orange-300'\n        } transition-colors cursor-pointer`}\n        onClick={() => setSelectedBlockId(block.id)}\n      >\n        {content}\n        \n        {/* Block controls */}\n        {isSelected && !previewMode && (\n          <div className=\"absolute top-0 right-0 -mt-2 -mr-2 flex gap-1\">\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                moveBlock(block.id, 'up')\n              }}\n              className=\"p-1 bg-orange-500 text-white rounded text-xs hover:bg-orange-600\"\n              title=\"Sposta su\"\n            >\n              ‚Üë\n            </button>\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                moveBlock(block.id, 'down')\n              }}\n              className=\"p-1 bg-orange-500 text-white rounded text-xs hover:bg-orange-600\"\n              title=\"Sposta gi√π\"\n            >\n              ‚Üì\n            </button>\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                setIsEditing(true)\n              }}\n              className=\"p-1 bg-green-500 text-white rounded text-xs hover:bg-green-600\"\n              title=\"Modifica\"\n            >\n              <Edit className=\"w-3 h-3\" />\n            </button>\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                deleteBlock(block.id)\n              }}\n              className=\"p-1 bg-red-500 text-white rounded text-xs hover:bg-red-600\"\n              title=\"Elimina\"\n            >\n              <Trash2 className=\"w-3 h-3\" />\n            </button>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  // Render block properties editor\n  const renderBlockEditor = () => {\n    const selectedBlock = blocks.find(b => b.id === selectedBlockId)\n    if (!selectedBlock) return null\n\n    return (\n      <div className=\"bg-white border rounded-lg p-4 mt-4\">\n        <h3 className=\"font-semibold mb-3\">Modifica Blocco: {selectedBlock.type}</h3>\n        \n        {/* Content editing based on block type */}\n        {selectedBlock.type === 'text' && (\n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Testo</label>\n              <textarea\n                value={selectedBlock.content.text}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  content: { ...selectedBlock.content, text: e.target.value }\n                })}\n                className=\"w-full p-2 border rounded\"\n                rows={3}\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Tag HTML</label>\n              <select\n                value={selectedBlock.content.tag}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  content: { ...selectedBlock.content, tag: e.target.value }\n                })}\n                className=\"p-2 border rounded\"\n              >\n                <option value=\"p\">Paragrafo (p)</option>\n                <option value=\"span\">Span</option>\n                <option value=\"div\">Div</option>\n              </select>\n            </div>\n          </div>\n        )}\n        \n        {selectedBlock.type === 'heading' && (\n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Titolo</label>\n              <input\n                type=\"text\"\n                value={selectedBlock.content.text}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  content: { ...selectedBlock.content, text: e.target.value }\n                })}\n                className=\"w-full p-2 border rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Livello</label>\n              <select\n                value={selectedBlock.content.tag}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  content: { ...selectedBlock.content, tag: e.target.value }\n                })}\n                className=\"p-2 border rounded\"\n              >\n                <option value=\"h1\">H1</option>\n                <option value=\"h2\">H2</option>\n                <option value=\"h3\">H3</option>\n                <option value=\"h4\">H4</option>\n              </select>\n            </div>\n          </div>\n        )}\n        \n        {selectedBlock.type === 'button' && (\n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Testo Pulsante</label>\n              <input\n                type=\"text\"\n                value={selectedBlock.content.text}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  content: { ...selectedBlock.content, text: e.target.value }\n                })}\n                className=\"w-full p-2 border rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Link</label>\n              <input\n                type=\"text\"\n                value={selectedBlock.content.href}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  content: { ...selectedBlock.content, href: e.target.value }\n                })}\n                className=\"w-full p-2 border rounded\"\n                placeholder=\"https://...\"\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Universal styling options */}\n        <div className=\"mt-4 pt-4 border-t\">\n          <h4 className=\"font-medium mb-3\">Stile</h4>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Colore Testo</label>\n              <input\n                type=\"color\"\n                value={selectedBlock.styling?.colors?.text || '#000000'}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  styling: {\n                    ...selectedBlock.styling,\n                    colors: {\n                      ...selectedBlock.styling?.colors,\n                      text: e.target.value\n                    }\n                  }\n                })}\n                className=\"w-full h-10 border rounded\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Colore Sfondo</label>\n              <input\n                type=\"color\"\n                value={selectedBlock.styling?.colors?.background || '#ffffff'}\n                onChange={(e) => updateBlock(selectedBlock.id, {\n                  styling: {\n                    ...selectedBlock.styling,\n                    colors: {\n                      ...selectedBlock.styling?.colors,\n                      background: e.target.value\n                    }\n                  }\n                })}\n                className=\"w-full h-10 border rounded\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-4 flex gap-2\">\n          <button\n            onClick={() => setIsEditing(false)}\n            className=\"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600\"\n          >\n            Fine\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"h-full flex\">\n      {/* Toolbar */}\n      <div className=\"w-64 bg-gray-50 p-4 border-r\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center gap-2 mb-4\">\n            <Layout className=\"w-5 h-5\" />\n            <h2 className=\"font-semibold\">Visual Editor</h2>\n          </div>\n          \n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setPreviewMode(!previewMode)}\n              className={`flex-1 px-3 py-2 rounded text-sm ${\n                previewMode ? 'bg-green-500 text-white' : 'bg-gray-200'\n              }`}\n            >\n              <Eye className=\"w-4 h-4 inline mr-1\" />\n              {previewMode ? 'Modifica' : 'Anteprima'}\n            </button>\n            <button\n              onClick={() => onSave(blocks)}\n              className=\"px-3 py-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600\"\n            >\n              Salva\n            </button>\n          </div>\n\n          {!previewMode && (\n            <div>\n              <h3 className=\"font-medium mb-2\">Aggiungi Blocco</h3>\n              <div className=\"space-y-2\">\n                {Object.entries(blockTemplates).map(([type, template]) => (\n                  <button\n                    key={type}\n                    onClick={() => addBlock(type as keyof typeof blockTemplates)}\n                    className=\"w-full p-2 text-left bg-white border rounded hover:bg-gray-50 flex items-center gap-2\"\n                  >\n                    {type === 'text' && <Type className=\"w-4 h-4\" />}\n                    {type === 'heading' && <Type className=\"w-4 h-4\" />}\n                    {type === 'image' && <Image className=\"w-4 h-4\" />}\n                    {type === 'button' && <ButtonIcon className=\"w-4 h-4\" />}\n                    {type === 'spacer' && <Layout className=\"w-4 h-4\" />}\n                    <span className=\"capitalize\">{type}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Editor Canvas */}\n      <div className=\"flex-1 p-4\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h3 className=\"text-lg font-semibold mb-4\">\n            Editor Pagina: {pageType} {pageId && `(${pageId})`}\n          </h3>\n          \n          <div className=\"bg-white min-h-96 border rounded-lg p-4\">\n            {blocks.length === 0 ? (\n              <div className=\"text-center text-gray-500 py-12\">\n                <Layout className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                <p>Nessun blocco presente. Aggiungi il primo blocco dalla barra laterale.</p>\n              </div>\n            ) : (\n              blocks.map(renderBlock)\n            )}\n          </div>\n          \n          {isEditing && renderBlockEditor()}\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":15951},"components/admin/DashboardOverview.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Users, Package, Calendar, TrendingUp, MapPin, DollarSign, Clock, Star } from 'lucide-react';\nimport { AdminService, DashboardStats } from '@/lib/admin';\n\nexport default function DashboardOverview() {\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const loadDashboardStats = async () => {\n      try {\n        const dashboardStats = await AdminService.getDashboardStats();\n        setStats(dashboardStats);\n      } catch (err: any) {\n        setError('Errore nel caricamento delle statistiche');\n        console.error('Dashboard stats error:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadDashboardStats();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Dashboard</h2>\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {[...Array(4)].map((_, i) => (\n            <div key={i} className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm animate-pulse\">\n              <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2\"></div>\n              <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3\"></div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Dashboard</h2>\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300\">\n          {error}\n        </div>\n      </div>\n    );\n  }\n\n  if (!stats) {\n    return null;\n  }\n\n  const statCards = [\n    {\n      title: \"Utenti Totali\",\n      value: stats.totalUsers,\n      icon: Users,\n      color: \"text-orange-600\",\n      bgColor: \"bg-orange-50 dark:bg-orange-900/20\"\n    },\n    {\n      title: \"Viaggi Pubblicati\",\n      value: stats.totalTravels,\n      icon: MapPin,\n      color: \"text-green-600\",\n      bgColor: \"bg-green-50 dark:bg-green-900/20\"\n    },\n    {\n      title: \"Prenotazioni\",\n      value: stats.totalBookings,\n      icon: Calendar,\n      color: \"text-orange-600\",\n      bgColor: \"bg-orange-50 dark:bg-orange-900/20\"\n    },\n    {\n      title: \"Fatturato Totale\",\n      value: `‚Ç¨${stats.totalRevenue.toLocaleString()}`,\n      icon: DollarSign,\n      color: \"text-purple-600\",\n      bgColor: \"bg-purple-50 dark:bg-purple-900/20\"\n    }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Dashboard Overview</h2>\n        <div className=\"text-sm text-gray-500\">\n          Ultimo aggiornamento: {new Date().toLocaleString('it-IT')}\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {statCards.map((stat, index) => (\n          <div key={index} className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">{stat.title}</p>\n                <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stat.value}</p>\n              </div>\n              <div className={`w-12 h-12 rounded-full ${stat.bgColor} flex items-center justify-center`}>\n                <stat.icon className={`w-6 h-6 ${stat.color}`} />\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Pending Bookings Alert */}\n      {stats.pendingBookings > 0 && (\n        <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Clock className=\"w-5 h-5 text-yellow-600\" />\n            <span className=\"text-yellow-800 dark:text-yellow-200 font-medium\">\n              {stats.pendingBookings} prenotazioni in attesa di conferma\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Quick Stats Grid */}\n      <div className=\"grid lg:grid-cols-2 gap-6\">\n        {/* Recent Bookings */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Prenotazioni Recenti</h3>\n          {stats.recentBookings.length > 0 ? (\n            <div className=\"space-y-3\">\n              {stats.recentBookings.slice(0, 5).map((booking) => (\n                <div key={booking.id} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                  <div>\n                    <p className=\"font-medium text-sm text-gray-900 dark:text-white\">\n                      {booking.personalDetails.name}\n                    </p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {booking.personalDetails.email}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-semibold text-sm text-gray-900 dark:text-white\">\n                      ‚Ç¨{booking.totalPrice}\n                    </p>\n                    <span className={`inline-block px-2 py-1 text-xs rounded-full ${\n                      booking.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                      booking.status === 'confirmed' ? 'bg-green-100 text-green-800' :\n                      booking.status === 'cancelled' ? 'bg-red-100 text-red-800' :\n                      'bg-orange-100 text-orange-800'\n                    }`}>\n                      {booking.status}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-500 dark:text-gray-400 text-sm\">Nessuna prenotazione recente</p>\n          )}\n        </div>\n\n        {/* Popular Travels */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Viaggi Popolari</h3>\n          {stats.popularTravels.length > 0 ? (\n            <div className=\"space-y-3\">\n              {stats.popularTravels.slice(0, 5).map((travel) => (\n                <div key={travel.id} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-sm text-gray-900 dark:text-white\">\n                      {travel.title}\n                    </p>\n                    <div className=\"flex items-center space-x-2 mt-1\">\n                      <Star className=\"w-3 h-3 text-yellow-500 fill-current\" />\n                      <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        {travel.rating} ({travel.reviews} recensioni)\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-semibold text-sm text-gray-900 dark:text-white\">\n                      ‚Ç¨{travel.price}\n                    </p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {travel.duration}\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-500 dark:text-gray-400 text-sm\">Nessun viaggio disponibile</p>\n          )}\n        </div>\n      </div>\n\n      {/* Additional Metrics */}\n      <div className=\"grid md:grid-cols-3 gap-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center space-x-3\">\n            <Package className=\"w-8 h-8 text-indigo-600\" />\n            <div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Esperienze</p>\n              <p className=\"text-xl font-bold text-gray-900 dark:text-white\">{stats.totalExperiences}</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center space-x-3\">\n            <TrendingUp className=\"w-8 h-8 text-emerald-600\" />\n            <div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Tasso Conversione</p>\n              <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                {stats.totalBookings > 0 ? Math.round((stats.totalBookings / stats.totalUsers) * 100) : 0}%\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-border\">\n          <div className=\"flex items-center space-x-3\">\n            <DollarSign className=\"w-8 h-8 text-amber-600\" />\n            <div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Prezzo Medio</p>\n              <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                ‚Ç¨{stats.totalBookings > 0 ? Math.round(stats.totalRevenue / stats.totalBookings) : 0}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":9623},"app/cookies/page.tsx":{"content":"import ContactBanner from \"@/components/cta/contact-banner\"\nimport { Cookie, Settings, Info, Shield } from 'lucide-react'\n\nexport default function CookiesPolicyPage() {\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n      <ContactBanner \n        title=\"Domande sui cookie?\" \n        subtitle=\"Contattaci per informazioni su come gestiamo i cookie sul nostro sito.\" \n      />\n      \n      <div className=\"py-16 lg:py-24\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <header className=\"text-center mb-12\">\n            <div className=\"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <Cookie className=\"w-8 h-8 text-amber-600 dark:text-amber-400\" />\n            </div>\n            <h1 className=\"text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-4\">\n              Cookie Policy\n            </h1>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\n              Questo sito utilizza cookie tecnici necessari per il funzionamento e, previo consenso, \n              cookie per analisi e personalizzazione dell'esperienza.\n            </p>\n            <div className=\"text-sm text-gray-500 dark:text-gray-400 mt-4\">\n              Ultimo aggiornamento: 15 gennaio 2024\n            </div>\n          </header>\n\n          <div className=\"space-y-12\">\n            {/* What are cookies */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Info className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Cosa sono i cookie</h2>\n              </div>\n              <div className=\"space-y-4 text-gray-600 dark:text-gray-300\">\n                <p>\n                  I cookie sono piccoli file di testo che vengono memorizzati sul tuo dispositivo quando visiti un sito web. \n                  Permettono al sito di riconoscerti e ricordare le tue preferenze per migliorare la tua esperienza di navigazione.\n                </p>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Cookie di prima parte</h3>\n                    <p className=\"text-sm\">Impostati direttamente dal nostro sito web per funzionalit√† essenziali</p>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Cookie di terze parti</h3>\n                    <p className=\"text-sm\">Impostati da servizi esterni come Google Analytics (solo con consenso)</p>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Types of cookies */}\n            <section>\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Tipologie di cookie utilizzati</h2>\n              <div className=\"space-y-6\">\n                <div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n                  <div className=\"flex items-center gap-3 mb-4\">\n                    <Shield className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                    <h3 className=\"text-lg font-bold text-green-800 dark:text-green-300\">Cookie Tecnici (Necessari)</h3>\n                    <span className=\"px-2 py-1 bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200 rounded-full text-xs font-medium\">\n                      Sempre attivi\n                    </span>\n                  </div>\n                  <p className=\"text-green-700 dark:text-green-400 mb-4\">\n                    Essenziali per il funzionamento del sito. Non richiedono consenso secondo la normativa europea.\n                  </p>\n                  <div className=\"grid sm:grid-cols-2 gap-4\">\n                    <div>\n                      <h4 className=\"font-semibold text-green-800 dark:text-green-300 mb-2\">Funzionalit√†</h4>\n                      <ul className=\"text-sm text-green-700 dark:text-green-400 space-y-1\">\n                        <li>‚Ä¢ Gestione sessione utente</li>\n                        <li>‚Ä¢ Preferenze tema (chiaro/scuro)</li>\n                        <li>‚Ä¢ Lingua selezionata</li>\n                        <li>‚Ä¢ Sicurezza e prevenzione frodi</li>\n                      </ul>\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-green-800 dark:text-green-300 mb-2\">Durata</h4>\n                      <ul className=\"text-sm text-green-700 dark:text-green-400 space-y-1\">\n                        <li>‚Ä¢ Sessione: fino alla chiusura browser</li>\n                        <li>‚Ä¢ Persistenti: max 12 mesi</li>\n                        <li>‚Ä¢ Preferenze: fino a modifica utente</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border border-orange-200 dark:border-orange-800\">\n                  <div className=\"flex items-center gap-3 mb-4\">\n                    <Settings className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\n                    <h3 className=\"text-lg font-bold text-orange-800 dark:text-orange-300\">Cookie Analitici</h3>\n                    <span className=\"px-2 py-1 bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200 rounded-full text-xs font-medium\">\n                      Consenso richiesto\n                    </span>\n                  </div>\n                  <p className=\"text-orange-700 dark:text-orange-400 mb-4\">\n                    Ci aiutano a capire come i visitatori interagiscono con il sito per migliorare l'esperienza utente.\n                  </p>\n                  <div className=\"grid sm:grid-cols-2 gap-4\">\n                    <div>\n                      <h4 className=\"font-semibold text-orange-800 dark:text-orange-300 mb-2\">Servizi utilizzati</h4>\n                      <ul className=\"text-sm text-orange-700 dark:text-orange-400 space-y-1\">\n                        <li>‚Ä¢ Google Analytics 4 (anonimizzato)</li>\n                        <li>‚Ä¢ Statistiche di utilizzo</li>\n                        <li>‚Ä¢ Performance del sito</li>\n                        <li>‚Ä¢ Errori e problemi tecnici</li>\n                      </ul>\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-orange-800 dark:text-orange-300 mb-2\">Dati raccolti</h4>\n                      <ul className=\"text-sm text-orange-700 dark:text-orange-400 space-y-1\">\n                        <li>‚Ä¢ Pagine visitate (anonime)</li>\n                        <li>‚Ä¢ Tempo di permanenza</li>\n                        <li>‚Ä¢ Dispositivo e browser</li>\n                        <li>‚Ä¢ Paese di provenienza</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Cookie management */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Gestione delle preferenze</h2>\n              <div className=\"space-y-6\">\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Sul nostro sito</h3>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-4\">\n                      Puoi modificare le tue preferenze sui cookie in qualsiasi momento:\n                    </p>\n                    <button className=\"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium\">\n                      Gestisci Preferenze Cookie\n                    </button>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Nel tuo browser</h3>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-4\">\n                      Puoi anche gestire i cookie direttamente dalle impostazioni del browser:\n                    </p>\n                    <div className=\"space-y-2 text-xs\">\n                      <a href=\"https://support.google.com/chrome/answer/95647\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"block text-orange-600 hover:text-orange-700\">\n                        ‚Üí Chrome\n                      </a>\n                      <a href=\"https://support.mozilla.org/it/kb/Attivare%20e%20disattivare%20i%20cookie\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"block text-orange-600 hover:text-orange-700\">\n                        ‚Üí Firefox\n                      </a>\n                      <a href=\"https://support.apple.com/it-it/guide/safari/sfri11471/mac\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"block text-orange-600 hover:text-orange-700\">\n                        ‚Üí Safari\n                      </a>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                  <h4 className=\"font-semibold text-yellow-800 dark:text-yellow-300 mb-2\">‚ö†Ô∏è Importante</h4>\n                  <p className=\"text-sm text-yellow-700 dark:text-yellow-400\">\n                    Disabilitando i cookie tecnici, alcune funzionalit√† del sito potrebbero non funzionare correttamente. \n                    I cookie analitici sono opzionali e non influenzano il funzionamento del sito.\n                  </p>\n                </div>\n              </div>\n            </section>\n\n            {/* Third party services */}\n            <section>\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Servizi di terze parti</h2>\n              <div className=\"space-y-4\">\n                <div className=\"p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700\">\n                  <div className=\"flex items-center gap-3 mb-4\">\n                    <img src=\"/images/google-analytics-logo.png\" alt=\"Google Analytics\" className=\"w-6 h-6\" />\n                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Google Analytics 4</h3>\n                  </div>\n                  <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Finalit√†</h4>\n                      <p className=\"text-gray-600 dark:text-gray-300\">\n                        Analisi del traffico web per migliorare l'esperienza utente e ottimizzare i contenuti\n                      </p>\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Privacy</h4>\n                      <p className=\"text-gray-600 dark:text-gray-300\">\n                        IP anonimizzato, dati aggregati, conformit√† GDPR\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      Per maggiori informazioni: \n                      <a href=\"https://policies.google.com/privacy\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-orange-600 hover:text-orange-700 ml-1\">\n                        Privacy Policy Google\n                      </a>\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Contact */}\n            <section className=\"text-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Contatti</h2>\n              <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\n                Per domande sui cookie o sul trattamento dei dati:\n              </p>\n              <div className=\"space-y-2\">\n                <p className=\"text-gray-900 dark:text-white font-semibold\">Morocco Dreams</p>\n                <p className=\"text-gray-600 dark:text-gray-300\">Email: privacy@moroccodreams.it</p>\n                <p className=\"text-gray-600 dark:text-gray-300\">Telefono: +39 329 233 3370</p>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":13092},"app/servizi/assicurazioni/page.tsx":{"content":"import AssicurazioniClientPage from \"./AssicurazioniClientPage\"\n\nexport const metadata = {\n  title: \"Assicurazioni Viaggio Marocco | Protezione Completa | Morocco Dreams\",\n  description:\n    \"Assicurazioni viaggio complete per il Marocco. Copertura medica fino a ‚Ç¨200.000, assistenza 24/7 in italiano, rimborsi rapidi. Prenota ora!\",\n  keywords: \"assicurazione viaggio marocco, copertura medica marocco, assicurazione bagagli, annullamento viaggio\",\n  openGraph: {\n    title: \"Assicurazioni Viaggio Marocco - Protezione Completa\",\n    description: \"Viaggia in Marocco con la massima tranquillit√†. Coperture fino a ‚Ç¨200.000 e assistenza 24/7.\",\n    type: \"website\",\n    images: [\"/images/insurance-hero.jpg\"],\n  },\n  twitter: {\n    card: \"summary_large_image\",\n    title: \"Assicurazioni Viaggio Marocco\",\n    description: \"Protezione completa per i tuoi viaggi in Marocco\",\n  },\n}\n\nexport default function AssicurazioniPage() {\n  return <AssicurazioniClientPage />\n}\n","size_bytes":971},"lib/city-pages.ts":{"content":"// Dynamic City Pages System for Morocco Dreams\nimport { firestoreService } from './firestore';\nimport { CMSService, CMSContent } from './cms';\n\nexport interface CityData {\n  id?: string;\n  name: string;\n  slug: string;\n  nameArabic: string;\n  region: string;\n  coordinates: {\n    latitude: number;\n    longitude: number;\n  };\n  population: number;\n  elevation?: number;\n  timezone: string;\n  climate: {\n    type: string;\n    bestVisitMonths: string[];\n    averageTemp: {\n      summer: { min: number; max: number };\n      winter: { min: number; max: number };\n    };\n    rainfall: string;\n  };\n  overview: {\n    description: string;\n    history: string;\n    culture: string;\n    economy: string[];\n  };\n  attractions: Array<{\n    id: string;\n    name: string;\n    type: 'monument' | 'museum' | 'market' | 'garden' | 'architectural' | 'religious' | 'natural';\n    description: string;\n    address: string;\n    coordinates: { lat: number; lng: number };\n    openingHours: string;\n    entryFee?: { adult: number; child: number; currency: string };\n    rating: number;\n    reviews: number;\n    images: string[];\n    highlights: string[];\n    unescoBySite?: boolean;\n  }>;\n  districts: Array<{\n    name: string;\n    description: string;\n    characteristics: string[];\n    mainAttractions: string[];\n    accommodation: 'luxury' | 'mid-range' | 'budget' | 'all';\n  }>;\n  transportation: {\n    airport?: {\n      name: string;\n      code: string;\n      distance: string;\n    };\n    trainStation?: {\n      name: string;\n      connections: string[];\n    };\n    busStation: {\n      name: string;\n      companies: string[];\n    };\n    localTransport: string[];\n    taxis: {\n      available: boolean;\n      tips: string[];\n    };\n  };\n  accommodation: Array<{\n    id: string;\n    name: string;\n    type: 'hotel' | 'riad' | 'hostel' | 'apartment' | 'guesthouse';\n    category: 'luxury' | 'mid-range' | 'budget';\n    rating: number;\n    priceRange: { min: number; max: number; currency: string };\n    location: string;\n    amenities: string[];\n    bookingUrl?: string;\n  }>;\n  dining: Array<{\n    id: string;\n    name: string;\n    type: 'restaurant' | 'cafe' | 'street-food' | 'traditional';\n    cuisine: string[];\n    priceLevel: 1 | 2 | 3 | 4; // 1 = budget, 4 = fine dining\n    rating: number;\n    specialties: string[];\n    location: string;\n    atmosphere: string;\n  }>;\n  shopping: Array<{\n    id: string;\n    name: string;\n    type: 'souk' | 'market' | 'boutique' | 'mall' | 'craft-center';\n    description: string;\n    location: string;\n    specialties: string[];\n    openingHours: string;\n    tips: string[];\n  }>;\n  experiences: Array<{\n    id: string;\n    name: string;\n    type: 'cultural' | 'adventure' | 'culinary' | 'wellness' | 'educational';\n    description: string;\n    duration: string;\n    priceRange: { min: number; max: number; currency: string };\n    difficulty: 1 | 2 | 3 | 4 | 5;\n    bestTime: string[];\n    included: string[];\n    bookingRequired: boolean;\n  }>;\n  practicalInfo: {\n    currency: string;\n    languages: string[];\n    emergencyNumbers: {\n      police: string;\n      medical: string;\n      fire: string;\n      tourist: string;\n    };\n    hospitals: Array<{\n      name: string;\n      address: string;\n      phone: string;\n      type: 'public' | 'private';\n    }>;\n    banks: Array<{\n      name: string;\n      locations: string[];\n      atmAvailable: boolean;\n    }>;\n    tips: {\n      cultural: string[];\n      safety: string[];\n      bargaining: string[];\n      photography: string[];\n    };\n  };\n  weather: {\n    currentSeason: string;\n    forecast?: Array<{\n      date: string;\n      temp: { min: number; max: number };\n      condition: string;\n      humidity: number;\n    }>;\n  };\n  seo: {\n    metaTitle: string;\n    metaDescription: string;\n    keywords: string[];\n    structuredData: any;\n  };\n  images: {\n    hero: string;\n    gallery: string[];\n    map: string;\n  };\n  published: boolean;\n  featured: boolean;\n  priority: number; // for homepage ordering\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// Mock data per le citt√† principali - sostituisce temporaneamente Firestore\nconst CITIES_DATA: CityData[] = [\n  {\n    id: 'casablanca',\n    name: 'Casablanca',\n    slug: 'casablanca',\n    nameArabic: 'ÿßŸÑÿØÿßÿ± ÿßŸÑÿ®Ÿäÿ∂ÿßÿ°',\n    region: 'Casablanca-Settat',\n    coordinates: { latitude: 33.5731, longitude: -7.5898 },\n    population: 3359818,\n    elevation: 50,\n    timezone: 'UTC+1',\n    climate: {\n      type: 'Mediterraneo',\n      bestVisitMonths: ['Marzo', 'Aprile', 'Maggio', 'Settembre', 'Ottobre'],\n      averageTemp: { summer: { min: 20, max: 26 }, winter: { min: 9, max: 18 } },\n      rainfall: 'Moderata (400mm/anno)'\n    },\n    overview: {\n      description: 'Casablanca √® il centro economico del Marocco, famosa per la Grande Moschea Hassan II.',\n      history: 'Fondata dai Berberi nel VII secolo, cresciuta da piccolo porto a metropoli moderna.',\n      culture: 'Mix di tradizioni berbere, arabe e influenze francesi',\n      economy: ['Finanza', 'Industria', 'Porto commerciale', 'Turismo']\n    },\n    attractions: [{\n      id: 'hassan-ii-mosque',\n      name: 'Moschea Hassan II',\n      type: 'religious' as const,\n      description: 'Una delle moschee pi√π grandi al mondo con un minareto di 210m',\n      address: 'Boulevard de la Corniche, Casablanca',\n      coordinates: { lat: 33.6084, lng: -7.6325 },\n      openingHours: '09:00-18:00',\n      entryFee: { adult: 12, child: 6, currency: 'EUR' },\n      rating: 4.6,\n      reviews: 15420,\n      images: ['/images/hassan-ii-mosque.jpg'],\n      highlights: ['Architettura moderna', 'Vista oceano', 'Visita guidata'],\n      unescoBySite: false\n    }],\n    districts: [{\n      name: 'Medina Antica',\n      description: 'Centro storico tradizionale',\n      characteristics: ['Mercati tradizionali', 'Architettura storica'],\n      mainAttractions: ['Mercato centrale'],\n      accommodation: 'all' as const\n    }],\n    transportation: {\n      airport: { name: 'Mohammed V', code: 'CMN', distance: '30km' },\n      trainStation: { name: 'Casa Port', connections: ['Rabat', 'Fez'] },\n      busStation: { name: 'Gare Routi√®re', companies: ['CTM', 'Supratours'] },\n      localTransport: ['Tram', 'Bus', 'Taxi'],\n      taxis: { available: true, tips: ['Concordare il prezzo'] }\n    },\n    accommodation: [],\n    dining: [],\n    shopping: [],\n    experiences: [],\n    practicalInfo: {\n      currency: 'Dirham marocchino (MAD)',\n      languages: ['Arabo', 'Francese', 'Berbero'],\n      emergencyNumbers: { police: '19', medical: '15', fire: '15', tourist: '177' },\n      hospitals: [],\n      banks: [],\n      tips: { cultural: [], safety: [], bargaining: [], photography: [] }\n    },\n    weather: { currentSeason: 'Inverno' },\n    seo: {\n      metaTitle: 'Casablanca Marocco: Guida Completa 2025 | Morocco Dreams',\n      metaDescription: 'Scopri Casablanca: la Moschea Hassan II, quartieri storici, ristoranti.',\n      keywords: ['Casablanca', 'Marocco', 'Hassan II'],\n      structuredData: {}\n    },\n    images: {\n      hero: '/images/casablanca-hero.jpg',\n      gallery: ['/images/casablanca-1.jpg'],\n      map: '/images/casablanca-map.jpg'\n    },\n    published: true,\n    featured: true,\n    priority: 1,\n    createdAt: new Date('2024-01-15'),\n    updatedAt: new Date('2024-12-15')\n  }\n];\n\nexport class CityPagesService {\n  // Get all cities\n  static async getAllCities(): Promise<CityData[]> {\n    try {\n      // Usa dati statici per evitare errori Firestore\n      return CITIES_DATA;\n    } catch (error) {\n      console.error('Error fetching cities:', error);\n      return CITIES_DATA;\n    }\n  }\n\n  // Get published cities\n  static async getPublishedCities(): Promise<CityData[]> {\n    try {\n      return CITIES_DATA.filter(city => city.published);\n    } catch (error) {\n      console.error('Error fetching published cities:', error);\n      return CITIES_DATA.filter(city => city.published);\n    }\n  }\n\n  // Get city by slug\n  static async getCityBySlug(slug: string): Promise<CityData | null> {\n    try {\n      const cities = await firestoreService.getWhere<CityData>('cities', 'slug', '==', slug);\n      return cities.length > 0 ? cities[0] : null;\n    } catch (error) {\n      console.error('Error fetching city by slug:', error);\n      return null;\n    }\n  }\n\n  // Save city\n  static async saveCity(city: Omit<CityData, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    try {\n      return await firestoreService.create('cities', {\n        ...city,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error saving city:', error);\n      throw error;\n    }\n  }\n\n  // Update city\n  static async updateCity(cityId: string, updates: Partial<CityData>): Promise<void> {\n    try {\n      await firestoreService.update('cities', cityId, {\n        ...updates,\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error updating city:', error);\n      throw error;\n    }\n  }\n\n  // Generate city page content\n  static generateCityPageContent(city: CityData): CMSContent {\n    return {\n      type: 'page',\n      title: `Guida Completa a ${city.name}`,\n      slug: `citta/${city.slug}`,\n      content: {\n        it: {\n          title: `${city.name} - ${city.nameArabic}`,\n          description: city.overview.description,\n          body: this.generateCityPageHTML(city),\n          meta: {\n            title: city.seo.metaTitle,\n            description: city.seo.metaDescription,\n            keywords: city.seo.keywords\n          }\n        }\n      },\n      published: city.published,\n      featured: city.featured,\n      category: 'city',\n      tags: [city.region, 'citt√†', 'guida', 'marocco'],\n      images: [city.images.hero, ...city.images.gallery],\n      author: 'Morocco Dreams',\n      createdAt: city.createdAt || new Date(),\n      updatedAt: city.updatedAt || new Date()\n    };\n  }\n\n  // Generate HTML content for city page\n  private static generateCityPageHTML(city: CityData): string {\n    return `\n      <div class=\"city-page\">\n        <!-- Hero Section -->\n        <section class=\"hero-section\">\n          <h1>${city.name} - ${city.nameArabic}</h1>\n          <p class=\"lead\">${city.overview.description}</p>\n        </section>\n\n        <!-- Overview -->\n        <section class=\"overview\">\n          <h2>Panoramica</h2>\n          <div class=\"city-facts\">\n            <div class=\"fact\">\n              <strong>Regione:</strong> ${city.region}\n            </div>\n            <div class=\"fact\">\n              <strong>Popolazione:</strong> ${city.population.toLocaleString()}\n            </div>\n            <div class=\"fact\">\n              <strong>Clima:</strong> ${city.climate.type}\n            </div>\n            <div class=\"fact\">\n              <strong>Miglior periodo:</strong> ${city.climate.bestVisitMonths.join(', ')}\n            </div>\n          </div>\n          <p>${city.overview.history}</p>\n        </section>\n\n        <!-- Attractions -->\n        <section class=\"attractions\">\n          <h2>Principali Attrazioni</h2>\n          <div class=\"attractions-grid\">\n            ${city.attractions.map(attraction => `\n              <div class=\"attraction-card\">\n                <h3>${attraction.name}</h3>\n                <p>${attraction.description}</p>\n                <div class=\"attraction-meta\">\n                  <span class=\"rating\">‚≠ê ${attraction.rating}</span>\n                  <span class=\"reviews\">(${attraction.reviews} recensioni)</span>\n                  ${attraction.unescoBySite ? '<span class=\"unesco\">UNESCO</span>' : ''}\n                </div>\n                ${attraction.entryFee ? `\n                  <div class=\"entry-fee\">\n                    Ingresso: ‚Ç¨${attraction.entryFee.adult} adulti, ‚Ç¨${attraction.entryFee.child} bambini\n                  </div>\n                ` : ''}\n              </div>\n            `).join('')}\n          </div>\n        </section>\n\n        <!-- Districts -->\n        <section class=\"districts\">\n          <h2>Quartieri</h2>\n          ${city.districts.map(district => `\n            <div class=\"district\">\n              <h3>${district.name}</h3>\n              <p>${district.description}</p>\n              <ul>\n                ${district.characteristics.map(char => `<li>${char}</li>`).join('')}\n              </ul>\n            </div>\n          `).join('')}\n        </section>\n\n        <!-- Practical Info -->\n        <section class=\"practical-info\">\n          <h2>Informazioni Pratiche</h2>\n          \n          <h3>Trasporti</h3>\n          ${city.transportation.airport ? `\n            <p><strong>Aeroporto:</strong> ${city.transportation.airport.name} (${city.transportation.airport.code}) - ${city.transportation.airport.distance}</p>\n          ` : ''}\n          \n          <h3>Emergenze</h3>\n          <ul>\n            <li>Polizia: ${city.practicalInfo.emergencyNumbers.police}</li>\n            <li>Emergenze mediche: ${city.practicalInfo.emergencyNumbers.medical}</li>\n            <li>Vigili del fuoco: ${city.practicalInfo.emergencyNumbers.fire}</li>\n            <li>Informazioni turistiche: ${city.practicalInfo.emergencyNumbers.tourist}</li>\n          </ul>\n\n          <h3>Consigli Utili</h3>\n          <div class=\"tips\">\n            <h4>Culturali</h4>\n            <ul>\n              ${city.practicalInfo.tips.cultural.map(tip => `<li>${tip}</li>`).join('')}\n            </ul>\n            \n            <h4>Sicurezza</h4>\n            <ul>\n              ${city.practicalInfo.tips.safety.map(tip => `<li>${tip}</li>`).join('')}\n            </ul>\n          </div>\n        </section>\n      </div>\n    `;\n  }\n\n  // Create sample cities data\n  static async createSampleCities(): Promise<void> {\n    const sampleCities: Omit<CityData, 'id' | 'createdAt' | 'updatedAt'>[] = [\n      {\n        name: 'Marrakech',\n        slug: 'marrakech',\n        nameArabic: 'ŸÖÿ±ÿßŸÉÿ¥',\n        region: 'Marrakech-Safi',\n        coordinates: { latitude: 31.6295, longitude: -7.9811 },\n        population: 928850,\n        elevation: 466,\n        timezone: 'UTC+1',\n        climate: {\n          type: 'Semi-arido',\n          bestVisitMonths: ['Marzo', 'Aprile', 'Maggio', 'Ottobre', 'Novembre'],\n          averageTemp: {\n            summer: { min: 20, max: 37 },\n            winter: { min: 6, max: 18 }\n          },\n          rainfall: 'Scarsa (250mm/anno)'\n        },\n        overview: {\n          description: 'Marrakech, la \"Perla Rossa\", √® una delle citt√† imperiali del Marocco, famosa per la sua medina patrimonio UNESCO, i suoi giardini lussureggianti e l\\'atmosfera magica dei suoi souq.',\n          history: 'Fondata nel 1062 dalla dinastia Almoravide, Marrakech √® stata per secoli un importante centro commerciale e culturale, punto di incontro tra il Sahara e le coste atlantiche.',\n          culture: 'Centro vitale della cultura berbera e araba, con tradizioni musicali, artigianali e culinarie uniche.',\n          economy: ['Turismo', 'Artigianato', 'Agricoltura', 'Servizi']\n        },\n        attractions: [\n          {\n            id: 'jemaa-el-fnaa',\n            name: 'Piazza Jemaa el-Fnaa',\n            type: 'market',\n            description: 'Il cuore pulsante di Marrakech, dichiarata Patrimonio UNESCO, dove ogni sera si anima con artisti di strada, bancarelle di cibo e spettacoli tradizionali.',\n            address: 'Medina, Marrakech',\n            coordinates: { lat: 31.6260, lng: -7.9890 },\n            openingHours: '24/7',\n            rating: 4.8,\n            reviews: 15420,\n            images: ['/images/jemaa-el-fnaa.png'],\n            highlights: ['Patrimonio UNESCO', 'Spettacoli serali', 'Cibo di strada'],\n            unescoBySite: true\n          },\n          {\n            id: 'koutoubia',\n            name: 'Moschea della Koutoubia',\n            type: 'religious',\n            description: 'Il minareto pi√π famoso di Marrakech, simbolo della citt√† e capolavoro dell\\'architettura almohade del XII secolo.',\n            address: 'Avenue Mohammed V, Marrakech',\n            coordinates: { lat: 31.6236, lng: -7.9926 },\n            openingHours: 'Solo esterno visitabile',\n            rating: 4.7,\n            reviews: 8930,\n            images: ['/images/koutoubia.png'],\n            highlights: ['Architettura almohade', 'Simbolo della citt√†', 'Giardini panoramici']\n          }\n        ],\n        districts: [\n          {\n            name: 'Medina',\n            description: 'Il centro storico patrimonio UNESCO con la famosa piazza Jemaa el-Fnaa e i souq tradizionali.',\n            characteristics: ['Architettura tradizionale', 'Souq autentici', 'Riad storici'],\n            mainAttractions: ['Jemaa el-Fnaa', 'Koutoubia', 'Souq'],\n            accommodation: 'all'\n          },\n          {\n            name: 'Gueliz',\n            description: 'Il quartiere moderno con negozi, ristoranti e vita notturna contemporanea.',\n            characteristics: ['Architettura coloniale', 'Shopping moderno', 'Ristoranti internazionali'],\n            mainAttractions: ['Teatro Reale', 'Mercato centrale'],\n            accommodation: 'luxury'\n          }\n        ],\n        transportation: {\n          airport: {\n            name: 'Aeroporto Internazionale Marrakech Menara',\n            code: 'RAK',\n            distance: '6 km dal centro'\n          },\n          trainStation: {\n            name: 'Stazione di Marrakech',\n            connections: ['Casablanca', 'Rabat', 'Fes']\n          },\n          busStation: {\n            name: 'Gare Routi√®re',\n            companies: ['CTM', 'Supratours', 'ONCF']\n          },\n          localTransport: ['Taxi', 'Autobus', 'Calesse'],\n          taxis: {\n            available: true,\n            tips: ['Concordare il prezzo prima', 'Piccoli taxi rossi per la citt√†']\n          }\n        },\n        accommodation: [],\n        dining: [],\n        shopping: [],\n        experiences: [],\n        practicalInfo: {\n          currency: 'Dirham marocchino (MAD)',\n          languages: ['Arabo', 'Berbero', 'Francese'],\n          emergencyNumbers: {\n            police: '190',\n            medical: '150',\n            fire: '150',\n            tourist: '+212 524 206 479'\n          },\n          hospitals: [\n            {\n              name: 'Clinique du Sud',\n              address: 'Rue Yougoslavie, Gueliz',\n              phone: '+212 524 447 999',\n              type: 'private'\n            }\n          ],\n          banks: [\n            {\n              name: 'Attijariwafa Bank',\n              locations: ['Gueliz', 'Medina', 'Aeroporto'],\n              atmAvailable: true\n            }\n          ],\n          tips: {\n            cultural: ['Vestirsi modestamente nelle moschee', 'Rispettare il Ramadan'],\n            safety: ['Tenere i documenti al sicuro', 'Evitare zone isolate di notte'],\n            bargaining: ['Contrattare nei souq √® normale', 'Iniziare con 1/3 del prezzo richiesto'],\n            photography: ['Chiedere permesso per ritratti', 'Evitare foto nelle moschee']\n          }\n        },\n        weather: {\n          currentSeason: 'Primavera'\n        },\n        seo: {\n          metaTitle: 'Marrakech: Guida Completa alla Perla Rossa del Marocco',\n          metaDescription: 'Scopri Marrakech: attrazioni, quartieri, consigli pratici e tutto quello che devi sapere sulla citt√† imperiale del Marocco.',\n          keywords: ['Marrakech', 'Marocco', 'Jemaa el-Fnaa', 'Medina', 'Koutoubia', 'Viaggi'],\n          structuredData: {}\n        },\n        images: {\n          hero: '/images/marrakech-hero.png',\n          gallery: ['/images/marrakech-1.png', '/images/marrakech-2.png'],\n          map: '/images/marrakech-map.png'\n        },\n        published: true,\n        featured: true,\n        priority: 1\n      }\n    ];\n\n    for (const city of sampleCities) {\n      await this.saveCity(city);\n    }\n  }\n\n  // Search cities\n  static searchCities(cities: CityData[], query: string): CityData[] {\n    const searchTerm = query.toLowerCase();\n    return cities.filter(city =>\n      city.name.toLowerCase().includes(searchTerm) ||\n      city.nameArabic.includes(searchTerm) ||\n      city.region.toLowerCase().includes(searchTerm) ||\n      city.overview.description.toLowerCase().includes(searchTerm)\n    );\n  }\n\n  // Get cities by region\n  static getCitiesByRegion(cities: CityData[], region: string): CityData[] {\n    return cities.filter(city => city.region === region);\n  }\n\n  // Get featured cities\n  static getFeaturedCities(cities: CityData[]): CityData[] {\n    return cities.filter(city => city.featured && city.published)\n                .sort((a, b) => a.priority - b.priority);\n  }\n}","size_bytes":20501},"components/dashboard/UserBookings.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Calendar, Download, Search, Filter, Eye, Star, MapPin, Users, Plane, MessageCircle, ChevronDown, ChevronUp, MessageSquare, X } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { firestoreService, Booking, Conversation } from '@/lib/firestore';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, getDocs, orderBy } from 'firebase/firestore';\nimport { COLLECTIONS, CustomTripRequest } from '@/lib/firestore-schema';\nimport ChatWidget from '@/components/ChatWidget';\nimport ShareInviteButton from '@/components/ShareInviteButton';\nimport { getConversationByGroupId } from '@/lib/utils/chat-utils';\n\nexport default function UserBookings() {\n  const { user } = useAuth();\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [customTrips, setCustomTrips] = useState<CustomTripRequest[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState<string>('all');\n  const [expandedTrip, setExpandedTrip] = useState<string | null>(null);\n  const [openChatBookingId, setOpenChatBookingId] = useState<string | null>(null);\n  const [conversations, setConversations] = useState<Map<string, Conversation>>(new Map());\n\n  useEffect(() => {\n    const loadBookings = async () => {\n      if (!user) return;\n      \n      try {\n        // Load normal bookings\n        const userBookings = await firestoreService.getUserBookings(user.uid);\n        setBookings(userBookings);\n        \n        // Load conversations for group bookings\n        const groupBookings = userBookings.filter(b => b.groupId);\n        const conversationsMap = new Map<string, Conversation>();\n        \n        for (const booking of groupBookings) {\n          try {\n            const conversation = await getConversationByGroupId(booking.groupId!);\n            if (conversation && booking.id) {\n              conversationsMap.set(booking.id, conversation);\n            }\n          } catch (error) {\n            console.error('Error loading conversation:', error);\n          }\n        }\n        \n        setConversations(conversationsMap);\n        \n        // Load custom trip requests\n        const customTripsQuery = query(\n          collection(db, COLLECTIONS.customTripRequests),\n          where('userId', '==', user.uid),\n          orderBy('createdAt', 'desc')\n        );\n        const customTripsSnap = await getDocs(customTripsQuery);\n        const customTripsData = customTripsSnap.docs.map(doc => ({ \n          id: doc.id, \n          ...doc.data() \n        })) as CustomTripRequest[];\n        setCustomTrips(customTripsData);\n        \n      } catch (err: any) {\n        setError('Errore nel caricamento delle prenotazioni');\n        console.error('Bookings loading error:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadBookings();\n  }, [user]);\n\n  const filteredBookings = bookings.filter(booking => {\n    const matchesSearch = !searchTerm || \n      booking.personalDetails.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      booking.id?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = filterStatus === 'all' || booking.status === filterStatus;\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n        return 'bg-primary/10 text-primary border border-primary/20';\n      case 'pending':\n        return 'bg-accent/10 text-accent border border-accent/20';\n      case 'cancelled':\n        return 'bg-destructive/10 text-destructive border border-destructive/20';\n      case 'completed':\n        return 'bg-primary/10 text-primary border border-primary/20';\n      default:\n        return 'bg-muted text-muted-foreground border border-border';\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case 'confirmed': return 'Confermata';\n      case 'pending': return 'In Attesa';\n      case 'cancelled': return 'Cancellata';\n      case 'completed': return 'Completata';\n      default: return status;\n    }\n  };\n\n  const isUpcoming = (departureDate: string) => {\n    return new Date(departureDate) > new Date();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Le Mie Prenotazioni</h2>\n        <div className=\"bg-card rounded-2xl p-6 shadow-sm\">\n          <div className=\"animate-pulse space-y-4\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"h-24 bg-muted rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Le Mie Prenotazioni</h2>\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300\">\n          {error}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Le Mie Prenotazioni</h2>\n        <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n          <Calendar className=\"w-4 h-4\" />\n          <span className=\"text-muted-foreground\">{filteredBookings.length} di {bookings.length} prenotazioni</span>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          {/* Search */}\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <input\n              type=\"text\"\n              placeholder=\"Cerca per nome o ID prenotazione...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground\"\n            />\n          </div>\n\n          {/* Status Filter */}\n          <div className=\"relative\">\n            <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"pl-10 pr-8 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground\"\n            >\n              <option value=\"all\">Tutti gli stati</option>\n              <option value=\"pending\">In Attesa</option>\n              <option value=\"confirmed\">Confermate</option>\n              <option value=\"completed\">Completate</option>\n              <option value=\"cancelled\">Cancellate</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Custom Trip Requests Section */}\n      {customTrips.length > 0 && (\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-foreground flex items-center gap-2\">\n              <Plane className=\"w-5 h-5 text-orange-600\" />\n              Richieste Viaggi su Misura\n            </h3>\n            <span className=\"text-sm text-muted-foreground\">{customTrips.length} richieste</span>\n          </div>\n\n          {customTrips.map((trip) => (\n            <div\n              key={trip.id}\n              className=\"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 rounded-2xl p-6 shadow-sm border border-orange-200 dark:border-orange-800\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h4 className=\"text-lg font-semibold text-foreground\">{trip.name}</h4>\n                    <span className={`px-3 py-1 text-xs font-medium rounded-full ${\n                      trip.status === 'pending' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300' :\n                      trip.status === 'reviewed' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300' :\n                      trip.status === 'quoted' ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300' :\n                      trip.status === 'confirmed' ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300' :\n                      'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300'\n                    }`}>\n                      {trip.status === 'pending' ? 'In Attesa' : trip.status === 'reviewed' ? 'Esaminata' : trip.status === 'quoted' ? 'Preventivo Inviato' : trip.status === 'confirmed' ? 'Confermata' : 'Cancellata'}\n                    </span>\n                  </div>\n\n                  <div className=\"grid md:grid-cols-2 gap-3 text-sm text-muted-foreground\">\n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"w-4 h-4\" />\n                      <span>{trip.departureDate} ‚Üí {trip.returnDate}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Users className=\"w-4 h-4\" />\n                      <span>{trip.travelers} adulti{trip.children > 0 && `, ${trip.children} bambini`}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <MapPin className=\"w-4 h-4\" />\n                      <span>{trip.destinations.slice(0, 2).join(', ')}{trip.destinations.length > 2 && '...'}</span>\n                    </div>\n                    <div className=\"text-sm font-semibold text-foreground\">\n                      Budget: ‚Ç¨{trip.budget}/persona\n                    </div>\n                  </div>\n                </div>\n\n                <button\n                  onClick={() => setExpandedTrip(expandedTrip === trip.id ? null : (trip.id || null))}\n                  className=\"ml-4 p-2 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors\"\n                >\n                  {expandedTrip === trip.id ? \n                    <ChevronUp className=\"w-5 h-5 text-orange-600\" /> : \n                    <ChevronDown className=\"w-5 h-5 text-orange-600\" />\n                  }\n                </button>\n              </div>\n\n              {/* Expanded Details */}\n              {expandedTrip === trip.id && (\n                <div className=\"mt-4 pt-4 border-t border-orange-200 dark:border-orange-800 space-y-4\">\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <div>\n                      <h5 className=\"font-semibold text-sm text-foreground mb-2\">Contatti</h5>\n                      <div className=\"space-y-1 text-sm text-muted-foreground\">\n                        <p>Email: {trip.email}</p>\n                        <p>Telefono: {trip.phone}</p>\n                        <p>Citt√† partenza: {trip.departureCity}</p>\n                      </div>\n                    </div>\n                    <div>\n                      <h5 className=\"font-semibold text-sm text-foreground mb-2\">Destinazioni</h5>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {trip.destinations.map(dest => (\n                          <span key={dest} className=\"px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-xs\">\n                            {dest}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div>\n                    <h5 className=\"font-semibold text-sm text-foreground mb-2\">Interessi</h5>\n                    <div className=\"flex flex-wrap gap-1\">\n                      {trip.interests.map(interest => (\n                        <span key={interest} className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs\">\n                          {interest}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <div>\n                      <h5 className=\"font-semibold text-sm text-foreground mb-2\">Preferenze Viaggio</h5>\n                      <div className=\"space-y-1 text-sm text-muted-foreground\">\n                        <p>Alloggio: {trip.accommodation}</p>\n                        <p>Trasporto: {trip.transport}</p>\n                        <p>Ritmo: {trip.travelPace}</p>\n                      </div>\n                    </div>\n                    <div>\n                      <h5 className=\"font-semibold text-sm text-foreground mb-2\">Info Aggiuntive</h5>\n                      <div className=\"space-y-1 text-sm text-muted-foreground\">\n                        {trip.occasion && <p>Occasione: {trip.occasion}</p>}\n                        {trip.dietaryRestrictions && <p>Restrizioni alimentari: {trip.dietaryRestrictions}</p>}\n                        {trip.accessibility && <p>Accessibilit√†: {trip.accessibility}</p>}\n                      </div>\n                    </div>\n                  </div>\n\n                  {trip.specialRequests && (\n                    <div className=\"bg-orange-100 dark:bg-orange-900/30 rounded-lg p-3\">\n                      <h5 className=\"font-semibold text-sm text-foreground mb-1\">Richieste Speciali</h5>\n                      <p className=\"text-sm text-muted-foreground\">{trip.specialRequests}</p>\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center justify-between pt-3 border-t border-orange-200 dark:border-orange-800\">\n                    <div className=\"text-xs text-muted-foreground\">\n                      Richiesto il: {new Date(trip.createdAt.seconds * 1000).toLocaleDateString('it-IT')}\n                    </div>\n                    <div className=\"flex gap-2\">\n                      {trip.sentToWhatsApp && (\n                        <button\n                          onClick={() => {\n                            const msg = encodeURIComponent(`Ciao! Vorrei informazioni sulla mia richiesta viaggio su misura del ${new Date(trip.createdAt.seconds * 1000).toLocaleDateString('it-IT')} per ${trip.destinations.join(', ')}.`);\n                            window.open(`https://wa.me/393292333370?text=${msg}`, \"_blank\");\n                          }}\n                          className=\"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                        >\n                          <MessageCircle className=\"w-4 h-4\" />\n                          Contatta WhatsApp\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Bookings List */}\n      <div className=\"space-y-4\">\n        {filteredBookings.length > 0 ? (\n          filteredBookings.map((booking) => (\n            <div\n              key={booking.id}\n              className=\"bg-card rounded-2xl p-6 shadow-sm border border-border hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-3\">\n                    <h3 className=\"text-lg font-semibold text-foreground\">\n                      Prenotazione #{booking.id?.slice(-8).toUpperCase()}\n                    </h3>\n                    <span className={`px-3 py-1 text-xs font-medium rounded-full ${getStatusColor(booking.status)}`}>\n                      {getStatusText(booking.status)}\n                    </span>\n                    {isUpcoming(booking.personalDetails.departureDate) && booking.status === 'confirmed' && (\n                      <span className=\"px-2 py-1 text-xs bg-primary/10 text-primary border border-primary/20 rounded-full\">\n                        Prossimo\n                      </span>\n                    )}\n                    {booking.groupId && (\n                      <span className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-300 dark:border-blue-700 rounded-full flex items-center gap-1\">\n                        <Users className=\"w-3 h-3\" />\n                        Gruppo\n                      </span>\n                    )}\n                  </div>\n\n                  <div className=\"grid md:grid-cols-2 gap-4 mb-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center text-sm text-muted-foreground\">\n                        <Calendar className=\"w-4 h-4 mr-2\" />\n                        <span>Partenza: {booking.personalDetails.departureDate}</span>\n                      </div>\n                      {booking.personalDetails.returnDate && (\n                        <div className=\"flex items-center text-sm text-muted-foreground\">\n                          <Calendar className=\"w-4 h-4 mr-2\" />\n                          <span>Ritorno: {booking.personalDetails.returnDate}</span>\n                        </div>\n                      )}\n                      <div className=\"flex items-center text-sm text-muted-foreground\">\n                        <Users className=\"w-4 h-4 mr-2\" />\n                        <span>\n                          {booking.personalDetails.travelers} adulti\n                          {booking.personalDetails.children && booking.personalDetails.children > 0 && \n                            `, ${booking.personalDetails.children} bambini`\n                          }\n                        </span>\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        <strong>Nome:</strong> {booking.personalDetails.name}\n                      </div>\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        <strong>Email:</strong> {booking.personalDetails.email}\n                      </div>\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        <strong>Telefono:</strong> {booking.personalDetails.phone}\n                      </div>\n                    </div>\n                  </div>\n\n                  {booking.personalDetails.departureCity && (\n                    <div className=\"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-3\">\n                      <MapPin className=\"w-4 h-4 mr-2\" />\n                      <span>Citt√† di partenza: {booking.personalDetails.departureCity}</span>\n                    </div>\n                  )}\n\n                  {booking.customRequests && (\n                    <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3\">\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        <strong>Richieste speciali:</strong> {booking.customRequests}\n                      </p>\n                    </div>\n                  )}\n\n                  {/* Group Booking Section */}\n                  {booking.groupId && booking.participants && booking.participants.length > 0 && (\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-3 border border-blue-200 dark:border-blue-800\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <h4 className=\"text-sm font-semibold text-foreground flex items-center gap-2\">\n                          <Users className=\"w-4 h-4 text-blue-600\" />\n                          Partecipanti al Gruppo ({booking.participants.length})\n                        </h4>\n                        \n                        {booking.participants.find(p => p.userId === user?.uid)?.role === 'organizer' && booking.shareToken && booking.id && (\n                          <ShareInviteButton\n                            shareToken={booking.shareToken}\n                            bookingId={booking.id}\n                            variant=\"secondary\"\n                          />\n                        )}\n                      </div>\n                      \n                      <div className=\"flex flex-wrap gap-2 mb-3\">\n                        {booking.participants.map(participant => (\n                          <div\n                            key={participant.userId}\n                            className=\"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-lg px-3 py-1.5 border border-blue-200 dark:border-blue-700\"\n                          >\n                            <div className=\"w-6 h-6 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold\">\n                              {participant.name.charAt(0).toUpperCase()}\n                            </div>\n                            <div>\n                              <p className=\"text-sm font-medium text-foreground\">{participant.name}</p>\n                              {participant.role === 'organizer' && (\n                                <span className=\"text-xs text-blue-600\">Organizzatore</span>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                      \n                      <button\n                        onClick={() => setOpenChatBookingId(booking.id!)}\n                        className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all font-medium\"\n                      >\n                        <MessageSquare className=\"w-4 h-4\" />\n                        Apri Chat Gruppo\n                        {conversations.get(booking.id!)?.unreadCount?.[user?.uid || ''] && conversations.get(booking.id!)!.unreadCount![user!.uid] > 0 && (\n                          <span className=\"ml-auto bg-red-500 text-white rounded-full px-2 py-0.5 text-xs font-bold\">\n                            {conversations.get(booking.id!)!.unreadCount![user!.uid]}\n                          </span>\n                        )}\n                      </button>\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      Prenotato il: {new Date(booking.createdAt.seconds * 1000).toLocaleDateString('it-IT')}\n                    </div>\n                    <div className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                      ‚Ç¨{booking.totalPrice.toLocaleString()}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-col space-y-2 ml-4\">\n                  <button className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\">\n                    <Eye className=\"w-4 h-4 text-gray-500\" />\n                  </button>\n                  <button className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\">\n                    <Download className=\"w-4 h-4 text-gray-500\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-sm border border-border text-center\">\n            <Calendar className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              {bookings.length === 0 ? 'Nessuna prenotazione ancora' : 'Nessuna prenotazione trovata'}\n            </h3>\n            <p className=\"text-gray-500 dark:text-gray-400 mb-4\">\n              {bookings.length === 0 \n                ? 'Inizia a esplorare i nostri incredibili viaggi e crea ricordi indimenticabili!'\n                : 'Prova a cambiare i filtri di ricerca per trovare le prenotazioni che stai cercando.'\n              }\n            </p>\n            {bookings.length === 0 && (\n              <a\n                href=\"/viaggi\"\n                className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold rounded-lg hover:from-orange-600 hover:to-red-600 transition-all\"\n              >\n                <MapPin className=\"w-5 h-5 mr-2\" />\n                Esplora Viaggi\n              </a>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Summary Stats */}\n      {bookings.length > 0 && (\n        <div className=\"grid md:grid-cols-4 gap-6\">\n          <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n            <div className=\"flex items-center space-x-3\">\n              <Calendar className=\"w-8 h-8 text-orange-600\" />\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Totale</p>\n                <p className=\"text-xl font-bold text-gray-900 dark:text-white\">{bookings.length}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n            <div className=\"flex items-center space-x-3\">\n              <Star className=\"w-8 h-8 text-green-600\" />\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Confermate</p>\n                <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  {bookings.filter(b => b.status === 'confirmed').length}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n            <div className=\"flex items-center space-x-3\">\n              <Calendar className=\"w-8 h-8 text-orange-600\" />\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Prossimi Viaggi</p>\n                <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  {bookings.filter(b => \n                    new Date(b.personalDetails.departureDate) > new Date() && \n                    b.status === 'confirmed'\n                  ).length}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"text-2xl\">üí∞</span>\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Totale Speso</p>\n                <p className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  ‚Ç¨{bookings\n                    .filter(b => b.status === 'confirmed' || b.status === 'completed')\n                    .reduce((sum, b) => sum + b.totalPrice, 0)\n                    .toLocaleString()\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Chat Modal */}\n      {openChatBookingId && (() => {\n        const booking = bookings.find(b => b.id === openChatBookingId)\n        if (!booking || !booking.groupId || !booking.participants) return null\n        \n        return (\n          <div \n            className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\"\n            onClick={() => setOpenChatBookingId(null)}\n          >\n            <div className=\"w-full max-w-2xl relative\" onClick={(e) => e.stopPropagation()}>\n              <button\n                onClick={() => setOpenChatBookingId(null)}\n                className=\"absolute -top-10 right-0 p-2 bg-white rounded-full hover:bg-gray-100 transition-colors shadow-lg\"\n                aria-label=\"Chiudi chat\"\n              >\n                <X className=\"w-5 h-5 text-gray-700\" />\n              </button>\n              <ChatWidget\n                groupId={booking.groupId}\n                bookingId={booking.id!}\n                participants={booking.participants.map(p => ({\n                  userId: p.userId,\n                  name: p.name,\n                  avatar: undefined\n                }))}\n                onClose={() => setOpenChatBookingId(null)}\n                className=\"h-[600px]\"\n              />\n            </div>\n          </div>\n        )\n      })()}\n    </div>\n  );\n}","size_bytes":29054},"app/api/admin/security-rules/route.ts":{"content":"// Firestore Security Rules Generator API\nimport { NextRequest, NextResponse } from 'next/server'\nimport { requireAdmin } from '@/lib/auth-admin'\n\n// Generate comprehensive Firestore security rules\nfunction generateSecurityRules() {\n  return `\nrules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    \n    // === USER MANAGEMENT ===\n    // Users collection: self-read and admin-write only\n    match /users/{userId} {\n      allow read: if request.auth != null && \n        (request.auth.uid == userId || hasAdminRole());\n      allow write: if hasAdminRole();\n    }\n    \n    // === PUBLIC CONTENT COLLECTIONS ===\n    // Cities - public read if published, admin write\n    match /cities/{cityId} {\n      allow read: if resource.data.published == true || hasAdminRole();\n      allow write: if hasAdminRole();\n    }\n    \n    // Experiences - public read if published, admin write  \n    match /experiences/{experienceId} {\n      allow read: if resource.data.published == true || hasAdminRole();\n      allow write: if hasAdminRole();\n    }\n    \n    // Travels (packages) - public read if published, admin write\n    match /travels/{travelId} {\n      allow read: if resource.data.published == true || hasAdminRole();\n      allow write: if hasAdminRole();\n    }\n    \n    // Services - public read if published, admin write\n    match /services/{serviceId} {\n      allow read: if resource.data.published == true || hasAdminRole();\n      allow write: if hasAdminRole();\n    }\n    \n    // Package Components - admin only (internal use)\n    match /package_components/{componentId} {\n      allow read, write: if hasAdminRole();\n    }\n    \n    // === CONTENT MANAGEMENT ===\n    // Blog posts - public read if published, admin write\n    match /blog/{postId} {\n      allow read: if resource.data.published == true || hasAdminRole();\n      allow write: if hasAdminRole();\n    }\n    \n    // CMS Sections - public read if published, admin write\n    match /cms_sections/{sectionId} {\n      allow read: if resource.data.published == true || hasAdminRole();\n      allow write: if hasAdminRole();\n    }\n    \n    // === CONFIGURATION ===\n    // Site theme - public read (for styling), admin write\n    match /site_theme/{themeId} {\n      allow read: if true; // Public for theme loading\n      allow write: if hasAdminRole();\n    }\n    \n    // === LEGACY SUPPORT ===\n    // Site content (legacy) - public read if visible, admin write\n    match /site_content/{contentId} {\n      allow read: if resource.data.visible == true || hasAdminRole();\n      allow write: if hasAdminRole();\n    }\n    \n    // === ADMIN FUNCTIONS ===\n    // Check if user has admin role\n    function hasAdminRole() {\n      return request.auth != null && \n        (request.auth.token.role == 'admin' || \n         request.auth.token.admin == true);\n    }\n    \n    // Validate required fields for content creation\n    function hasRequiredFields(requiredFields) {\n      return requiredFields.hasAll(request.resource.data.keys());\n    }\n    \n    // Check if user can edit based on publishing rules\n    function canEdit() {\n      return hasAdminRole() && \n        request.resource.data.updatedAt is timestamp;\n    }\n  }\n}`.trim()\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    const rules = generateSecurityRules()\n    \n    return NextResponse.json({\n      rules,\n      message: 'Security rules generated successfully'\n    })\n    \n  } catch (error) {\n    console.error('Generate security rules error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error generating security rules' \n    }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    const rules = generateSecurityRules()\n    \n    return NextResponse.json({\n      success: true,\n      rules,\n      instructions: [\n        \"1. Copia le regole di sicurezza generate\",\n        \"2. Vai alla console Firebase -> Firestore Database -> Rules\",\n        \"3. Sostituisci le regole esistenti con quelle generate\",\n        \"4. Clicca 'Pubblica' per applicare le nuove regole\",\n        \"5. Le regole garantiscono: lettura pubblica solo se published=true, scrittura solo per admin\"\n      ],\n      message: 'Security rules ready for deployment'\n    })\n    \n  } catch (error) {\n    console.error('Deploy security rules error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error preparing security rules' \n    }, { status: 500 })\n  }\n}","size_bytes":5027},"context/ThemeContext.tsx":{"content":"\"use client\"\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react'\nimport { SiteTheme } from '@/lib/firestore-schema'\n\ninterface ThemeContextType {\n  currentTheme: SiteTheme | null\n  setTheme: (theme: SiteTheme) => void\n  applyTheme: (theme: SiteTheme) => void\n  resetTheme: () => void\n  isLoading: boolean\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined)\n\ninterface ThemeProviderProps {\n  children: ReactNode\n}\n\n// Default Morocco Dreams theme\nconst defaultTheme: SiteTheme = {\n  name: 'Morocco Dreams Default',\n  isActive: true,\n  colors: {\n    primary: '#ea580c',\n    secondary: '#dc2626', \n    accent: '#f59e0b',\n    background: '#ffffff',\n    surface: '#f8fafc',\n    text: '#1f2937',\n    textSecondary: '#6b7280',\n    border: '#e5e7eb',\n    success: '#10b981',\n    warning: '#f59e0b',\n    error: '#ef4444'\n  },\n  typography: {\n    headingFont: 'Inter, sans-serif',\n    bodyFont: 'Inter, sans-serif',\n    sizes: {\n      xs: '0.75rem',\n      sm: '0.875rem', \n      base: '1rem',\n      lg: '1.125rem',\n      xl: '1.25rem',\n      '2xl': '1.5rem',\n      '3xl': '1.875rem',\n      '4xl': '2.25rem'\n    },\n    weights: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700\n    }\n  },\n  layout: {\n    maxWidth: '1200px',\n    containerPadding: '1rem',\n    borderRadius: {\n      sm: '0.25rem',\n      md: '0.5rem',\n      lg: '0.75rem',\n      xl: '1rem'\n    },\n    shadows: {\n      sm: '0 1px 2px 0 rgb(0 0 0 / 0.05)',\n      md: '0 4px 6px -1px rgb(0 0 0 / 0.1)',\n      lg: '0 10px 15px -3px rgb(0 0 0 / 0.1)',\n      xl: '0 20px 25px -5px rgb(0 0 0 / 0.1)'\n    }\n  },\n  createdAt: new Date() as any,\n  updatedAt: new Date() as any\n}\n\nexport function MoroccoThemeProvider({ children }: ThemeProviderProps) {\n  const [currentTheme, setCurrentTheme] = useState<SiteTheme | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Load active theme from database\n  useEffect(() => {\n    loadActiveTheme()\n  }, [])\n\n  const loadActiveTheme = async () => {\n    try {\n      setIsLoading(true)\n      const response = await fetch('/api/site-settings')\n      \n      if (response.ok) {\n        const data = await response.json()\n        if (data.theme && typeof data.theme === 'object') {\n          const themeData: SiteTheme = {\n            name: data.theme.name || 'Morocco Dreams Default',\n            isActive: true,\n            colors: data.theme.colors || defaultTheme.colors,\n            typography: data.theme.typography || defaultTheme.typography,\n            layout: data.theme.layout || defaultTheme.layout,\n            createdAt: new Date() as any,\n            updatedAt: new Date() as any\n          }\n          setCurrentTheme(themeData)\n          applyTheme(themeData)\n        } else {\n          // No theme in database, use default\n          setCurrentTheme(defaultTheme)\n          applyTheme(defaultTheme)\n        }\n      } else {\n        // API error, use default\n        setCurrentTheme(defaultTheme)\n        applyTheme(defaultTheme)\n      }\n    } catch (error) {\n      console.error('Error loading theme:', error)\n      setCurrentTheme(defaultTheme)\n      applyTheme(defaultTheme)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const applyTheme = (theme: SiteTheme) => {\n    if (typeof window === 'undefined') return\n\n    // FIXED: Only override brand colors, respect native dark/light mode for backgrounds\n    const cssVariables = [\n      // Brand colors only - let native dark/light mode handle backgrounds\n      `--color-primary: ${theme.colors.primary}`,\n      `--color-secondary: ${theme.colors.secondary}`,\n      `--color-accent: ${theme.colors.accent}`,\n      `--color-success: ${theme.colors.success}`,\n      `--color-warning: ${theme.colors.warning}`,\n      `--color-error: ${theme.colors.error}`,\n      \n      // Typography\n      `--font-heading: ${theme.typography.headingFont}`,\n      `--font-body: ${theme.typography.bodyFont}`,\n      `--font-size-xs: ${theme.typography.sizes.xs}`,\n      `--font-size-sm: ${theme.typography.sizes.sm}`,\n      `--font-size-base: ${theme.typography.sizes.base}`,\n      `--font-size-lg: ${theme.typography.sizes.lg}`,\n      `--font-size-xl: ${theme.typography.sizes.xl}`,\n      `--font-size-2xl: ${theme.typography.sizes['2xl']}`,\n      `--font-size-3xl: ${theme.typography.sizes['3xl']}`,\n      `--font-size-4xl: ${theme.typography.sizes['4xl']}`,\n      \n      // Layout\n      `--max-width: ${theme.layout.maxWidth}`,\n      `--container-padding: ${theme.layout.containerPadding}`,\n      `--border-radius-sm: ${theme.layout.borderRadius.sm}`,\n      `--border-radius-md: ${theme.layout.borderRadius.md}`,\n      `--border-radius-lg: ${theme.layout.borderRadius.lg}`,\n      `--border-radius-xl: ${theme.layout.borderRadius.xl}`,\n      \n      // Brand colors only - NO background/foreground/muted override!\n      `--primary: ${theme.colors.primary}`,\n      `--secondary: ${theme.colors.secondary}`,\n      `--accent: ${theme.colors.accent}`,\n      `--ring: ${theme.colors.primary}`\n      // REMOVED: --background, --foreground, --muted, --muted-foreground, --border\n      // These are now handled by native CSS dark/light mode in globals.css\n    ].join(';\\n')\n\n    // Remove existing theme styles\n    const existingStyle = document.getElementById('morocco-dynamic-theme')\n    if (existingStyle) {\n      existingStyle.remove()\n    }\n\n    // Apply new theme styles\n    const style = document.createElement('style')\n    style.id = 'morocco-dynamic-theme'\n    style.textContent = `:root { ${cssVariables} }`\n    document.head.appendChild(style)\n\n    // Update document classes for theme-aware components\n    document.documentElement.setAttribute('data-theme', theme.name.toLowerCase().replace(/\\s+/g, '-'))\n    \n    console.log('üé® Applied Morocco Dreams brand theme:', theme.name)\n    console.log('üåì Native dark/light mode handled by CSS')\n  }\n\n  const setTheme = (theme: SiteTheme) => {\n    setCurrentTheme(theme)\n    applyTheme(theme)\n  }\n\n  const resetTheme = () => {\n    setCurrentTheme(defaultTheme)\n    applyTheme(defaultTheme)\n  }\n\n  const value: ThemeContextType = {\n    currentTheme,\n    setTheme,\n    applyTheme,\n    resetTheme,\n    isLoading\n  }\n\n  return (\n    <ThemeContext.Provider value={value}>\n      {children}\n    </ThemeContext.Provider>\n  )\n}\n\nexport function useMoroccoTheme() {\n  const context = useContext(ThemeContext)\n  if (context === undefined) {\n    throw new Error('useMoroccoTheme must be used within a MoroccoThemeProvider')\n  }\n  return context\n}\n\n// Hook for theme-aware styling\nexport function useThemeStyles() {\n  const { currentTheme } = useMoroccoTheme()\n  \n  if (!currentTheme) return {}\n  \n  return {\n    primaryColor: currentTheme.colors.primary,\n    secondaryColor: currentTheme.colors.secondary,\n    accentColor: currentTheme.colors.accent,\n    backgroundColor: currentTheme.colors.background,\n    textColor: currentTheme.colors.text,\n    headingFont: currentTheme.typography.headingFont,\n    bodyFont: currentTheme.typography.bodyFont,\n    maxWidth: currentTheme.layout.maxWidth,\n    borderRadius: currentTheme.layout.borderRadius.md\n  }\n}","size_bytes":7150},"components/auth/ProtectedRoute.tsx":{"content":"'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requireAdmin?: boolean;\n  redirectTo?: string;\n  loadingComponent?: React.ReactNode;\n}\n\nexport default function ProtectedRoute({ \n  children, \n  requireAdmin = false, \n  redirectTo = '/auth/signin',\n  loadingComponent \n}: ProtectedRouteProps) {\n  const { user, userProfile, loading, isAdmin } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!loading) {\n      // Not authenticated - redirect to sign in\n      if (!user) {\n        // Store the current URL to redirect back after login (only safe internal paths)\n        const currentPath = window.location.pathname;\n        if (currentPath !== redirectTo && currentPath.startsWith('/') && !currentPath.includes('://')) {\n          sessionStorage.setItem('redirectAfterLogin', currentPath);\n        }\n        router.push(redirectTo);\n        return;\n      }\n\n      // Authenticated but requires admin role\n      if (requireAdmin && !isAdmin) {\n        router.push('/'); // Redirect to homepage\n        return;\n      }\n    }\n  }, [user, userProfile, loading, isAdmin, requireAdmin, redirectTo, router]);\n\n  // Show loading while checking authentication\n  if (loading) {\n    return loadingComponent || (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Verifica autenticazione...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Don't render if not authenticated or doesn't have required role\n  if (!user || (requireAdmin && !isAdmin)) {\n    return null;\n  }\n\n  return <>{children}</>;\n}","size_bytes":1923},"components/forms/ContactForm.tsx":{"content":"\"use client\";\n\nimport { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Send, Check, AlertCircle, Loader2 } from 'lucide-react';\nimport { firestoreService, COLLECTIONS, Inquiry } from '@/lib/firestore';\n\ninterface ContactFormData {\n  name: string;\n  surname: string;\n  email: string;\n  phone: string;\n  travelType: string;\n  message: string;\n}\n\ninterface ContactFormProps {\n  type?: 'general' | 'travel_plan' | 'booking';\n  className?: string;\n}\n\nexport default function ContactForm({ type = 'general', className = '' }: ContactFormProps) {\n  const [formData, setFormData] = useState<ContactFormData>({\n    name: '',\n    surname: '',\n    email: '',\n    phone: '',\n    travelType: '',\n    message: ''\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      // Validate required fields\n      if (!formData.name || !formData.email || !formData.message) {\n        throw new Error('Per favore compila tutti i campi obbligatori');\n      }\n\n      // Create inquiry object\n      const inquiry: Omit<Inquiry, 'id' | 'createdAt' | 'updatedAt'> = {\n        name: `${formData.name} ${formData.surname}`.trim(),\n        email: formData.email,\n        phone: formData.phone,\n        message: formData.message,\n        travelType: formData.travelType,\n        type: type,\n        status: 'new'\n      };\n\n      // Save to Firestore\n      await firestoreService.create<Inquiry>(COLLECTIONS.inquiries, inquiry);\n\n      // Reset form and show success\n      setFormData({\n        name: '',\n        surname: '',\n        email: '',\n        phone: '',\n        travelType: '',\n        message: ''\n      });\n      setSuccess(true);\n\n      // Hide success message after 5 seconds\n      setTimeout(() => {\n        setSuccess(false);\n      }, 5000);\n\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore. Riprova pi√π tardi.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className={`bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-8 text-center ${className}`}\n      >\n        <motion.div\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          transition={{ delay: 0.2, type: \"spring\" }}\n          className=\"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4\"\n        >\n          <Check className=\"w-8 h-8 text-white\" />\n        </motion.div>\n        <h3 className=\"text-xl font-bold text-green-800 dark:text-green-200 mb-2\">\n          Messaggio Inviato!\n        </h3>\n        <p className=\"text-green-700 dark:text-green-300\">\n          Grazie per il tuo messaggio. Ti ricontatteremo entro 24 ore.\n        </p>\n      </motion.div>\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className={`space-y-6 ${className}`}>\n      {error && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3\"\n        >\n          <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0\" />\n          <p className=\"text-red-700 dark:text-red-300 text-sm\">{error}</p>\n        </motion.div>\n      )}\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            Nome *\n          </label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={formData.name}\n            onChange={handleChange}\n            required\n            className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n            placeholder=\"Il tuo nome\"\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-foreground mb-2\">\n            Cognome\n          </label>\n          <input\n            type=\"text\"\n            name=\"surname\"\n            value={formData.surname}\n            onChange={handleChange}\n            className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n            placeholder=\"Il tuo cognome\"\n          />\n        </div>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\n          Email *\n        </label>\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n          className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n          placeholder=\"la-tua-email@esempio.com\"\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\n          Telefono\n        </label>\n        <input\n          type=\"tel\"\n          name=\"phone\"\n          value={formData.phone}\n          onChange={handleChange}\n          className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n          placeholder=\"+39 329 233 3370\"\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\n          Tipo di viaggio\n        </label>\n        <select\n          name=\"travelType\"\n          value={formData.travelType}\n          onChange={handleChange}\n          className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n        >\n          <option value=\"\">Seleziona...</option>\n          <option value=\"citta-imperiali\">Citt√† Imperiali</option>\n          <option value=\"deserto\">Tour del Deserto</option>\n          <option value=\"costa-atlantica\">Costa Atlantica</option>\n          <option value=\"montagne-atlas\">Montagne dell'Atlas</option>\n          <option value=\"su-misura\">Viaggio su Misura</option>\n          <option value=\"gruppo\">Viaggio di Gruppo</option>\n          <option value=\"esperienze\">Esperienze</option>\n          <option value=\"servizi\">Servizi (Auto, Guide, etc.)</option>\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\n          Messaggio *\n        </label>\n        <textarea\n          name=\"message\"\n          value={formData.message}\n          onChange={handleChange}\n          required\n          rows={4}\n          className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors resize-vertical\"\n          placeholder=\"Raccontaci del tuo viaggio ideale in Marocco...\"\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        disabled={loading}\n        className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-6 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {loading ? (\n          <>\n            <Loader2 className=\"w-5 h-5 animate-spin\" />\n            Invio in corso...\n          </>\n        ) : (\n          <>\n            <Send className=\"w-5 h-5\" />\n            Invia Messaggio\n          </>\n        )}\n      </button>\n    </form>\n  );\n}","size_bytes":8167},"lib/theme-system.ts":{"content":"// Advanced Theme Customization System for Morocco Dreams\nimport { firestoreService } from './firestore';\n\nexport interface ThemeConfig {\n  id?: string;\n  userId: string;\n  pagePath: string; // e.g., '/', '/viaggi', '/admin'\n  colors: {\n    primary: string;\n    secondary: string;\n    accent: string;\n    background: string;\n    foreground: string;\n    muted: string;\n    border: string;\n    gradient?: {\n      from: string;\n      to: string;\n      direction: 'to-r' | 'to-br' | 'to-b' | 'to-bl' | 'to-l';\n    };\n  };\n  typography: {\n    fontFamily: string;\n    headingFont?: string;\n    fontSize: {\n      base: string;\n      heading: string;\n      small: string;\n    };\n    fontWeight: {\n      normal: number;\n      medium: number;\n      bold: number;\n    };\n  };\n  layout: {\n    containerMaxWidth: string;\n    borderRadius: string;\n    spacing: string;\n    headerHeight: string;\n  };\n  components: {\n    button: {\n      style: 'rounded' | 'square' | 'pill';\n      shadow: boolean;\n      animation: boolean;\n    };\n    card: {\n      style: 'flat' | 'elevated' | 'bordered';\n      padding: string;\n    };\n  };\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const DEFAULT_THEME: Omit<ThemeConfig, 'id' | 'userId' | 'pagePath' | 'createdAt' | 'updatedAt'> = {\n  colors: {\n    primary: '#ea580c', // orange-600\n    secondary: '#dc2626', // red-600  \n    accent: '#f97316', // orange-500\n    background: '#ffffff',\n    foreground: '#0f172a', // slate-900\n    muted: '#f1f5f9', // slate-100\n    border: '#e2e8f0', // slate-200\n    gradient: {\n      from: '#ea580c',\n      to: '#dc2626',\n      direction: 'to-br'\n    }\n  },\n  typography: {\n    fontFamily: 'Inter, system-ui, sans-serif',\n    headingFont: 'Playfair Display, serif',\n    fontSize: {\n      base: '16px',\n      heading: '24px',\n      small: '14px'\n    },\n    fontWeight: {\n      normal: 400,\n      medium: 500,\n      bold: 700\n    }\n  },\n  layout: {\n    containerMaxWidth: '1200px',\n    borderRadius: '12px',\n    spacing: '16px',\n    headerHeight: '80px'\n  },\n  components: {\n    button: {\n      style: 'rounded',\n      shadow: true,\n      animation: true\n    },\n    card: {\n      style: 'elevated',\n      padding: '24px'\n    }\n  }\n};\n\nexport class ThemeService {\n  // Get theme for specific page/user\n  static async getTheme(userId: string, pagePath: string): Promise<ThemeConfig | null> {\n    try {\n      const themes = await firestoreService.getWhere<ThemeConfig>(\n        'user_themes', \n        'userId', \n        '==', \n        userId\n      );\n      return themes.find(theme => theme.pagePath === pagePath) || null;\n    } catch (error) {\n      console.error('Error fetching theme:', error);\n      return null;\n    }\n  }\n\n  // Save theme configuration\n  static async saveTheme(theme: Omit<ThemeConfig, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    try {\n      return await firestoreService.create('user_themes', {\n        ...theme,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error saving theme:', error);\n      throw error;\n    }\n  }\n\n  // Update existing theme\n  static async updateTheme(themeId: string, updates: Partial<ThemeConfig>): Promise<void> {\n    try {\n      await firestoreService.update('user_themes', themeId, {\n        ...updates,\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error updating theme:', error);\n      throw error;\n    }\n  }\n\n  // Generate CSS variables from theme config\n  static generateCSSVariables(theme: ThemeConfig): string {\n    return `\n      :root {\n        --primary: ${theme.colors.primary};\n        --secondary: ${theme.colors.secondary};\n        --accent: ${theme.colors.accent};\n        --background: ${theme.colors.background};\n        --foreground: ${theme.colors.foreground};\n        --muted: ${theme.colors.muted};\n        --border: ${theme.colors.border};\n        --font-family: ${theme.typography.fontFamily};\n        --heading-font: ${theme.typography.headingFont || theme.typography.fontFamily};\n        --font-size-base: ${theme.typography.fontSize.base};\n        --font-size-heading: ${theme.typography.fontSize.heading};\n        --font-size-small: ${theme.typography.fontSize.small};\n        --font-weight-normal: ${theme.typography.fontWeight.normal};\n        --font-weight-medium: ${theme.typography.fontWeight.medium};\n        --font-weight-bold: ${theme.typography.fontWeight.bold};\n        --container-max-width: ${theme.layout.containerMaxWidth};\n        --border-radius: ${theme.layout.borderRadius};\n        --spacing: ${theme.layout.spacing};\n        --header-height: ${theme.layout.headerHeight};\n      }\n      \n      ${theme.colors.gradient ? `\n        .gradient-bg {\n          background: linear-gradient(${theme.colors.gradient.direction}, ${theme.colors.gradient.from}, ${theme.colors.gradient.to});\n        }\n      ` : ''}\n    `;\n  }\n\n  // Apply theme to page\n  static applyTheme(theme: ThemeConfig): void {\n    const styleElement = document.getElementById('dynamic-theme') || document.createElement('style');\n    styleElement.id = 'dynamic-theme';\n    styleElement.textContent = this.generateCSSVariables(theme);\n    \n    if (!document.getElementById('dynamic-theme')) {\n      document.head.appendChild(styleElement);\n    }\n  }\n\n  // Get all user themes\n  static async getUserThemes(userId: string): Promise<ThemeConfig[]> {\n    try {\n      return await firestoreService.getWhere<ThemeConfig>('user_themes', 'userId', '==', userId);\n    } catch (error) {\n      console.error('Error fetching user themes:', error);\n      return [];\n    }\n  }\n\n  // Delete theme\n  static async deleteTheme(themeId: string): Promise<void> {\n    try {\n      await firestoreService.delete('user_themes', themeId);\n    } catch (error) {\n      console.error('Error deleting theme:', error);\n      throw error;\n    }\n  }\n\n  // Preset themes\n  static getPresetThemes(): Partial<ThemeConfig>[] {\n    return [\n      {\n        colors: {\n          primary: '#ea580c',\n          secondary: '#dc2626',\n          accent: '#f97316',\n          background: '#ffffff',\n          foreground: '#0f172a',\n          muted: '#f1f5f9',\n          border: '#e2e8f0',\n          gradient: { from: '#ea580c', to: '#dc2626', direction: 'to-br' }\n        }\n      },\n      {\n        colors: {\n          primary: '#0f766e',\n          secondary: '#0891b2',\n          accent: '#06b6d4',\n          background: '#ffffff',\n          foreground: '#0f172a',\n          muted: '#f0f9ff',\n          border: '#e0f2fe',\n          gradient: { from: '#0f766e', to: '#0891b2', direction: 'to-br' }\n        }\n      },\n      {\n        colors: {\n          primary: '#7c3aed',\n          secondary: '#c026d3',\n          accent: '#a855f7',\n          background: '#ffffff',\n          foreground: '#0f172a',\n          muted: '#faf5ff',\n          border: '#f3e8ff',\n          gradient: { from: '#7c3aed', to: '#c026d3', direction: 'to-br' }\n        }\n      }\n    ];\n  }\n}","size_bytes":6947},"lib/design-system.ts":{"content":"// Unified Design System for Morocco Dreams\nexport const designSystem = {\n  // Color Palette\n  colors: {\n    // Primary brand colors\n    primary: {\n      50: '#fff7ed',\n      100: '#ffedd5',\n      200: '#fed7aa',\n      300: '#fdba74',\n      400: '#fb923c',\n      500: '#f97316', // Main orange\n      600: '#ea580c', // Brand primary\n      700: '#c2410c',\n      800: '#9a3412',\n      900: '#7c2d12',\n    },\n    secondary: {\n      50: '#fef2f2',\n      100: '#fee2e2',\n      200: '#fecaca',\n      300: '#fca5a5',\n      400: '#f87171',\n      500: '#ef4444',\n      600: '#dc2626', // Brand secondary\n      700: '#b91c1c',\n      800: '#991b1b',\n      900: '#7f1d1d',\n    },\n    accent: {\n      50: '#f0f9ff',\n      100: '#e0f2fe',\n      200: '#bae6fd',\n      300: '#7dd3fc',\n      400: '#38bdf8',\n      500: '#0ea5e9',\n      600: '#0284c7',\n      700: '#0369a1',\n      800: '#075985',\n      900: '#0c4a6e',\n    },\n    neutral: {\n      50: '#f8fafc',\n      100: '#f1f5f9',\n      200: '#e2e8f0',\n      300: '#cbd5e1',\n      400: '#94a3b8',\n      500: '#64748b',\n      600: '#475569',\n      700: '#334155',\n      800: '#1e293b',\n      900: '#0f172a',\n    },\n    success: {\n      50: '#f0fdf4',\n      500: '#22c55e',\n      600: '#16a34a',\n    },\n    warning: {\n      50: '#fffbeb',\n      500: '#f59e0b',\n      600: '#d97706',\n    },\n    error: {\n      50: '#fef2f2',\n      500: '#ef4444',\n      600: '#dc2626',\n    }\n  },\n\n  // Typography\n  typography: {\n    fontFamily: {\n      sans: ['Inter', 'system-ui', 'sans-serif'],\n      serif: ['Playfair Display', 'Georgia', 'serif'],\n      mono: ['Fira Code', 'Monaco', 'monospace'],\n      arabic: ['Noto Sans Arabic', 'Arial', 'sans-serif']\n    },\n    fontSize: {\n      xs: ['12px', { lineHeight: '16px' }],\n      sm: ['14px', { lineHeight: '20px' }],\n      base: ['16px', { lineHeight: '24px' }],\n      lg: ['18px', { lineHeight: '28px' }],\n      xl: ['20px', { lineHeight: '28px' }],\n      '2xl': ['24px', { lineHeight: '32px' }],\n      '3xl': ['30px', { lineHeight: '36px' }],\n      '4xl': ['36px', { lineHeight: '40px' }],\n      '5xl': ['48px', { lineHeight: '1' }],\n      '6xl': ['60px', { lineHeight: '1' }],\n      '7xl': ['72px', { lineHeight: '1' }],\n    },\n    fontWeight: {\n      thin: 100,\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n      extrabold: 800,\n      black: 900,\n    }\n  },\n\n  // Spacing\n  spacing: {\n    px: '1px',\n    0: '0px',\n    0.5: '2px',\n    1: '4px',\n    1.5: '6px',\n    2: '8px',\n    2.5: '10px',\n    3: '12px',\n    3.5: '14px',\n    4: '16px',\n    5: '20px',\n    6: '24px',\n    7: '28px',\n    8: '32px',\n    9: '36px',\n    10: '40px',\n    11: '44px',\n    12: '48px',\n    14: '56px',\n    16: '64px',\n    20: '80px',\n    24: '96px',\n    28: '112px',\n    32: '128px',\n    36: '144px',\n    40: '160px',\n    44: '176px',\n    48: '192px',\n    52: '208px',\n    56: '224px',\n    60: '240px',\n    64: '256px',\n    72: '288px',\n    80: '320px',\n    96: '384px',\n  },\n\n  // Border Radius\n  borderRadius: {\n    none: '0px',\n    sm: '2px',\n    DEFAULT: '4px',\n    md: '6px',\n    lg: '8px',\n    xl: '12px',\n    '2xl': '16px',\n    '3xl': '24px',\n    full: '9999px',\n  },\n\n  // Shadows\n  boxShadow: {\n    sm: '0 1px 2px 0 rgb(0 0 0 / 0.05)',\n    DEFAULT: '0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)',\n    md: '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',\n    lg: '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)',\n    xl: '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)',\n    '2xl': '0 25px 50px -12px rgb(0 0 0 / 0.25)',\n    inner: 'inset 0 2px 4px 0 rgb(0 0 0 / 0.05)',\n    none: 'none',\n  },\n\n  // Animation\n  animation: {\n    none: 'none',\n    spin: 'spin 1s linear infinite',\n    ping: 'ping 1s cubic-bezier(0, 0, 0.2, 1) infinite',\n    pulse: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',\n    bounce: 'bounce 1s infinite',\n    fadeIn: 'fadeIn 0.5s ease-in-out',\n    slideUp: 'slideUp 0.3s ease-out',\n    slideDown: 'slideDown 0.3s ease-out',\n    scaleIn: 'scaleIn 0.2s ease-out',\n  },\n\n  // Breakpoints\n  screens: {\n    sm: '640px',\n    md: '768px',\n    lg: '1024px',\n    xl: '1280px',\n    '2xl': '1536px',\n  },\n\n  // Component Patterns\n  components: {\n    // Button variants\n    button: {\n      base: 'inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2',\n      sizes: {\n        sm: 'px-3 py-1.5 text-sm',\n        md: 'px-4 py-2 text-base',\n        lg: 'px-6 py-3 text-lg',\n        xl: 'px-8 py-4 text-xl',\n      },\n      variants: {\n        primary: 'bg-gradient-to-r from-orange-600 to-red-600 text-white hover:from-orange-700 hover:to-red-700 focus:ring-orange-500',\n        secondary: 'bg-neutral-100 text-neutral-900 hover:bg-neutral-200 focus:ring-neutral-500',\n        outline: 'border-2 border-orange-600 text-orange-600 hover:bg-orange-50 focus:ring-orange-500',\n        ghost: 'text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500',\n        cta: 'bg-gradient-to-br from-orange-500 via-red-500 to-red-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105 focus:ring-orange-500',\n      }\n    },\n\n    // Card variants\n    card: {\n      base: 'bg-white rounded-xl border border-neutral-200 shadow-sm overflow-hidden',\n      variants: {\n        default: 'hover:shadow-md transition-shadow duration-200',\n        elevated: 'shadow-lg hover:shadow-xl transition-shadow duration-200',\n        interactive: 'hover:shadow-lg hover:scale-[1.02] transition-all duration-200 cursor-pointer',\n        travel: 'hover:shadow-lg transition-all duration-300 group',\n      }\n    },\n\n    // Input variants\n    input: {\n      base: 'block w-full rounded-lg border border-neutral-300 px-3 py-2 text-neutral-900 placeholder-neutral-500 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500',\n      sizes: {\n        sm: 'px-2.5 py-1.5 text-sm',\n        md: 'px-3 py-2 text-base',\n        lg: 'px-4 py-3 text-lg',\n      },\n      states: {\n        error: 'border-red-500 focus:border-red-500 focus:ring-red-500',\n        success: 'border-green-500 focus:border-green-500 focus:ring-green-500',\n        disabled: 'bg-neutral-100 cursor-not-allowed opacity-50',\n      }\n    },\n\n    // Modal\n    modal: {\n      overlay: 'fixed inset-0 bg-black bg-opacity-50 z-40',\n      container: 'fixed inset-0 z-50 flex items-center justify-center p-4',\n      content: 'bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden',\n      header: 'px-6 py-4 border-b border-neutral-200',\n      body: 'px-6 py-4 overflow-y-auto',\n      footer: 'px-6 py-4 border-t border-neutral-200 flex justify-end space-x-3',\n    },\n\n    // Navigation\n    nav: {\n      primary: 'bg-white/95 backdrop-blur-sm border-b border-neutral-200 sticky top-0 z-30',\n      mobile: 'bg-white border-r border-neutral-200 shadow-lg',\n      link: 'text-neutral-700 hover:text-orange-600 px-3 py-2 rounded-lg transition-colors duration-200',\n      activeLink: 'text-orange-600 bg-orange-50 px-3 py-2 rounded-lg',\n    },\n\n    // Status indicators\n    badge: {\n      base: 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium',\n      variants: {\n        success: 'bg-green-100 text-green-800',\n        warning: 'bg-yellow-100 text-yellow-800',\n        error: 'bg-red-100 text-red-800',\n        info: 'bg-blue-100 text-blue-800',\n        neutral: 'bg-neutral-100 text-neutral-800',\n        primary: 'bg-orange-100 text-orange-800',\n      }\n    }\n  },\n\n  // Layout Utilities\n  layout: {\n    container: 'mx-auto px-4 sm:px-6 lg:px-8',\n    maxWidth: {\n      sm: 'max-w-sm',\n      md: 'max-w-md',\n      lg: 'max-w-lg',\n      xl: 'max-w-xl',\n      '2xl': 'max-w-2xl',\n      '3xl': 'max-w-3xl',\n      '4xl': 'max-w-4xl',\n      '5xl': 'max-w-5xl',\n      '6xl': 'max-w-6xl',\n      '7xl': 'max-w-7xl',\n      full: 'max-w-full',\n    },\n    section: 'py-12 lg:py-16',\n    grid: {\n      responsive: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6',\n      travel: 'grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8',\n      features: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6',\n    }\n  },\n\n  // Moroccan-specific elements\n  moroccan: {\n    patterns: {\n      geometric: 'bg-gradient-to-br from-orange-500/10 to-red-500/10',\n      arabesque: 'bg-gradient-to-r from-orange-100/50 to-red-100/50',\n      zellige: 'bg-gradient-to-r from-teal-500/20 to-blue-500/20',\n    },\n    colors: {\n      terracotta: '#cc6633',\n      saffron: '#f4c430',\n      henna: '#a0522d',\n      berber: '#8b4513',\n      atlantic: '#4682b4',\n      desert: '#daa520',\n    }\n  }\n};\n\n// CSS-in-JS utility functions\nexport const cn = (...classes: (string | undefined | null | false)[]) => {\n  return classes.filter(Boolean).join(' ');\n};\n\n// Theme utilities\nexport const getColorValue = (colorPath: string) => {\n  const path = colorPath.split('.');\n  let value: any = designSystem.colors;\n  \n  for (const key of path) {\n    value = value[key];\n    if (!value) return null;\n  }\n  \n  return value;\n};\n\n// Responsive utilities\nexport const responsive = {\n  mobile: (styles: string) => `@media (max-width: 767px) { ${styles} }`,\n  tablet: (styles: string) => `@media (min-width: 768px) and (max-width: 1023px) { ${styles} }`,\n  desktop: (styles: string) => `@media (min-width: 1024px) { ${styles} }`,\n};\n\n// Animation keyframes for CSS\nexport const keyframes = `\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  \n  @keyframes slideUp {\n    from { transform: translateY(20px); opacity: 0; }\n    to { transform: translateY(0); opacity: 1; }\n  }\n  \n  @keyframes slideDown {\n    from { transform: translateY(-20px); opacity: 0; }\n    to { transform: translateY(0); opacity: 1; }\n  }\n  \n  @keyframes scaleIn {\n    from { transform: scale(0.95); opacity: 0; }\n    to { transform: scale(1); opacity: 1; }\n  }\n  \n  @keyframes moroccanGlow {\n    0%, 100% { box-shadow: 0 0 20px rgba(234, 88, 12, 0.3); }\n    50% { box-shadow: 0 0 30px rgba(234, 88, 12, 0.6); }\n  }\n`;\n\nexport default designSystem;","size_bytes":10079},"lib/firestore.ts":{"content":"// Firestore database operations\nimport { \n  collection, \n  doc, \n  getDocs, \n  getDoc, \n  addDoc, \n  updateDoc, \n  deleteDoc, \n  query, \n  where, \n  orderBy, \n  limit,\n  Timestamp,\n  serverTimestamp\n} from 'firebase/firestore';\nimport { db } from './firebase';\n\n// Database Collections\nexport const COLLECTIONS = {\n  users: 'users',\n  travels: 'travels',\n  experiences: 'experiences',\n  bookings: 'bookings',\n  inquiries: 'inquiries',\n  services: 'services',\n  siteContent: 'site_content',\n  analytics: 'analytics',\n  // New CMS Collections\n  cmsContent: 'cms_content',\n  cmsSections: 'cms_sections',\n  cities: 'cities',\n  packageComponents: 'package_components',\n  packageTemplates: 'package_templates',\n  guides: 'guides',\n  userThemes: 'user_themes',\n  blog: 'blog',\n  // Group Chat Collections\n  conversations: 'conversations',\n  messages: 'messages'\n} as const;\n\n// Travel/Tour Types\nexport interface Travel {\n  id?: string;\n  title: string;\n  description: string;\n  images: string[];\n  price: number;\n  originalPrice?: number;\n  duration: string;\n  category: 'imperial-cities' | 'desert' | 'coast' | 'mountains' | 'custom';\n  featured: boolean;\n  published: boolean;\n  rating: number;\n  reviews: number;\n  includes: string[];\n  notIncludes?: string[];\n  highlights: string[];\n  itinerary?: Array<{\n    day: number;\n    title: string;\n    description: string;\n  }>;\n  maxParticipants?: number;\n  difficulty?: number;\n  bestFor?: string;\n  season?: string;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// Experience Types\nexport interface Experience {\n  id?: string;\n  title: string;\n  description: string;\n  images: string[];\n  price: number;\n  duration: string;\n  category: 'hammam' | 'cooking' | 'trekking' | 'photography' | 'crafts' | 'surf';\n  published: boolean;\n  rating: number;\n  reviews: number;\n  maxParticipants?: number;\n  includes: string[];\n  location: string;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// Booking Participant - For group bookings\nexport interface BookingParticipant {\n  userId: string;\n  name: string;\n  email: string;\n  phone?: string;\n  joinedAt: Timestamp;\n  status: 'invited' | 'joined' | 'declined';\n  role: 'organizer' | 'participant';\n}\n\n// Chat Message - For group conversations\nexport interface ChatMessage {\n  id?: string;\n  conversationId: string;\n  senderId: string;\n  senderName: string;\n  senderAvatar?: string;\n  text: string;\n  timestamp: Timestamp;\n  readBy: string[]; // Array of userIds who read this message\n  edited?: boolean;\n  editedAt?: Timestamp;\n}\n\n// Conversation - Group chat room\nexport interface Conversation {\n  id?: string;\n  groupId: string; // Links to Booking.groupId\n  bookingId: string; // Reference to booking\n  participants: Array<{\n    userId: string;\n    name: string;\n    avatar?: string;\n  }>;\n  // Separate map for lastRead timestamps (userId -> timestamp)\n  lastReadMap?: {\n    [userId: string]: Timestamp;\n  };\n  lastMessage?: {\n    text: string;\n    senderId: string;\n    senderName: string;\n    timestamp: Timestamp;\n  };\n  unreadCount?: {\n    [userId: string]: number;\n  };\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// Booking Types\nexport interface Booking {\n  id?: string;\n  userId: string;\n  travelId?: string;\n  experienceId?: string;\n  vehicleId?: string; // For vehicle rental bookings\n  status: 'pending' | 'confirmed' | 'cancelled' | 'completed';\n  personalDetails: {\n    name: string;\n    email: string;\n    phone: string;\n    travelers: number;\n    children?: number;\n    childrenAges?: string;\n    departureDate: string;\n    returnDate?: string;\n    departureCity?: string;\n  };\n  customRequests?: string;\n  totalPrice: number;\n  \n  // Vehicle rental specific fields\n  vehicleDetails?: {\n    driverLicense: string;\n    insuranceExtra: boolean;\n    gps: boolean;\n    childSeats: number;\n    additionalDriver: boolean;\n    pickupLocation?: string;\n    dropoffLocation?: string;\n    rentalDays?: number;\n    dailyRate?: number;\n  };\n  \n  // Group booking fields\n  groupId?: string;\n  participants?: BookingParticipant[];\n  chatRoomId?: string;\n  shareToken?: string;\n  \n  // Pricing flag (prevents recalculation of confirmed totals)\n  hasConfirmedTotal?: boolean;\n  \n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// Inquiry Types\nexport interface Inquiry {\n  id?: string;\n  name: string;\n  email: string;\n  phone?: string;\n  message: string;\n  travelType?: string; // Type of travel requested\n  type: 'general' | 'travel_plan' | 'booking' | 'custom_trip';\n  tripDetails?: any; // For custom trip planner data\n  status: 'new' | 'replied' | 'closed';\n  createdAt: Timestamp;\n  updatedAt?: Timestamp;\n}\n\n// City Types\nexport interface City {\n  id?: string;\n  name: string;\n  slug: string;\n  title: string;\n  description: string;\n  image: string;\n  highlights: string[];\n  duration: string;\n  bestTime: string;\n  rating: number;\n  reviews: number;\n  category: 'imperial-cities' | 'coast' | 'mountains' | 'desert' | 'other';\n  arabicName?: string;\n  region?: string;\n  coordinates?: {\n    lat: number;\n    lng: number;\n  };\n  population?: string;\n  climate?: string;\n  overview?: string;\n  attractions?: Array<{\n    name: string;\n    description: string;\n    image?: string;\n  }>;\n  transportation?: {\n    airport?: string;\n    trainStation?: string;\n    busStation?: string;\n  };\n  accommodation?: Array<{\n    type: string;\n    name: string;\n    priceRange: string;\n  }>;\n  seoData?: {\n    title: string;\n    description: string;\n    keywords: string[];\n  };\n  published: boolean;\n  featured: boolean;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// CMS Content Types (extending from cms.ts)\nexport interface CMSContent {\n  id?: string;\n  type: 'page' | 'section' | 'travel' | 'experience' | 'blog';\n  title: string;\n  slug: string;\n  content: {\n    [language: string]: {\n      title: string;\n      description: string;\n      body?: string;\n      meta?: {\n        title?: string;\n        description?: string;\n        keywords?: string[];\n      };\n    };\n  };\n  published: boolean;\n  featured: boolean;\n  category?: string;\n  tags?: string[];\n  images?: string[];\n  author?: string;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// Package Components\nexport interface PackageComponent {\n  id?: string;\n  name: string;\n  type: 'accommodation' | 'transport' | 'activity' | 'meal' | 'guide' | 'insurance';\n  description: string;\n  price: number;\n  duration?: string;\n  capacity?: number;\n  category: string;\n  location?: string;\n  available: boolean;\n  providers?: string[];\n  inclusions?: string[];\n  exclusions?: string[];\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// Package Templates\nexport interface PackageTemplate {\n  id?: string;\n  name: string;\n  category: 'economy' | 'standard' | 'premium' | 'luxury';\n  description: string;\n  duration: string;\n  basePrice: number;\n  components: string[]; // Array of component IDs\n  itinerary: Array<{\n    day: number;\n    title: string;\n    description: string;\n    activities: string[];\n  }>;\n  inclusions: string[];\n  exclusions: string[];\n  maxParticipants: number;\n  difficulty: number;\n  bestFor: string;\n  seasons: string[];\n  published: boolean;\n  featured: boolean;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// User Themes\nexport interface UserTheme {\n  id?: string;\n  userId: string;\n  name: string;\n  colors: {\n    primary: string;\n    secondary: string;\n    accent: string;\n    background: string;\n    text: string;\n  };\n  fonts: {\n    heading: string;\n    body: string;\n  };\n  layout: {\n    headerStyle: string;\n    footerStyle: string;\n    sidebarPosition: 'left' | 'right' | 'none';\n  };\n  isActive: boolean;\n  isDefault: boolean;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// PDF Guides\nexport interface Guide {\n  id?: string;\n  title: string;\n  type: 'city' | 'travel' | 'experience' | 'custom';\n  content: {\n    sections: Array<{\n      title: string;\n      content: string;\n      images?: string[];\n    }>;\n  };\n  templateId?: string;\n  associatedIds?: string[]; // Related travel, experience, or city IDs\n  language: string;\n  fileUrl?: string;\n  fileSize?: number;\n  downloadCount: number;\n  isPublic: boolean;\n  createdBy: string;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n}\n\n// Blog Posts\nexport interface BlogPost {\n  id?: string;\n  title: string;\n  slug: string;\n  excerpt: string;\n  content: string;\n  featuredImage?: string;\n  images?: string[];\n  category: 'travel-tips' | 'culture' | 'food' | 'adventure' | 'photography' | 'news';\n  tags: string[];\n  author: {\n    name: string;\n    avatar?: string;\n    bio?: string;\n  };\n  seoData: {\n    title: string;\n    description: string;\n    keywords: string[];\n  };\n  readTime: number; // minutes\n  published: boolean;\n  featured: boolean;\n  views: number;\n  likes: number;\n  comments?: Array<{\n    id: string;\n    author: string;\n    content: string;\n    createdAt: Timestamp;\n  }>;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n  publishedAt?: Timestamp;\n}\n\n// Generic CRUD operations\nexport const firestoreService = {\n  // Create\n  async create<T>(collectionName: string, data: Omit<T, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    // Remove undefined values to prevent Firestore errors\n    const cleanData = this.removeUndefinedValues({\n      ...data,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp()\n    });\n    \n    const docRef = await addDoc(collection(db, collectionName), cleanData);\n    return docRef.id;\n  },\n\n  // Helper method to remove undefined values recursively\n  removeUndefinedValues(obj: any): any {\n    if (obj === null || obj === undefined) {\n      return null;\n    }\n    \n    if (Array.isArray(obj)) {\n      // Filter out undefined elements instead of converting to null\n      return obj\n        .filter(item => item !== undefined)\n        .map(item => this.removeUndefinedValues(item));\n    }\n    \n    if (typeof obj === 'object') {\n      const cleaned: any = {};\n      for (const [key, value] of Object.entries(obj)) {\n        if (value !== undefined) {\n          cleaned[key] = this.removeUndefinedValues(value);\n        }\n      }\n      return cleaned;\n    }\n    \n    return obj;\n  },\n\n  // Read single document\n  async getById<T>(collectionName: string, id: string): Promise<T | null> {\n    const docRef = doc(db, collectionName, id);\n    const docSnap = await getDoc(docRef);\n    \n    if (docSnap.exists()) {\n      return { id: docSnap.id, ...docSnap.data() } as T;\n    }\n    return null;\n  },\n\n  // Read all documents\n  async getAll<T>(collectionName: string): Promise<T[]> {\n    const querySnapshot = await getDocs(collection(db, collectionName));\n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    })) as T[];\n  },\n\n  // Read with query\n  async getWhere<T>(\n    collectionName: string, \n    field: string, \n    operator: any, \n    value: any\n  ): Promise<T[]> {\n    const q = query(collection(db, collectionName), where(field, operator, value));\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    })) as T[];\n  },\n\n  // Update\n  async update<T>(collectionName: string, id: string, data: Partial<T>): Promise<void> {\n    const docRef = doc(db, collectionName, id);\n    // Remove undefined values to prevent Firestore errors\n    const cleanData = this.removeUndefinedValues({\n      ...data,\n      updatedAt: serverTimestamp()\n    });\n    await updateDoc(docRef, cleanData);\n  },\n\n  // Delete\n  async delete(collectionName: string, id: string): Promise<void> {\n    const docRef = doc(db, collectionName, id);\n    await deleteDoc(docRef);\n  },\n\n  // Get published travels\n  async getPublishedTravels(): Promise<Travel[]> {\n    const q = query(\n      collection(db, COLLECTIONS.travels),\n      where('published', '==', true),\n      orderBy('featured', 'desc'),\n      orderBy('createdAt', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => ({\n      ...doc.data(),\n      id: doc.id\n    })) as Travel[];\n  },\n\n  // Get published experiences\n  async getPublishedExperiences(): Promise<Experience[]> {\n    const q = query(\n      collection(db, COLLECTIONS.experiences),\n      where('published', '==', true),\n      orderBy('createdAt', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => ({\n      ...doc.data(),\n      id: doc.id\n    })) as Experience[];\n  },\n\n  // Get user bookings\n  async getUserBookings(userId: string): Promise<Booking[]> {\n    try {\n      const q = query(\n        collection(db, COLLECTIONS.bookings),\n        where('userId', '==', userId),\n        orderBy('createdAt', 'desc')\n      );\n      const querySnapshot = await getDocs(q);\n      return querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })) as Booking[];\n    } catch (error: any) {\n      console.error('Error fetching user bookings:', error);\n      // If error is due to missing index, return empty array\n      if (error.code === 'failed-precondition') {\n        console.warn('Firestore index missing for bookings orderBy, returning empty array');\n        return [];\n      }\n      throw error;\n    }\n  },\n\n  // Create sample bookings for testing (dev only)\n  async createSampleBookings(userId: string): Promise<void> {\n    const sampleBookings = [\n      {\n        userId,\n        status: 'confirmed' as const,\n        personalDetails: {\n          name: 'Mario Rossi',\n          email: 'mario.rossi@email.com',\n          phone: '+39 123 456 7890',\n          travelers: 2,\n          children: 0,\n          departureDate: '2024-12-15',\n          returnDate: '2024-12-22',\n          departureCity: 'Milano'\n        },\n        totalPrice: 890,\n        customRequests: 'Camera vista mare se possibile',\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp()\n      },\n      {\n        userId,\n        status: 'pending' as const,\n        personalDetails: {\n          name: 'Mario Rossi',\n          email: 'mario.rossi@email.com', \n          phone: '+39 123 456 7890',\n          travelers: 1,\n          children: 1,\n          departureDate: '2025-03-20',\n          returnDate: '2025-03-27',\n          departureCity: 'Roma'\n        },\n        totalPrice: 650,\n        customRequests: '',\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp()\n      }\n    ];\n\n    for (const booking of sampleBookings) {\n      await this.create(COLLECTIONS.bookings, booking);\n    }\n  }\n};","size_bytes":14456},"lib/admin.ts":{"content":"// Admin-specific services for dashboard operations\nimport { \n  collection, \n  getDocs, \n  doc, \n  getDoc,\n  query, \n  where, \n  orderBy, \n  limit as firestoreLimit,\n  Timestamp,\n  QuerySnapshot,\n  DocumentData\n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { COLLECTIONS, Travel, Experience, Booking } from './firestore';\nimport { UserProfile } from './auth';\n\n// Dashboard Statistics Interface\nexport interface DashboardStats {\n  totalUsers: number;\n  totalTravels: number;\n  totalExperiences: number;\n  totalBookings: number;\n  pendingBookings: number;\n  totalRevenue: number;\n  recentBookings: Booking[];\n  popularTravels: Travel[];\n}\n\n// Admin Services Class\nexport class AdminService {\n  \n  // Get comprehensive dashboard statistics\n  static async getDashboardStats(): Promise<DashboardStats> {\n    try {\n      // Get all collections in parallel for better performance\n      const [usersSnap, travelsSnap, experiencesSnap, bookingsSnap] = await Promise.all([\n        getDocs(collection(db, COLLECTIONS.users)),\n        getDocs(collection(db, COLLECTIONS.travels)),\n        getDocs(collection(db, COLLECTIONS.experiences)),\n        getDocs(collection(db, COLLECTIONS.bookings))\n      ]);\n\n      // Process bookings data\n      const bookings = bookingsSnap.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Booking[];\n      const pendingBookings = bookings.filter(booking => booking.status === 'pending');\n      const totalRevenue = bookings\n        .filter(booking => booking.status === 'confirmed' || booking.status === 'completed')\n        .reduce((sum, booking) => sum + booking.totalPrice, 0);\n\n      // Get recent bookings (last 10)\n      const recentBookingsQuery = query(\n        collection(db, COLLECTIONS.bookings),\n        orderBy('createdAt', 'desc'),\n        firestoreLimit(10)\n      );\n      const recentBookingsSnap = await getDocs(recentBookingsQuery);\n      const recentBookings = recentBookingsSnap.docs.map(doc => ({ \n        id: doc.id, \n        ...doc.data() \n      })) as Booking[];\n\n      // Get popular travels (featured and published)\n      const popularTravelsQuery = query(\n        collection(db, COLLECTIONS.travels),\n        where('featured', '==', true),\n        where('published', '==', true),\n        orderBy('rating', 'desc'),\n        firestoreLimit(5)\n      );\n      const popularTravelsSnap = await getDocs(popularTravelsQuery);\n      const popularTravels = popularTravelsSnap.docs.map(doc => ({ \n        id: doc.id, \n        ...doc.data() \n      })) as Travel[];\n\n      return {\n        totalUsers: usersSnap.size,\n        totalTravels: travelsSnap.size,\n        totalExperiences: experiencesSnap.size,\n        totalBookings: bookingsSnap.size,\n        pendingBookings: pendingBookings.length,\n        totalRevenue,\n        recentBookings,\n        popularTravels\n      };\n    } catch (error) {\n      console.error('Error fetching dashboard stats:', error);\n      throw error;\n    }\n  }\n\n  // Get all users with pagination\n  static async getUsers(limit: number = 50): Promise<UserProfile[]> {\n    try {\n      const usersQuery = query(\n        collection(db, COLLECTIONS.users),\n        orderBy('createdAt', 'desc'),\n        firestoreLimit(limit)\n      );\n      const snapshot = await getDocs(usersQuery);\n      return snapshot.docs.map(doc => ({ \n        uid: doc.id, \n        ...doc.data() \n      } as UserProfile));\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      throw error;\n    }\n  }\n\n  // Get all travels with filters\n  static async getTravels(filters?: {\n    published?: boolean;\n    featured?: boolean;\n    category?: string;\n  }): Promise<Travel[]> {\n    try {\n      const baseCollection = collection(db, COLLECTIONS.travels);\n      \n      if (filters) {\n        const constraints = [];\n        if (filters.published !== undefined) constraints.push(where('published', '==', filters.published));\n        if (filters.featured !== undefined) constraints.push(where('featured', '==', filters.featured));\n        if (filters.category) constraints.push(where('category', '==', filters.category));\n        \n        if (constraints.length > 0) {\n          constraints.push(orderBy('createdAt', 'desc'));\n          const travelsQuery = query(baseCollection, ...constraints);\n          const snapshot = await getDocs(travelsQuery);\n          return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Travel[];\n        }\n      }\n      \n      const snapshot = await getDocs(baseCollection);\n      return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Travel[];\n    } catch (error) {\n      console.error('Error fetching travels:', error);\n      throw error;\n    }\n  }\n\n  // Get all experiences with filters  \n  static async getExperiences(filters?: {\n    published?: boolean;\n    category?: string;\n  }): Promise<Experience[]> {\n    try {\n      const baseCollection = collection(db, COLLECTIONS.experiences);\n      \n      if (filters) {\n        const constraints = [];\n        if (filters.published !== undefined) constraints.push(where('published', '==', filters.published));\n        if (filters.category) constraints.push(where('category', '==', filters.category));\n        \n        if (constraints.length > 0) {\n          constraints.push(orderBy('createdAt', 'desc'));\n          const experiencesQuery = query(baseCollection, ...constraints);\n          const snapshot = await getDocs(experiencesQuery);\n          return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Experience[];\n        }\n      }\n      \n      const snapshot = await getDocs(baseCollection);\n      return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Experience[];\n    } catch (error) {\n      console.error('Error fetching experiences:', error);\n      throw error;\n    }\n  }\n\n  // Get all bookings with filters\n  static async getBookings(filters?: {\n    status?: string;\n    userId?: string;\n    limit?: number;\n  }): Promise<Booking[]> {\n    try {\n      const baseCollection = collection(db, COLLECTIONS.bookings);\n      const constraints = [];\n      \n      if (filters?.status) constraints.push(where('status', '==', filters.status));\n      if (filters?.userId) constraints.push(where('userId', '==', filters.userId));\n      \n      constraints.push(orderBy('createdAt', 'desc'));\n      if (filters?.limit) constraints.push(firestoreLimit(filters.limit));\n      \n      const bookingsQuery = query(baseCollection, ...constraints);\n      const snapshot = await getDocs(bookingsQuery);\n      return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Booking[];\n    } catch (error) {\n      console.error('Error fetching bookings:', error);\n      throw error;\n    }\n  }\n\n  // Get user details with their booking history\n  static async getUserDetails(userId: string): Promise<{\n    user: UserProfile | null;\n    bookings: Booking[];\n  }> {\n    try {\n      const [userDoc, bookingsSnap] = await Promise.all([\n        getDoc(doc(db, COLLECTIONS.users, userId)),\n        getDocs(query(\n          collection(db, COLLECTIONS.bookings),\n          where('userId', '==', userId),\n          orderBy('createdAt', 'desc')\n        ))\n      ]);\n\n      const user = userDoc.exists() ? { uid: userDoc.id, ...userDoc.data() } as UserProfile : null;\n      const bookings = bookingsSnap.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Booking[];\n\n      return { user, bookings };\n    } catch (error) {\n      console.error('Error fetching user details:', error);\n      throw error;\n    }\n  }\n\n  // Get booking analytics\n  static async getBookingAnalytics(): Promise<{\n    bookingsByStatus: { [key: string]: number };\n    bookingsByMonth: { month: string; count: number; revenue: number }[];\n    topDestinations: { name: string; bookings: number }[];\n  }> {\n    try {\n      const bookingsSnap = await getDocs(collection(db, COLLECTIONS.bookings));\n      const bookings = bookingsSnap.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Booking[];\n\n      // Bookings by status\n      const bookingsByStatus = bookings.reduce((acc, booking) => {\n        acc[booking.status] = (acc[booking.status] || 0) + 1;\n        return acc;\n      }, {} as { [key: string]: number });\n\n      // Bookings by month (last 12 months)\n      const monthlyData: { [key: string]: { count: number; revenue: number } } = {};\n      bookings.forEach(booking => {\n        const date = booking.createdAt.toDate();\n        const monthKey = date.toLocaleDateString('it-IT', { year: 'numeric', month: 'short' });\n        \n        if (!monthlyData[monthKey]) {\n          monthlyData[monthKey] = { count: 0, revenue: 0 };\n        }\n        \n        monthlyData[monthKey].count++;\n        if (booking.status === 'confirmed' || booking.status === 'completed') {\n          monthlyData[monthKey].revenue += booking.totalPrice;\n        }\n      });\n\n      const bookingsByMonth = Object.entries(monthlyData).map(([month, data]) => ({\n        month,\n        count: data.count,\n        revenue: data.revenue\n      }));\n\n      // Top destinations would require travel data cross-reference\n      // For now, return empty array\n      const topDestinations: { name: string; bookings: number }[] = [];\n\n      return {\n        bookingsByStatus,\n        bookingsByMonth,\n        topDestinations\n      };\n    } catch (error) {\n      console.error('Error fetching booking analytics:', error);\n      throw error;\n    }\n  }\n}","size_bytes":9376},"app/api/admin/populate-services/route.ts":{"content":"// API Endpoint for Populating Services Database\nimport { NextRequest, NextResponse } from 'next/server'\nimport { requireAdmin, adminDb } from '@/lib/auth-admin'\nimport { FieldValue } from 'firebase-admin/firestore'\n\nconst servicesData = [\n  // 1. Guide Private\n  {\n    name: \"Guida Privata Professionale\",\n    slug: \"guida-privata-professionale\", \n    description: \"Guide turistiche locali esperte e certificate per esperienze personalizzate. Parlano italiano, francese, inglese e arabo. Perfette per scoprire i segreti nascosti del Marocco.\",\n    category: \"guide\",\n    type: \"optional\",\n    price: 50,\n    priceType: \"per_day\",\n    currency: \"EUR\",\n    locations: [\"Marrakech\", \"Fes\", \"Casablanca\", \"Rabat\", \"Chefchaouen\", \"Essaouira\", \"Merzouga\"],\n    travelTypes: [\"imperial-cities\", \"desert\", \"coast\", \"mountains\", \"cultural\", \"custom\"],\n    status: \"published\",\n    published: true\n  },\n\n  // 2. Noleggio Auto \n  {\n    name: \"Noleggio Auto con Conducente\",\n    slug: \"noleggio-auto-conducente\",\n    description: \"Servizio noleggio auto con conducente professionale. Veicoli moderni, climatizzati e confortevoli. Include assicurazione completa e conducente esperto delle strade marocchine.\",\n    category: \"transport\", \n    type: \"optional\",\n    price: 80,\n    priceType: \"per_day\",\n    currency: \"EUR\",\n    locations: [\"Tutto il Marocco\", \"Aeroporti\", \"Hotel\", \"Stazioni\"],\n    travelTypes: [\"imperial-cities\", \"desert\", \"coast\", \"mountains\", \"custom\"],\n    status: \"published\",\n    published: true\n  },\n\n  // 3. Assicurazioni\n  {\n    name: \"Assicurazione Viaggio Completa\",\n    slug: \"assicurazione-viaggio-completa\",\n    description: \"Copertura assicurativa completa per il tuo viaggio in Marocco. Include assistenza medica, rimborso spese, bagagli, annullamento viaggio e assistenza 24/7 in italiano.\",\n    category: \"insurance\",\n    type: \"optional\", \n    price: 25,\n    priceType: \"per_person\",\n    currency: \"EUR\",\n    locations: [\"Valida in tutto il Marocco\"],\n    travelTypes: [\"imperial-cities\", \"desert\", \"coast\", \"mountains\", \"cultural\", \"custom\"],\n    status: \"published\",\n    published: true\n  },\n\n  // 4. Trasferimenti\n  {\n    name: \"Trasferimenti Aeroporto-Hotel\",\n    slug: \"trasferimenti-aeroporto-hotel\",\n    description: \"Servizio trasferimenti privati da/per aeroporti e hotel. Veicoli confortevoli, conducenti professionali, meet & greet all'arrivo. Disponibile 24/7 per tutti i principali aeroporti.\",\n    category: \"transport\",\n    type: \"addon\",\n    price: 35,\n    priceType: \"flat_rate\", \n    currency: \"EUR\",\n    locations: [\"Aeroporto Mohammed V Casablanca\", \"Aeroporto Marrakech\", \"Aeroporto Fes\", \"Aeroporto Agadir\", \"Aeroporto Tangeri\"],\n    travelTypes: [\"imperial-cities\", \"desert\", \"coast\", \"mountains\", \"cultural\", \"custom\"],\n    status: \"published\", \n    published: true\n  }\n];\n\nexport async function POST(request: NextRequest) {\n  try {\n    // Require admin authentication\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Authentication required' }, { status: 401 })\n    }\n\n    await requireAdmin(idToken)\n\n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n\n    const results = []\n    \n    for (const serviceData of servicesData) {\n      try {\n        // Check if service already exists\n        const existingQuery = await adminDb\n          .collection('services')\n          .where('slug', '==', serviceData.slug)\n          .get()\n\n        if (!existingQuery.empty) {\n          console.log(`Service ${serviceData.name} already exists, skipping...`)\n          results.push({\n            name: serviceData.name,\n            status: 'skipped',\n            reason: 'already exists'\n          })\n          continue\n        }\n\n        // Create new service\n        const docData = {\n          ...serviceData,\n          createdAt: FieldValue.serverTimestamp(),\n          updatedAt: FieldValue.serverTimestamp()\n        }\n\n        const docRef = await adminDb.collection('services').add(docData)\n        \n        results.push({\n          id: docRef.id,\n          name: serviceData.name,\n          status: 'created',\n          category: serviceData.category\n        })\n\n        console.log(`‚úÖ Created service: ${serviceData.name} (${docRef.id})`)\n      } catch (error) {\n        console.error(`‚ùå Error creating service ${serviceData.name}:`, error)\n        results.push({\n          name: serviceData.name,\n          status: 'error',\n          error: error instanceof Error ? error.message : 'Unknown error'\n        })\n      }\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: `Processed ${servicesData.length} services`,\n      results,\n      summary: {\n        created: results.filter(r => r.status === 'created').length,\n        skipped: results.filter(r => r.status === 'skipped').length,\n        errors: results.filter(r => r.status === 'error').length\n      }\n    })\n\n  } catch (error) {\n    console.error('Populate services error:', error)\n    return NextResponse.json(\n      { \n        error: 'Internal server error',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      }, \n      { status: 500 }\n    )\n  }\n}\n\nexport async function GET() {\n  return NextResponse.json({\n    message: 'Services population endpoint',\n    services: servicesData.map(s => ({\n      name: s.name,\n      category: s.category,\n      price: `${s.price} ${s.currency}`,\n      type: s.type\n    }))\n  })\n}","size_bytes":5563},"app/servizi/assicurazioni/AssicurazioniClientPage.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Shield, Heart, Plane, Phone, CheckCircle, X, CreditCard, ArrowRight, Star, Briefcase } from \"lucide-react\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nconst structuredData = {\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Service\",\n  name: \"Assicurazioni Viaggio Marocco\",\n  description: \"Assicurazioni viaggio complete per il Marocco con copertura medica, bagagli e annullamento\",\n  provider: {\n    \"@type\": \"Organization\",\n    name: \"Morocco Dreams\",\n  },\n  areaServed: \"Morocco\",\n  offers: [\n    {\n      \"@type\": \"Offer\",\n      name: \"Piano Essenziale\",\n      price: \"15\",\n      priceCurrency: \"EUR\",\n    },\n    {\n      \"@type\": \"Offer\",\n      name: \"Piano Completo\",\n      price: \"35\",\n      priceCurrency: \"EUR\",\n    },\n    {\n      \"@type\": \"Offer\",\n      name: \"Piano Premium\",\n      price: \"65\",\n      priceCurrency: \"EUR\",\n    },\n  ],\n}\n\nconst insurancePlans = [\n  {\n    id: \"essential\",\n    name: \"Essenziale\",\n    description: \"Protezione base per viaggi brevi\",\n    price: 15,\n    duration: \"fino a 7 giorni\",\n    coverage: 50000,\n    popular: false,\n    features: [\n      \"Spese mediche di emergenza\",\n      \"Rimpatrio sanitario\",\n      \"Bagaglio smarrito (‚Ç¨500)\",\n      \"Annullamento viaggio (‚Ç¨1.000)\",\n      \"Assistenza telefonica 24/7\",\n    ],\n    notIncluded: [\n      \"Attivit√† sportive estreme\",\n      \"Malattie preesistenti\",\n      \"Ritardi voli oltre 4h\",\n      \"Responsabilit√† civile\",\n    ],\n  },\n  {\n    id: \"complete\",\n    name: \"Completa\",\n    description: \"Protezione completa per ogni esigenza\",\n    price: 35,\n    duration: \"fino a 30 giorni\",\n    coverage: 100000,\n    popular: true,\n    features: [\n      \"Spese mediche di emergenza\",\n      \"Rimpatrio sanitario\",\n      \"Bagaglio smarrito (‚Ç¨1.500)\",\n      \"Annullamento viaggio (‚Ç¨5.000)\",\n      \"Ritardi e cancellazioni voli\",\n      \"Responsabilit√† civile (‚Ç¨50.000)\",\n      \"Assistenza legale\",\n      \"Spese di prolungamento soggiorno\",\n    ],\n    notIncluded: [\"Attivit√† sportive estreme\", \"Danni da alcol/droghe\", \"Guerra e terrorismo\"],\n  },\n  {\n    id: \"premium\",\n    name: \"Premium\",\n    description: \"Massima protezione per viaggi di lusso\",\n    price: 65,\n    duration: \"fino a 90 giorni\",\n    coverage: 200000,\n    popular: false,\n    features: [\n      \"Spese mediche di emergenza\",\n      \"Rimpatrio sanitario\",\n      \"Bagaglio smarrito (‚Ç¨3.000)\",\n      \"Annullamento viaggio (‚Ç¨10.000)\",\n      \"Ritardi e cancellazioni voli\",\n      \"Responsabilit√† civile (‚Ç¨100.000)\",\n      \"Assistenza legale premium\",\n      \"Spese di prolungamento soggiorno\",\n      \"Attivit√† sportive incluse\",\n      \"Malattie preesistenti coperte\",\n      \"Concierge service 24/7\",\n    ],\n    notIncluded: [\"Danni intenzionali\", \"Guerra dichiarata\", \"Attivit√† illegali\"],\n  },\n]\n\nconst coverageTypes = [\n  {\n    icon: Heart,\n    title: \"Assistenza Medica\",\n    description: \"Spese mediche, ospedalizzazione e rimpatrio sanitario\",\n    details: [\n      \"Consulti medici e visite specialistiche\",\n      \"Ricoveri ospedalieri e interventi chirurgici\",\n      \"Farmaci prescritti e cure dentarie d'emergenza\",\n      \"Rimpatrio sanitario con aereo ambulanza\",\n    ],\n  },\n  {\n    icon: Plane,\n    title: \"Viaggio e Trasporti\",\n    description: \"Annullamenti, ritardi e problemi di viaggio\",\n    details: [\n      \"Rimborso per annullamento viaggio\",\n      \"Spese per ritardi e cancellazioni voli\",\n      \"Perdita coincidenze e overbooking\",\n      \"Rientro anticipato per emergenze familiari\",\n    ],\n  },\n  {\n    icon: Briefcase,\n    title: \"Bagagli e Effetti\",\n    description: \"Protezione per bagagli e oggetti personali\",\n    details: [\n      \"Smarrimento, furto o danneggiamento bagagli\",\n      \"Ritardo nella consegna bagagli\",\n      \"Documenti di viaggio smarriti\",\n      \"Oggetti di valore e apparecchiature elettroniche\",\n    ],\n  },\n  {\n    icon: Shield,\n    title: \"Responsabilit√† Civile\",\n    description: \"Copertura per danni a terzi durante il viaggio\",\n    details: [\n      \"Danni involontari a persone\",\n      \"Danni a propriet√† di terzi\",\n      \"Spese legali e di difesa\",\n      \"Risarcimenti fino alla somma assicurata\",\n    ],\n  },\n]\n\nconst testimonials = [\n  {\n    name: \"Giulia Romano\",\n    location: \"Torino, Italia\",\n    plan: \"Completa\",\n    rating: 5,\n    comment:\n      \"Grazie all'assicurazione ho evitato spese enormi quando mio figlio si √® rotto il braccio a Marrakech. Assistenza impeccabile e rimborso veloce.\",\n    incident: \"Emergenza medica\",\n    date: \"28 Gennaio 2024\",\n  },\n  {\n    name: \"Fran√ßois Leroy\",\n    location: \"Marseille, France\",\n    plan: \"Premium\",\n    rating: 5,\n    comment:\n      \"Vol annul√© √† cause d'une gr√®ve, l'assurance a couvert tous les frais d'h√¥tel et de repas. Service client tr√®s r√©actif.\",\n    incident: \"Volo cancellato\",\n    date: \"22 Gennaio 2024\",\n  },\n  {\n    name: \"David Smith\",\n    location: \"Manchester, UK\",\n    plan: \"Essenziale\",\n    rating: 4,\n    comment: \"Lost luggage was covered quickly. The 24/7 helpline was very helpful in guiding me through the process.\",\n    incident: \"Bagaglio smarrito\",\n    date: \"15 Gennaio 2024\",\n  },\n]\n\nconst faqData = [\n  {\n    question: \"Quando devo acquistare l'assicurazione?\",\n    answer:\n      \"Ti consigliamo di acquistare l'assicurazione entro 7 giorni dalla prenotazione del viaggio per avere la copertura completa per l'annullamento.\",\n  },\n  {\n    question: \"Cosa fare in caso di emergenza?\",\n    answer:\n      \"Contatta immediatamente il nostro numero di emergenza 24/7: +39 800 123 456. Il nostro team ti assister√† in italiano e organizzer√† l'intervento necessario.\",\n  },\n  {\n    question: \"Come richiedere un rimborso?\",\n    answer:\n      \"Puoi richiedere il rimborso online tramite il nostro portale, allegando tutta la documentazione necessaria. I rimborsi vengono elaborati entro 15 giorni lavorativi.\",\n  },\n  {\n    question: \"Le attivit√† sportive sono coperte?\",\n    answer:\n      \"Le attivit√† sportive ricreative sono incluse nei piani Completa e Premium. Per sport estremi √® necessaria una copertura aggiuntiva.\",\n  },\n]\n\nexport default function AssicurazioniClientPage() {\n  const [selectedPlan, setSelectedPlan] = useState(insurancePlans[1])\n  const [activeTab, setActiveTab] = useState(\"plans\")\n\n  return (\n    <>\n      <script type=\"application/ld+json\" dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }} />\n\n      <div className=\"min-h-screen bg-background\">\n        <section className=\"relative py-20 overflow-hidden\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-cyan-600/20\" />\n          <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center\">\n              <div className=\"flex justify-center mb-6\">\n                <div className=\"p-4 bg-blue-100 dark:bg-blue-900/30 rounded-full\">\n                  <Shield className=\"h-12 w-12 text-blue-600 dark:text-blue-400\" />\n                </div>\n              </div>\n              <h1 className=\"text-4xl md:text-6xl font-bold text-foreground mb-6\">\n                Assicurazioni <span className=\"text-blue-600 dark:text-blue-400\">Viaggio</span>\n              </h1>\n              <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto mb-8\">\n                Viaggia in Marocco con la massima tranquillit√†. Protezione completa per te e la tua famiglia con\n                coperture fino a ‚Ç¨200.000 e assistenza 24/7 in italiano.\n              </p>\n              <div className=\"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground\">\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Assistenza 24/7</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Rimborsi rapidi</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Copertura mondiale</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/* Insurance Plans */}\n        <section className=\"py-20\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Scegli il Tuo Piano</h2>\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n                Tre livelli di protezione per ogni tipo di viaggio e budget\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-3 gap-8 mb-12\">\n              {insurancePlans.map((plan) => (\n                <Card\n                  key={plan.id}\n                  className={`relative cursor-pointer transition-all duration-300 hover:shadow-xl ${\n                    selectedPlan.id === plan.id ? \"ring-2 ring-blue-500 shadow-lg\" : \"hover:shadow-lg\"\n                  } ${plan.popular ? \"border-blue-500\" : \"\"}`}\n                  onClick={() => setSelectedPlan(plan)}\n                >\n                  {plan.popular && (\n                    <div className=\"absolute -top-4 left-1/2 transform -translate-x-1/2\">\n                      <Badge className=\"bg-blue-600 text-white px-4 py-1\">Pi√π Popolare</Badge>\n                    </div>\n                  )}\n                  \n                  {/* Wishlist Button */}\n                  <div className=\"absolute top-2 right-2 z-10\" onClick={(e) => e.stopPropagation()}>\n                    <WishlistButton\n                      itemId={`insurance-${plan.id}`}\n                      itemType=\"service\"\n                      itemTitle={`Assicurazione ${plan.name}`}\n                      itemPrice={plan.price}\n                      itemDescription={plan.description}\n                    />\n                  </div>\n\n                  <CardHeader className=\"text-center\">\n                    <div className=\"w-16 h-16 mx-auto mb-4 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center\">\n                      <Shield className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                    <CardTitle className=\"text-2xl text-foreground\">{plan.name}</CardTitle>\n                    <CardDescription>{plan.description}</CardDescription>\n                  </CardHeader>\n\n                  <CardContent className=\"text-center\">\n                    <div className=\"mb-6\">\n                      <div className=\"text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2\">‚Ç¨{plan.price}</div>\n                      <p className=\"text-sm text-muted-foreground\">{plan.duration}</p>\n                      <p className=\"text-sm font-medium text-foreground mt-2\">\n                        Copertura fino a ‚Ç¨{plan.coverage.toLocaleString()}\n                      </p>\n                    </div>\n\n                    <ul className=\"space-y-2 text-sm text-left mb-6\">\n                      {plan.features.slice(0, 5).map((feature, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                          <span>{feature}</span>\n                        </li>\n                      ))}\n                      {plan.features.length > 5 && (\n                        <li className=\"text-blue-600 dark:text-blue-400 font-medium\">\n                          +{plan.features.length - 5} altri servizi\n                        </li>\n                      )}\n                    </ul>\n\n                    <Button\n                      className={`w-full ${\n                        plan.popular ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-gray-600 hover:bg-gray-700\"\n                      }`}\n                    >\n                      Scegli {plan.name}\n                    </Button>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n\n            {/* Selected Plan Details */}\n            <Card className=\"mb-12\">\n              <CardHeader>\n                <CardTitle className=\"text-2xl flex items-center gap-3 text-foreground\">\n                  <Shield className=\"h-6 w-6 text-blue-600\" />\n                  Piano {selectedPlan.name} - Dettagli Completi\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid md:grid-cols-2 gap-8\">\n                  <div>\n                    <h4 className=\"font-semibold mb-4 text-green-600 dark:text-green-400 flex items-center gap-2\">\n                      <CheckCircle className=\"h-5 w-5\" />\n                      Servizi Inclusi:\n                    </h4>\n                    <ul className=\"space-y-2 mb-6\">\n                      {selectedPlan.features.map((feature, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                          <span className=\"text-sm text-muted-foreground\">{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n\n                  <div>\n                    <h4 className=\"font-semibold mb-4 text-red-600 dark:text-red-400 flex items-center gap-2\">\n                      <X className=\"h-5 w-5\" />\n                      Esclusioni:\n                    </h4>\n                    <ul className=\"space-y-2 mb-6\">\n                      {selectedPlan.notIncluded.map((exclusion, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <X className=\"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0\" />\n                          <span className=\"text-sm text-muted-foreground\">{exclusion}</span>\n                        </li>\n                      ))}\n                    </ul>\n\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <span className=\"font-semibold text-foreground\">Prezzo totale:</span>\n                        <span className=\"text-3xl font-bold text-blue-600 dark:text-blue-400\">\n                          ‚Ç¨{selectedPlan.price}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground mb-4\">\n                        Copertura: ‚Ç¨{selectedPlan.coverage.toLocaleString()} ‚Ä¢ {selectedPlan.duration}\n                      </p>\n                      <Button className=\"w-full bg-blue-600 hover:bg-blue-700\">\n                        Acquista Piano {selectedPlan.name}\n                        <ArrowRight className=\"ml-2 h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </section>\n\n        <section className=\"py-20 bg-muted/50\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Tipi di Copertura</h2>\n              <p className=\"text-lg text-muted-foreground\">Protezione completa per ogni aspetto del tuo viaggio</p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n              {coverageTypes.map((coverage, index) => {\n                const IconComponent = coverage.icon\n                return (\n                  <Card key={index} className=\"hover:shadow-lg transition-shadow bg-card\">\n                    <CardHeader className=\"text-center\">\n                      <div className=\"w-16 h-16 mx-auto mb-4 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center\">\n                        <IconComponent className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <CardTitle className=\"text-lg text-card-foreground\">{coverage.title}</CardTitle>\n                      <CardDescription>{coverage.description}</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <ul className=\"space-y-2 text-sm\">\n                        {coverage.details.map((detail, detailIndex) => (\n                          <li key={detailIndex} className=\"flex items-start gap-2\">\n                            <CheckCircle className=\"h-3 w-3 text-green-500 mt-1 flex-shrink-0\" />\n                            <span className=\"text-muted-foreground\">{detail}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </CardContent>\n                  </Card>\n                )\n              })}\n            </div>\n          </div>\n        </section>\n\n        {/* Testimonials */}\n        <section className=\"py-20\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Storie di Successo</h2>\n              <p className=\"text-lg text-muted-foreground\">\n                Come abbiamo aiutato i nostri clienti in situazioni di emergenza\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-3 gap-8\">\n              {testimonials.map((testimonial, index) => (\n                <Card key={index} className=\"hover:shadow-lg transition-shadow bg-card\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center gap-1 mb-4\">\n                      {[...Array(testimonial.rating)].map((_, i) => (\n                        <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                      ))}\n                    </div>\n\n                    <Badge\n                      variant=\"secondary\"\n                      className=\"mb-4 bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300\"\n                    >\n                      {testimonial.incident}\n                    </Badge>\n\n                    <p className=\"text-muted-foreground mb-4 italic\">\"{testimonial.comment}\"</p>\n\n                    <div className=\"border-t pt-4\">\n                      <p className=\"font-medium text-foreground\">{testimonial.name}</p>\n                      <p className=\"text-sm text-muted-foreground\">{testimonial.location}</p>\n                      <p className=\"text-sm text-blue-600 dark:text-blue-400\">Piano: {testimonial.plan}</p>\n                      <p className=\"text-xs text-muted-foreground mt-1\">{testimonial.date}</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-20 bg-muted/50\">\n          <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Domande Frequenti</h2>\n              <p className=\"text-lg text-muted-foreground\">\n                Risposte alle domande pi√π comuni sulle nostre assicurazioni\n              </p>\n            </div>\n\n            <div className=\"space-y-6\">\n              {faqData.map((faq, index) => (\n                <Card key={index} className=\"bg-card\">\n                  <CardContent className=\"p-6\">\n                    <h3 className=\"font-semibold text-lg mb-3 text-card-foreground\">{faq.question}</h3>\n                    <p className=\"text-muted-foreground\">{faq.answer}</p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        {/* CTA Section */}\n        <section className=\"py-20 bg-gradient-to-r from-blue-600 to-cyan-600\">\n          <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">Proteggi il Tuo Viaggio Ora</h2>\n            <p className=\"text-xl text-blue-100 mb-8\">\n              Assistenza 24/7 in italiano ‚Ä¢ Rimborsi rapidi ‚Ä¢ Copertura mondiale\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Button size=\"lg\" variant=\"secondary\" className=\"bg-white text-blue-600 hover:bg-blue-50\">\n                <Phone className=\"mr-2 h-5 w-5\" />\n                Emergenze: +39 800 123 456\n              </Button>\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-white text-white hover:bg-white hover:text-blue-600 bg-transparent\"\n              >\n                <CreditCard className=\"mr-2 h-5 w-5\" />\n                Acquista Assicurazione\n              </Button>\n            </div>\n          </div>\n        </section>\n      </div>\n    </>\n  )\n}\n","size_bytes":21321},"app/auth/login/page.tsx":{"content":"\"use client\";\n\nimport { useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter } from 'next/navigation';\nimport { Mail, Lock, Loader2, Eye, EyeOff } from 'lucide-react';\nimport Link from 'next/link';\n\nexport default function LoginPage() {\n  const { signIn, signUp } = useAuth();\n  const router = useRouter();\n  const [isLogin, setIsLogin] = useState(true);\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    confirmPassword: '',\n    name: ''\n  });\n  const [error, setError] = useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      if (!isLogin && formData.password !== formData.confirmPassword) {\n        throw new Error('Le password non coincidono');\n      }\n\n      if (isLogin) {\n        await signIn(formData.email, formData.password);\n      } else {\n        await signUp(formData.email, formData.password, formData.name);\n      }\n      \n      router.push('/dashboard');\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 dark:from-background dark:to-muted flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <Link href=\"/\" className=\"inline-block\">\n            <h1 className=\"text-3xl font-bold text-orange-600 mb-2\">Morocco Dreams</h1>\n          </Link>\n          <p className=\"text-muted-foreground\">\n            {isLogin ? 'Accedi al tuo account' : 'Crea il tuo account'}\n          </p>\n        </div>\n\n        {/* Form */}\n        <div className=\"bg-card border border-border rounded-2xl shadow-xl p-8\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {error && (\n              <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300 text-sm\">\n                {error}\n              </div>\n            )}\n\n            {!isLogin && (\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\n                  Nome Completo\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={formData.name}\n                  onChange={handleChange}\n                  required\n                  className=\"w-full px-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n                  placeholder=\"Il tuo nome completo\"\n                />\n              </div>\n            )}\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Email\n              </label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleChange}\n                  required\n                  className=\"w-full pl-10 pr-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n                  placeholder=\"la-tua-email@esempio.com\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  name=\"password\"\n                  value={formData.password}\n                  onChange={handleChange}\n                  required\n                  className=\"w-full pl-10 pr-12 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n                  placeholder=\"La tua password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                >\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n            </div>\n\n            {!isLogin && (\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\n                  Conferma Password\n                </label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n                  <input\n                    type={showPassword ? 'text' : 'password'}\n                    name=\"confirmPassword\"\n                    value={formData.confirmPassword}\n                    onChange={handleChange}\n                    required\n                    className=\"w-full pl-10 pr-4 py-3 border border-border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground transition-colors\"\n                    placeholder=\"Conferma la password\"\n                  />\n                </div>\n              </div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-6 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  {isLogin ? 'Accesso in corso...' : 'Registrazione in corso...'}\n                </>\n              ) : (\n                isLogin ? 'Accedi' : 'Registrati'\n              )}\n            </button>\n          </form>\n\n          {/* Toggle */}\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-muted-foreground\">\n              {isLogin ? 'Non hai un account?' : 'Hai gi√† un account?'}\n              <button\n                onClick={() => setIsLogin(!isLogin)}\n                className=\"ml-2 text-orange-600 hover:text-orange-700 font-semibold transition-colors\"\n              >\n                {isLogin ? 'Registrati' : 'Accedi'}\n              </button>\n            </p>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"text-center mt-6\">\n          <Link href=\"/\" className=\"text-muted-foreground hover:text-foreground transition-colors\">\n            ‚Üê Torna al sito\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":7582},"pnpm-lock.yaml":{"content":"lockfileVersion: '9.0'\n\nsettings:\n  autoInstallPeers: true\n  excludeLinksFromLockfile: false\n\nimporters:\n\n  .:\n    dependencies:\n      '@hookform/resolvers':\n        specifier: ^3.10.0\n        version: 3.10.0(react-hook-form@7.60.0(react@18.0.0))\n      '@radix-ui/react-accordion':\n        specifier: 1.2.2\n        version: 1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-alert-dialog':\n        specifier: 1.1.4\n        version: 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-aspect-ratio':\n        specifier: 1.1.1\n        version: 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-avatar':\n        specifier: 1.1.2\n        version: 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-checkbox':\n        specifier: 1.1.3\n        version: 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-collapsible':\n        specifier: 1.1.2\n        version: 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-context-menu':\n        specifier: 2.2.4\n        version: 2.2.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-dialog':\n        specifier: 1.1.4\n        version: 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-dropdown-menu':\n        specifier: 2.1.4\n        version: 2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-hover-card':\n        specifier: 1.1.4\n        version: 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-label':\n        specifier: 2.1.1\n        version: 2.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-menubar':\n        specifier: 1.1.4\n        version: 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-navigation-menu':\n        specifier: 1.2.3\n        version: 1.2.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-popover':\n        specifier: 1.1.4\n        version: 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-progress':\n        specifier: 1.1.1\n        version: 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-radio-group':\n        specifier: 1.2.2\n        version: 1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-scroll-area':\n        specifier: 1.2.2\n        version: 1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-select':\n        specifier: 2.1.4\n        version: 2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-separator':\n        specifier: 1.1.1\n        version: 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slider':\n        specifier: 1.2.2\n        version: 1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot':\n        specifier: latest\n        version: 1.2.3(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-switch':\n        specifier: 1.1.2\n        version: 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-tabs':\n        specifier: 1.1.2\n        version: 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-toast':\n        specifier: 1.2.4\n        version: 1.2.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-toggle':\n        specifier: 1.1.1\n        version: 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-toggle-group':\n        specifier: 1.1.1\n        version: 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-tooltip':\n        specifier: 1.1.6\n        version: 1.1.6(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@vercel/analytics':\n        specifier: 1.3.1\n        version: 1.3.1(next@14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0))(react@18.0.0)\n      autoprefixer:\n        specifier: ^10.4.20\n        version: 10.4.20(postcss@8.5.0)\n      class-variance-authority:\n        specifier: ^0.7.1\n        version: 0.7.1\n      clsx:\n        specifier: ^2.1.1\n        version: 2.1.1\n      cmdk:\n        specifier: 1.0.4\n        version: 1.0.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      date-fns:\n        specifier: 4.1.0\n        version: 4.1.0\n      embla-carousel-react:\n        specifier: 8.5.1\n        version: 8.5.1(react@18.0.0)\n      geist:\n        specifier: ^1.3.1\n        version: 1.3.1(next@14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0))\n      input-otp:\n        specifier: 1.4.1\n        version: 1.4.1(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      jspdf:\n        specifier: latest\n        version: 3.0.2\n      jspdf-autotable:\n        specifier: latest\n        version: 5.0.2(jspdf@3.0.2)\n      lucide-react:\n        specifier: ^0.454.0\n        version: 0.454.0(react@18.0.0)\n      next:\n        specifier: 14.2.16\n        version: 14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      next-themes:\n        specifier: latest\n        version: 0.4.6(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react:\n        specifier: ^18\n        version: 18.0.0\n      react-day-picker:\n        specifier: 9.8.0\n        version: 9.8.0(react@18.0.0)\n      react-dom:\n        specifier: ^18\n        version: 18.0.0(react@18.0.0)\n      react-hook-form:\n        specifier: ^7.60.0\n        version: 7.60.0(react@18.0.0)\n      react-resizable-panels:\n        specifier: ^2.1.7\n        version: 2.1.7(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      recharts:\n        specifier: 2.15.4\n        version: 2.15.4(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      sonner:\n        specifier: ^1.7.4\n        version: 1.7.4(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      tailwind-merge:\n        specifier: ^2.5.5\n        version: 2.5.5\n      tailwindcss-animate:\n        specifier: ^1.0.7\n        version: 1.0.7(tailwindcss@4.1.9)\n      vaul:\n        specifier: ^0.9.9\n        version: 0.9.9(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      zod:\n        specifier: 3.25.67\n        version: 3.25.67\n    devDependencies:\n      '@tailwindcss/postcss':\n        specifier: ^4.1.9\n        version: 4.1.9\n      '@types/node':\n        specifier: ^22\n        version: 22.0.0\n      '@types/react':\n        specifier: ^18\n        version: 18.0.0\n      '@types/react-dom':\n        specifier: ^18\n        version: 18.0.0\n      postcss:\n        specifier: ^8.5\n        version: 8.5.0\n      tailwindcss:\n        specifier: ^4.1.9\n        version: 4.1.9\n      tw-animate-css:\n        specifier: 1.3.3\n        version: 1.3.3\n      typescript:\n        specifier: ^5\n        version: 5.0.2\n\npackages:\n\n  '@alloc/quick-lru@5.2.0':\n    resolution: {integrity: sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==}\n    engines: {node: '>=10'}\n\n  '@ampproject/remapping@2.3.0':\n    resolution: {integrity: sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw==}\n    engines: {node: '>=6.0.0'}\n\n  '@babel/runtime@7.28.2':\n    resolution: {integrity: sha512-KHp2IflsnGywDjBWDkR9iEqiWSpc8GIi0lgTT3mOElT0PP1tG26P4tmFI2YvAdzgq9RGyoHZQEIEdZy6Ec5xCA==}\n    engines: {node: '>=6.9.0'}\n\n  '@date-fns/tz@1.2.0':\n    resolution: {integrity: sha512-LBrd7MiJZ9McsOgxqWX7AaxrDjcFVjWH/tIKJd7pnR7McaslGYOP1QmmiBXdJH/H/yLCT+rcQ7FaPBUxRGUtrg==}\n\n  '@floating-ui/core@1.7.3':\n    resolution: {integrity: sha512-sGnvb5dmrJaKEZ+LDIpguvdX3bDlEllmv4/ClQ9awcmCZrlx5jQyyMWFM5kBI+EyNOCDDiKk8il0zeuX3Zlg/w==}\n\n  '@floating-ui/dom@1.7.3':\n    resolution: {integrity: sha512-uZA413QEpNuhtb3/iIKoYMSK07keHPYeXF02Zhd6e213j+d1NamLix/mCLxBUDW/Gx52sPH2m+chlUsyaBs/Ag==}\n\n  '@floating-ui/react-dom@2.1.5':\n    resolution: {integrity: sha512-HDO/1/1oH9fjj4eLgegrlH3dklZpHtUYYFiVwMUwfGvk9jWDRWqkklA2/NFScknrcNSspbV868WjXORvreDX+Q==}\n    peerDependencies:\n      react: '>=16.8.0'\n      react-dom: '>=16.8.0'\n\n  '@floating-ui/utils@0.2.10':\n    resolution: {integrity: sha512-aGTxbpbg8/b5JfU1HXSrbH3wXZuLPJcNEcZQFMxLs3oSzgtVu6nFPkbbGGUvBcUjKV2YyB9Wxxabo+HEH9tcRQ==}\n\n  '@hookform/resolvers@3.10.0':\n    resolution: {integrity: sha512-79Dv+3mDF7i+2ajj7SkypSKHhl1cbln1OGavqrsF7p6mbUv11xpqpacPsGDCTRvCSjEEIez2ef1NveSVL3b0Ag==}\n    peerDependencies:\n      react-hook-form: ^7.0.0\n\n  '@isaacs/fs-minipass@4.0.1':\n    resolution: {integrity: sha512-wgm9Ehl2jpeqP3zw/7mo3kRHFp5MEDhqAdwy1fTGkHAwnkGOVsgpvQhL8B5n1qlb01jV3n/bI0ZfZp5lWA1k4w==}\n    engines: {node: '>=18.0.0'}\n\n  '@jridgewell/gen-mapping@0.3.12':\n    resolution: {integrity: sha512-OuLGC46TjB5BbN1dH8JULVVZY4WTdkF7tV9Ys6wLL1rubZnCMstOhNHueU5bLCrnRuDhKPDM4g6sw4Bel5Gzqg==}\n\n  '@jridgewell/resolve-uri@3.1.2':\n    resolution: {integrity: sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==}\n    engines: {node: '>=6.0.0'}\n\n  '@jridgewell/sourcemap-codec@1.5.4':\n    resolution: {integrity: sha512-VT2+G1VQs/9oz078bLrYbecdZKs912zQlkelYpuf+SXF+QvZDYJlbx/LSx+meSAwdDFnF8FVXW92AVjjkVmgFw==}\n\n  '@jridgewell/trace-mapping@0.3.29':\n    resolution: {integrity: sha512-uw6guiW/gcAGPDhLmd77/6lW8QLeiV5RUTsAX46Db6oLhGaVj4lhnPwb184s1bkc8kdVg/+h988dro8GRDpmYQ==}\n\n  '@next/env@14.2.16':\n    resolution: {integrity: sha512-fLrX5TfJzHCbnZ9YUSnGW63tMV3L4nSfhgOQ0iCcX21Pt+VSTDuaLsSuL8J/2XAiVA5AnzvXDpf6pMs60QxOag==}\n\n  '@next/swc-darwin-arm64@14.2.16':\n    resolution: {integrity: sha512-uFT34QojYkf0+nn6MEZ4gIWQ5aqGF11uIZ1HSxG+cSbj+Mg3+tYm8qXYd3dKN5jqKUm5rBVvf1PBRO/MeQ6rxw==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@next/swc-darwin-x64@14.2.16':\n    resolution: {integrity: sha512-mCecsFkYezem0QiZlg2bau3Xul77VxUD38b/auAjohMA22G9KTJneUYMv78vWoCCFkleFAhY1NIvbyjj1ncG9g==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [darwin]\n\n  '@next/swc-linux-arm64-gnu@14.2.16':\n    resolution: {integrity: sha512-yhkNA36+ECTC91KSyZcgWgKrYIyDnXZj8PqtJ+c2pMvj45xf7y/HrgI17hLdrcYamLfVt7pBaJUMxADtPaczHA==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@next/swc-linux-arm64-musl@14.2.16':\n    resolution: {integrity: sha512-X2YSyu5RMys8R2lA0yLMCOCtqFOoLxrq2YbazFvcPOE4i/isubYjkh+JCpRmqYfEuCVltvlo+oGfj/b5T2pKUA==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@next/swc-linux-x64-gnu@14.2.16':\n    resolution: {integrity: sha512-9AGcX7VAkGbc5zTSa+bjQ757tkjr6C/pKS7OK8cX7QEiK6MHIIezBLcQ7gQqbDW2k5yaqba2aDtaBeyyZh1i6Q==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [linux]\n\n  '@next/swc-linux-x64-musl@14.2.16':\n    resolution: {integrity: sha512-Klgeagrdun4WWDaOizdbtIIm8khUDQJ/5cRzdpXHfkbY91LxBXeejL4kbZBrpR/nmgRrQvmz4l3OtttNVkz2Sg==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [linux]\n\n  '@next/swc-win32-arm64-msvc@14.2.16':\n    resolution: {integrity: sha512-PwW8A1UC1Y0xIm83G3yFGPiOBftJK4zukTmk7DI1CebyMOoaVpd8aSy7K6GhobzhkjYvqS/QmzcfsWG2Dwizdg==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [win32]\n\n  '@next/swc-win32-ia32-msvc@14.2.16':\n    resolution: {integrity: sha512-jhPl3nN0oKEshJBNDAo0etGMzv0j3q3VYorTSFqH1o3rwv1MQRdor27u1zhkgsHPNeY1jxcgyx1ZsCkDD1IHgg==}\n    engines: {node: '>= 10'}\n    cpu: [ia32]\n    os: [win32]\n\n  '@next/swc-win32-x64-msvc@14.2.16':\n    resolution: {integrity: sha512-OA7NtfxgirCjfqt+02BqxC3MIgM/JaGjw9tOe4fyZgPsqfseNiMPnCRP44Pfs+Gpo9zPN+SXaFsgP6vk8d571A==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [win32]\n\n  '@radix-ui/number@1.1.0':\n    resolution: {integrity: sha512-V3gRzhVNU1ldS5XhAPTom1fOIo4ccrjjJgmE+LI2h/WaFpHmx0MQApT+KZHnx8abG6Avtfcz4WoEciMnpFT3HQ==}\n\n  '@radix-ui/primitive@1.1.1':\n    resolution: {integrity: sha512-SJ31y+Q/zAyShtXJc8x83i9TYdbAfHZ++tUZnvjJJqFjzsdUnKsxPL6IEtBlxKkU7yzer//GQtZSV4GbldL3YA==}\n\n  '@radix-ui/react-accordion@1.2.2':\n    resolution: {integrity: sha512-b1oh54x4DMCdGsB4/7ahiSrViXxaBwRPotiZNnYXjLha9vfuURSAZErki6qjDoSIV0eXx5v57XnTGVtGwnfp2g==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-alert-dialog@1.1.4':\n    resolution: {integrity: sha512-A6Kh23qZDLy3PSU4bh2UJZznOrUdHImIXqF8YtUa6CN73f8EOO9XlXSCd9IHyPvIquTaa/kwaSWzZTtUvgXVGw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-arrow@1.1.1':\n    resolution: {integrity: sha512-NaVpZfmv8SKeZbn4ijN2V3jlHA9ngBG16VnIIm22nUR0Yk8KUALyBxT3KYEUnNuch9sTE8UTsS3whzBgKOL30w==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-aspect-ratio@1.1.1':\n    resolution: {integrity: sha512-kNU4FIpcFMBLkOUcgeIteH06/8JLBcYY6Le1iKenDGCYNYFX3TQqCZjzkOsz37h7r94/99GTb7YhEr98ZBJibw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-avatar@1.1.2':\n    resolution: {integrity: sha512-GaC7bXQZ5VgZvVvsJ5mu/AEbjYLnhhkoidOboC50Z6FFlLA03wG2ianUoH+zgDQ31/9gCF59bE4+2bBgTyMiig==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-checkbox@1.1.3':\n    resolution: {integrity: sha512-HD7/ocp8f1B3e6OHygH0n7ZKjONkhciy1Nh0yuBgObqThc3oyx+vuMfFHKAknXRHHWVE9XvXStxJFyjUmB8PIw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-collapsible@1.1.2':\n    resolution: {integrity: sha512-PliMB63vxz7vggcyq0IxNYk8vGDrLXVWw4+W4B8YnwI1s18x7YZYqlG9PLX7XxAJUi0g2DxP4XKJMFHh/iVh9A==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-collection@1.1.1':\n    resolution: {integrity: sha512-LwT3pSho9Dljg+wY2KN2mrrh6y3qELfftINERIzBUO9e0N+t0oMTyn3k9iv+ZqgrwGkRnLpNJrsMv9BZlt2yuA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-compose-refs@1.1.1':\n    resolution: {integrity: sha512-Y9VzoRDSJtgFMUCoiZBDVo084VQ5hfpXxVE+NgkdNsjiDBByiImMZKKhxMwCbdHvhlENG6a833CbFkOQvTricw==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-compose-refs@1.1.2':\n    resolution: {integrity: sha512-z4eqJvfiNnFMHIIvXP3CY57y2WJs5g2v3X0zm9mEJkrkNv4rDxu+sg9Jh8EkXyeqBkB7SOcboo9dMVqhyrACIg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-context-menu@2.2.4':\n    resolution: {integrity: sha512-ap4wdGwK52rJxGkwukU1NrnEodsUFQIooANKu+ey7d6raQ2biTcEf8za1zr0mgFHieevRTB2nK4dJeN8pTAZGQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-context@1.1.1':\n    resolution: {integrity: sha512-UASk9zi+crv9WteK/NU4PLvOoL3OuE6BWVKNF6hPRBtYBDXQ2u5iu3O59zUlJiTVvkyuycnqrztsHVJwcK9K+Q==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-dialog@1.1.4':\n    resolution: {integrity: sha512-Ur7EV1IwQGCyaAuyDRiOLA5JIUZxELJljF+MbM/2NC0BYwfuRrbpS30BiQBJrVruscgUkieKkqXYDOoByaxIoA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-direction@1.1.0':\n    resolution: {integrity: sha512-BUuBvgThEiAXh2DWu93XsT+a3aWrGqolGlqqw5VU1kG7p/ZH2cuDlM1sRLNnY3QcBS69UIz2mcKhMxDsdewhjg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-dismissable-layer@1.1.3':\n    resolution: {integrity: sha512-onrWn/72lQoEucDmJnr8uczSNTujT0vJnA/X5+3AkChVPowr8n1yvIKIabhWyMQeMvvmdpsvcyDqx3X1LEXCPg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-dropdown-menu@2.1.4':\n    resolution: {integrity: sha512-iXU1Ab5ecM+yEepGAWK8ZhMyKX4ubFdCNtol4sT9D0OVErG9PNElfx3TQhjw7n7BC5nFVz68/5//clWy+8TXzA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-focus-guards@1.1.1':\n    resolution: {integrity: sha512-pSIwfrT1a6sIoDASCSpFwOasEwKTZWDw/iBdtnqKO7v6FeOzYJ7U53cPzYFVR3geGGXgVHaH+CdngrrAzqUGxg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-focus-scope@1.1.1':\n    resolution: {integrity: sha512-01omzJAYRxXdG2/he/+xy+c8a8gCydoQ1yOxnWNcRhrrBW5W+RQJ22EK1SaO8tb3WoUsuEw7mJjBozPzihDFjA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-hover-card@1.1.4':\n    resolution: {integrity: sha512-QSUUnRA3PQ2UhvoCv3eYvMnCAgGQW+sTu86QPuNb+ZMi+ZENd6UWpiXbcWDQ4AEaKF9KKpCHBeaJz9Rw6lRlaQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-id@1.1.0':\n    resolution: {integrity: sha512-EJUrI8yYh7WOjNOqpoJaf1jlFIH2LvtgAl+YcFqNCa+4hj64ZXmPkAKOFs/ukjz3byN6bdb/AVUqHkI8/uWWMA==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-id@1.1.1':\n    resolution: {integrity: sha512-kGkGegYIdQsOb4XjsfM97rXsiHaBwco+hFI66oO4s9LU+PLAC5oJ7khdOVFxkhsmlbpUqDAvXw11CluXP+jkHg==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-label@2.1.1':\n    resolution: {integrity: sha512-UUw5E4e/2+4kFMH7+YxORXGWggtY6sM8WIwh5RZchhLuUg2H1hc98Py+pr8HMz6rdaYrK2t296ZEjYLOCO5uUw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-menu@2.1.4':\n    resolution: {integrity: sha512-BnOgVoL6YYdHAG6DtXONaR29Eq4nvbi8rutrV/xlr3RQCMMb3yqP85Qiw/3NReozrSW+4dfLkK+rc1hb4wPU/A==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-menubar@1.1.4':\n    resolution: {integrity: sha512-+KMpi7VAZuB46+1LD7a30zb5IxyzLgC8m8j42gk3N4TUCcViNQdX8FhoH1HDvYiA8quuqcek4R4bYpPn/SY1GA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-navigation-menu@1.2.3':\n    resolution: {integrity: sha512-IQWAsQ7dsLIYDrn0WqPU+cdM7MONTv9nqrLVYoie3BPiabSfUVDe6Fr+oEt0Cofsr9ONDcDe9xhmJbL1Uq1yKg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-popover@1.1.4':\n    resolution: {integrity: sha512-aUACAkXx8LaFymDma+HQVji7WhvEhpFJ7+qPz17Nf4lLZqtreGOFRiNQWQmhzp7kEWg9cOyyQJpdIMUMPc/CPw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-popper@1.2.1':\n    resolution: {integrity: sha512-3kn5Me69L+jv82EKRuQCXdYyf1DqHwD2U/sxoNgBGCB7K9TRc3bQamQ+5EPM9EvyPdli0W41sROd+ZU1dTCztw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-portal@1.1.3':\n    resolution: {integrity: sha512-NciRqhXnGojhT93RPyDaMPfLH3ZSl4jjIFbZQ1b/vxvZEdHsBZ49wP9w8L3HzUQwep01LcWtkUvm0OVB5JAHTw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-presence@1.1.2':\n    resolution: {integrity: sha512-18TFr80t5EVgL9x1SwF/YGtfG+l0BS0PRAlCWBDoBEiDQjeKgnNZRVJp/oVBl24sr3Gbfwc/Qpj4OcWTQMsAEg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-primitive@2.0.1':\n    resolution: {integrity: sha512-sHCWTtxwNn3L3fH8qAfnF3WbUZycW93SM1j3NFDzXBiz8D6F5UTTy8G1+WFEaiCdvCVRJWj6N2R4Xq6HdiHmDg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-primitive@2.1.3':\n    resolution: {integrity: sha512-m9gTwRkhy2lvCPe6QJp4d3G1TYEUHn/FzJUtq9MjH46an1wJU+GdoGC5VLof8RX8Ft/DlpshApkhswDLZzHIcQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-progress@1.1.1':\n    resolution: {integrity: sha512-6diOawA84f/eMxFHcWut0aE1C2kyE9dOyCTQOMRR2C/qPiXz/X0SaiA/RLbapQaXUCmy0/hLMf9meSccD1N0pA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-radio-group@1.2.2':\n    resolution: {integrity: sha512-E0MLLGfOP0l8P/NxgVzfXJ8w3Ch8cdO6UDzJfDChu4EJDy+/WdO5LqpdY8PYnCErkmZH3gZhDL1K7kQ41fAHuQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-roving-focus@1.1.1':\n    resolution: {integrity: sha512-QE1RoxPGJ/Nm8Qmk0PxP8ojmoaS67i0s7hVssS7KuI2FQoc/uzVlZsqKfQvxPE6D8hICCPHJ4D88zNhT3OOmkw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-scroll-area@1.2.2':\n    resolution: {integrity: sha512-EFI1N/S3YxZEW/lJ/H1jY3njlvTd8tBmgKEn4GHi51+aMm94i6NmAJstsm5cu3yJwYqYc93gpCPm21FeAbFk6g==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-select@2.1.4':\n    resolution: {integrity: sha512-pOkb2u8KgO47j/h7AylCj7dJsm69BXcjkrvTqMptFqsE2i0p8lHkfgneXKjAgPzBMivnoMyt8o4KiV4wYzDdyQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-separator@1.1.1':\n    resolution: {integrity: sha512-RRiNRSrD8iUiXriq/Y5n4/3iE8HzqgLHsusUSg5jVpU2+3tqcUFPJXHDymwEypunc2sWxDUS3UC+rkZRlHedsw==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-slider@1.2.2':\n    resolution: {integrity: sha512-sNlU06ii1/ZcbHf8I9En54ZPW0Vil/yPVg4vQMcFNjrIx51jsHbFl1HYHQvCIWJSr1q0ZmA+iIs/ZTv8h7HHSA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-slot@1.1.1':\n    resolution: {integrity: sha512-RApLLOcINYJA+dMVbOju7MYv1Mb2EBp2nH4HdDzXTSyaR5optlm6Otrz1euW3HbdOR8UmmFK06TD+A9frYWv+g==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-slot@1.2.3':\n    resolution: {integrity: sha512-aeNmHnBxbi2St0au6VBVC7JXFlhLlOnvIIlePNniyUNAClzmtAUEY8/pBiK3iHjufOlwA+c20/8jngo7xcrg8A==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-switch@1.1.2':\n    resolution: {integrity: sha512-zGukiWHjEdBCRyXvKR6iXAQG6qXm2esuAD6kDOi9Cn+1X6ev3ASo4+CsYaD6Fov9r/AQFekqnD/7+V0Cs6/98g==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-tabs@1.1.2':\n    resolution: {integrity: sha512-9u/tQJMcC2aGq7KXpGivMm1mgq7oRJKXphDwdypPd/j21j/2znamPU8WkXgnhUaTrSFNIt8XhOyCAupg8/GbwQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-toast@1.2.4':\n    resolution: {integrity: sha512-Sch9idFJHJTMH9YNpxxESqABcAFweJG4tKv+0zo0m5XBvUSL8FM5xKcJLFLXononpePs8IclyX1KieL5SDUNgA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-toggle-group@1.1.1':\n    resolution: {integrity: sha512-OgDLZEA30Ylyz8YSXvnGqIHtERqnUt1KUYTKdw/y8u7Ci6zGiJfXc02jahmcSNK3YcErqioj/9flWC9S1ihfwg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-toggle@1.1.1':\n    resolution: {integrity: sha512-i77tcgObYr743IonC1hrsnnPmszDRn8p+EGUsUt+5a/JFn28fxaM88Py6V2mc8J5kELMWishI0rLnuGLFD/nnQ==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-tooltip@1.1.6':\n    resolution: {integrity: sha512-TLB5D8QLExS1uDn7+wH/bjEmRurNMTzNrtq7IjaS4kjion9NtzsTGkvR5+i7yc9q01Pi2KMM2cN3f8UG4IvvXA==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/react-use-callback-ref@1.1.0':\n    resolution: {integrity: sha512-CasTfvsy+frcFkbXtSJ2Zu9JHpN8TYKxkgJGWbjiZhFivxaeW7rMeZt7QELGVLaYVfFMsKHjb7Ak0nMEe+2Vfw==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-controllable-state@1.1.0':\n    resolution: {integrity: sha512-MtfMVJiSr2NjzS0Aa90NPTnvTSg6C/JLCV7ma0W6+OMV78vd8OyRpID+Ng9LxzsPbLeuBnWBA1Nq30AtBIDChw==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-escape-keydown@1.1.0':\n    resolution: {integrity: sha512-L7vwWlR1kTTQ3oh7g1O0CBF3YCyyTj8NmhLR+phShpyA50HCfBFKVJTpshm9PzLiKmehsrQzTYTpX9HvmC9rhw==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-layout-effect@1.1.0':\n    resolution: {integrity: sha512-+FPE0rOdziWSrH9athwI1R0HDVbWlEhd+FR+aSDk4uWGmSJ9Z54sdZVDQPZAinJhJXwfT+qnj969mCsT2gfm5w==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-layout-effect@1.1.1':\n    resolution: {integrity: sha512-RbJRS4UWQFkzHTTwVymMTUv8EqYhOp8dOOviLj2ugtTiXRaRQS7GLGxZTLL1jWhMeoSCf5zmcZkqTl9IiYfXcQ==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-previous@1.1.0':\n    resolution: {integrity: sha512-Z/e78qg2YFnnXcW88A4JmTtm4ADckLno6F7OXotmkQfeuCVaKuYzqAATPhVzl3delXE7CxIV8shofPn3jPc5Og==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-rect@1.1.0':\n    resolution: {integrity: sha512-0Fmkebhr6PiseyZlYAOtLS+nb7jLmpqTrJyv61Pe68MKYW6OWdRE2kI70TaYY27u7H0lajqM3hSMMLFq18Z7nQ==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-use-size@1.1.0':\n    resolution: {integrity: sha512-XW3/vWuIXHa+2Uwcc2ABSfcCledmXhhQPlGbfcRXbiUQI5Icjcg19BGCZVKKInYbvUCut/ufbbLLPFC5cbb1hw==}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  '@radix-ui/react-visually-hidden@1.1.1':\n    resolution: {integrity: sha512-vVfA2IZ9q/J+gEamvj761Oq1FpWgCDaNOOIfbPVp2MVPLEomUr5+Vf7kJGwQ24YxZSlQVar7Bes8kyTo5Dshpg==}\n    peerDependencies:\n      '@types/react': '*'\n      '@types/react-dom': '*'\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n      '@types/react-dom':\n        optional: true\n\n  '@radix-ui/rect@1.1.0':\n    resolution: {integrity: sha512-A9+lCBZoaMJlVKcRBz2YByCG+Cp2t6nAnMnNba+XiWxnj6r4JUFqfsgwocMBZU9LPtdxC6wB56ySYpc7LQIoJg==}\n\n  '@swc/counter@0.1.3':\n    resolution: {integrity: sha512-e2BR4lsJkkRlKZ/qCHPw9ZaSxc0MVUd7gtbtaB7aMvHeJVYe8sOB8DBZkP2DtISHGSku9sCK6T6cnY0CtXrOCQ==}\n\n  '@swc/helpers@0.5.5':\n    resolution: {integrity: sha512-KGYxvIOXcceOAbEk4bi/dVLEK9z8sZ0uBB3Il5b1rhfClSpcX0yfRO0KmTkqR2cnQDymwLB+25ZyMzICg/cm/A==}\n\n  '@tailwindcss/node@4.1.9':\n    resolution: {integrity: sha512-ZFsgw6lbtcZKYPWvf6zAuCVSuer7UQ2Z5P8BETHcpA4x/3NwOjAIXmRnYfG77F14f9bPeuR4GaNz3ji1JkQMeQ==}\n\n  '@tailwindcss/oxide-android-arm64@4.1.9':\n    resolution: {integrity: sha512-X4mBUUJ3DPqODhtdT5Ju55feJwBN+hP855Z7c0t11Jzece9KRtdM41ljMrCcureKMh96mcOh2gxahkp1yE+BOQ==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [android]\n\n  '@tailwindcss/oxide-darwin-arm64@4.1.9':\n    resolution: {integrity: sha512-jnWnqz71ZLXUbJLW53m9dSQakLBfaWxAd9TAibimrNdQfZKyie+xGppdDCZExtYwUdflt3kOT9y1JUgYXVEQmw==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [darwin]\n\n  '@tailwindcss/oxide-darwin-x64@4.1.9':\n    resolution: {integrity: sha512-+Ui6LlvZ6aCPvSwv3l16nYb6gu1N6RamFz7hSu5aqaiPrDQqD1LPT/e8r2/laSVwFjRyOZxQQ/gvGxP3ihA2rw==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [darwin]\n\n  '@tailwindcss/oxide-freebsd-x64@4.1.9':\n    resolution: {integrity: sha512-BWqCh0uoXMprwWfG7+oyPW53VCh6G08pxY0IIN/i5DQTpPnCJ4zm2W8neH9kW1v1f6RXP3b2qQjAzrAcnQ5e9w==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [freebsd]\n\n  '@tailwindcss/oxide-linux-arm-gnueabihf@4.1.9':\n    resolution: {integrity: sha512-U8itjQb5TVc80aV5Yo+JtKo+qS95CV4XLrKEtSLQFoTD/c9j3jk4WZipYT+9Jxqem29qCMRPxjEZ3s+wTT4XCw==}\n    engines: {node: '>= 10'}\n    cpu: [arm]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-arm64-gnu@4.1.9':\n    resolution: {integrity: sha512-dKlGraoNvyTrR7ovLw3Id9yTwc+l0NYg8bwOkYqk+zltvGns8bPvVr6PH5jATdc75kCGd6kDRmP4p1LwqCnPJQ==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-arm64-musl@4.1.9':\n    resolution: {integrity: sha512-qCZ4QTrZaBEgNM13pGjvakdmid1Kw3CUCEQzgVAn64Iud7zSxOGwK1usg+hrwrOfFH7vXZZr8OhzC8fJTRq5NA==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-x64-gnu@4.1.9':\n    resolution: {integrity: sha512-bmzkAWQjRlY9udmg/a1bOtZpV14ZCdrB74PZrd7Oz/wK62Rk+m9+UV3BsgGfOghyO5Qu5ZDciADzDMZbi9n1+g==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [linux]\n\n  '@tailwindcss/oxide-linux-x64-musl@4.1.9':\n    resolution: {integrity: sha512-NpvPQsXj1raDHhd+g2SUvZQoTPWfYAsyYo9h4ZqV7EOmR+aj7LCAE5hnXNnrJ5Egy/NiO3Hs7BNpSbsPEOpORg==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [linux]\n\n  '@tailwindcss/oxide-wasm32-wasi@4.1.9':\n    resolution: {integrity: sha512-G93Yuf3xrpTxDUCSh685d1dvOkqOB0Gy+Bchv9Zy3k+lNw/9SEgsHit50xdvp1/p9yRH2TeDHJeDLUiV4mlTkA==}\n    engines: {node: '>=14.0.0'}\n    cpu: [wasm32]\n    bundledDependencies:\n      - '@napi-rs/wasm-runtime'\n      - '@emnapi/core'\n      - '@emnapi/runtime'\n      - '@tybys/wasm-util'\n      - '@emnapi/wasi-threads'\n      - tslib\n\n  '@tailwindcss/oxide-win32-arm64-msvc@4.1.9':\n    resolution: {integrity: sha512-Eq9FZzZe/NPkUiSMY+eY7r5l7msuFlm6wC6lnV11m8885z0vs9zx48AKTfw0UbVecTRV5wMxKb3Kmzx2LoUIWg==}\n    engines: {node: '>= 10'}\n    cpu: [arm64]\n    os: [win32]\n\n  '@tailwindcss/oxide-win32-x64-msvc@4.1.9':\n    resolution: {integrity: sha512-oZ4zkthMXMJN2w/vu3jEfuqWTW7n8giGYDV/SfhBGRNehNMOBqh3YUAEv+8fv2YDJEzL4JpXTNTiSXW3UiUwBw==}\n    engines: {node: '>= 10'}\n    cpu: [x64]\n    os: [win32]\n\n  '@tailwindcss/oxide@4.1.9':\n    resolution: {integrity: sha512-oqjNxOBt1iNRAywjiH+VFsfovx/hVt4mxe0kOkRMAbbcCwbJg5e2AweFqyGN7gtmE1TJXnvnyX7RWTR1l72ciQ==}\n    engines: {node: '>= 10'}\n\n  '@tailwindcss/postcss@4.1.9':\n    resolution: {integrity: sha512-v3DKzHibZO8ioVDmuVHCW1PR0XSM7nS40EjZFJEA1xPuvTuQPaR5flE1LyikU3hu2u1KNWBtEaSe8qsQjX3tyg==}\n\n  '@types/d3-array@3.2.1':\n    resolution: {integrity: sha512-Y2Jn2idRrLzUfAKV2LyRImR+y4oa2AntrgID95SHJxuMUrkNXmanDSed71sRNZysveJVt1hLLemQZIady0FpEg==}\n\n  '@types/d3-color@3.1.3':\n    resolution: {integrity: sha512-iO90scth9WAbmgv7ogoq57O9YpKmFBbmoEoCHDB2xMBY0+/KVrqAaCDyCE16dUspeOvIxFFRI+0sEtqDqy2b4A==}\n\n  '@types/d3-ease@3.0.2':\n    resolution: {integrity: sha512-NcV1JjO5oDzoK26oMzbILE6HW7uVXOHLQvHshBUW4UMdZGfiY6v5BeQwh9a9tCzv+CeefZQHJt5SRgK154RtiA==}\n\n  '@types/d3-interpolate@3.0.4':\n    resolution: {integrity: sha512-mgLPETlrpVV1YRJIglr4Ez47g7Yxjl1lj7YKsiMCb27VJH9W8NVM6Bb9d8kkpG/uAQS5AmbA48q2IAolKKo1MA==}\n\n  '@types/d3-path@3.1.1':\n    resolution: {integrity: sha512-VMZBYyQvbGmWyWVea0EHs/BwLgxc+MKi1zLDCONksozI4YJMcTt8ZEuIR4Sb1MMTE8MMW49v0IwI5+b7RmfWlg==}\n\n  '@types/d3-scale@4.0.9':\n    resolution: {integrity: sha512-dLmtwB8zkAeO/juAMfnV+sItKjlsw2lKdZVVy6LRr0cBmegxSABiLEpGVmSJJ8O08i4+sGR6qQtb6WtuwJdvVw==}\n\n  '@types/d3-shape@3.1.7':\n    resolution: {integrity: sha512-VLvUQ33C+3J+8p+Daf+nYSOsjB4GXp19/S/aGo60m9h1v6XaxjiT82lKVWJCfzhtuZ3yD7i/TPeC/fuKLLOSmg==}\n\n  '@types/d3-time@3.0.4':\n    resolution: {integrity: sha512-yuzZug1nkAAaBlBBikKZTgzCeA+k1uy4ZFwWANOfKw5z5LRhV0gNA7gNkKm7HoK+HRN0wX3EkxGk0fpbWhmB7g==}\n\n  '@types/d3-timer@3.0.2':\n    resolution: {integrity: sha512-Ps3T8E8dZDam6fUyNiMkekK3XUsaUEik+idO9/YjPtfj2qruF8tFBXS7XhtE4iIXBLxhmLjP3SXpLhVf21I9Lw==}\n\n  '@types/node@22.0.0':\n    resolution: {integrity: sha512-VT7KSYudcPOzP5Q0wfbowyNLaVR8QWUdw+088uFWwfvpY6uCWaXpqV6ieLAu9WBcnTa7H4Z5RLK8I5t2FuOcqw==}\n\n  '@types/pako@2.0.4':\n    resolution: {integrity: sha512-VWDCbrLeVXJM9fihYodcLiIv0ku+AlOa/TQ1SvYOaBuyrSKgEcro95LJyIsJ4vSo6BXIxOKxiJAat04CmST9Fw==}\n\n  '@types/prop-types@15.7.15':\n    resolution: {integrity: sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==}\n\n  '@types/raf@3.4.3':\n    resolution: {integrity: sha512-c4YAvMedbPZ5tEyxzQdMoOhhJ4RD3rngZIdwC2/qDN3d7JpEhB6fiBRKVY1lg5B7Wk+uPBjn5f39j1/2MY1oOw==}\n\n  '@types/react-dom@18.0.0':\n    resolution: {integrity: sha512-49897Y0UiCGmxZqpC8Blrf6meL8QUla6eb+BBhn69dTXlmuOlzkfr7HHY/O8J25e1lTUMs+YYxSlVDAaGHCOLg==}\n\n  '@types/react@18.0.0':\n    resolution: {integrity: sha512-7+K7zEQYu7NzOwQGLR91KwWXXDzmTFODRVizJyIALf6RfLv2GDpqpknX64pvRVILXCpXi7O/pua8NGk44dLvJw==}\n\n  '@types/scheduler@0.26.0':\n    resolution: {integrity: sha512-WFHp9YUJQ6CKshqoC37iOlHnQSmxNc795UhB26CyBBttrN9svdIrUjl/NjnNmfcwtncN0h/0PPAFWv9ovP8mLA==}\n\n  '@types/trusted-types@2.0.7':\n    resolution: {integrity: sha512-ScaPdn1dQczgbl0QFTeTOmVHFULt394XJgOQNoyVhZ6r2vLnMLJfBPd53SB52T/3G36VI1/g2MZaX0cwDuXsfw==}\n\n  '@vercel/analytics@1.3.1':\n    resolution: {integrity: sha512-xhSlYgAuJ6Q4WQGkzYTLmXwhYl39sWjoMA3nHxfkvG+WdBT25c563a7QhwwKivEOZtPJXifYHR1m2ihoisbWyA==}\n    peerDependencies:\n      next: '>= 13'\n      react: ^18 || ^19\n    peerDependenciesMeta:\n      next:\n        optional: true\n      react:\n        optional: true\n\n  aria-hidden@1.2.6:\n    resolution: {integrity: sha512-ik3ZgC9dY/lYVVM++OISsaYDeg1tb0VtP5uL3ouh1koGOaUMDPpbFIei4JkFimWUFPn90sbMNMXQAIVOlnYKJA==}\n    engines: {node: '>=10'}\n\n  autoprefixer@10.4.20:\n    resolution: {integrity: sha512-XY25y5xSv/wEoqzDyXXME4AFfkZI0P23z6Fs3YgymDnKJkCGOnkL0iTxCa85UTqaSgfcqyf3UA6+c7wUvx/16g==}\n    engines: {node: ^10 || ^12 || >=14}\n    hasBin: true\n    peerDependencies:\n      postcss: ^8.1.0\n\n  base64-arraybuffer@1.0.2:\n    resolution: {integrity: sha512-I3yl4r9QB5ZRY3XuJVEPfc2XhZO6YweFPI+UovAzn+8/hb3oJ6lnysaFcjVpkCPfVWFUDvoZ8kmVDP7WyRtYtQ==}\n    engines: {node: '>= 0.6.0'}\n\n  browserslist@4.25.1:\n    resolution: {integrity: sha512-KGj0KoOMXLpSNkkEI6Z6mShmQy0bc1I+T7K9N81k4WWMrfz+6fQ6es80B/YLAeRoKvjYE1YSHHOW1qe9xIVzHw==}\n    engines: {node: ^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7}\n    hasBin: true\n\n  busboy@1.6.0:\n    resolution: {integrity: sha512-8SFQbg/0hQ9xy3UNTB0YEnsNBbWfhf7RtnzpL7TkBiTBRfrQ9Fxcnz7VJsleJpyp6rVLvXiuORqjlHi5q+PYuA==}\n    engines: {node: '>=10.16.0'}\n\n  caniuse-lite@1.0.30001731:\n    resolution: {integrity: sha512-lDdp2/wrOmTRWuoB5DpfNkC0rJDU8DqRa6nYL6HK6sytw70QMopt/NIc/9SM7ylItlBWfACXk0tEn37UWM/+mg==}\n\n  canvg@3.0.11:\n    resolution: {integrity: sha512-5ON+q7jCTgMp9cjpu4Jo6XbvfYwSB2Ow3kzHKfIyJfaCAOHLbdKPQqGKgfED/R5B+3TFFfe8pegYA+b423SRyA==}\n    engines: {node: '>=10.0.0'}\n\n  chownr@3.0.0:\n    resolution: {integrity: sha512-+IxzY9BZOQd/XuYPRmrvEVjF/nqj5kgT4kEq7VofrDoM1MxoRjEWkrCC3EtLi59TVawxTAn+orJwFQcrqEN1+g==}\n    engines: {node: '>=18'}\n\n  class-variance-authority@0.7.1:\n    resolution: {integrity: sha512-Ka+9Trutv7G8M6WT6SeiRWz792K5qEqIGEGzXKhAE6xOWAY6pPH8U+9IY3oCMv6kqTmLsv7Xh/2w2RigkePMsg==}\n\n  client-only@0.0.1:\n    resolution: {integrity: sha512-IV3Ou0jSMzZrd3pZ48nLkT9DA7Ag1pnPzaiQhpW7c3RbcqqzvzzVu+L8gfqMp/8IM2MQtSiqaCxrrcfu8I8rMA==}\n\n  clsx@2.1.1:\n    resolution: {integrity: sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==}\n    engines: {node: '>=6'}\n\n  cmdk@1.0.4:\n    resolution: {integrity: sha512-AnsjfHyHpQ/EFeAnG216WY7A5LiYCoZzCSygiLvfXC3H3LFGCprErteUcszaVluGOhuOTbJS3jWHrSDYPBBygg==}\n    peerDependencies:\n      react: ^18 || ^19 || ^19.0.0-rc\n      react-dom: ^18 || ^19 || ^19.0.0-rc\n\n  core-js@3.45.1:\n    resolution: {integrity: sha512-L4NPsJlCfZsPeXukyzHFlg/i7IIVwHSItR0wg0FLNqYClJ4MQYTYLbC7EkjKYRLZF2iof2MUgN0EGy7MdQFChg==}\n\n  css-line-break@2.1.0:\n    resolution: {integrity: sha512-FHcKFCZcAha3LwfVBhCQbW2nCNbkZXn7KVUJcsT5/P8YmfsVja0FMPJr0B903j/E69HUphKiV9iQArX8SDYA4w==}\n\n  csstype@3.1.3:\n    resolution: {integrity: sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==}\n\n  d3-array@3.2.4:\n    resolution: {integrity: sha512-tdQAmyA18i4J7wprpYq8ClcxZy3SC31QMeByyCFyRt7BVHdREQZ5lpzoe5mFEYZUWe+oq8HBvk9JjpibyEV4Jg==}\n    engines: {node: '>=12'}\n\n  d3-color@3.1.0:\n    resolution: {integrity: sha512-zg/chbXyeBtMQ1LbD/WSoW2DpC3I0mpmPdW+ynRTj/x2DAWYrIY7qeZIHidozwV24m4iavr15lNwIwLxRmOxhA==}\n    engines: {node: '>=12'}\n\n  d3-ease@3.0.1:\n    resolution: {integrity: sha512-wR/XK3D3XcLIZwpbvQwQ5fK+8Ykds1ip7A2Txe0yxncXSdq1L9skcG7blcedkOX+ZcgxGAmLX1FrRGbADwzi0w==}\n    engines: {node: '>=12'}\n\n  d3-format@3.1.0:\n    resolution: {integrity: sha512-YyUI6AEuY/Wpt8KWLgZHsIU86atmikuoOmCfommt0LYHiQSPjvX2AcFc38PX0CBpr2RCyZhjex+NS/LPOv6YqA==}\n    engines: {node: '>=12'}\n\n  d3-interpolate@3.0.1:\n    resolution: {integrity: sha512-3bYs1rOD33uo8aqJfKP3JWPAibgw8Zm2+L9vBKEHJ2Rg+viTR7o5Mmv5mZcieN+FRYaAOWX5SJATX6k1PWz72g==}\n    engines: {node: '>=12'}\n\n  d3-path@3.1.0:\n    resolution: {integrity: sha512-p3KP5HCf/bvjBSSKuXid6Zqijx7wIfNW+J/maPs+iwR35at5JCbLUT0LzF1cnjbCHWhqzQTIN2Jpe8pRebIEFQ==}\n    engines: {node: '>=12'}\n\n  d3-scale@4.0.2:\n    resolution: {integrity: sha512-GZW464g1SH7ag3Y7hXjf8RoUuAFIqklOAq3MRl4OaWabTFJY9PN/E1YklhXLh+OQ3fM9yS2nOkCoS+WLZ6kvxQ==}\n    engines: {node: '>=12'}\n\n  d3-shape@3.2.0:\n    resolution: {integrity: sha512-SaLBuwGm3MOViRq2ABk3eLoxwZELpH6zhl3FbAoJ7Vm1gofKx6El1Ib5z23NUEhF9AsGl7y+dzLe5Cw2AArGTA==}\n    engines: {node: '>=12'}\n\n  d3-time-format@4.1.0:\n    resolution: {integrity: sha512-dJxPBlzC7NugB2PDLwo9Q8JiTR3M3e4/XANkreKSUxF8vvXKqm1Yfq4Q5dl8budlunRVlUUaDUgFt7eA8D6NLg==}\n    engines: {node: '>=12'}\n\n  d3-time@3.1.0:\n    resolution: {integrity: sha512-VqKjzBLejbSMT4IgbmVgDjpkYrNWUYJnbCGo874u7MMKIWsILRX+OpX/gTk8MqjpT1A/c6HY2dCA77ZN0lkQ2Q==}\n    engines: {node: '>=12'}\n\n  d3-timer@3.0.1:\n    resolution: {integrity: sha512-ndfJ/JxxMd3nw31uyKoY2naivF+r29V+Lc0svZxe1JvvIRmi8hUsrMvdOwgS1o6uBHmiz91geQ0ylPP0aj1VUA==}\n    engines: {node: '>=12'}\n\n  date-fns-jalali@4.1.0-0:\n    resolution: {integrity: sha512-hTIP/z+t+qKwBDcmmsnmjWTduxCg+5KfdqWQvb2X/8C9+knYY6epN/pfxdDuyVlSVeFz0sM5eEfwIUQ70U4ckg==}\n\n  date-fns@4.1.0:\n    resolution: {integrity: sha512-Ukq0owbQXxa/U3EGtsdVBkR1w7KOQ5gIBqdH2hkvknzZPYvBxb/aa6E8L7tmjFtkwZBu3UXBbjIgPo/Ez4xaNg==}\n\n  decimal.js-light@2.5.1:\n    resolution: {integrity: sha512-qIMFpTMZmny+MMIitAB6D7iVPEorVw6YQRWkvarTkT4tBeSLLiHzcwj6q0MmYSFCiVpiqPJTJEYIrpcPzVEIvg==}\n\n  detect-libc@2.0.4:\n    resolution: {integrity: sha512-3UDv+G9CsCKO1WKMGw9fwq/SWJYbI0c5Y7LU1AXYoDdbhE2AHQ6N6Nb34sG8Fj7T5APy8qXDCKuuIHd1BR0tVA==}\n    engines: {node: '>=8'}\n\n  detect-node-es@1.1.0:\n    resolution: {integrity: sha512-ypdmJU/TbBby2Dxibuv7ZLW3Bs1QEmM7nHjEANfohJLvE0XVujisn1qPJcZxg+qDucsr+bP6fLD1rPS3AhJ7EQ==}\n\n  dom-helpers@5.2.1:\n    resolution: {integrity: sha512-nRCa7CK3VTrM2NmGkIy4cbK7IZlgBE/PYMn55rrXefr5xXDP0LdtfPnblFDoVdcAfslJ7or6iqAUnx0CCGIWQA==}\n\n  dompurify@3.2.6:\n    resolution: {integrity: sha512-/2GogDQlohXPZe6D6NOgQvXLPSYBqIWMnZ8zzOhn09REE4eyAzb+Hed3jhoM9OkuaJ8P6ZGTTVWQKAi8ieIzfQ==}\n\n  electron-to-chromium@1.5.197:\n    resolution: {integrity: sha512-m1xWB3g7vJ6asIFz+2pBUbq3uGmfmln1M9SSvBe4QIFWYrRHylP73zL/3nMjDmwz8V+1xAXQDfBd6+HPW0WvDQ==}\n\n  embla-carousel-react@8.5.1:\n    resolution: {integrity: sha512-z9Y0K84BJvhChXgqn2CFYbfEi6AwEr+FFVVKm/MqbTQ2zIzO1VQri6w67LcfpVF0AjbhwVMywDZqY4alYkjW5w==}\n    peerDependencies:\n      react: ^16.8.0 || ^17.0.1 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n\n  embla-carousel-reactive-utils@8.5.1:\n    resolution: {integrity: sha512-n7VSoGIiiDIc4MfXF3ZRTO59KDp820QDuyBDGlt5/65+lumPHxX2JLz0EZ23hZ4eg4vZGUXwMkYv02fw2JVo/A==}\n    peerDependencies:\n      embla-carousel: 8.5.1\n\n  embla-carousel@8.5.1:\n    resolution: {integrity: sha512-JUb5+FOHobSiWQ2EJNaueCNT/cQU9L6XWBbWmorWPQT9bkbk+fhsuLr8wWrzXKagO3oWszBO7MSx+GfaRk4E6A==}\n\n  enhanced-resolve@5.18.3:\n    resolution: {integrity: sha512-d4lC8xfavMeBjzGr2vECC3fsGXziXZQyJxD868h2M/mBI3PwAuODxAkLkq5HYuvrPYcUtiLzsTo8U3PgX3Ocww==}\n    engines: {node: '>=10.13.0'}\n\n  escalade@3.2.0:\n    resolution: {integrity: sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==}\n    engines: {node: '>=6'}\n\n  eventemitter3@4.0.7:\n    resolution: {integrity: sha512-8guHBZCwKnFhYdHr2ysuRWErTwhoN2X8XELRlrRwpmfeY2jjuUN4taQMsULKUVo1K4DvZl+0pgfyoysHxvmvEw==}\n\n  fast-equals@5.2.2:\n    resolution: {integrity: sha512-V7/RktU11J3I36Nwq2JnZEM7tNm17eBJz+u25qdxBZeCKiX6BkVSZQjwWIr+IobgnZy+ag73tTZgZi7tr0LrBw==}\n    engines: {node: '>=6.0.0'}\n\n  fast-png@6.4.0:\n    resolution: {integrity: sha512-kAqZq1TlgBjZcLr5mcN6NP5Rv4V2f22z00c3g8vRrwkcqjerx7BEhPbOnWCPqaHUl2XWQBJQvOT/FQhdMT7X/Q==}\n\n  fflate@0.8.2:\n    resolution: {integrity: sha512-cPJU47OaAoCbg0pBvzsgpTPhmhqI5eJjh/JIu8tPj5q+T7iLvW/JAYUqmE7KOB4R1ZyEhzBaIQpQpardBF5z8A==}\n\n  fraction.js@4.3.7:\n    resolution: {integrity: sha512-ZsDfxO51wGAXREY55a7la9LScWpwv9RxIrYABrlvOFBlH/ShPnrtsXeuUIfXKKOVicNxQ+o8JTbJvjS4M89yew==}\n\n  geist@1.3.1:\n    resolution: {integrity: sha512-Q4gC1pBVPN+D579pBaz0TRRnGA4p9UK6elDY/xizXdFk/g4EKR5g0I+4p/Kj6gM0SajDBZ/0FvDV9ey9ud7BWw==}\n    peerDependencies:\n      next: '>=13.2.0'\n\n  get-nonce@1.0.1:\n    resolution: {integrity: sha512-FJhYRoDaiatfEkUK8HKlicmu/3SGFD51q3itKDGoSTysQJBnfOcxU5GxnhE1E6soB76MbT0MBtnKJuXyAx+96Q==}\n    engines: {node: '>=6'}\n\n  graceful-fs@4.2.11:\n    resolution: {integrity: sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==}\n\n  html2canvas@1.4.1:\n    resolution: {integrity: sha512-fPU6BHNpsyIhr8yyMpTLLxAbkaK8ArIBcmZIRiBLiDhjeqvXolaEmDGmELFuX9I4xDcaKKcJl+TKZLqruBbmWA==}\n    engines: {node: '>=8.0.0'}\n\n  input-otp@1.4.1:\n    resolution: {integrity: sha512-+yvpmKYKHi9jIGngxagY9oWiiblPB7+nEO75F2l2o4vs+6vpPZZmUl4tBNYuTCvQjhvEIbdNeJu70bhfYP2nbw==}\n    peerDependencies:\n      react: ^16.8 || ^17.0 || ^18.0 || ^19.0.0 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17.0 || ^18.0 || ^19.0.0 || ^19.0.0-rc\n\n  internmap@2.0.3:\n    resolution: {integrity: sha512-5Hh7Y1wQbvY5ooGgPbDaL5iYLAPzMTUrjMulskHLH6wnv/A+1q5rgEaiuqEjB+oxGXIVZs1FF+R/KPN3ZSQYYg==}\n    engines: {node: '>=12'}\n\n  iobuffer@5.4.0:\n    resolution: {integrity: sha512-DRebOWuqDvxunfkNJAlc3IzWIPD5xVxwUNbHr7xKB8E6aLJxIPfNX3CoMJghcFjpv6RWQsrcJbghtEwSPoJqMA==}\n\n  jiti@2.5.1:\n    resolution: {integrity: sha512-twQoecYPiVA5K/h6SxtORw/Bs3ar+mLUtoPSc7iMXzQzK8d7eJ/R09wmTwAjiamETn1cXYPGfNnu7DMoHgu12w==}\n    hasBin: true\n\n  js-tokens@4.0.0:\n    resolution: {integrity: sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==}\n\n  jspdf-autotable@5.0.2:\n    resolution: {integrity: sha512-YNKeB7qmx3pxOLcNeoqAv3qTS7KuvVwkFe5AduCawpop3NOkBUtqDToxNc225MlNecxT4kP2Zy3z/y/yvGdXUQ==}\n    peerDependencies:\n      jspdf: ^2 || ^3\n\n  jspdf@3.0.2:\n    resolution: {integrity: sha512-G0fQDJ5fAm6UW78HG6lNXyq09l0PrA1rpNY5i+ly17Zb1fMMFSmS+3lw4cnrAPGyouv2Y0ylujbY2Ieq3DSlKA==}\n\n  lightningcss-darwin-arm64@1.30.1:\n    resolution: {integrity: sha512-c8JK7hyE65X1MHMN+Viq9n11RRC7hgin3HhYKhrMyaXflk5GVplZ60IxyoVtzILeKr+xAJwg6zK6sjTBJ0FKYQ==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [darwin]\n\n  lightningcss-darwin-x64@1.30.1:\n    resolution: {integrity: sha512-k1EvjakfumAQoTfcXUcHQZhSpLlkAuEkdMBsI/ivWw9hL+7FtilQc0Cy3hrx0AAQrVtQAbMI7YjCgYgvn37PzA==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [darwin]\n\n  lightningcss-freebsd-x64@1.30.1:\n    resolution: {integrity: sha512-kmW6UGCGg2PcyUE59K5r0kWfKPAVy4SltVeut+umLCFoJ53RdCUWxcRDzO1eTaxf/7Q2H7LTquFHPL5R+Gjyig==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [freebsd]\n\n  lightningcss-linux-arm-gnueabihf@1.30.1:\n    resolution: {integrity: sha512-MjxUShl1v8pit+6D/zSPq9S9dQ2NPFSQwGvxBCYaBYLPlCWuPh9/t1MRS8iUaR8i+a6w7aps+B4N0S1TYP/R+Q==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm]\n    os: [linux]\n\n  lightningcss-linux-arm64-gnu@1.30.1:\n    resolution: {integrity: sha512-gB72maP8rmrKsnKYy8XUuXi/4OctJiuQjcuqWNlJQ6jZiWqtPvqFziskH3hnajfvKB27ynbVCucKSm2rkQp4Bw==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [linux]\n\n  lightningcss-linux-arm64-musl@1.30.1:\n    resolution: {integrity: sha512-jmUQVx4331m6LIX+0wUhBbmMX7TCfjF5FoOH6SD1CttzuYlGNVpA7QnrmLxrsub43ClTINfGSYyHe2HWeLl5CQ==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [linux]\n\n  lightningcss-linux-x64-gnu@1.30.1:\n    resolution: {integrity: sha512-piWx3z4wN8J8z3+O5kO74+yr6ze/dKmPnI7vLqfSqI8bccaTGY5xiSGVIJBDd5K5BHlvVLpUB3S2YCfelyJ1bw==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [linux]\n\n  lightningcss-linux-x64-musl@1.30.1:\n    resolution: {integrity: sha512-rRomAK7eIkL+tHY0YPxbc5Dra2gXlI63HL+v1Pdi1a3sC+tJTcFrHX+E86sulgAXeI7rSzDYhPSeHHjqFhqfeQ==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [linux]\n\n  lightningcss-win32-arm64-msvc@1.30.1:\n    resolution: {integrity: sha512-mSL4rqPi4iXq5YVqzSsJgMVFENoa4nGTT/GjO2c0Yl9OuQfPsIfncvLrEW6RbbB24WtZ3xP/2CCmI3tNkNV4oA==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [arm64]\n    os: [win32]\n\n  lightningcss-win32-x64-msvc@1.30.1:\n    resolution: {integrity: sha512-PVqXh48wh4T53F/1CCu8PIPCxLzWyCnn/9T5W1Jpmdy5h9Cwd+0YQS6/LwhHXSafuc61/xg9Lv5OrCby6a++jg==}\n    engines: {node: '>= 12.0.0'}\n    cpu: [x64]\n    os: [win32]\n\n  lightningcss@1.30.1:\n    resolution: {integrity: sha512-xi6IyHML+c9+Q3W0S4fCQJOym42pyurFiJUHEcEyHS0CeKzia4yZDEsLlqOFykxOdHpNy0NmvVO31vcSqAxJCg==}\n    engines: {node: '>= 12.0.0'}\n\n  lodash@4.17.21:\n    resolution: {integrity: sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==}\n\n  loose-envify@1.4.0:\n    resolution: {integrity: sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==}\n    hasBin: true\n\n  lucide-react@0.454.0:\n    resolution: {integrity: sha512-hw7zMDwykCLnEzgncEEjHeA6+45aeEzRYuKHuyRSOPkhko+J3ySGjGIzu+mmMfDFG1vazHepMaYFYHbTFAZAAQ==}\n    peerDependencies:\n      react: ^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0-rc\n\n  magic-string@0.30.17:\n    resolution: {integrity: sha512-sNPKHvyjVf7gyjwS4xGTaW/mCnF8wnjtifKBEhxfZ7E/S8tQ0rssrwGNn6q8JH/ohItJfSQp9mBtQYuTlH5QnA==}\n\n  minipass@7.1.2:\n    resolution: {integrity: sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==}\n    engines: {node: '>=16 || 14 >=14.17'}\n\n  minizlib@3.0.2:\n    resolution: {integrity: sha512-oG62iEk+CYt5Xj2YqI5Xi9xWUeZhDI8jjQmC5oThVH5JGCTgIjr7ciJDzC7MBzYd//WvR1OTmP5Q38Q8ShQtVA==}\n    engines: {node: '>= 18'}\n\n  mkdirp@3.0.1:\n    resolution: {integrity: sha512-+NsyUUAZDmo6YVHzL/stxSu3t9YS1iljliy3BSDrXJ/dkn1KYdmtZODGGjLcc9XLgVVpH4KshHB8XmZgMhaBXg==}\n    engines: {node: '>=10'}\n    hasBin: true\n\n  nanoid@3.3.11:\n    resolution: {integrity: sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==}\n    engines: {node: ^10 || ^12 || ^13.7 || ^14 || >=15.0.1}\n    hasBin: true\n\n  next-themes@0.4.6:\n    resolution: {integrity: sha512-pZvgD5L0IEvX5/9GWyHMf3m8BKiVQwsCMHfoFosXtXBMnaS0ZnIJ9ST4b4NqLVKDEm8QBxoNNGNaBv2JNF6XNA==}\n    peerDependencies:\n      react: ^16.8 || ^17 || ^18 || ^19 || ^19.0.0-rc\n      react-dom: ^16.8 || ^17 || ^18 || ^19 || ^19.0.0-rc\n\n  next@14.2.16:\n    resolution: {integrity: sha512-LcO7WnFu6lYSvCzZoo1dB+IO0xXz5uEv52HF1IUN0IqVTUIZGHuuR10I5efiLadGt+4oZqTcNZyVVEem/TM5nA==}\n    engines: {node: '>=18.17.0'}\n    hasBin: true\n    peerDependencies:\n      '@opentelemetry/api': ^1.1.0\n      '@playwright/test': ^1.41.2\n      react: ^18.2.0\n      react-dom: ^18.2.0\n      sass: ^1.3.0\n    peerDependenciesMeta:\n      '@opentelemetry/api':\n        optional: true\n      '@playwright/test':\n        optional: true\n      sass:\n        optional: true\n\n  node-releases@2.0.19:\n    resolution: {integrity: sha512-xxOWJsBKtzAq7DY0J+DTzuz58K8e7sJbdgwkbMWQe8UYB6ekmsQ45q0M/tJDsGaZmbC+l7n57UV8Hl5tHxO9uw==}\n\n  normalize-range@0.1.2:\n    resolution: {integrity: sha512-bdok/XvKII3nUpklnV6P2hxtMNrCboOjAcyBuQnWEhO665FwrSNRxU+AqpsyvO6LgGYPspN+lu5CLtw4jPRKNA==}\n    engines: {node: '>=0.10.0'}\n\n  object-assign@4.1.1:\n    resolution: {integrity: sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==}\n    engines: {node: '>=0.10.0'}\n\n  pako@2.1.0:\n    resolution: {integrity: sha512-w+eufiZ1WuJYgPXbV/PO3NCMEc3xqylkKHzp8bxp1uW4qaSNQUkwmLLEc3kKsfz8lpV1F8Ht3U1Cm+9Srog2ug==}\n\n  performance-now@2.1.0:\n    resolution: {integrity: sha512-7EAHlyLHI56VEIdK57uwHdHKIaAGbnXPiw0yWbarQZOKaKpvUIgW0jWRVLiatnM+XXlSwsanIBH/hzGMJulMow==}\n\n  picocolors@1.1.1:\n    resolution: {integrity: sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==}\n\n  postcss-value-parser@4.2.0:\n    resolution: {integrity: sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==}\n\n  postcss@8.4.31:\n    resolution: {integrity: sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==}\n    engines: {node: ^10 || ^12 || >=14}\n\n  postcss@8.5.0:\n    resolution: {integrity: sha512-27VKOqrYfPncKA2NrFOVhP5MGAfHKLYn/Q0mz9cNQyRAKYi3VNHwYU2qKKqPCqgBmeeJ0uAFB56NumXZ5ZReXg==}\n    engines: {node: ^10 || ^12 || >=14}\n\n  prop-types@15.8.1:\n    resolution: {integrity: sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==}\n\n  raf@3.4.1:\n    resolution: {integrity: sha512-Sq4CW4QhwOHE8ucn6J34MqtZCeWFP2aQSmrlroYgqAV1PjStIhJXxYuTgUIfkEk7zTLjmIjLmU5q+fbD1NnOJA==}\n\n  react-day-picker@9.8.0:\n    resolution: {integrity: sha512-E0yhhg7R+pdgbl/2toTb0xBhsEAtmAx1l7qjIWYfcxOy8w4rTSVfbtBoSzVVhPwKP/5E9iL38LivzoE3AQDhCQ==}\n    engines: {node: '>=18'}\n    peerDependencies:\n      react: '>=16.8.0'\n\n  react-dom@18.0.0:\n    resolution: {integrity: sha512-XqX7uzmFo0pUceWFCt7Gff6IyIMzFUn7QMZrbrQfGxtaxXZIcGQzoNpRLE3fQLnS4XzLLPMZX2T9TRcSrasicw==}\n    peerDependencies:\n      react: ^18.0.0\n\n  react-hook-form@7.60.0:\n    resolution: {integrity: sha512-SBrYOvMbDB7cV8ZfNpaiLcgjH/a1c7aK0lK+aNigpf4xWLO8q+o4tcvVurv3c4EOyzn/3dCsYt4GKD42VvJ/+A==}\n    engines: {node: '>=18.0.0'}\n    peerDependencies:\n      react: ^16.8.0 || ^17 || ^18 || ^19\n\n  react-is@16.13.1:\n    resolution: {integrity: sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==}\n\n  react-is@18.3.1:\n    resolution: {integrity: sha512-/LLMVyas0ljjAtoYiPqYiL8VWXzUUdThrmU5+n20DZv+a+ClRoevUzw5JxU+Ieh5/c87ytoTBV9G1FiKfNJdmg==}\n\n  react-remove-scroll-bar@2.3.8:\n    resolution: {integrity: sha512-9r+yi9+mgU33AKcj6IbT9oRCO78WriSj6t/cF8DWBZJ9aOGPOTEDvdUDz1FwKim7QXWwmHqtdHnRJfhAxEG46Q==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  react-remove-scroll@2.7.1:\n    resolution: {integrity: sha512-HpMh8+oahmIdOuS5aFKKY6Pyog+FNaZV/XyJOq7b4YFwsFHe5yYfdbIalI4k3vU2nSDql7YskmUseHsRrJqIPA==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  react-resizable-panels@2.1.7:\n    resolution: {integrity: sha512-JtT6gI+nURzhMYQYsx8DKkx6bSoOGFp7A3CwMrOb8y5jFHFyqwo9m68UhmXRw57fRVJksFn1TSlm3ywEQ9vMgA==}\n    peerDependencies:\n      react: ^16.14.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n      react-dom: ^16.14.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n\n  react-smooth@4.0.4:\n    resolution: {integrity: sha512-gnGKTpYwqL0Iii09gHobNolvX4Kiq4PKx6eWBCYYix+8cdw+cGo3do906l1NBPKkSWx1DghC1dlWG9L2uGd61Q==}\n    peerDependencies:\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n      react-dom: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n\n  react-style-singleton@2.2.3:\n    resolution: {integrity: sha512-b6jSvxvVnyptAiLjbkWLE/lOnR4lfTtDAl+eUC7RZy+QQWc6wRzIV2CE6xBuMmDxc2qIihtDCZD5NPOFl7fRBQ==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  react-transition-group@4.4.5:\n    resolution: {integrity: sha512-pZcd1MCJoiKiBR2NRxeCRg13uCXbydPnmB4EOeRrY7480qNWO8IIgQG6zlDkm6uRMsURXPuKq0GWtiM59a5Q6g==}\n    peerDependencies:\n      react: '>=16.6.0'\n      react-dom: '>=16.6.0'\n\n  react@18.0.0:\n    resolution: {integrity: sha512-x+VL6wbT4JRVPm7EGxXhZ8w8LTROaxPXOqhlGyVSrv0sB1jkyFGgXxJ8LVoPRLvPR6/CIZGFmfzqUa2NYeMr2A==}\n    engines: {node: '>=0.10.0'}\n\n  recharts-scale@0.4.5:\n    resolution: {integrity: sha512-kivNFO+0OcUNu7jQquLXAxz1FIwZj8nrj+YkOKc5694NbjCvcT6aSZiIzNzd2Kul4o4rTto8QVR9lMNtxD4G1w==}\n\n  recharts@2.15.4:\n    resolution: {integrity: sha512-UT/q6fwS3c1dHbXv2uFgYJ9BMFHu3fwnd7AYZaEQhXuYQ4hgsxLvsUXzGdKeZrW5xopzDCvuA2N41WJ88I7zIw==}\n    engines: {node: '>=14'}\n    peerDependencies:\n      react: ^16.0.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n      react-dom: ^16.0.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n\n  regenerator-runtime@0.13.11:\n    resolution: {integrity: sha512-kY1AZVr2Ra+t+piVaJ4gxaFaReZVH40AKNo7UCX6W+dEwBo/2oZJzqfuN1qLq1oL45o56cPaTXELwrTh8Fpggg==}\n\n  rgbcolor@1.0.1:\n    resolution: {integrity: sha512-9aZLIrhRaD97sgVhtJOW6ckOEh6/GnvQtdVNfdZ6s67+3/XwLS9lBcQYzEEhYVeUowN7pRzMLsyGhK2i/xvWbw==}\n    engines: {node: '>= 0.8.15'}\n\n  scheduler@0.21.0:\n    resolution: {integrity: sha512-1r87x5fz9MXqswA2ERLo0EbOAU74DpIUO090gIasYTqlVoJeMcl+Z1Rg7WHz+qtPujhS/hGIt9kxZOYBV3faRQ==}\n\n  server-only@0.0.1:\n    resolution: {integrity: sha512-qepMx2JxAa5jjfzxG79yPPq+8BuFToHd1hm7kI+Z4zAq1ftQiP7HcxMhDDItrbtwVeLg/cY2JnKnrcFkmiswNA==}\n\n  sonner@1.7.4:\n    resolution: {integrity: sha512-DIS8z4PfJRbIyfVFDVnK9rO3eYDtse4Omcm6bt0oEr5/jtLgysmjuBl1frJ9E/EQZrFmKx2A8m/s5s9CRXIzhw==}\n    peerDependencies:\n      react: ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n      react-dom: ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n\n  source-map-js@1.2.1:\n    resolution: {integrity: sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==}\n    engines: {node: '>=0.10.0'}\n\n  stackblur-canvas@2.7.0:\n    resolution: {integrity: sha512-yf7OENo23AGJhBriGx0QivY5JP6Y1HbrrDI6WLt6C5auYZXlQrheoY8hD4ibekFKz1HOfE48Ww8kMWMnJD/zcQ==}\n    engines: {node: '>=0.1.14'}\n\n  streamsearch@1.1.0:\n    resolution: {integrity: sha512-Mcc5wHehp9aXz1ax6bZUyY5afg9u2rv5cqQI3mRrYkGC8rW2hM02jWuwjtL++LS5qinSyhj2QfLyNsuc+VsExg==}\n    engines: {node: '>=10.0.0'}\n\n  styled-jsx@5.1.1:\n    resolution: {integrity: sha512-pW7uC1l4mBZ8ugbiZrcIsiIvVx1UmTfw7UkC3Um2tmfUq9Bhk8IiyEIPl6F8agHgjzku6j0xQEZbfA5uSgSaCw==}\n    engines: {node: '>= 12.0.0'}\n    peerDependencies:\n      '@babel/core': '*'\n      babel-plugin-macros: '*'\n      react: '>= 16.8.0 || 17.x.x || ^18.0.0-0'\n    peerDependenciesMeta:\n      '@babel/core':\n        optional: true\n      babel-plugin-macros:\n        optional: true\n\n  svg-pathdata@6.0.3:\n    resolution: {integrity: sha512-qsjeeq5YjBZ5eMdFuUa4ZosMLxgr5RZ+F+Y1OrDhuOCEInRMA3x74XdBtggJcj9kOeInz0WE+LgCPDkZFlBYJw==}\n    engines: {node: '>=12.0.0'}\n\n  tailwind-merge@2.5.5:\n    resolution: {integrity: sha512-0LXunzzAZzo0tEPxV3I297ffKZPlKDrjj7NXphC8V5ak9yHC5zRmxnOe2m/Rd/7ivsOMJe3JZ2JVocoDdQTRBA==}\n\n  tailwindcss-animate@1.0.7:\n    resolution: {integrity: sha512-bl6mpH3T7I3UFxuvDEXLxy/VuFxBk5bbzplh7tXI68mwMokNYd1t9qPBHlnyTwfa4JGC4zP516I1hYYtQ/vspA==}\n    peerDependencies:\n      tailwindcss: '>=3.0.0 || insiders'\n\n  tailwindcss@4.1.9:\n    resolution: {integrity: sha512-anBZRcvfNMsQdHB9XSGzAtIQWlhs49uK75jfkwrqjRUbjt4d7q9RE1wR1xWyfYZhLFnFX4ahWp88Au2lcEw5IQ==}\n\n  tapable@2.2.2:\n    resolution: {integrity: sha512-Re10+NauLTMCudc7T5WLFLAwDhQ0JWdrMK+9B2M8zR5hRExKmsRDCBA7/aV/pNJFltmBFO5BAMlQFi/vq3nKOg==}\n    engines: {node: '>=6'}\n\n  tar@7.4.3:\n    resolution: {integrity: sha512-5S7Va8hKfV7W5U6g3aYxXmlPoZVAwUMy9AOKyF2fVuZa2UD3qZjg578OrLRt8PcNN1PleVaL/5/yYATNL0ICUw==}\n    engines: {node: '>=18'}\n\n  text-segmentation@1.0.3:\n    resolution: {integrity: sha512-iOiPUo/BGnZ6+54OsWxZidGCsdU8YbE4PSpdPinp7DeMtUJNJBoJ/ouUSTJjHkh1KntHaltHl/gDs2FC4i5+Nw==}\n\n  tiny-invariant@1.3.3:\n    resolution: {integrity: sha512-+FbBPE1o9QAYvviau/qC5SE3caw21q3xkvWKBtja5vgqOWIHHJ3ioaq1VPfn/Szqctz2bU/oYeKd9/z5BL+PVg==}\n\n  tslib@2.8.1:\n    resolution: {integrity: sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==}\n\n  tw-animate-css@1.3.3:\n    resolution: {integrity: sha512-tXE2TRWrskc4TU3RDd7T8n8Np/wCfoeH9gz22c7PzYqNPQ9FBGFbWWzwL0JyHcFp+jHozmF76tbHfPAx22ua2Q==}\n\n  typescript@5.0.2:\n    resolution: {integrity: sha512-wVORMBGO/FAs/++blGNeAVdbNKtIh1rbBL2EyQ1+J9lClJ93KiiKe8PmFIVdXhHcyv44SL9oglmfeSsndo0jRw==}\n    engines: {node: '>=12.20'}\n    hasBin: true\n\n  undici-types@6.11.1:\n    resolution: {integrity: sha512-mIDEX2ek50x0OlRgxryxsenE5XaQD4on5U2inY7RApK3SOJpofyw7uW2AyfMKkhAxXIceo2DeWGVGwyvng1GNQ==}\n\n  update-browserslist-db@1.1.3:\n    resolution: {integrity: sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==}\n    hasBin: true\n    peerDependencies:\n      browserslist: '>= 4.21.0'\n\n  use-callback-ref@1.3.3:\n    resolution: {integrity: sha512-jQL3lRnocaFtu3V00JToYz/4QkNWswxijDaCVNZRiRTO3HQDLsdu1ZtmIUvV4yPp+rvWm5j0y0TG/S61cuijTg==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  use-sidecar@1.1.3:\n    resolution: {integrity: sha512-Fedw0aZvkhynoPYlA5WXrMCAMm+nSWdZt6lzJQ7Ok8S6Q+VsHmHpRWndVRJ8Be0ZbkfPc5LRYH+5XrzXcEeLRQ==}\n    engines: {node: '>=10'}\n    peerDependencies:\n      '@types/react': '*'\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc\n    peerDependenciesMeta:\n      '@types/react':\n        optional: true\n\n  use-sync-external-store@1.5.0:\n    resolution: {integrity: sha512-Rb46I4cGGVBmjamjphe8L/UnvJD+uPPtTkNvX5mZgqdbavhI4EbgIWJiIHXJ8bc/i9EQGPRh4DwEURJ552Do0A==}\n    peerDependencies:\n      react: ^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0\n\n  utrie@1.0.2:\n    resolution: {integrity: sha512-1MLa5ouZiOmQzUbjbu9VmjLzn1QLXBhwpUa7kdLUQK+KQ5KA9I1vk5U4YHe/X2Ch7PYnJfWuWT+VbuxbGwljhw==}\n\n  vaul@0.9.9:\n    resolution: {integrity: sha512-7afKg48srluhZwIkaU+lgGtFCUsYBSGOl8vcc8N/M3YQlZFlynHD15AE+pwrYdc826o7nrIND4lL9Y6b9WWZZQ==}\n    peerDependencies:\n      react: ^16.8 || ^17.0 || ^18.0\n      react-dom: ^16.8 || ^17.0 || ^18.0\n\n  victory-vendor@36.9.2:\n    resolution: {integrity: sha512-PnpQQMuxlwYdocC8fIJqVXvkeViHYzotI+NJrCuav0ZYFoq912ZHBk3mCeuj+5/VpodOjPe1z0Fk2ihgzlXqjQ==}\n\n  yallist@5.0.0:\n    resolution: {integrity: sha512-YgvUTfwqyc7UXVMrB+SImsVYSmTS8X/tSrtdNZMImM+n7+QTriRXyXim0mBrTXNeqzVF0KWGgHPeiyViFFrNDw==}\n    engines: {node: '>=18'}\n\n  zod@3.25.67:\n    resolution: {integrity: sha512-idA2YXwpCdqUSKRCACDE6ItZD9TZzy3OZMtpfLoh6oPR47lipysRrJfjzMqFxQ3uJuUPyUeWe1r9vLH33xO/Qw==}\n\nsnapshots:\n\n  '@alloc/quick-lru@5.2.0': {}\n\n  '@ampproject/remapping@2.3.0':\n    dependencies:\n      '@jridgewell/gen-mapping': 0.3.12\n      '@jridgewell/trace-mapping': 0.3.29\n\n  '@babel/runtime@7.28.2': {}\n\n  '@date-fns/tz@1.2.0': {}\n\n  '@floating-ui/core@1.7.3':\n    dependencies:\n      '@floating-ui/utils': 0.2.10\n\n  '@floating-ui/dom@1.7.3':\n    dependencies:\n      '@floating-ui/core': 1.7.3\n      '@floating-ui/utils': 0.2.10\n\n  '@floating-ui/react-dom@2.1.5(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@floating-ui/dom': 1.7.3\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n\n  '@floating-ui/utils@0.2.10': {}\n\n  '@hookform/resolvers@3.10.0(react-hook-form@7.60.0(react@18.0.0))':\n    dependencies:\n      react-hook-form: 7.60.0(react@18.0.0)\n\n  '@isaacs/fs-minipass@4.0.1':\n    dependencies:\n      minipass: 7.1.2\n\n  '@jridgewell/gen-mapping@0.3.12':\n    dependencies:\n      '@jridgewell/sourcemap-codec': 1.5.4\n      '@jridgewell/trace-mapping': 0.3.29\n\n  '@jridgewell/resolve-uri@3.1.2': {}\n\n  '@jridgewell/sourcemap-codec@1.5.4': {}\n\n  '@jridgewell/trace-mapping@0.3.29':\n    dependencies:\n      '@jridgewell/resolve-uri': 3.1.2\n      '@jridgewell/sourcemap-codec': 1.5.4\n\n  '@next/env@14.2.16': {}\n\n  '@next/swc-darwin-arm64@14.2.16':\n    optional: true\n\n  '@next/swc-darwin-x64@14.2.16':\n    optional: true\n\n  '@next/swc-linux-arm64-gnu@14.2.16':\n    optional: true\n\n  '@next/swc-linux-arm64-musl@14.2.16':\n    optional: true\n\n  '@next/swc-linux-x64-gnu@14.2.16':\n    optional: true\n\n  '@next/swc-linux-x64-musl@14.2.16':\n    optional: true\n\n  '@next/swc-win32-arm64-msvc@14.2.16':\n    optional: true\n\n  '@next/swc-win32-ia32-msvc@14.2.16':\n    optional: true\n\n  '@next/swc-win32-x64-msvc@14.2.16':\n    optional: true\n\n  '@radix-ui/number@1.1.0': {}\n\n  '@radix-ui/primitive@1.1.1': {}\n\n  '@radix-ui/react-accordion@1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collapsible': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-alert-dialog@1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dialog': 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-arrow@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-aspect-ratio@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-avatar@1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-checkbox@1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-previous': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-size': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-collapsible@1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-collection@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-compose-refs@1.1.1(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-compose-refs@1.1.2(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-context-menu@2.2.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-menu': 2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-context@1.1.1(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-dialog@1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-focus-guards': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-focus-scope': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-portal': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      aria-hidden: 1.2.6\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      react-remove-scroll: 2.7.1(@types/react@18.0.0)(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-direction@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-dismissable-layer@1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-escape-keydown': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-dropdown-menu@2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-menu': 2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-focus-guards@1.1.1(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-focus-scope@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-hover-card@1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-popper': 1.2.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-portal': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-id@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-id@1.1.1(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-use-layout-effect': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-label@2.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-menu@2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-focus-guards': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-focus-scope': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-popper': 1.2.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-portal': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-roving-focus': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      aria-hidden: 1.2.6\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      react-remove-scroll: 2.7.1(@types/react@18.0.0)(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-menubar@1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-menu': 2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-roving-focus': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-navigation-menu@1.2.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-previous': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-visually-hidden': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-popover@1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-focus-guards': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-focus-scope': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-popper': 1.2.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-portal': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      aria-hidden: 1.2.6\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      react-remove-scroll: 2.7.1(@types/react@18.0.0)(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-popper@1.2.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@floating-ui/react-dom': 2.1.5(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-arrow': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-rect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-size': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/rect': 1.1.0\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-portal@1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-presence@1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-primitive@2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-primitive@2.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-slot': 1.2.3(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-progress@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-radio-group@1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-roving-focus': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-previous': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-size': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-roving-focus@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-scroll-area@1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/number': 1.1.0\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-select@2.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/number': 1.1.0\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-focus-guards': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-focus-scope': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-popper': 1.2.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-portal': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-previous': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-visually-hidden': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      aria-hidden: 1.2.6\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      react-remove-scroll: 2.7.1(@types/react@18.0.0)(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-separator@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-slider@1.2.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/number': 1.1.0\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-previous': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-size': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-slot@1.1.1(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-slot@1.2.3(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-compose-refs': 1.1.2(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-switch@1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-previous': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-size': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-tabs@1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-roving-focus': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-toast@1.2.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-collection': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-portal': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-visually-hidden': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-toggle-group@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-direction': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-roving-focus': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-toggle': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-toggle@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-tooltip@1.1.6(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/primitive': 1.1.1\n      '@radix-ui/react-compose-refs': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-context': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-dismissable-layer': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-id': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-popper': 1.2.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-portal': 1.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-presence': 1.1.2(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-slot': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-use-controllable-state': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-visually-hidden': 1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/react-use-callback-ref@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-use-controllable-state@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-use-escape-keydown@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-use-callback-ref': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-use-layout-effect@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-use-layout-effect@1.1.1(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-use-previous@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-use-rect@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/rect': 1.1.0\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-use-size@1.1.0(@types/react@18.0.0)(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-use-layout-effect': 1.1.0(@types/react@18.0.0)(react@18.0.0)\n      react: 18.0.0\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  '@radix-ui/react-visually-hidden@1.1.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      '@radix-ui/react-primitive': 2.0.1(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n      '@types/react-dom': 18.0.0\n\n  '@radix-ui/rect@1.1.0': {}\n\n  '@swc/counter@0.1.3': {}\n\n  '@swc/helpers@0.5.5':\n    dependencies:\n      '@swc/counter': 0.1.3\n      tslib: 2.8.1\n\n  '@tailwindcss/node@4.1.9':\n    dependencies:\n      '@ampproject/remapping': 2.3.0\n      enhanced-resolve: 5.18.3\n      jiti: 2.5.1\n      lightningcss: 1.30.1\n      magic-string: 0.30.17\n      source-map-js: 1.2.1\n      tailwindcss: 4.1.9\n\n  '@tailwindcss/oxide-android-arm64@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-darwin-arm64@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-darwin-x64@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-freebsd-x64@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-linux-arm-gnueabihf@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-linux-arm64-gnu@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-linux-arm64-musl@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-linux-x64-gnu@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-linux-x64-musl@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-wasm32-wasi@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-win32-arm64-msvc@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide-win32-x64-msvc@4.1.9':\n    optional: true\n\n  '@tailwindcss/oxide@4.1.9':\n    dependencies:\n      detect-libc: 2.0.4\n      tar: 7.4.3\n    optionalDependencies:\n      '@tailwindcss/oxide-android-arm64': 4.1.9\n      '@tailwindcss/oxide-darwin-arm64': 4.1.9\n      '@tailwindcss/oxide-darwin-x64': 4.1.9\n      '@tailwindcss/oxide-freebsd-x64': 4.1.9\n      '@tailwindcss/oxide-linux-arm-gnueabihf': 4.1.9\n      '@tailwindcss/oxide-linux-arm64-gnu': 4.1.9\n      '@tailwindcss/oxide-linux-arm64-musl': 4.1.9\n      '@tailwindcss/oxide-linux-x64-gnu': 4.1.9\n      '@tailwindcss/oxide-linux-x64-musl': 4.1.9\n      '@tailwindcss/oxide-wasm32-wasi': 4.1.9\n      '@tailwindcss/oxide-win32-arm64-msvc': 4.1.9\n      '@tailwindcss/oxide-win32-x64-msvc': 4.1.9\n\n  '@tailwindcss/postcss@4.1.9':\n    dependencies:\n      '@alloc/quick-lru': 5.2.0\n      '@tailwindcss/node': 4.1.9\n      '@tailwindcss/oxide': 4.1.9\n      postcss: 8.5.0\n      tailwindcss: 4.1.9\n\n  '@types/d3-array@3.2.1': {}\n\n  '@types/d3-color@3.1.3': {}\n\n  '@types/d3-ease@3.0.2': {}\n\n  '@types/d3-interpolate@3.0.4':\n    dependencies:\n      '@types/d3-color': 3.1.3\n\n  '@types/d3-path@3.1.1': {}\n\n  '@types/d3-scale@4.0.9':\n    dependencies:\n      '@types/d3-time': 3.0.4\n\n  '@types/d3-shape@3.1.7':\n    dependencies:\n      '@types/d3-path': 3.1.1\n\n  '@types/d3-time@3.0.4': {}\n\n  '@types/d3-timer@3.0.2': {}\n\n  '@types/node@22.0.0':\n    dependencies:\n      undici-types: 6.11.1\n\n  '@types/pako@2.0.4': {}\n\n  '@types/prop-types@15.7.15': {}\n\n  '@types/raf@3.4.3':\n    optional: true\n\n  '@types/react-dom@18.0.0':\n    dependencies:\n      '@types/react': 18.0.0\n\n  '@types/react@18.0.0':\n    dependencies:\n      '@types/prop-types': 15.7.15\n      '@types/scheduler': 0.26.0\n      csstype: 3.1.3\n\n  '@types/scheduler@0.26.0': {}\n\n  '@types/trusted-types@2.0.7':\n    optional: true\n\n  '@vercel/analytics@1.3.1(next@14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0))(react@18.0.0)':\n    dependencies:\n      server-only: 0.0.1\n    optionalDependencies:\n      next: 14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n\n  aria-hidden@1.2.6:\n    dependencies:\n      tslib: 2.8.1\n\n  autoprefixer@10.4.20(postcss@8.5.0):\n    dependencies:\n      browserslist: 4.25.1\n      caniuse-lite: 1.0.30001731\n      fraction.js: 4.3.7\n      normalize-range: 0.1.2\n      picocolors: 1.1.1\n      postcss: 8.5.0\n      postcss-value-parser: 4.2.0\n\n  base64-arraybuffer@1.0.2:\n    optional: true\n\n  browserslist@4.25.1:\n    dependencies:\n      caniuse-lite: 1.0.30001731\n      electron-to-chromium: 1.5.197\n      node-releases: 2.0.19\n      update-browserslist-db: 1.1.3(browserslist@4.25.1)\n\n  busboy@1.6.0:\n    dependencies:\n      streamsearch: 1.1.0\n\n  caniuse-lite@1.0.30001731: {}\n\n  canvg@3.0.11:\n    dependencies:\n      '@babel/runtime': 7.28.2\n      '@types/raf': 3.4.3\n      core-js: 3.45.1\n      raf: 3.4.1\n      regenerator-runtime: 0.13.11\n      rgbcolor: 1.0.1\n      stackblur-canvas: 2.7.0\n      svg-pathdata: 6.0.3\n    optional: true\n\n  chownr@3.0.0: {}\n\n  class-variance-authority@0.7.1:\n    dependencies:\n      clsx: 2.1.1\n\n  client-only@0.0.1: {}\n\n  clsx@2.1.1: {}\n\n  cmdk@1.0.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      '@radix-ui/react-dialog': 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      '@radix-ui/react-id': 1.1.1(@types/react@18.0.0)(react@18.0.0)\n      '@radix-ui/react-primitive': 2.1.3(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      use-sync-external-store: 1.5.0(react@18.0.0)\n    transitivePeerDependencies:\n      - '@types/react'\n      - '@types/react-dom'\n\n  core-js@3.45.1:\n    optional: true\n\n  css-line-break@2.1.0:\n    dependencies:\n      utrie: 1.0.2\n    optional: true\n\n  csstype@3.1.3: {}\n\n  d3-array@3.2.4:\n    dependencies:\n      internmap: 2.0.3\n\n  d3-color@3.1.0: {}\n\n  d3-ease@3.0.1: {}\n\n  d3-format@3.1.0: {}\n\n  d3-interpolate@3.0.1:\n    dependencies:\n      d3-color: 3.1.0\n\n  d3-path@3.1.0: {}\n\n  d3-scale@4.0.2:\n    dependencies:\n      d3-array: 3.2.4\n      d3-format: 3.1.0\n      d3-interpolate: 3.0.1\n      d3-time: 3.1.0\n      d3-time-format: 4.1.0\n\n  d3-shape@3.2.0:\n    dependencies:\n      d3-path: 3.1.0\n\n  d3-time-format@4.1.0:\n    dependencies:\n      d3-time: 3.1.0\n\n  d3-time@3.1.0:\n    dependencies:\n      d3-array: 3.2.4\n\n  d3-timer@3.0.1: {}\n\n  date-fns-jalali@4.1.0-0: {}\n\n  date-fns@4.1.0: {}\n\n  decimal.js-light@2.5.1: {}\n\n  detect-libc@2.0.4: {}\n\n  detect-node-es@1.1.0: {}\n\n  dom-helpers@5.2.1:\n    dependencies:\n      '@babel/runtime': 7.28.2\n      csstype: 3.1.3\n\n  dompurify@3.2.6:\n    optionalDependencies:\n      '@types/trusted-types': 2.0.7\n    optional: true\n\n  electron-to-chromium@1.5.197: {}\n\n  embla-carousel-react@8.5.1(react@18.0.0):\n    dependencies:\n      embla-carousel: 8.5.1\n      embla-carousel-reactive-utils: 8.5.1(embla-carousel@8.5.1)\n      react: 18.0.0\n\n  embla-carousel-reactive-utils@8.5.1(embla-carousel@8.5.1):\n    dependencies:\n      embla-carousel: 8.5.1\n\n  embla-carousel@8.5.1: {}\n\n  enhanced-resolve@5.18.3:\n    dependencies:\n      graceful-fs: 4.2.11\n      tapable: 2.2.2\n\n  escalade@3.2.0: {}\n\n  eventemitter3@4.0.7: {}\n\n  fast-equals@5.2.2: {}\n\n  fast-png@6.4.0:\n    dependencies:\n      '@types/pako': 2.0.4\n      iobuffer: 5.4.0\n      pako: 2.1.0\n\n  fflate@0.8.2: {}\n\n  fraction.js@4.3.7: {}\n\n  geist@1.3.1(next@14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0)):\n    dependencies:\n      next: 14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n\n  get-nonce@1.0.1: {}\n\n  graceful-fs@4.2.11: {}\n\n  html2canvas@1.4.1:\n    dependencies:\n      css-line-break: 2.1.0\n      text-segmentation: 1.0.3\n    optional: true\n\n  input-otp@1.4.1(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n\n  internmap@2.0.3: {}\n\n  iobuffer@5.4.0: {}\n\n  jiti@2.5.1: {}\n\n  js-tokens@4.0.0: {}\n\n  jspdf-autotable@5.0.2(jspdf@3.0.2):\n    dependencies:\n      jspdf: 3.0.2\n\n  jspdf@3.0.2:\n    dependencies:\n      '@babel/runtime': 7.28.2\n      fast-png: 6.4.0\n      fflate: 0.8.2\n    optionalDependencies:\n      canvg: 3.0.11\n      core-js: 3.45.1\n      dompurify: 3.2.6\n      html2canvas: 1.4.1\n\n  lightningcss-darwin-arm64@1.30.1:\n    optional: true\n\n  lightningcss-darwin-x64@1.30.1:\n    optional: true\n\n  lightningcss-freebsd-x64@1.30.1:\n    optional: true\n\n  lightningcss-linux-arm-gnueabihf@1.30.1:\n    optional: true\n\n  lightningcss-linux-arm64-gnu@1.30.1:\n    optional: true\n\n  lightningcss-linux-arm64-musl@1.30.1:\n    optional: true\n\n  lightningcss-linux-x64-gnu@1.30.1:\n    optional: true\n\n  lightningcss-linux-x64-musl@1.30.1:\n    optional: true\n\n  lightningcss-win32-arm64-msvc@1.30.1:\n    optional: true\n\n  lightningcss-win32-x64-msvc@1.30.1:\n    optional: true\n\n  lightningcss@1.30.1:\n    dependencies:\n      detect-libc: 2.0.4\n    optionalDependencies:\n      lightningcss-darwin-arm64: 1.30.1\n      lightningcss-darwin-x64: 1.30.1\n      lightningcss-freebsd-x64: 1.30.1\n      lightningcss-linux-arm-gnueabihf: 1.30.1\n      lightningcss-linux-arm64-gnu: 1.30.1\n      lightningcss-linux-arm64-musl: 1.30.1\n      lightningcss-linux-x64-gnu: 1.30.1\n      lightningcss-linux-x64-musl: 1.30.1\n      lightningcss-win32-arm64-msvc: 1.30.1\n      lightningcss-win32-x64-msvc: 1.30.1\n\n  lodash@4.17.21: {}\n\n  loose-envify@1.4.0:\n    dependencies:\n      js-tokens: 4.0.0\n\n  lucide-react@0.454.0(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n\n  magic-string@0.30.17:\n    dependencies:\n      '@jridgewell/sourcemap-codec': 1.5.4\n\n  minipass@7.1.2: {}\n\n  minizlib@3.0.2:\n    dependencies:\n      minipass: 7.1.2\n\n  mkdirp@3.0.1: {}\n\n  nanoid@3.3.11: {}\n\n  next-themes@0.4.6(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n\n  next@14.2.16(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      '@next/env': 14.2.16\n      '@swc/helpers': 0.5.5\n      busboy: 1.6.0\n      caniuse-lite: 1.0.30001731\n      graceful-fs: 4.2.11\n      postcss: 8.4.31\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      styled-jsx: 5.1.1(react@18.0.0)\n    optionalDependencies:\n      '@next/swc-darwin-arm64': 14.2.16\n      '@next/swc-darwin-x64': 14.2.16\n      '@next/swc-linux-arm64-gnu': 14.2.16\n      '@next/swc-linux-arm64-musl': 14.2.16\n      '@next/swc-linux-x64-gnu': 14.2.16\n      '@next/swc-linux-x64-musl': 14.2.16\n      '@next/swc-win32-arm64-msvc': 14.2.16\n      '@next/swc-win32-ia32-msvc': 14.2.16\n      '@next/swc-win32-x64-msvc': 14.2.16\n    transitivePeerDependencies:\n      - '@babel/core'\n      - babel-plugin-macros\n\n  node-releases@2.0.19: {}\n\n  normalize-range@0.1.2: {}\n\n  object-assign@4.1.1: {}\n\n  pako@2.1.0: {}\n\n  performance-now@2.1.0:\n    optional: true\n\n  picocolors@1.1.1: {}\n\n  postcss-value-parser@4.2.0: {}\n\n  postcss@8.4.31:\n    dependencies:\n      nanoid: 3.3.11\n      picocolors: 1.1.1\n      source-map-js: 1.2.1\n\n  postcss@8.5.0:\n    dependencies:\n      nanoid: 3.3.11\n      picocolors: 1.1.1\n      source-map-js: 1.2.1\n\n  prop-types@15.8.1:\n    dependencies:\n      loose-envify: 1.4.0\n      object-assign: 4.1.1\n      react-is: 16.13.1\n\n  raf@3.4.1:\n    dependencies:\n      performance-now: 2.1.0\n    optional: true\n\n  react-day-picker@9.8.0(react@18.0.0):\n    dependencies:\n      '@date-fns/tz': 1.2.0\n      date-fns: 4.1.0\n      date-fns-jalali: 4.1.0-0\n      react: 18.0.0\n\n  react-dom@18.0.0(react@18.0.0):\n    dependencies:\n      loose-envify: 1.4.0\n      react: 18.0.0\n      scheduler: 0.21.0\n\n  react-hook-form@7.60.0(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n\n  react-is@16.13.1: {}\n\n  react-is@18.3.1: {}\n\n  react-remove-scroll-bar@2.3.8(@types/react@18.0.0)(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n      react-style-singleton: 2.2.3(@types/react@18.0.0)(react@18.0.0)\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  react-remove-scroll@2.7.1(@types/react@18.0.0)(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n      react-remove-scroll-bar: 2.3.8(@types/react@18.0.0)(react@18.0.0)\n      react-style-singleton: 2.2.3(@types/react@18.0.0)(react@18.0.0)\n      tslib: 2.8.1\n      use-callback-ref: 1.3.3(@types/react@18.0.0)(react@18.0.0)\n      use-sidecar: 1.1.3(@types/react@18.0.0)(react@18.0.0)\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  react-resizable-panels@2.1.7(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n\n  react-smooth@4.0.4(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      fast-equals: 5.2.2\n      prop-types: 15.8.1\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      react-transition-group: 4.4.5(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n\n  react-style-singleton@2.2.3(@types/react@18.0.0)(react@18.0.0):\n    dependencies:\n      get-nonce: 1.0.1\n      react: 18.0.0\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  react-transition-group@4.4.5(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      '@babel/runtime': 7.28.2\n      dom-helpers: 5.2.1\n      loose-envify: 1.4.0\n      prop-types: 15.8.1\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n\n  react@18.0.0:\n    dependencies:\n      loose-envify: 1.4.0\n\n  recharts-scale@0.4.5:\n    dependencies:\n      decimal.js-light: 2.5.1\n\n  recharts@2.15.4(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      clsx: 2.1.1\n      eventemitter3: 4.0.7\n      lodash: 4.17.21\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n      react-is: 18.3.1\n      react-smooth: 4.0.4(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      recharts-scale: 0.4.5\n      tiny-invariant: 1.3.3\n      victory-vendor: 36.9.2\n\n  regenerator-runtime@0.13.11:\n    optional: true\n\n  rgbcolor@1.0.1:\n    optional: true\n\n  scheduler@0.21.0:\n    dependencies:\n      loose-envify: 1.4.0\n\n  server-only@0.0.1: {}\n\n  sonner@1.7.4(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n\n  source-map-js@1.2.1: {}\n\n  stackblur-canvas@2.7.0:\n    optional: true\n\n  streamsearch@1.1.0: {}\n\n  styled-jsx@5.1.1(react@18.0.0):\n    dependencies:\n      client-only: 0.0.1\n      react: 18.0.0\n\n  svg-pathdata@6.0.3:\n    optional: true\n\n  tailwind-merge@2.5.5: {}\n\n  tailwindcss-animate@1.0.7(tailwindcss@4.1.9):\n    dependencies:\n      tailwindcss: 4.1.9\n\n  tailwindcss@4.1.9: {}\n\n  tapable@2.2.2: {}\n\n  tar@7.4.3:\n    dependencies:\n      '@isaacs/fs-minipass': 4.0.1\n      chownr: 3.0.0\n      minipass: 7.1.2\n      minizlib: 3.0.2\n      mkdirp: 3.0.1\n      yallist: 5.0.0\n\n  text-segmentation@1.0.3:\n    dependencies:\n      utrie: 1.0.2\n    optional: true\n\n  tiny-invariant@1.3.3: {}\n\n  tslib@2.8.1: {}\n\n  tw-animate-css@1.3.3: {}\n\n  typescript@5.0.2: {}\n\n  undici-types@6.11.1: {}\n\n  update-browserslist-db@1.1.3(browserslist@4.25.1):\n    dependencies:\n      browserslist: 4.25.1\n      escalade: 3.2.0\n      picocolors: 1.1.1\n\n  use-callback-ref@1.3.3(@types/react@18.0.0)(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  use-sidecar@1.1.3(@types/react@18.0.0)(react@18.0.0):\n    dependencies:\n      detect-node-es: 1.1.0\n      react: 18.0.0\n      tslib: 2.8.1\n    optionalDependencies:\n      '@types/react': 18.0.0\n\n  use-sync-external-store@1.5.0(react@18.0.0):\n    dependencies:\n      react: 18.0.0\n\n  utrie@1.0.2:\n    dependencies:\n      base64-arraybuffer: 1.0.2\n    optional: true\n\n  vaul@0.9.9(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0):\n    dependencies:\n      '@radix-ui/react-dialog': 1.1.4(@types/react-dom@18.0.0)(@types/react@18.0.0)(react-dom@18.0.0(react@18.0.0))(react@18.0.0)\n      react: 18.0.0\n      react-dom: 18.0.0(react@18.0.0)\n    transitivePeerDependencies:\n      - '@types/react'\n      - '@types/react-dom'\n\n  victory-vendor@36.9.2:\n    dependencies:\n      '@types/d3-array': 3.2.1\n      '@types/d3-ease': 3.0.2\n      '@types/d3-interpolate': 3.0.4\n      '@types/d3-scale': 4.0.9\n      '@types/d3-shape': 3.1.7\n      '@types/d3-time': 3.0.4\n      '@types/d3-timer': 3.0.2\n      d3-array: 3.2.4\n      d3-ease: 3.0.1\n      d3-interpolate: 3.0.1\n      d3-scale: 4.0.2\n      d3-shape: 3.2.0\n      d3-time: 3.1.0\n      d3-timer: 3.0.1\n\n  yallist@5.0.0: {}\n\n  zod@3.25.67: {}\n","size_bytes":126522},"lib/hooks/useAuthRedirect.ts":{"content":"'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\n\n// Helper function to sanitize redirect paths\nfunction sanitizeRedirectPath(path: string | null): string | null {\n  if (!path) return null;\n  \n  // Only allow internal paths starting with '/' and not containing '://'\n  if (path.startsWith('/') && !path.includes('://')) {\n    return path;\n  }\n  \n  return null; // Invalid path\n}\n\nexport function useAuthRedirect() {\n  const { user } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (user) {\n      // Check for stored redirect path\n      const rawRedirectPath = sessionStorage.getItem('redirectAfterLogin');\n      const redirectPath = sanitizeRedirectPath(rawRedirectPath);\n      if (redirectPath) {\n        sessionStorage.removeItem('redirectAfterLogin');\n        router.push(redirectPath);\n      }\n    }\n  }, [user, router]);\n}\n\nexport function useRequireAuth(redirectTo: string = '/auth/signin') {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!loading && !user) {\n      // Store current path for redirect after login (only if it's a safe internal path)\n      const currentPath = window.location.pathname;\n      const sanitizedPath = sanitizeRedirectPath(currentPath);\n      if (sanitizedPath && sanitizedPath !== redirectTo) {\n        sessionStorage.setItem('redirectAfterLogin', sanitizedPath);\n      }\n      router.push(redirectTo);\n    }\n  }, [user, loading, redirectTo, router]);\n\n  return { user, loading, isAuthenticated: !!user };\n}\n\nexport function useRequireAdmin(redirectTo: string = '/') {\n  const { user, userProfile, loading, isAdmin } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!loading) {\n      if (!user) {\n        router.push('/auth/signin');\n      } else if (!isAdmin) {\n        router.push(redirectTo);\n      }\n    }\n  }, [user, userProfile, loading, isAdmin, redirectTo, router]);\n\n  return { user, userProfile, loading, isAdmin, isAuthorized: !!user && isAdmin };\n}","size_bytes":2087},"app/privacy/page.tsx":{"content":"import ContactBanner from \"@/components/cta/contact-banner\"\nimport { Shield, Eye, Lock, FileText } from 'lucide-react'\n\nexport default function PrivacyPolicyPage() {\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n      <ContactBanner \n        title=\"Hai domande sulla privacy?\" \n        subtitle=\"Contattaci per qualsiasi chiarimento sui tuoi dati personali.\" \n      />\n      \n      <div className=\"py-16 lg:py-24\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <header className=\"text-center mb-12\">\n            <div className=\"w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <Shield className=\"w-8 h-8 text-orange-600 dark:text-orange-400\" />\n            </div>\n            <h1 className=\"text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-4\">\n              Privacy Policy\n            </h1>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\n              La tua privacy √® importante per noi. Questa informativa descrive come raccogliamo, \n              utilizziamo e proteggiamo i tuoi dati personali.\n            </p>\n            <div className=\"text-sm text-gray-500 dark:text-gray-400 mt-4\">\n              Ultimo aggiornamento: 15 gennaio 2024\n            </div>\n          </header>\n\n          <div className=\"space-y-12\">\n            {/* Data Collection */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Eye className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Dati che raccogliamo</h2>\n              </div>\n              <div className=\"space-y-4 text-gray-600 dark:text-gray-300\">\n                <p>\n                  Raccogliamo esclusivamente i dati che ci fornisci volontariamente attraverso:\n                </p>\n                <ul className=\"list-disc pl-6 space-y-2\">\n                  <li><strong>Moduli di contatto:</strong> nome, cognome, email, telefono, messaggio</li>\n                  <li><strong>Newsletter:</strong> indirizzo email per invio contenuti informativi</li>\n                  <li><strong>Prenotazioni:</strong> dati necessari per organizzare il viaggio</li>\n                  <li><strong>Cookie tecnici:</strong> per il funzionamento del sito (vedi Cookie Policy)</li>\n                </ul>\n                <p className=\"text-sm bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border-l-4 border-orange-500\">\n                  <strong>Non raccogliamo mai:</strong> dati sensibili, informazioni finanziarie complete, \n                  dati di navigazione per profilazione commerciale.\n                </p>\n              </div>\n            </section>\n\n            {/* Data Usage */}\n            <section>\n              <div className=\"flex items-center gap-3 mb-6\">\n                <FileText className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Come utilizziamo i tuoi dati</h2>\n              </div>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                <div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n                  <h3 className=\"font-bold text-green-800 dark:text-green-300 mb-3\">Finalit√† principali</h3>\n                  <ul className=\"text-green-700 dark:text-green-400 text-sm space-y-2\">\n                    <li>‚Ä¢ Rispondere alle richieste di contatto</li>\n                    <li>‚Ä¢ Fornire preventivi personalizzati</li>\n                    <li>‚Ä¢ Organizzare viaggi e esperienze</li>\n                    <li>‚Ä¢ Assistenza clienti durante il viaggio</li>\n                  </ul>\n                </div>\n                <div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border border-orange-200 dark:border-orange-800\">\n                  <h3 className=\"font-bold text-orange-800 dark:text-orange-300 mb-3\">Comunicazioni</h3>\n                  <ul className=\"text-orange-700 dark:text-orange-400 text-sm space-y-2\">\n                    <li>‚Ä¢ Newsletter con consigli di viaggio</li>\n                    <li>‚Ä¢ Aggiornamenti sui servizi</li>\n                    <li>‚Ä¢ Offerte speciali (solo se richieste)</li>\n                    <li>‚Ä¢ Comunicazioni di servizio importanti</li>\n                  </ul>\n                </div>\n              </div>\n            </section>\n\n            {/* Data Protection */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Lock className=\"w-6 h-6 text-purple-600 dark:text-purple-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Come proteggiamo i tuoi dati</h2>\n              </div>\n              <div className=\"space-y-4 text-gray-600 dark:text-gray-300\">\n                <p>\n                  Implementiamo misure di sicurezza tecniche e organizzative appropriate per proteggere \n                  i tuoi dati personali:\n                </p>\n                <div className=\"grid sm:grid-cols-2 gap-4\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Sicurezza tecnica</h4>\n                    <ul className=\"text-sm space-y-1\">\n                      <li>‚Ä¢ Crittografia SSL/TLS</li>\n                      <li>‚Ä¢ Server sicuri in Europa</li>\n                      <li>‚Ä¢ Backup regolari</li>\n                      <li>‚Ä¢ Accesso limitato ai dati</li>\n                    </ul>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Sicurezza organizzativa</h4>\n                    <ul className=\"text-sm space-y-1\">\n                      <li>‚Ä¢ Formazione del personale</li>\n                      <li>‚Ä¢ Procedure di sicurezza</li>\n                      <li>‚Ä¢ Controlli di accesso</li>\n                      <li>‚Ä¢ Audit periodici</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* User Rights */}\n            <section>\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">I tuoi diritti</h2>\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                {[\n                  {\n                    title: \"Accesso\",\n                    description: \"Puoi richiedere una copia di tutti i dati personali che abbiamo su di te\"\n                  },\n                  {\n                    title: \"Rettifica\",\n                    description: \"Puoi chiedere di correggere dati inesatti o incompleti\"\n                  },\n                  {\n                    title: \"Cancellazione\",\n                    description: \"Puoi richiedere la cancellazione dei tuoi dati (diritto all'oblio)\"\n                  },\n                  {\n                    title: \"Limitazione\",\n                    description: \"Puoi chiedere di limitare il trattamento in determinate circostanze\"\n                  },\n                  {\n                    title: \"Portabilit√†\",\n                    description: \"Puoi ottenere i tuoi dati in formato strutturato e leggibile\"\n                  },\n                  {\n                    title: \"Opposizione\",\n                    description: \"Puoi opporti al trattamento per finalit√† di marketing diretto\"\n                  }\n                ].map((right, index) => (\n                  <div key={index} className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-2\">{right.title}</h3>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">{right.description}</p>\n                  </div>\n                ))}\n              </div>\n              <div className=\"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                <p className=\"text-yellow-800 dark:text-yellow-300 text-sm\">\n                  <strong>Come esercitare i tuoi diritti:</strong> Invia una richiesta a{\" \"}\n                  <a href=\"mailto:privacy@moroccodreams.it\" className=\"underline hover:text-yellow-900 dark:hover:text-yellow-200\">\n                    privacy@moroccodreams.it\n                  </a>{\" \"}\n                  specificando il diritto che vuoi esercitare. Risponderemo entro 30 giorni.\n                </p>\n              </div>\n            </section>\n\n            {/* Data Retention */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Conservazione dei dati</h2>\n              <div className=\"space-y-4 text-gray-600 dark:text-gray-300\">\n                <p>Conserviamo i tuoi dati personali solo per il tempo necessario alle finalit√† per cui sono stati raccolti:</p>\n                <div className=\"grid sm:grid-cols-2 gap-4\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Richieste di contatto</h4>\n                    <p className=\"text-sm\">24 mesi dalla risposta o fino alla conclusione del rapporto commerciale</p>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Newsletter</h4>\n                    <p className=\"text-sm\">Fino alla disiscrizione o richiesta di cancellazione</p>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Clienti</h4>\n                    <p className=\"text-sm\">10 anni per obblighi fiscali, poi cancellazione automatica</p>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Cookie tecnici</h4>\n                    <p className=\"text-sm\">Durata della sessione o secondo le impostazioni del browser</p>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Contact */}\n            <section className=\"text-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Contatti per la privacy</h2>\n              <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\n                Per qualsiasi domanda riguardante questa Privacy Policy o il trattamento dei tuoi dati personali:\n              </p>\n              <div className=\"space-y-2\">\n                <p className=\"text-gray-900 dark:text-white font-semibold\">Morocco Dreams</p>\n                <p className=\"text-gray-600 dark:text-gray-300\">Email: privacy@moroccodreams.it</p>\n                <p className=\"text-gray-600 dark:text-gray-300\">Telefono: +39 329 233 3370</p>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":11579},"app/api/admin/populate/route.ts":{"content":"// Database Population API - Server-side secure population\nimport { NextRequest, NextResponse } from 'next/server'\nimport { requireAdmin, adminDb } from '@/lib/auth-admin'\nimport { COLLECTIONS } from '@/lib/firestore-schema'\n\n// Import all the organized content data\nimport { populateCompleteDatabase } from '@/lib/database-populator'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    const { force = false } = await request.json()\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // Run database population\n    const result = await populateCompleteDatabase(force)\n    \n    return NextResponse.json({\n      success: true,\n      result,\n      message: 'Database populated successfully'\n    })\n    \n  } catch (error) {\n    console.error('Populate database error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error populating database' \n    }, { status: 500 })\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // Get collection counts for overview\n    const collections = Object.values(COLLECTIONS)\n    const counts: Record<string, number> = {}\n    \n    for (const collection of collections) {\n      try {\n        const snapshot = await adminDb.collection(collection).get()\n        counts[collection] = snapshot.size\n      } catch (error) {\n        counts[collection] = 0\n      }\n    }\n    \n    return NextResponse.json({\n      collections: counts,\n      total: Object.values(counts).reduce((sum, count) => sum + count, 0)\n    })\n    \n  } catch (error) {\n    console.error('Get database status error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error getting database status' \n    }, { status: 500 })\n  }\n}","size_bytes":2462},"lib/public-data.ts":{"content":"// Public-facing data queries using PostgreSQL API\n// This replaces all Firestore queries with REST API calls\n\n// Base API URL - works on both server and client\nfunction getAPIBase() {\n  if (typeof window !== 'undefined') {\n    // Client-side: use relative URLs\n    return '';\n  }\n  // Server-side: use absolute URLs\n  return process.env.NEXT_PUBLIC_SITE_URL || 'http://localhost:5000';\n}\n\n// Travel interface\nexport interface Travel {\n  id: string;\n  title: string;\n  slug: string;\n  category: string;\n  description: string;\n  image?: string;\n  duration: string;\n  price: number;\n  itinerary?: any[];\n  includes?: string[];\n  excludes?: string[];\n  published: boolean;\n  featured: boolean;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\n// Experience interface\nexport interface Experience {\n  id: string;\n  title: string;\n  slug: string;\n  category: string;\n  description: string;\n  image?: string;\n  duration: string;\n  price: number;\n  highlights?: string[];\n  itinerary?: any[];\n  published: boolean;\n  featured: boolean;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\n// Service interface\nexport interface Service {\n  id: string;\n  name: string;\n  slug: string;\n  category: string;\n  description: string;\n  icon?: string;\n  features?: string[];\n  published: boolean;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\n// Vehicle interface\nexport interface Vehicle {\n  id: string;\n  name: string;\n  category: \"economica\" | \"suv\" | \"Premium\";\n  transmission: \"manuale\" | \"automatica\";\n  fuel: \"benzina\" | \"diesel\";\n  fuelType?: string;\n  hasAC: boolean;\n  doors: number;\n  seats: number;\n  luggage?: number;\n  dailyDeductible: number;\n  image: string;\n  features?: string[];\n  pricingPeriods?: {\n    name: string;\n    startDate: string;\n    endDate: string;\n    shortTerm: number;\n    mediumTerm: number;\n    longTerm: number;\n  }[];\n  pricing?: {\n    period1: { short: number; medium: number; long: number };\n    period2: { short: number; medium: number; long: number };\n    period3: { short: number; medium: number; long: number };\n    period4: { short: number; medium: number; long: number };\n  };\n  published: boolean;\n  featured: boolean;\n}\n\n// Blog post interface\nexport interface BlogPost {\n  id: string;\n  slug: string;\n  title: string;\n  excerpt: string;\n  cover: string;\n  author: string;\n  authorRole?: string;\n  date: string;\n  readingMinutes: number;\n  tags: string[] | null;\n  sections: {\n    heading: string;\n    body: string;\n    image?: string;\n  }[];\n  published: boolean;\n  featured: boolean;\n}\n\n// City interface\nexport interface City {\n  id: string;\n  name: string;\n  slug: string;\n  type: string;\n  description: string;\n  image?: string;\n  attractions?: string[];\n  history?: string;\n  tourPrice?: number;\n  published: boolean;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\n// Get published travels for public display\nexport async function getPublishedTravels(filters?: {\n  category?: string;\n  featured?: boolean;\n  limit?: number;\n}): Promise<Travel[]> {\n  try {\n    const params = new URLSearchParams();\n    if (filters?.category) params.append('category', filters.category);\n    if (filters?.featured !== undefined) params.append('featured', String(filters.featured));\n    if (filters?.limit) params.append('limit', String(filters.limit));\n    \n    const url = `${getAPIBase()}/api/travels${params.toString() ? `?${params}` : ''}`;\n    const response = await fetch(url, {\n      next: { tags: ['travels'] }\n    });\n    \n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data.travels || [];\n  } catch (error) {\n    console.error('Error fetching published travels:', error);\n    throw new Error(`Database error: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n// Get published experiences for public display\nexport async function getPublishedExperiences(filters?: {\n  category?: string;\n  featured?: boolean;\n  limit?: number;\n}): Promise<Experience[]> {\n  try {\n    const params = new URLSearchParams();\n    if (filters?.category) params.append('category', filters.category);\n    if (filters?.featured !== undefined) params.append('featured', String(filters.featured));\n    if (filters?.limit) params.append('limit', String(filters.limit));\n    \n    const url = `${getAPIBase()}/api/experiences${params.toString() ? `?${params}` : ''}`;\n    const response = await fetch(url, {\n      next: { tags: ['experiences'] }\n    });\n    \n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data.experiences || [];\n  } catch (error) {\n    console.error('Error fetching published experiences:', error);\n    throw new Error(`Database error: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n// Get published services for public display\nexport async function getPublishedServices(filters?: {\n  category?: string;\n  limit?: number;\n}): Promise<Service[]> {\n  try {\n    const params = new URLSearchParams();\n    if (filters?.category) params.append('category', filters.category);\n    if (filters?.limit) params.append('limit', String(filters.limit));\n    \n    const url = `${getAPIBase()}/api/services${params.toString() ? `?${params}` : ''}`;\n    const response = await fetch(url, {\n      next: { tags: ['services'] }\n    });\n    \n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data.services || [];\n  } catch (error) {\n    console.error('Error fetching published services:', error);\n    throw new Error(`Database error: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n// Get published vehicles for car rental page\nexport async function getPublishedVehicles(filters?: {\n  category?: string;\n  featured?: boolean;\n  limit?: number;\n}): Promise<Vehicle[]> {\n  try {\n    const params = new URLSearchParams();\n    if (filters?.category) params.append('category', filters.category);\n    if (filters?.featured !== undefined) params.append('featured', String(filters.featured));\n    if (filters?.limit) params.append('limit', String(filters.limit));\n    \n    const url = `${getAPIBase()}/api/vehicles${params.toString() ? `?${params}` : ''}`;\n    const response = await fetch(url, {\n      next: { tags: ['vehicles'] }\n    });\n    \n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data.vehicles || [];\n  } catch (error) {\n    console.error('Error fetching published vehicles:', error);\n    throw new Error(`Database error: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n// Get published blog posts\nexport async function getPublishedBlogPosts(filters?: {\n  tag?: string;\n  featured?: boolean;\n  limit?: number;\n}): Promise<BlogPost[]> {\n  try {\n    const params = new URLSearchParams();\n    if (filters?.tag) params.append('tag', filters.tag);\n    if (filters?.featured !== undefined) params.append('featured', String(filters.featured));\n    if (filters?.limit) params.append('limit', String(filters.limit));\n    \n    const url = `${getAPIBase()}/api/blog${params.toString() ? `?${params}` : ''}`;\n    const response = await fetch(url, {\n      next: { tags: ['blog'] }\n    });\n    \n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data.posts || [];\n  } catch (error) {\n    console.error('Error fetching published blog posts:', error);\n    throw new Error(`Database error: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n// Get published cities\nexport async function getPublishedCities(filters?: {\n  type?: string;\n  limit?: number;\n}): Promise<City[]> {\n  try {\n    const params = new URLSearchParams();\n    if (filters?.type) params.append('type', filters.type);\n    if (filters?.limit) params.append('limit', String(filters.limit));\n    \n    const url = `${getAPIBase()}/api/cities${params.toString() ? `?${params}` : ''}`;\n    const response = await fetch(url, {\n      next: { tags: ['cities'] }\n    });\n    \n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data.cities || [];\n  } catch (error) {\n    console.error('Error fetching published cities:', error);\n    throw new Error(`Database error: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n// Get featured content for homepage\nexport async function getFeaturedContent() {\n  try {\n    const [travels, experiences, services] = await Promise.all([\n      getPublishedTravels({ featured: true, limit: 6 }),\n      getPublishedExperiences({ featured: true, limit: 4 }),\n      getPublishedServices({ limit: 8 })\n    ]);\n    \n    return {\n      travels,\n      experiences,\n      services\n    };\n  } catch (error) {\n    console.error('Error fetching featured content:', error);\n    return {\n      travels: [],\n      experiences: [],\n      services: []\n    };\n  }\n}\n","size_bytes":9082},"app/viaggi/citta-imperiali/page.tsx":{"content":"import { MapPin, Clock, Users, Star, Camera, Utensils, Building } from 'lucide-react'\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function CittaImperialiPage() {\n  const cities = [\n    {\n      id: \"marrakech\",\n      name: \"Marrakech\",\n      title: \"La Perla Rossa\",\n      description: \"Citt√† vibrante con la famosa piazza Jemaa el-Fnaa e souks colorati\",\n      image: \"/images/marrakech-medina.png\",\n      highlights: [\"Jemaa el-Fnaa\", \"Souks\", \"Giardini Majorelle\", \"Palazzo Bahia\", \"Koutoubia\"],\n      duration: \"2-3 giorni\",\n      bestTime: \"Ottobre - Aprile\",\n      rating: 4.9,\n      reviews: 234,\n    },\n    {\n      id: \"fes\",\n      name: \"Fes\",\n      title: \"Capitale Spirituale\",\n      description: \"La medina pi√π grande del mondo e centro della cultura islamica\",\n      image: \"/images/fes-architecture.png\",\n      highlights: [\"Medina UNESCO\", \"Universit√† Al Quaraouiyine\", \"Concerie Chouara\", \"Palazzo Reale\"],\n      duration: \"2-3 giorni\",\n      bestTime: \"Marzo - Maggio, Settembre - Novembre\",\n      rating: 4.8,\n      reviews: 189,\n    },\n    {\n      id: \"meknes\",\n      name: \"Meknes\",\n      title: \"La Versailles del Marocco\",\n      description: \"Monumenti imperiali grandiosi e atmosfera pi√π rilassata\",\n      image: \"/images/imperial-cities.png\",\n      highlights: [\"Bab Mansour\", \"Mausoleo Moulay Ismail\", \"Heri es-Souani\", \"Volubilis\"],\n      duration: \"1-2 giorni\",\n      bestTime: \"Tutto l'anno\",\n      rating: 4.7,\n      reviews: 156,\n    },\n    {\n      id: \"rabat\",\n      name: \"Rabat\",\n      title: \"Capitale Moderna\",\n      description: \"Perfetto equilibrio tra tradizione e modernit√†\",\n      image: \"/images/imperial-cities-tour.png\",\n      highlights: [\"Torre Hassan\", \"Kasbah Oudayas\", \"Mausoleo Mohammed V\", \"Chellah\"],\n      duration: \"1-2 giorni\",\n      bestTime: \"Tutto l'anno\",\n      rating: 4.6,\n      reviews: 143,\n    },\n  ]\n\n  const tours = [\n    {\n      id: 1,\n      title: \"Grand Tour delle 4 Citt√† Imperiali\",\n      duration: \"8 giorni / 7 notti\",\n      price: \"‚Ç¨890\",\n      originalPrice: \"‚Ç¨1090\",\n      image: \"/images/imperial-cities-tour.png\",\n      includes: [\"Tutte e 4 le citt√†\", \"Guide locali\", \"Trasporti privati\", \"Hotel 4*\"],\n      rating: 4.9,\n      reviews: 127,\n      bestFor: \"Chi vuole vedere tutte le citt√† iconiche con zero pensieri\"\n    },\n    {\n      id: 2,\n      title: \"Marrakech & Fes Express\",\n      duration: \"5 giorni / 4 notti\",\n      price: \"‚Ç¨590\",\n      originalPrice: \"‚Ç¨720\",\n      image: \"/images/marrakech-fes.png\",\n      includes: [\"2 citt√† principali\", \"Treno veloce\", \"Riad tradizionali\", \"Esperienze autentiche\"],\n      rating: 4.8,\n      reviews: 89,\n      bestFor: \"Un assaggio imperiale, ritmo veloce, ideale per viaggi brevi\"\n    },\n    {\n      id: 3,\n      title: \"Citt√† Imperiali + Deserto\",\n      duration: \"10 giorni / 9 notti\",\n      price: \"‚Ç¨1290\",\n      originalPrice: \"‚Ç¨1490\",\n      image: \"/images/complete-morocco.png\",\n      includes: [\"4 citt√† + Sahara\", \"Notte nel deserto\", \"Cammelli\", \"Esperienza completa\"],\n      rating: 4.9,\n      reviews: 156,\n      bestFor: \"Tutto ci√≤ che offre il Marocco: cultura, storia e avventura nel Sahara\"\n    },\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-background transition-colors\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-orange-500 to-red-500 dark:from-orange-900 dark:to-red-900 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <img \n            src=\"/images/imperial-cities-tour.png\" \n            alt=\"Citt√† Imperiali\" \n            className=\"w-full h-full object-cover opacity-30\" \n          />\n          <div className=\"absolute inset-0 bg-black/40 dark:bg-black/60\" />\n        </div>\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6\">\n            Citt√† Imperiali\n            <span className=\"block text-3xl md:text-4xl lg:text-5xl mt-2 bg-gradient-to-r from-yellow-300 to-orange-200 bg-clip-text text-transparent\">\n              del Marocco\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto mb-8\">\n            Scopri Marrakech, Fes, Meknes e Rabat: quattro gioielli che raccontano la storia millenaria del regno\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-white/20 dark:bg-white/10 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">4 Citt√† UNESCO</span>\n            </div>\n            <div className=\"bg-white/20 dark:bg-white/10 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Storia Millenaria</span>\n            </div>\n            <div className=\"bg-white/20 dark:bg-white/10 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Cultura Autentica</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Cities Grid */}\n      <div className=\"py-16 lg:py-24 bg-background transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Le Quattro Citt√† Imperiali\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Ogni citt√† ha la sua personalit√† unica e tesori da scoprire\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-2 gap-8 lg:gap-12\">\n            {cities.map((city) => (\n              <div\n                key={city.id}\n                className=\"group bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105\"\n              >\n                <div className=\"relative h-64 lg:h-80 overflow-hidden\">\n                  <img\n                    src={city.image || \"/placeholder.svg?height=400&width=600\"}\n                    alt={city.name}\n                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n                  \n                  {/* City Badge */}\n                  <div className=\"absolute top-4 left-4 bg-white/90 dark:bg-card/90 backdrop-blur-sm px-4 py-2 rounded-full\">\n                    <div className=\"flex items-center space-x-2\">\n                      <MapPin className=\"w-4 h-4 text-orange-500\" />\n                      <span className=\"font-semibold text-foreground\">{city.name}</span>\n                    </div>\n                  </div>\n\n                  {/* Rating */}\n                  <div className=\"absolute top-4 right-4 bg-black/30 backdrop-blur-sm px-3 py-1 rounded-full\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-white text-sm font-semibold\">{city.rating}</span>\n                      <span className=\"text-white/70 text-sm\">({city.reviews})</span>\n                    </div>\n                  </div>\n\n                  {/* Title Overlay */}\n                  <div className=\"absolute bottom-6 left-6 text-white drop-shadow\">\n                    <h3 className=\"text-2xl lg:text-3xl font-bold mb-2\">{city.title}</h3>\n                    <p className=\"text-gray-200 text-sm lg:text-base\">{city.description}</p>\n                  </div>\n                </div>\n                <div className=\"p-6 lg:p-8\">\n                  {/* Info Grid */}\n                  <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                    <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                      <Clock className=\"w-4 h-4 text-orange-500\" />\n                      <span>{city.duration}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                      <Camera className=\"w-4 h-4 text-orange-500\" />\n                      <span>{city.bestTime}</span>\n                    </div>\n                  </div>\n                  {/* Highlights */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-foreground mb-3\">Cosa vedere:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {city.highlights.map((highlight, hidx) => (\n  <span\n    key={hidx}\n    className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white dark:bg-orange-900/30 dark:text-orange-200 px-3 py-1 rounded-full text-xs font-semibold transition-colors\"\n  >\n    {highlight}\n  </span>\n))}\n\n                    </div>\n                  </div>\n                  {/* Actions */}\n                  <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3\">\n                    <Link\n                      href={`/viaggi/citta-imperiali/${city.id}`}\n                      className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      Scopri {city.name}\n                    </Link>\n                    <Link\n                      href=\"/viaggi/gruppo\"\n                      className=\"px-6 py-3 border-2 border-orange-500 text-orange-500 rounded-xl hover:bg-orange-500 hover:text-white transition-all duration-300 font-semibold text-center\"\n                    >\n                      Tour\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Tours Section */}\n      <div className=\"py-16 lg:py-24 bg-muted transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Tour delle Citt√† Imperiali\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Scegli il tour perfetto per scoprire le meraviglie imperiali\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {tours.map((tour) => (\n              <div\n                key={tour.id}\n                className=\"bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105\"\n              >\n                <div className=\"relative h-48 overflow-hidden\">\n                  <img\n                    src={tour.image || \"/placeholder.svg?height=300&width=400\"}\n                    alt={tour.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  \n                  {/* Wishlist Button */}\n                  <div className=\"absolute top-4 left-4 z-10\">\n                    <WishlistButton\n                      itemId={`imperial-tour-${tour.id}`}\n                      itemType=\"travel\"\n                      itemTitle={tour.title}\n                      itemImage={tour.image}\n                      itemPrice={parseInt(tour.price.replace('‚Ç¨', ''))}\n                      itemDescription={tour.bestFor}\n                    />\n                  </div>\n                  \n                  <div className=\"absolute top-4 right-4 bg-white/95 dark:bg-card/90 backdrop-blur-sm px-4 py-2 rounded-full\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-bold text-lg text-foreground\">{tour.price}</span>\n                      {tour.originalPrice && (\n                        <span className=\"text-sm line-through text-muted-foreground\">{tour.originalPrice}</span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"p-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"text-xl font-bold text-foreground\">{tour.title}</h3>\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-sm font-semibold text-foreground\">{tour.rating}</span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 text-sm text-muted-foreground mb-4\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>{tour.duration}</span>\n                  </div>\n                  <div className=\"space-y-2 mb-6\">\n                    {tour.includes.map((item, idx) => (\n                      <div key={idx} className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                        <div className=\"w-2 h-2 bg-orange-500 rounded-full\" />\n                        <span>{item}</span>\n                      </div>\n                    ))}\n                  </div>\n                  {/* Box evidenza \"Perfetto per\" visibile e responsive */}\n                  <div className=\"mb-4 rounded-xl p-4 bg-gradient-to-r from-orange-500 to-red-500 text-white dark:bg-orange-900/20 dark:text-orange-200\">\n                    <h4 className=\"font-semibold mb-2 text-white dark:text-orange-200\">Perfetto per:</h4>\n                    <p className=\"text-sm text-white dark:text-orange-200\">{tour.bestFor}</p>\n                  </div>\n                  <Link\n                    href={`/viaggi/gruppo/${tour.id}`}\n                    className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 dark:from-orange-900 dark:to-red-900 text-white py-3 px-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-center block\"\n                  >\n                    Prenota Tour\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-r from-orange-500 to-red-500 dark:from-orange-900 dark:to-red-900\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">Pronto per l'Avventura Imperiale?</h2>\n          <p className=\"text-lg lg:text-xl mb-8 max-w-2xl mx-auto\">\n            Scopri la grandezza del passato marocchino attraverso le sue citt√† pi√π magnifiche\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/viaggi/su-misura\"\n              className=\"bg-white text-orange-600 px-8 py-4 rounded-xl hover:bg-gray-100 transition-all duration-300 font-semibold text-lg\"\n            >\n              Crea Tour Personalizzato\n            </Link>\n            <Link\n              href=\"/contatti\"\n              className=\"border-2 border-white text-white px-8 py-4 rounded-xl hover:bg-white hover:text-orange-600 transition-all duration-300 font-semibold text-lg\"\n            >\n              Contattaci\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":15486},"lib/firestore-schema.ts":{"content":"// Morocco Dreams CMS - Complete Data Model Schema\n// Webflow-style CMS with separate collections and visual editing capabilities\n\nimport { Timestamp } from \"firebase/firestore\"\n\n// === CORE ENTITY TYPES ===\n\n// Custom Trip Requests - User-submitted trip planning requests\nexport interface CustomTripRequest {\n  id?: string\n  userId: string // Firebase Auth UID\n  userEmail: string\n  \n  // Step 1 - Basic Info\n  name: string\n  email: string\n  phone: string\n  travelers: number\n  children: number\n  childrenAges?: string\n  departureDate: string\n  returnDate: string\n  duration: number\n  departureCity: string\n  budget: number\n  \n  // Step 2 - Travel Style\n  travelStyle: string[]\n  travelPace: string\n  interests: string[]\n  \n  // Step 3 - Destinations\n  destinations: string[]\n  mustVisit?: string\n  \n  // Step 4 - Accommodation & Transport\n  accommodation: string\n  accommodationPreferences: string[]\n  transport: string\n  additionalServices: string[]\n  \n  // Step 5 - Final Details\n  specialRequests?: string\n  dietaryRestrictions?: string\n  accessibility?: string\n  occasion?: string\n  \n  // Status tracking\n  status: 'pending' | 'reviewed' | 'quoted' | 'confirmed' | 'cancelled'\n  adminNotes?: string\n  estimatedCost?: number\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n  sentToWhatsApp: boolean\n  whatsAppSentAt?: Timestamp\n}\n\nexport interface AdminUser {\n  id?: string\n  email: string\n  displayName: string\n  role: 'super_admin' | 'content_editor' | 'viewer'\n  \n  permissions: string[]\n  \n  active: boolean\n  \n  createdAt: Timestamp\n  lastLogin?: Timestamp\n  updatedAt: Timestamp\n}\n\n// Instagram Videos - Social media integration\nexport interface InstagramVideo {\n  id?: string\n  slot: number // 1, 2, or 3 for the three video slots\n  url: string // Full Instagram reel URL (e.g., https://www.instagram.com/reel/DPhC4GrjcxQ/)\n  embedUrl: string // Embed URL extracted from the reel URL\n  active: boolean\n  order: number // Display order\n  \n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// Cities - Separate collection for destinations\nexport interface City {\n  id?: string\n  name: string\n  slug: string // unique identifier  \n  title: string\n  description: string\n  arabicName?: string\n  region: string\n  coordinates: { lat: number; lng: number }\n  population?: string\n  climate?: {\n    averageTemp: { summer: { min: number; max: number }; winter: { min: number; max: number } }\n    rainfall: string\n  }\n  \n  // Content\n  image: string\n  gallery?: string[]\n  highlights: string[]\n  overview: {\n    description: string\n    history?: string\n    culture?: string\n    economy?: string[]\n  }\n  \n  // Meta\n  category: 'imperial-cities' | 'coast' | 'mountains' | 'desert' | 'modern' | 'other'\n  duration: string\n  bestTime: string\n  rating: number\n  reviews: number\n  \n  // Publishing\n  published: boolean\n  featured: boolean\n  seoTitle?: string\n  seoDescription?: string\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// Experiences - Separate collection for activities\nexport interface Experience {\n  id?: string\n  title: string\n  slug: string\n  description: string\n  longDescription?: string\n  images: string[]\n  \n  // Pricing & Logistics\n  price: number\n  currency: string\n  duration: string\n  maxParticipants?: number\n  minAge?: number\n  difficulty?: 'easy' | 'moderate' | 'hard'\n  \n  // Content\n  category: 'hammam' | 'cooking' | 'trekking' | 'photography' | 'crafts' | 'surf' | 'desert' | 'cultural'\n  includes: string[]\n  notIncludes?: string[]\n  requirements?: string[]\n  location: string\n  meetingPoint?: string\n  \n  // Meta\n  rating: number\n  reviews: number\n  \n  // Publishing\n  status: 'draft' | 'published'\n  published: boolean\n  featured: boolean\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// Travels - Separate collection for packages\nexport interface Travel {\n  id?: string\n  title: string\n  slug: string\n  description: string\n  longDescription?: string\n  images: string[]\n  \n  // Pricing\n  price: number\n  originalPrice?: number\n  currency: string\n  duration: string\n  \n  // Content\n  category: 'imperial-cities' | 'desert' | 'coast' | 'mountains' | 'custom' | 'cultural'\n  includes: string[]\n  notIncludes?: string[]\n  highlights: string[]\n  itinerary?: Array<{\n    day: number\n    title: string\n    description: string\n    activities: string[]\n    accommodation?: string\n    meals?: string[]\n  }>\n  \n  // Components (references to cities, experiences, services)\n  cityIds?: string[] // References to City collection\n  experienceIds?: string[] // References to Experience collection\n  serviceIds?: string[] // References to Service collection\n  \n  // Meta\n  rating: number\n  reviews: number\n  \n  // Publishing\n  status: 'draft' | 'published'\n  published: boolean\n  featured: boolean\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// Services - SEPARATED from packages (extras, add-ons)\nexport interface Service {\n  id?: string\n  name: string\n  slug: string\n  description: string\n  category: 'transport' | 'accommodation' | 'meal' | 'guide' | 'insurance' | 'activity' | 'equipment'\n  type: 'addon' | 'upgrade' | 'optional' | 'required'\n  \n  // Pricing\n  price: number\n  priceType: 'per_person' | 'per_group' | 'per_day' | 'flat_rate'\n  currency: string\n  \n  // Availability\n  locations?: string[] // Where this service is available\n  travelTypes?: string[] // Which travel categories can use this\n  \n  // Publishing\n  status: 'draft' | 'published'\n  published: boolean\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// Package Components - Reusable components for building packages\nexport interface PackageComponent {\n  id?: string\n  name: string\n  type: 'accommodation' | 'transport' | 'activity' | 'meal' | 'guide' | 'equipment'\n  description: string\n  provider?: string\n  \n  // Configuration\n  pricing: {\n    basePrice: number\n    currency: string\n    priceType: 'per_person' | 'per_group' | 'per_day'\n  }\n  \n  // Availability\n  locations: string[]\n  seasons?: string[]\n  capacity?: { min: number; max: number }\n  \n  // Publishing\n  published: boolean\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// === CMS CONTENT TYPES ===\n\n// Blog Posts\nexport interface BlogPost {\n  id?: string\n  title: string\n  slug: string\n  excerpt: string\n  content: string // Rich text content\n  coverImage: string\n  gallery?: string[]\n  \n  // Meta\n  author: string\n  readingTime?: number\n  tags: string[]\n  category: string\n  \n  // SEO\n  seoTitle?: string\n  seoDescription?: string\n  \n  // Publishing\n  published: boolean\n  featured: boolean\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// CMS Sections - For visual page builder (Webflow-style)\nexport interface CMSSection {\n  id?: string\n  name: string\n  pageType: 'homepage' | 'city' | 'experience' | 'travel' | 'about' | 'contact' | 'custom'\n  pageSlug?: string // Which specific page this belongs to\n  \n  // Section configuration\n  type: 'hero' | 'content' | 'gallery' | 'testimonials' | 'cta' | 'features' | 'grid' | 'custom'\n  order: number\n  \n  // Content blocks\n  blocks: Array<{\n    id: string\n    type: 'text' | 'image' | 'video' | 'button' | 'form' | 'map' | 'custom'\n    content: any // Flexible content structure\n    styling?: {\n      colors?: { background?: string; text?: string; accent?: string }\n      typography?: { fontSize?: string; fontWeight?: string; fontFamily?: string }\n      spacing?: { padding?: string; margin?: string }\n      layout?: { width?: string; alignment?: string }\n    }\n  }>\n  \n  // Section styling\n  styling?: {\n    background?: { type: 'color' | 'image' | 'gradient'; value: string }\n    padding?: { top: string; bottom: string; left: string; right: string }\n    margin?: { top: string; bottom: string }\n  }\n  \n  // Publishing\n  published: boolean\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// Site Theme Configuration - For advanced customization\nexport interface SiteTheme {\n  id?: string\n  name: string\n  isActive: boolean\n  \n  // Color palette\n  colors: {\n    primary: string\n    secondary: string\n    accent: string\n    background: string\n    surface: string\n    text: string\n    textSecondary: string\n    border: string\n    success: string\n    warning: string\n    error: string\n  }\n  \n  // Typography\n  typography: {\n    headingFont: string\n    bodyFont: string\n    sizes: {\n      xs: string\n      sm: string\n      base: string\n      lg: string\n      xl: string\n      '2xl': string\n      '3xl': string\n      '4xl': string\n    }\n    weights: {\n      light: number\n      normal: number\n      medium: number\n      semibold: number\n      bold: number\n    }\n  }\n  \n  // Layout\n  layout: {\n    maxWidth: string\n    containerPadding: string\n    borderRadius: {\n      sm: string\n      md: string\n      lg: string\n      xl: string\n    }\n    shadows: {\n      sm: string\n      md: string\n      lg: string\n      xl: string\n    }\n  }\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// User Management\nexport interface User {\n  id?: string\n  email: string\n  displayName?: string\n  photoURL?: string\n  role: 'admin' | 'editor' | 'user'\n  \n  // Admin capabilities\n  permissions?: {\n    canEditContent?: boolean\n    canManageUsers?: boolean\n    canEditTheme?: boolean\n    canPublish?: boolean\n  }\n  \n  // Activity tracking\n  lastLogin?: Timestamp\n  loginCount?: number\n  \n  // System\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\n// === COLLECTION NAMES ===\nexport const COLLECTIONS = {\n  // Core entities\n  cities: 'cities',\n  experiences: 'experiences', \n  travels: 'travels',\n  services: 'services',\n  packageComponents: 'package_components',\n  \n  // Content\n  blog: 'blog',\n  cmsSections: 'cms_sections',\n  \n  // Configuration\n  siteTheme: 'site_theme',\n  \n  // System\n  users: 'users',\n  customTripRequests: 'customTripRequests',\n  \n  // Legacy (to be migrated)\n  siteContent: 'site_content'\n} as const\n\n// === TYPE GUARDS ===\nexport function isCity(obj: any): obj is City {\n  return obj && typeof obj.name === 'string' && typeof obj.slug === 'string'\n}\n\nexport function isExperience(obj: any): obj is Experience {\n  return obj && typeof obj.title === 'string' && typeof obj.category === 'string'\n}\n\nexport function isTravel(obj: any): obj is Travel {\n  return obj && typeof obj.title === 'string' && typeof obj.duration === 'string'\n}\n\nexport function isService(obj: any): obj is Service {\n  return obj && typeof obj.name === 'string' && typeof obj.category === 'string'\n}\n\n// === UTILITY TYPES ===\nexport type EntityType = 'city' | 'experience' | 'travel' | 'service' | 'blog' | 'component'\n\nexport interface CMSContentMeta {\n  collection: string\n  entity: EntityType\n  lastModified: Timestamp\n  version: number\n  isDraft: boolean\n}\n\n// Collection type mapping\nexport type CollectionTypeMap = {\n  [COLLECTIONS.cities]: City\n  [COLLECTIONS.experiences]: Experience\n  [COLLECTIONS.travels]: Travel\n  [COLLECTIONS.services]: Service\n  [COLLECTIONS.packageComponents]: PackageComponent\n  [COLLECTIONS.blog]: BlogPost\n  [COLLECTIONS.cmsSections]: CMSSection\n  [COLLECTIONS.siteTheme]: SiteTheme\n  [COLLECTIONS.users]: User\n}","size_bytes":11075},"components/admin/ThemeCustomizer.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { Palette, Type, Layout, Save, RotateCcw, Eye, Sparkles } from 'lucide-react'\nimport { useAuth } from '@/context/AuthContext'\nimport { useMoroccoTheme } from '@/context/ThemeContext'\nimport { SiteTheme } from '@/lib/firestore-schema'\n\ninterface ThemeConfig {\n  colors: {\n    primary: string\n    secondary: string\n    accent: string\n    background: string\n    surface: string\n    text: string\n    textSecondary: string\n    border: string\n    success: string\n    warning: string\n    error: string\n  }\n  typography: {\n    headingFont: string\n    bodyFont: string\n    sizes: {\n      xs: string\n      sm: string\n      base: string\n      lg: string\n      xl: string\n      '2xl': string\n      '3xl': string\n      '4xl': string\n    }\n    weights: {\n      light: number\n      normal: number\n      medium: number\n      semibold: number\n      bold: number\n    }\n  }\n  layout: {\n    maxWidth: string\n    containerPadding: string\n    borderRadius: {\n      sm: string\n      md: string\n      lg: string\n      xl: string\n    }\n    shadows: {\n      sm: string\n      md: string\n      lg: string\n      xl: string\n    }\n  }\n}\n\nconst defaultTheme: ThemeConfig = {\n  colors: {\n    primary: '#ea580c',\n    secondary: '#f97316',\n    accent: '#06b6d4',\n    background: '#ffffff',\n    surface: '#f8fafc',\n    text: '#1f2937',\n    textSecondary: '#6b7280',\n    border: '#e5e7eb',\n    success: '#10b981',\n    warning: '#f59e0b',\n    error: '#ef4444'\n  },\n  typography: {\n    headingFont: 'Inter, sans-serif',\n    bodyFont: 'Inter, sans-serif',\n    sizes: {\n      xs: '0.75rem',\n      sm: '0.875rem',\n      base: '1rem',\n      lg: '1.125rem',\n      xl: '1.25rem',\n      '2xl': '1.5rem',\n      '3xl': '1.875rem',\n      '4xl': '2.25rem'\n    },\n    weights: {\n      light: 300,\n      normal: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700\n    }\n  },\n  layout: {\n    maxWidth: '1200px',\n    containerPadding: '1rem',\n    borderRadius: {\n      sm: '0.25rem',\n      md: '0.5rem',\n      lg: '0.75rem',\n      xl: '1rem'\n    },\n    shadows: {\n      sm: '0 1px 2px 0 rgb(0 0 0 / 0.05)',\n      md: '0 4px 6px -1px rgb(0 0 0 / 0.1)',\n      lg: '0 10px 15px -3px rgb(0 0 0 / 0.1)',\n      xl: '0 20px 25px -5px rgb(0 0 0 / 0.1)'\n    }\n  }\n}\n\nexport default function ThemeCustomizer() {\n  const { user } = useAuth()\n  const { currentTheme, setTheme: setGlobalTheme, applyTheme, resetTheme: resetGlobalTheme } = useMoroccoTheme()\n  const [theme, setTheme] = useState<ThemeConfig>(defaultTheme)\n  const [activeTab, setActiveTab] = useState<'colors' | 'typography' | 'layout'>('colors')\n  const [isLoading, setIsLoading] = useState(false)\n  const [previewMode, setPreviewMode] = useState(false)\n\n  // Load current theme from context\n  useEffect(() => {\n    if (currentTheme) {\n      setTheme({\n        colors: currentTheme.colors,\n        typography: currentTheme.typography,\n        layout: currentTheme.layout\n      })\n    }\n  }, [currentTheme])\n\n  const loadCurrentTheme = async () => {\n    try {\n      const response = await fetch('/api/site-settings')\n      if (response.ok) {\n        const data = await response.json()\n        if (data.theme && typeof data.theme === 'object') {\n          setTheme({\n            colors: data.theme.colors || defaultTheme.colors,\n            typography: data.theme.typography || defaultTheme.typography,\n            layout: data.theme.layout || defaultTheme.layout\n          })\n        }\n      }\n    } catch (error) {\n      console.error('Error loading theme:', error)\n    }\n  }\n\n  // Save theme\n  const saveTheme = async () => {\n    try {\n      setIsLoading(true)\n      \n      if (!user) {\n        alert('Devi effettuare il login')\n        return\n      }\n      \n      const token = await user.getIdToken()\n\n      const response = await fetch('/api/site-settings', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          theme: {\n            name: 'Default Theme',\n            isActive: true,\n            colors: theme.colors,\n            typography: theme.typography,\n            layout: theme.layout\n          }\n        })\n      })\n\n      if (response.ok) {\n        alert('Tema salvato con successo!')\n        \n        // Apply the saved theme globally\n        const siteTheme: SiteTheme = {\n          name: 'Custom Theme',\n          isActive: true,\n          colors: theme.colors,\n          typography: theme.typography,\n          layout: theme.layout,\n          createdAt: new Date() as any,\n          updatedAt: new Date() as any\n        }\n        setGlobalTheme(siteTheme)\n      } else {\n        const error = await response.json()\n        alert(`Errore nel salvataggio: ${error.error}`)\n      }\n    } catch (error) {\n      console.error('Save theme error:', error)\n      alert('Errore durante il salvataggio del tema')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // Apply preview instantly via context\n  const applyPreview = () => {\n    const siteTheme: SiteTheme = {\n      name: 'Preview Theme',\n      isActive: true,\n      colors: theme.colors,\n      typography: theme.typography,\n      layout: theme.layout,\n      createdAt: new Date() as any,\n      updatedAt: new Date() as any\n    }\n    \n    setGlobalTheme(siteTheme)\n  }\n\n  // Reset to default\n  const resetTheme = () => {\n    if (confirm('Ripristinare il tema predefinito? Tutte le personalizzazioni andranno perse.')) {\n      setTheme(defaultTheme)\n      resetGlobalTheme()\n    }\n  }\n\n  // Update theme property\n  const updateTheme = (section: keyof ThemeConfig, key: string, value: any) => {\n    setTheme(prev => ({\n      ...prev,\n      [section]: {\n        ...prev[section],\n        [key]: value\n      }\n    }))\n  }\n\n  // Color palette presets\n  const colorPresets = [\n    {\n      name: 'Morocco Sand',\n      colors: { primary: '#ea580c', secondary: '#dc2626', accent: '#f59e0b' }\n    },\n    {\n      name: 'Desert Sand',\n      colors: { primary: '#d97706', secondary: '#dc2626', accent: '#059669' }\n    },\n    {\n      name: 'Imperial Purple',\n      colors: { primary: '#7c3aed', secondary: '#db2777', accent: '#0891b2' }\n    },\n    {\n      name: 'Ocean Teal',\n      colors: { primary: '#0f766e', secondary: '#ea580c', accent: '#7c2d12' }\n    }\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Personalizzazione Tema</h2>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={applyPreview}\n            className=\"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 flex items-center gap-2\"\n          >\n            <Sparkles className=\"w-4 h-4\" />\n            Anteprima Live\n          </button>\n          <button\n            onClick={resetTheme}\n            className=\"px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 flex items-center gap-2\"\n          >\n            <RotateCcw className=\"w-4 h-4\" />\n            Reset\n          </button>\n          <button\n            onClick={saveTheme}\n            disabled={isLoading}\n            className=\"px-4 py-2 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 disabled:opacity-50 flex items-center gap-2\"\n          >\n            <Save className=\"w-4 h-4\" />\n            {isLoading ? 'Salvando...' : 'Salva Tema'}\n          </button>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex space-x-4 border-b border-border\">\n        {[\n          { id: 'colors', name: 'Colori', icon: Palette },\n          { id: 'typography', name: 'Tipografia', icon: Type },\n          { id: 'layout', name: 'Layout', icon: Layout }\n        ].map((tab) => (\n          <button\n            key={tab.id}\n            onClick={() => setActiveTab(tab.id as any)}\n            className={`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${\n              activeTab === tab.id\n                ? 'border-primary text-primary'\n                : 'border-transparent text-muted-foreground hover:text-foreground'\n            }`}\n          >\n            <tab.icon className=\"w-4 h-4\" />\n            {tab.name}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"grid lg:grid-cols-2 gap-8\">\n        {/* Controls */}\n        <div className=\"space-y-6\">\n          {/* Colors Tab */}\n          {activeTab === 'colors' && (\n            <div className=\"space-y-6\">\n              {/* Color Presets */}\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Palette Predefinite</h3>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {colorPresets.map((preset) => (\n                    <button\n                      key={preset.name}\n                      onClick={() => {\n                        updateTheme('colors', 'primary', preset.colors.primary)\n                        updateTheme('colors', 'secondary', preset.colors.secondary)\n                        updateTheme('colors', 'accent', preset.colors.accent)\n                      }}\n                      className=\"p-3 border rounded-lg hover:bg-gray-50 text-left\"\n                    >\n                      <div className=\"flex gap-2 mb-2\">\n                        <div \n                          className=\"w-4 h-4 rounded\"\n                          style={{ backgroundColor: preset.colors.primary }}\n                        />\n                        <div \n                          className=\"w-4 h-4 rounded\"\n                          style={{ backgroundColor: preset.colors.secondary }}\n                        />\n                        <div \n                          className=\"w-4 h-4 rounded\"\n                          style={{ backgroundColor: preset.colors.accent }}\n                        />\n                      </div>\n                      <div className=\"text-sm font-medium\">{preset.name}</div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Individual Colors */}\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Colori Personalizzati</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {Object.entries(theme.colors).map(([key, value]) => (\n                    <div key={key}>\n                      <label className=\"block text-sm font-medium mb-2 capitalize\">\n                        {key.replace(/([A-Z])/g, ' $1').trim()}\n                      </label>\n                      <div className=\"flex gap-2\">\n                        <input\n                          type=\"color\"\n                          value={value}\n                          onChange={(e) => updateTheme('colors', key, e.target.value)}\n                          className=\"w-12 h-10 border rounded cursor-pointer\"\n                        />\n                        <input\n                          type=\"text\"\n                          value={value}\n                          onChange={(e) => updateTheme('colors', key, e.target.value)}\n                          className=\"flex-1 px-3 py-2 border rounded text-sm font-mono\"\n                        />\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Typography Tab */}\n          {activeTab === 'typography' && (\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Font</h3>\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium mb-2\">Font Titoli</label>\n                    <select\n                      value={theme.typography.headingFont}\n                      onChange={(e) => updateTheme('typography', 'headingFont', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded\"\n                    >\n                      <option value=\"Inter, sans-serif\">Inter</option>\n                      <option value=\"Playfair Display, serif\">Playfair Display</option>\n                      <option value=\"Montserrat, sans-serif\">Montserrat</option>\n                      <option value=\"Lora, serif\">Lora</option>\n                      <option value=\"Roboto, sans-serif\">Roboto</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium mb-2\">Font Corpo</label>\n                    <select\n                      value={theme.typography.bodyFont}\n                      onChange={(e) => updateTheme('typography', 'bodyFont', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded\"\n                    >\n                      <option value=\"Inter, sans-serif\">Inter</option>\n                      <option value=\"Open Sans, sans-serif\">Open Sans</option>\n                      <option value=\"Source Sans Pro, sans-serif\">Source Sans Pro</option>\n                      <option value=\"Nunito, sans-serif\">Nunito</option>\n                      <option value=\"Roboto, sans-serif\">Roboto</option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Dimensioni Font</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {Object.entries(theme.typography.sizes).map(([key, value]) => (\n                    <div key={key}>\n                      <label className=\"block text-sm font-medium mb-2\">{key}</label>\n                      <input\n                        type=\"text\"\n                        value={value}\n                        onChange={(e) => updateTheme('typography', 'sizes', {\n                          ...theme.typography.sizes,\n                          [key]: e.target.value\n                        })}\n                        className=\"w-full px-3 py-2 border rounded text-sm\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Layout Tab */}\n          {activeTab === 'layout' && (\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Dimensioni Container</h3>\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium mb-2\">Larghezza Massima</label>\n                    <input\n                      type=\"text\"\n                      value={theme.layout.maxWidth}\n                      onChange={(e) => updateTheme('layout', 'maxWidth', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded\"\n                      placeholder=\"1200px\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium mb-2\">Padding Container</label>\n                    <input\n                      type=\"text\"\n                      value={theme.layout.containerPadding}\n                      onChange={(e) => updateTheme('layout', 'containerPadding', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded\"\n                      placeholder=\"1rem\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <h3 className=\"text-lg font-semibold mb-4\">Border Radius</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {Object.entries(theme.layout.borderRadius).map(([key, value]) => (\n                    <div key={key}>\n                      <label className=\"block text-sm font-medium mb-2\">{key}</label>\n                      <input\n                        type=\"text\"\n                        value={value}\n                        onChange={(e) => updateTheme('layout', 'borderRadius', {\n                          ...theme.layout.borderRadius,\n                          [key]: e.target.value\n                        })}\n                        className=\"w-full px-3 py-2 border rounded text-sm\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Preview */}\n        <div className=\"bg-card border rounded-2xl p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Anteprima</h3>\n          <div \n            className=\"space-y-4 p-4 border rounded-lg\"\n            style={{\n              backgroundColor: theme.colors.background,\n              color: theme.colors.text,\n              fontFamily: theme.typography.bodyFont\n            }}\n          >\n            <h1 \n              style={{\n                color: theme.colors.primary,\n                fontFamily: theme.typography.headingFont,\n                fontSize: theme.typography.sizes['3xl'],\n                fontWeight: theme.typography.weights.bold\n              }}\n            >\n              Morocco Dreams\n            </h1>\n            <p style={{ color: theme.colors.textSecondary }}>\n              Scopri la magia del Marocco con i nostri tour autentici\n            </p>\n            <button\n              style={{\n                backgroundColor: theme.colors.primary,\n                color: theme.colors.background,\n                padding: '12px 24px',\n                borderRadius: theme.layout.borderRadius.md,\n                border: 'none',\n                fontWeight: theme.typography.weights.semibold\n              }}\n            >\n              Scopri i Tour\n            </button>\n            <div\n              style={{\n                backgroundColor: theme.colors.surface,\n                padding: '16px',\n                borderRadius: theme.layout.borderRadius.lg,\n                border: `1px solid ${theme.colors.border}`\n              }}\n            >\n              <h3 \n                style={{\n                  color: theme.colors.secondary,\n                  fontFamily: theme.typography.headingFont,\n                  fontSize: theme.typography.sizes.xl,\n                  fontWeight: theme.typography.weights.semibold,\n                  marginBottom: '8px'\n                }}\n              >\n                Le Citt√† Imperiali\n              </h3>\n              <p style={{ fontSize: theme.typography.sizes.sm }}>\n                Un viaggio attraverso la storia del Marocco\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":18595},"app/client-layout.tsx":{"content":"\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect } from \"react\"\nimport { ThemeProvider } from \"@/components/theme-provider\"\nimport { AuthProvider, useAuth } from \"@/context/AuthContext\"\nimport Navbar from \"@/components/layout/Navbar\"\nimport Footer from \"@/components/layout/Footer\"\nimport SearchBar from \"@/components/ui/SearchBar\"\n\n// Inner component that can use AuthContext\nfunction LayoutContent({ \n  children, \n  isSearchOpen, \n  setIsSearchOpen \n}: { \n  children: React.ReactNode\n  isSearchOpen: boolean\n  setIsSearchOpen: (open: boolean) => void \n}) {\n  const { loading } = useAuth()\n\n  // Show loading screen while auth is initializing to prevent footer flash\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background text-foreground flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Caricamento...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background text-foreground transition-colors duration-300\">\n      <header role=\"banner\">\n        <Navbar onSearchOpen={() => setIsSearchOpen(true)} />\n      </header>\n\n      <SearchBar\n        isOpen={isSearchOpen}\n        onClose={() => setIsSearchOpen(false)}\n        aria-label=\"Cerca destinazioni e esperienze\"\n      />\n\n      <main id=\"main-content\" role=\"main\" className=\"pt-14 lg:pt-17\" tabIndex={-1}>\n        {children}\n      </main>\n\n      <footer role=\"contentinfo\">\n        <Footer />\n      </footer>\n\n      <div id=\"announcements\" aria-live=\"polite\" aria-atomic=\"true\" className=\"sr-only\" />\n    </div>\n  )\n}\n\nexport default function ClientLayout({ children }: { children: React.ReactNode }) {\n  const [isSearchOpen, setIsSearchOpen] = useState(false)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\" && isSearchOpen) {\n        setIsSearchOpen(false)\n      }\n      if ((event.metaKey || event.ctrlKey) && event.key === \"k\") {\n        event.preventDefault()\n        setIsSearchOpen(true)\n      }\n    }\n\n    document.addEventListener(\"keydown\", handleKeyDown)\n    return () => document.removeEventListener(\"keydown\", handleKeyDown)\n  }, [isSearchOpen])\n\n  if (!mounted) {\n    return null\n  }\n\n  return (\n    <ThemeProvider attribute=\"class\" defaultTheme=\"light\" enableSystem>\n      <AuthProvider>\n        <LayoutContent \n          isSearchOpen={isSearchOpen} \n          setIsSearchOpen={setIsSearchOpen} \n        >\n          {children}\n        </LayoutContent>\n      </AuthProvider>\n    </ThemeProvider>\n  )\n}\n","size_bytes":2815},"app/viaggi/costa-atlantica/page.tsx":{"content":"import { Waves, Sun, Wind, Camera, Utensils, MapPin, Clock, Star } from 'lucide-react'\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function CostaBluPage() {\n  const destinations = [\n    {\n      id: \"essaouira\",\n      name: \"Essaouira\",\n      title: \"La Citt√† del Vento\",\n      description: \"Perla della costa atlantica con medina UNESCO e spiagge perfette per il surf\",\n      image: \"/images/essaouira-coast.png\",\n      highlights: [\"Medina UNESCO\", \"Porto dei pescatori\", \"Spiagge per surf\", \"Artigianato locale\", \"Musica Gnawa\"],\n      activities: [\"Surf\", \"Kitesurf\", \"Pesca\", \"Arte\", \"Gastronomia\"],\n      bestTime: \"Aprile - Ottobre\",\n      rating: 4.8,\n      reviews: 189,\n    },\n    {\n      id: \"agadir\",\n      name: \"Agadir\",\n      title: \"Riviera Marocchina\",\n      description: \"Moderna citt√† balneare con resort di lusso e spiagge dorate\",\n      image: \"/images/agadir-beach.png\",\n      highlights: [\"Spiagge dorate\", \"Marina moderna\", \"Souk El Had\", \"Kasbah\", \"Golf\"],\n      activities: [\"Beach\", \"Golf\", \"Shopping\", \"Spa\", \"Nightlife\"],\n      bestTime: \"Tutto l'anno\",\n      rating: 4.6,\n      reviews: 234,\n    },\n    {\n      id: \"casablanca\",\n      name: \"Casablanca\",\n      title: \"Metropoli dell'Atlantico\",\n      description: \"Capitale economica con la maestosa Moschea Hassan II\",\n      image: \"/images/casablanca-hassan.png\",\n      highlights: [\"Moschea Hassan II\", \"Corniche\", \"Quartiere Habous\", \"Art D√©co\", \"Vita notturna\"],\n      activities: [\"Cultura\", \"Business\", \"Shopping\", \"Gastronomia\", \"Architettura\"],\n      bestTime: \"Marzo - Novembre\",\n      rating: 4.5,\n      reviews: 156,\n    },\n    {\n      id: \"el-jadida\",\n      name: \"El Jadida\",\n      title: \"Fortezza Portoghese\",\n      description: \"Citt√† fortificata patrimonio UNESCO con influenze portoghesi\",\n      image: \"/images/el-jadida-fortress.png\",\n      highlights: [\"Cittadella portoghese\", \"Cisterna sotterranea\", \"Spiagge\", \"Golf\", \"Storia\"],\n      activities: [\"Storia\", \"Beach\", \"Golf\", \"Fotografia\", \"Relax\"],\n      bestTime: \"Maggio - Settembre\",\n      rating: 4.4,\n      reviews: 98,\n    },\n  ]\n\n  const experiences = [\n    {\n      icon: Waves,\n      title: \"Surf & Kitesurf\",\n      description: \"Onde perfette tutto l'anno sulla costa atlantica\",\n      locations: [\"Essaouira\", \"Taghazout\", \"Imsouane\"],\n      price: \"‚Ç¨45/giorno\",\n    },\n    {\n      icon: Wind,\n      title: \"Windsurf\",\n      description: \"Venti costanti ideali per gli sport velici\",\n      locations: [\"Essaouira\", \"Dakhla\", \"Moulay Bouzerktoun\"],\n      price: \"‚Ç¨35/giorno\",\n    },\n    {\n      icon: Sun,\n      title: \"Beach & Relax\",\n      description: \"Spiagge dorate e resort di lusso\",\n      locations: [\"Agadir\", \"Taghazout\", \"Plage Blanche\"],\n      price: \"‚Ç¨80/giorno\",\n    },\n    {\n      icon: Utensils,\n      title: \"Gastronomia Marina\",\n      description: \"Pesce fresco e specialit√† della costa\",\n      locations: [\"Essaouira\", \"Casablanca\", \"Agadir\"],\n      price: \"‚Ç¨25/pasto\",\n    },\n  ]\n\n  const tours = [\n    {\n      id: 1,\n      title: \"Costa Blu Completa\",\n      duration: \"7 giorni / 6 notti\",\n      price: \"‚Ç¨780\",\n      originalPrice: \"‚Ç¨920\",\n      image: \"/images/atlantic-coast-tour.png\",\n      cities: [\"Casablanca\", \"El Jadida\", \"Essaouira\", \"Agadir\"],\n      includes: [\"Tutte le citt√† costiere\", \"Hotel fronte mare\", \"Attivit√† surf\", \"Degustazioni pesce\"],\n      rating: 4.7,\n      reviews: 143,\n    },\n    {\n      id: 2,\n      title: \"Essaouira & Surf Experience\",\n      duration: \"4 giorni / 3 notti\",\n      price: \"‚Ç¨450\",\n      originalPrice: \"‚Ç¨550\",\n      image: \"/images/essaouira-surf.png\",\n      cities: [\"Essaouira\", \"Taghazout\"],\n      includes: [\"Lezioni surf\", \"Riad tradizionale\", \"Escursioni\", \"Artigianato locale\"],\n      rating: 4.9,\n      reviews: 89,\n    },\n    {\n      id: 3,\n      title: \"Agadir Luxury Beach\",\n      duration: \"5 giorni / 4 notti\",\n      price: \"‚Ç¨890\",\n      originalPrice: \"‚Ç¨1090\",\n      image: \"/images/agadir-luxury.png\",\n      cities: [\"Agadir\", \"Paradise Valley\"],\n      includes: [\"Resort 5*\", \"Spa treatments\", \"Golf\", \"Escursioni private\"],\n      rating: 4.8,\n      reviews: 67,\n    },\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-background transition-colors\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-sky-300 via-cyan-400 to-blue-500 dark:from-slate-900 dark:via-blue-950 dark:to-indigo-900 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <img \n            src=\"/images/essaouira-coast.png\" \n            alt=\"Costa Blu\" \n            className=\"w-full h-full object-cover opacity-20 dark:opacity-30\" \n          />\n          <div className=\"absolute inset-0 bg-white/20 dark:bg-black/50\" />\n        </div>\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-slate-900 dark:text-white\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6\">\n            Costa Blu\n            <span className=\"block text-3xl md:text-4xl lg:text-5xl mt-2 bg-gradient-to-r from-blue-700 to-cyan-600 dark:from-cyan-300 dark:to-blue-200 bg-clip-text text-transparent\">\n              del Marocco\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto mb-8 text-slate-800 dark:text-slate-200\">\n            Spiagge, onde, relax e tradizione lungo la costa atlantica marocchina\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-white/30 dark:bg-slate-800/60 backdrop-blur-sm px-6 py-3 rounded-full border border-blue-200 dark:border-slate-600\">\n              <span className=\"font-semibold text-slate-800 dark:text-slate-200\">Surf tutto l'anno</span>\n            </div>\n            <div className=\"bg-white/30 dark:bg-slate-800/60 backdrop-blur-sm px-6 py-3 rounded-full border border-blue-200 dark:border-slate-600\">\n              <span className=\"font-semibold text-slate-800 dark:text-slate-200\">Costa iconica</span>\n            </div>\n            <div className=\"bg-white/30 dark:bg-slate-800/60 backdrop-blur-sm px-6 py-3 rounded-full border border-blue-200 dark:border-slate-600\">\n              <span className=\"font-semibold text-slate-800 dark:text-slate-200\">Pesce freschissimo</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Destinations Grid */}\n      <div className=\"py-16 lg:py-24 bg-background transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Le Mete Blu</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Le citt√† costiere pi√π affascinanti e oceaniche del Marocco\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-2 gap-8 lg:gap-12\">\n            {destinations.map((destination) => (\n              <div\n                key={destination.id}\n                className=\"group bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-slate-200 dark:border-slate-700\"\n              >\n                <div className=\"relative h-64 lg:h-80 overflow-hidden\">\n                  <img\n                    src={destination.image || \"/placeholder.svg?height=400&width=600\"}\n                    alt={destination.name}\n                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-slate-900/80 dark:from-slate-950/90 to-transparent\" />\n                  {/* Location Badge */}\n                  <div className=\"absolute top-4 left-4 bg-gradient-to-r from-sky-500 to-blue-600 dark:from-blue-600 dark:to-indigo-700 text-white px-4 py-2 rounded-full font-bold shadow-lg\">\n                    <div className=\"flex items-center space-x-2\">\n                      <MapPin className=\"w-4 h-4 text-white\" />\n                      <span>{destination.name}</span>\n                    </div>\n                  </div>\n                  {/* Rating */}\n                  <div className=\"absolute top-4 right-4 bg-white/20 dark:bg-slate-800/60 backdrop-blur-sm px-3 py-1 rounded-full border border-white/30 dark:border-slate-600/50\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-white text-sm font-semibold\">{destination.rating}</span>\n                      <span className=\"text-white/80 text-sm\">({destination.reviews})</span>\n                    </div>\n                  </div>\n                  {/* Title Overlay */}\n                  <div className=\"absolute bottom-6 left-6 text-white drop-shadow-lg\">\n                    <h3 className=\"text-2xl lg:text-3xl font-bold mb-2\">{destination.title}</h3>\n                    <p className=\"text-slate-200 text-sm lg:text-base\">{destination.description}</p>\n                  </div>\n                </div>\n                <div className=\"p-6 lg:p-8\">\n                  {/* Info */}\n                  <div className=\"flex items-center space-x-4 mb-6 text-sm text-sky-700 dark:text-sky-300\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Sun className=\"w-4 h-4 text-cyan-600 dark:text-cyan-400\" />\n                      <span>{destination.bestTime}</span>\n                    </div>\n                  </div>\n                  {/* Highlights */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-foreground mb-3\">Cosa vedere:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {destination.highlights.map((highlight, hidx) => (\n                        <span\n                          key={hidx}\n                          className=\"bg-gradient-to-r from-sky-400 via-cyan-500 to-blue-500 dark:from-blue-600 dark:via-indigo-600 dark:to-slate-700 text-white px-3 py-1 rounded-full text-xs font-semibold shadow-sm\"\n                        >\n                          {highlight}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                  {/* Activities */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-foreground mb-3\">Attivit√†:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {destination.activities.map((activity, aidx) => (\n                        <span\n                          key={aidx}\n                          className=\"bg-gradient-to-r from-cyan-400 to-sky-500 dark:from-indigo-600 dark:to-blue-700 text-white px-3 py-1 rounded-full text-xs font-semibold shadow-sm\"\n                        >\n                          {activity}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                  {/* Actions */}\n                  <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3\">\n                    <Link\n                      href={`/viaggi/costa-atlantica/${destination.id}`}\n                      className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-600 dark:from-orange-600 dark:to-red-700 text-white py-3 px-4 rounded-xl hover:from-orange-600 hover:to-red-700 dark:hover:from-orange-700 dark:hover:to-red-800 transition-all duration-300 font-semibold text-center shadow-md\"\n                    >\n                      Scopri {destination.name}\n                    </Link>\n                    <Link\n                      href=\"/viaggi/gruppo\"\n                      className=\"px-6 py-3 border-2 border-orange-500 dark:border-orange-500 text-orange-700 dark:text-orange-400 rounded-xl hover:bg-orange-500 hover:text-white dark:hover:bg-orange-600 dark:hover:text-white dark:hover:border-orange-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      Tour\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Experiences Section */}\n      <div className=\"py-16 lg:py-24 bg-slate-50 dark:bg-slate-900/50 transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Esperienze Blu\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Il meglio dell'oceano, tra sport e gusto\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8\">\n            {experiences.map((experience, idx) => (\n              <div\n                key={idx}\n                className=\"bg-card rounded-2xl p-6 text-center hover:shadow-lg transition-all duration-300 hover:scale-105 border border-slate-200 dark:border-slate-700\"\n              >\n                <div className=\"w-16 h-16 bg-gradient-to-r from-sky-400 via-cyan-500 to-blue-600 dark:from-blue-600 dark:via-indigo-700 dark:to-slate-800 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\">\n                  <experience.icon className=\"w-8 h-8 text-white\" />\n                </div>\n                <h3 className=\"text-lg font-bold text-foreground mb-3\">{experience.title}</h3>\n                <p className=\"text-muted-foreground text-sm mb-4\">{experience.description}</p>\n                <div className=\"text-xs text-sky-600 dark:text-cyan-400 mb-3 font-medium\">\n                  {experience.locations.join(\" ‚Ä¢ \")}\n                </div>\n                <div className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">{experience.price}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Tours Section */}\n      <div className=\"py-16 lg:py-24 bg-background transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Tour Costa Blu\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              I migliori viaggi lungo il mare pi√π wild del Marocco\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {tours.map((tour) => (\n              <div\n                key={tour.id}\n                className=\"bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-slate-200 dark:border-slate-700\"\n              >\n                <div className=\"relative h-48 overflow-hidden\">\n                  <img\n                    src={tour.image || \"/placeholder.svg?height=300&width=400\"}\n                    alt={tour.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute top-4 right-4 bg-gradient-to-r from-sky-500 to-blue-700 dark:from-blue-600 dark:to-indigo-800 text-white px-4 py-2 rounded-full shadow-lg\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-bold text-lg\">{tour.price}</span>\n                      {tour.originalPrice && (\n                        <span className=\"text-sm line-through text-slate-200\">{tour.originalPrice}</span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"p-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"text-xl font-bold text-foreground\">{tour.title}</h3>\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-sm font-semibold text-foreground\">{tour.rating}</span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 text-sm text-muted-foreground mb-4\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>{tour.duration}</span>\n                  </div>\n                  <div className=\"mb-4\">\n                    <div className=\"text-sm text-muted-foreground mb-2\">Citt√† incluse:</div>\n                    <div className=\"flex flex-wrap gap-1\">\n                      {tour.cities.map((city, cidx) => (\n                        <span\n                          key={cidx}\n                          className=\"bg-gradient-to-r from-sky-500 to-blue-600 dark:from-blue-600 dark:to-indigo-700 text-white px-2 py-1 rounded-full text-xs font-semibold shadow-sm\"\n                        >\n                          {city}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"space-y-2 mb-6\">\n                    {tour.includes.map((item, idx) => (\n                      <div key={idx} className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                        <div className=\"w-2 h-2 bg-sky-600 dark:bg-blue-500 rounded-full\" />\n                        <span>{item}</span>\n                      </div>\n                    ))}\n                  </div>\n                  <Link\n                    href={`/viaggi/gruppo/${tour.id}`}\n                    className=\"w-full bg-gradient-to-r from-sky-600 to-blue-700 dark:from-blue-700 dark:to-indigo-800 text-white py-3 px-4 rounded-xl hover:from-sky-700 hover:to-blue-800 dark:hover:from-blue-800 dark:hover:to-indigo-900 transition-all duration-300 font-semibold text-center block shadow-md\"\n                  >\n                    Prenota Tour\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-r from-sky-400 via-cyan-500 to-blue-600 dark:from-slate-900 dark:via-blue-950 dark:to-indigo-900\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-slate-900 dark:text-white\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">Pronto per l'Avventura Blu?</h2>\n          <p className=\"text-lg lg:text-xl mb-8 max-w-2xl mx-auto text-slate-800 dark:text-slate-200\">\n            Vivi il meglio dell'oceano tra vibe surf, cultura e paesaggi indimenticabili\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/viaggi/su-misura\"\n              className=\"bg-white dark:bg-slate-800 text-sky-700 dark:text-blue-300 px-8 py-4 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 transition-all duration-300 font-semibold text-lg shadow-lg border border-slate-200 dark:border-slate-600\"\n            >\n              Crea Tour Personalizzato\n            </Link>\n            <Link\n              href=\"/contatti\"\n              className=\"border-2 border-white dark:border-slate-300 text-slate-800 dark:text-white px-8 py-4 rounded-xl hover:bg-white hover:text-sky-700 dark:hover:bg-slate-200 dark:hover:text-slate-900 transition-all duration-300 font-semibold text-lg\"\n            >\n              Contattaci\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":19738},"app/viaggi/montagne-atlas/page.tsx":{"content":"import { Mountain, Compass, Camera, Users, Clock, Star, TreePine, Sun } from 'lucide-react'\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function MontagneAtlasPage() {\n  const regions = [\n    {\n      id: \"alto-atlante\",\n      name: \"Alto Atlante\",\n      title: \"Tetto del Nord Africa\",\n      description: \"Vette imponenti, villaggi berberi e il maestoso Monte Toubkal\",\n      image: \"/images/atlas-mountains.png\",\n      highlights: [\"Monte Toubkal (4.167m)\", \"Valle dell'Ourika\", \"Villaggi berberi\", \"Cascate Ouzoud\", \"Imlil\"],\n      activities: [\"Trekking\", \"Alpinismo\", \"Fotografia\", \"Cultura berbera\", \"Muli trekking\"],\n      difficulty: 4,\n      bestTime: \"Aprile - Ottobre\",\n      rating: 4.9,\n      reviews: 156,\n    },\n    {\n      id: \"medio-atlante\",\n      name: \"Medio Atlante\",\n      title: \"Montagne dei Cedri\",\n      description: \"Foreste di cedri, laghi alpini e clima temperato\",\n      image: \"/images/middle-atlas.png\",\n      highlights: [\"Foresta di Azrou\", \"Lago Ifrane\", \"Scimmie berbere\", \"Ifrane\", \"Cascate Ouzoud\"],\n      activities: [\"Trekking facile\", \"Wildlife\", \"Fotografia\", \"Relax\", \"Pesca\"],\n      difficulty: 2,\n      bestTime: \"Tutto l'anno\",\n      rating: 4.6,\n      reviews: 89,\n    },\n    {\n      id: \"anti-atlante\",\n      name: \"Anti Atlante\",\n      title: \"Montagne del Sud\",\n      description: \"Paesaggi lunari, oasi e villaggi tradizionali\",\n      image: \"/images/anti-atlas.png\",\n      highlights: [\"Tafraoute\", \"Rocce dipinte\", \"Oasi Ameln\", \"Villaggi berberi\", \"Argan\"],\n      activities: [\"Trekking\", \"Roccia\", \"Cultura\", \"Fotografia\", \"Artigianato\"],\n      difficulty: 3,\n      bestTime: \"Ottobre - Aprile\",\n      rating: 4.7,\n      reviews: 67,\n    },\n  ]\n\n  const trekkingRoutes = [\n    {\n      id: \"toubkal\",\n      name: \"Ascensione al Toubkal\",\n      duration: \"3 giorni / 2 notti\",\n      difficulty: 5,\n      altitude: \"4.167m\",\n      price: \"‚Ç¨280\",\n      image: \"/images/toubkal-trek.png\",\n      description: \"La vetta pi√π alta del Nord Africa\",\n      highlights: [\"Vetta pi√π alta\", \"Rifugio Toubkal\", \"Alba in vetta\", \"Panorami mozzafiato\"],\n    },\n    {\n      id: \"mgoun\",\n      name: \"Traversata del Mgoun\",\n      duration: \"5 giorni / 4 notti\",\n      difficulty: 4,\n      altitude: \"4.071m\",\n      price: \"‚Ç¨450\",\n      image: \"/images/mgoun-trek.png\",\n      description: \"Attraverso le valli pi√π belle dell'Atlante\",\n      highlights: [\"Valle delle Rose\", \"Villaggi berberi\", \"Gole spettacolari\", \"Cultura autentica\"],\n    },\n    {\n      id: \"saghro\",\n      name: \"Massiccio del Saghro\",\n      duration: \"4 giorni / 3 notti\",\n      difficulty: 3,\n      altitude: \"2.712m\",\n      price: \"‚Ç¨380\",\n      image: \"/images/saghro-trek.png\",\n      description: \"Paesaggi lunari e formazioni rocciose uniche\",\n      highlights: [\"Formazioni rocciose\", \"Nomadi\", \"Stelle\", \"Geologia unica\"],\n    },\n  ]\n\n  const experiences = [\n    {\n      icon: Mountain,\n      title: \"Trekking Guidato\",\n      description: \"Guide berbere esperte per ogni livello di difficolt√†\",\n      duration: \"1-7 giorni\",\n      price: \"‚Ç¨45/giorno\",\n    },\n    {\n      icon: Compass,\n      title: \"Alpinismo Tecnico\",\n      description: \"Ascensioni tecniche su roccia e ghiaccio\",\n      duration: \"2-5 giorni\",\n      price: \"‚Ç¨80/giorno\",\n    },\n    {\n      icon: Camera,\n      title: \"Fotografia di Montagna\",\n      description: \"Workshop fotografici nei paesaggi pi√π spettacolari\",\n      duration: \"3-4 giorni\",\n      price: \"‚Ç¨120/giorno\",\n    },\n    {\n      icon: Users,\n      title: \"Cultura Berbera\",\n      description: \"Immersione nella vita dei villaggi di montagna\",\n      duration: \"2-3 giorni\",\n      price: \"‚Ç¨60/giorno\",\n    },\n  ]\n\n  const tours = [\n    {\n      id: 1,\n      title: \"Toubkal & Villaggi Berberi\",\n      duration: \"6 giorni / 5 notti\",\n      price: \"‚Ç¨650\",\n      originalPrice: \"‚Ç¨780\",\n      image: \"/images/toubkal-villages.png\",\n      includes: [\"Ascensione Toubkal\", \"Guide berbere\", \"Muli da soma\", \"Pensione completa\", \"Rifugi montani\"],\n      difficulty: 4,\n      rating: 4.9,\n      reviews: 89,\n    },\n    {\n      id: 2,\n      title: \"Atlante per Famiglie\",\n      duration: \"4 giorni / 3 notti\",\n      price: \"‚Ç¨380\",\n      originalPrice: \"‚Ç¨450\",\n      image: \"/images/atlas-family.png\",\n      includes: [\"Trekking facili\", \"Attivit√† bambini\", \"Villaggi berberi\", \"Cascate\", \"Guide specializzate\"],\n      difficulty: 2,\n      rating: 4.7,\n      reviews: 67,\n    },\n    {\n      id: 3,\n      title: \"Grande Traversata Atlante\",\n      duration: \"10 giorni / 9 notti\",\n      price: \"‚Ç¨1280\",\n      originalPrice: \"‚Ç¨1450\",\n      image: \"/images/atlas-traverse.png\",\n      includes: [\"3 massicci\", \"Camping selvaggio\", \"Guide esperte\", \"Tutto incluso\", \"Trasferimenti\"],\n      difficulty: 5,\n      rating: 4.8,\n      reviews: 34,\n    },\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-background transition-colors\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-emerald-400 via-green-500 to-teal-600 dark:from-slate-900 dark:via-green-950 dark:to-emerald-900 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <img \n            src=\"/images/atlas-mountains.png\" \n            alt=\"Montagne Atlas\" \n            className=\"w-full h-full object-cover opacity-20 dark:opacity-30\" \n          />\n          <div className=\"absolute inset-0 bg-white/20 dark:bg-black/50\" />\n        </div>\n\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-slate-900 dark:text-white\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6\">\n            Montagne\n            <span className=\"block text-3xl md:text-4xl lg:text-5xl mt-2 bg-gradient-to-r from-green-700 to-emerald-600 dark:from-emerald-300 dark:to-green-200 bg-clip-text text-transparent\">\n              dell'Atlante\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto mb-8 text-slate-800 dark:text-slate-200\">\n            Trekking epici, vette maestose e villaggi berberi autentici nel cuore delle montagne marocchine\n          </p>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-white/30 dark:bg-slate-800/60 backdrop-blur-sm px-6 py-3 rounded-full border border-green-200 dark:border-slate-600\">\n              <span className=\"font-semibold text-slate-800 dark:text-slate-200\">Monte Toubkal 4.167m</span>\n            </div>\n            <div className=\"bg-white/30 dark:bg-slate-800/60 backdrop-blur-sm px-6 py-3 rounded-full border border-green-200 dark:border-slate-600\">\n              <span className=\"font-semibold text-slate-800 dark:text-slate-200\">Villaggi Berberi</span>\n            </div>\n            <div className=\"bg-white/30 dark:bg-slate-800/60 backdrop-blur-sm px-6 py-3 rounded-full border border-green-200 dark:border-slate-600\">\n              <span className=\"font-semibold text-slate-800 dark:text-slate-200\">Guide Esperte</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Regions Grid */}\n      <div className=\"py-16 lg:py-24 bg-background transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Le Catene Montuose\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Tre catene montuose diverse, ognuna con le sue caratteristiche uniche\n            </p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-3 gap-8 lg:gap-12\">\n            {regions.map((region, idx) => (\n              <div\n                key={region.id}\n                className=\"group bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-slate-200 dark:border-slate-700\"\n              >\n                <div className=\"relative h-64 lg:h-80 overflow-hidden\">\n                  <img\n                    src={region.image || \"/placeholder.svg?height=400&width=600\"}\n                    alt={region.name}\n                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-slate-900/80 dark:from-slate-950/90 to-transparent\" />\n                  \n                  {/* Difficulty Badge */}\n                  <div className=\"absolute top-4 left-4 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg border border-slate-200 dark:border-slate-600\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Mountain className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400\" />\n                      <div className=\"flex items-center space-x-1\">\n                        {[...Array(5)].map((_, i) => (\n                          <div\n                            key={i}\n                            className={`w-2 h-2 rounded-full ${i < region.difficulty ? \"bg-emerald-500 dark:bg-emerald-400\" : \"bg-slate-300 dark:bg-slate-600\"}`}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Rating */}\n                  <div className=\"absolute top-4 right-4 bg-white/20 dark:bg-slate-800/60 backdrop-blur-sm px-3 py-1 rounded-full border border-white/30 dark:border-slate-600/50\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-white text-sm font-semibold\">{region.rating}</span>\n                      <span className=\"text-white/80 text-sm\">({region.reviews})</span>\n                    </div>\n                  </div>\n\n                  {/* Title Overlay */}\n                  <div className=\"absolute bottom-6 left-6 text-white drop-shadow-lg\">\n                    <h3 className=\"text-2xl lg:text-3xl font-bold mb-2\">{region.title}</h3>\n                    <p className=\"text-slate-200 text-sm lg:text-base\">{region.description}</p>\n                  </div>\n                </div>\n\n                <div className=\"p-6 lg:p-8\">\n                  {/* Info */}\n                  <div className=\"flex items-center space-x-4 mb-6 text-sm text-emerald-700 dark:text-emerald-300\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Sun className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\n                      <span>{region.bestTime}</span>\n                    </div>\n                  </div>\n\n                  {/* Highlights */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-foreground mb-3\">Cosa vedere:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {region.highlights.map((highlight, hidx) => (\n                        <span\n                          key={hidx}\n                          className=\"bg-gradient-to-r from-emerald-400 via-green-500 to-teal-500 dark:from-green-600 dark:via-emerald-600 dark:to-slate-700 text-white px-3 py-1 rounded-full text-xs font-semibold shadow-sm\"\n                        >\n                          {highlight}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Activities */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-foreground mb-3\">Attivit√†:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {region.activities.map((activity, aidx) => (\n                        <span\n                          key={aidx}\n                          className=\"bg-gradient-to-r from-teal-400 to-green-500 dark:from-emerald-600 dark:to-green-700 text-white px-3 py-1 rounded-full text-xs font-semibold shadow-sm\"\n                        >\n                          {activity}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3\">\n                    <Link\n                      href={`/viaggi/montagne-atlas/${region.id}`}\n                      className=\"flex-1 bg-gradient-to-r from-emerald-500 to-green-600 dark:from-green-600 dark:to-emerald-700 text-white py-3 px-4 rounded-xl hover:from-emerald-600 hover:to-green-700 dark:hover:from-green-700 dark:hover:to-emerald-800 transition-all duration-300 font-semibold text-center shadow-md\"\n                    >\n                      Esplora {region.name}\n                    </Link>\n                    <Link\n                      href=\"/viaggi/gruppo\"\n                      className=\"px-6 py-3 border-2 border-emerald-500 dark:border-green-500 text-emerald-700 dark:text-green-400 rounded-xl hover:bg-emerald-500 hover:text-white dark:hover:bg-green-600 dark:hover:text-white dark:hover:border-green-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      Tour\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Trekking Routes */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-b from-orange-50 via-orange-100 to-white dark:bg-slate-900/50 transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Trekking Iconici\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Le escursioni pi√π spettacolari dell'Atlante marocchino\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {trekkingRoutes.map((route) => (\n              <div\n                key={route.id}\n                className=\"bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-slate-200 dark:border-slate-700\"\n              >\n                <div className=\"relative h-48 overflow-hidden\">\n                  <img\n                    src={route.image || \"/placeholder.svg?height=300&width=400\"}\n                    alt={route.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  \n                  {/* Wishlist Button */}\n                  <div className=\"absolute top-16 left-4 z-10\">\n                    <WishlistButton\n                      itemId={`atlas-trek-${route.id}`}\n                      itemType=\"experience\"\n                      itemTitle={route.name}\n                      itemImage={route.image}\n                      itemPrice={parseInt(route.price.replace(/[^0-9]/g, '')) || 0}\n                      itemDescription={route.description}\n                    />\n                  </div>\n                  \n                  <div className=\"absolute top-4 left-4 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm px-3 py-1 rounded-full shadow-lg border border-slate-200 dark:border-slate-600\">\n                    <span className=\"font-bold text-sm text-slate-900 dark:text-slate-100\">{route.altitude}</span>\n                  </div>\n                  <div className=\"absolute top-4 right-4 bg-gradient-to-r from-emerald-500 to-green-700 dark:from-green-600 dark:to-emerald-800 text-white px-3 py-1 rounded-full shadow-lg\">\n                    <span className=\"font-bold text-lg\">{route.price}</span>\n                  </div>\n                  <div className=\"absolute bottom-4 left-4 flex items-center space-x-1\">\n                    {[...Array(5)].map((_, i) => (\n                      <div\n                        key={i}\n                        className={`w-2 h-2 rounded-full ${i < route.difficulty ? \"bg-orange-400 dark:bg-orange-300\" : \"bg-white/50 dark:bg-slate-500\"}`}\n                      />\n                    ))}\n                    <span className=\"text-white text-xs ml-2 font-medium\">Difficolt√†</span>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <h3 className=\"text-xl font-bold text-foreground mb-2\">{route.name}</h3>\n                  <p className=\"text-muted-foreground text-sm mb-4\">{route.description}</p>\n\n                  <div className=\"flex items-center space-x-2 text-sm text-muted-foreground mb-4\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>{route.duration}</span>\n                  </div>\n\n                  <div className=\"space-y-2 mb-6\">\n                    {route.highlights.map((highlight, idx) => (\n                      <div key={idx} className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                        <div className=\"w-2 h-2 bg-emerald-500 dark:bg-emerald-400 rounded-full\" />\n                        <span>{highlight}</span>\n                      </div>\n                    ))}\n                  </div>\n\n                  <Link\n                    href={`/esperienze/trekking/${route.id}`}\n                    className=\"w-full bg-gradient-to-r from-emerald-600 to-green-700 dark:from-green-700 dark:to-emerald-800 text-white py-3 px-4 rounded-xl hover:from-emerald-700 hover:to-green-800 dark:hover:from-green-800 dark:hover:to-emerald-900 transition-all duration-300 font-semibold text-center block shadow-md\"\n                  >\n                    Prenota Trekking\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Experiences Section */}\n      <div className=\"py-16 lg:py-24 bg-background transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Esperienze di Montagna\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Attivit√† specializzate per ogni tipo di avventuriero\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8\">\n            {experiences.map((experience, idx) => (\n              <div\n                key={idx}\n                className=\"bg-card rounded-2xl p-6 text-center hover:shadow-lg transition-all duration-300 hover:scale-105 border border-slate-200 dark:border-slate-700\"\n              >\n                <div className=\"w-16 h-16 bg-gradient-to-r from-emerald-400 via-green-500 to-teal-600 dark:from-green-600 dark:via-emerald-700 dark:to-slate-800 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\">\n                  <experience.icon className=\"w-8 h-8 text-white\" />\n                </div>\n                <h3 className=\"text-lg font-bold text-foreground mb-3\">{experience.title}</h3>\n                <p className=\"text-muted-foreground text-sm mb-4\">{experience.description}</p>\n                <div className=\"text-xs text-emerald-600 dark:text-green-400 mb-3 font-medium\">{experience.duration}</div>\n                <div className=\"text-lg font-bold text-green-600 dark:text-green-400\">{experience.price}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Tours Section */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-b from-orange-50 via-orange-100 to-white dark:bg-slate-900/50 transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Tour delle Montagne Atlas\n            </h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Pacchetti completi per esplorare le montagne marocchine\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {tours.map((tour) => (\n              <div\n                key={tour.id}\n                className=\"bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-slate-200 dark:border-slate-700\"\n              >\n                <div className=\"relative h-48 overflow-hidden\">\n                  <img\n                    src={tour.image || \"/placeholder.svg?height=300&width=400\"}\n                    alt={tour.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute top-4 right-4 bg-gradient-to-r from-emerald-500 to-green-700 dark:from-green-600 dark:to-emerald-800 text-white px-4 py-2 rounded-full shadow-lg\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-bold text-lg\">{tour.price}</span>\n                      {tour.originalPrice && (\n                        <span className=\"text-sm line-through text-slate-200\">{tour.originalPrice}</span>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"absolute bottom-4 left-4 flex items-center space-x-1\">\n                    {[...Array(5)].map((_, i) => (\n                      <div\n                        key={i}\n                        className={`w-2 h-2 rounded-full ${i < tour.difficulty ? \"bg-orange-400 dark:bg-orange-300\" : \"bg-white/50 dark:bg-slate-500\"}`}\n                      />\n                    ))}\n                    <span className=\"text-white text-xs ml-2 font-medium\">Difficolt√†</span>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"text-xl font-bold text-foreground\">{tour.title}</h3>\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-sm font-semibold text-foreground\">{tour.rating}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center space-x-2 text-sm text-muted-foreground mb-4\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>{tour.duration}</span>\n                  </div>\n\n                  <div className=\"space-y-2 mb-6\">\n                    {tour.includes.map((item, idx) => (\n                      <div key={idx} className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                        <div className=\"w-2 h-2 bg-emerald-500 dark:bg-emerald-400 rounded-full\" />\n                        <span>{item}</span>\n                      </div>\n                    ))}\n                  </div>\n\n                  <Link\n                    href={`/viaggi/gruppo/${tour.id}`}\n                    className=\"w-full bg-gradient-to-r from-emerald-600 to-green-700 dark:from-green-700 dark:to-emerald-800 text-white py-3 px-4 rounded-xl hover:from-emerald-700 hover:to-green-800 dark:hover:from-green-800 dark:hover:to-emerald-900 transition-all duration-300 font-semibold text-center block shadow-md\"\n                  >\n                    Prenota Tour\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-r from-emerald-500 via-green-600 to-teal-700 dark:from-slate-900 dark:via-green-950 dark:to-emerald-900\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-slate-900 dark:text-white\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">Pronto per l'Avventura in Montagna?</h2>\n          <p className=\"text-lg lg:text-xl mb-8 max-w-2xl mx-auto text-slate-800 dark:text-slate-200\">\n            Scopri la maestosit√† dell'Atlante marocchino con guide esperte e itinerari indimenticabili\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/viaggi/su-misura\"\n              className=\"bg-white dark:bg-slate-800 text-emerald-700 dark:text-green-300 px-8 py-4 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 transition-all duration-300 font-semibold text-lg shadow-lg border border-slate-200 dark:border-slate-600\"\n            >\n              Crea Trekking Personalizzato\n            </Link>\n            <Link\n              href=\"/contatti\"\n              className=\"border-2 border-white dark:border-slate-300 text-slate-800 dark:text-white px-8 py-4 rounded-xl hover:bg-white hover:text-emerald-700 dark:hover:bg-slate-200 dark:hover:text-slate-900 transition-all duration-300 font-semibold text-lg\"\n            >\n              Contattaci\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":25313},"app/api/admin/upsert-by-slug/route.ts":{"content":"// Upsert by Slug API - Core CMS functionality\nimport { NextRequest, NextResponse } from 'next/server'\nimport { requireAdmin, adminDb } from '@/lib/auth-admin'\nimport { COLLECTIONS } from '@/lib/firestore-schema'\n\n// Generate unique slug\nfunction generateSlug(title: string): string {\n  return title\n    .toLowerCase()\n    .replace(/[^a-z0-9 -]/g, '')\n    .replace(/\\s+/g, '-')\n    .replace(/-+/g, '-')\n    .trim()\n}\n\n// Ensure slug uniqueness within collection\nasync function ensureUniqueSlug(\n  collection: string, \n  slug: string, \n  excludeId?: string\n): Promise<string> {\n  if (!adminDb) throw new Error('Database not initialized')\n  \n  let uniqueSlug = slug\n  let counter = 1\n  \n  while (true) {\n    const query = adminDb.collection(collection).where('slug', '==', uniqueSlug)\n    const snapshot = await query.get()\n    \n    // Check if slug exists (excluding current document if updating)\n    const existingDocs = snapshot.docs.filter(doc => doc.id !== excludeId)\n    \n    if (existingDocs.length === 0) {\n      break\n    }\n    \n    uniqueSlug = `${slug}-${counter}`\n    counter++\n  }\n  \n  return uniqueSlug\n}\n\n// POST: Upsert document by slug\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const idToken = authHeader?.replace('Bearer ', '')\n    \n    if (!idToken) {\n      return NextResponse.json({ error: 'Token required' }, { status: 401 })\n    }\n    \n    await requireAdmin(idToken)\n    \n    const { collection, slug, data, upsert = true } = await request.json()\n    \n    if (!collection || !slug || !data) {\n      return NextResponse.json({ \n        error: 'Collection, slug, and data required' \n      }, { status: 400 })\n    }\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // Find existing document by slug\n    const query = adminDb.collection(collection).where('slug', '==', slug)\n    const snapshot = await query.get()\n    \n    let docRef\n    let isUpdate = false\n    let finalSlug = slug\n    \n    if (!snapshot.empty) {\n      // Document exists - update it\n      docRef = snapshot.docs[0].ref\n      isUpdate = true\n    } else if (upsert) {\n      // Document doesn't exist - create new one\n      // Ensure slug is unique (in case of race conditions)\n      finalSlug = await ensureUniqueSlug(collection, slug)\n      docRef = adminDb.collection(collection).doc()\n      isUpdate = false\n    } else {\n      return NextResponse.json({ \n        error: 'Document not found and upsert disabled' \n      }, { status: 404 })\n    }\n    \n    // Prepare document data\n    const now = new Date()\n    const docData = {\n      ...data,\n      slug: finalSlug,\n      updatedAt: now,\n      ...(isUpdate ? {} : { createdAt: now })\n    }\n    \n    // Validate required fields based on collection\n    const requiredFields = getRequiredFieldsForCollection(collection)\n    for (const field of requiredFields) {\n      if (!(field in docData)) {\n        return NextResponse.json({ \n          error: `Required field missing: ${field}` \n        }, { status: 400 })\n      }\n    }\n    \n    // Update or create document\n    await docRef.set(docData, { merge: isUpdate })\n    \n    return NextResponse.json({\n      success: true,\n      id: docRef.id,\n      slug: finalSlug,\n      operation: isUpdate ? 'updated' : 'created',\n      message: `Document ${isUpdate ? 'updated' : 'created'} successfully`\n    })\n    \n  } catch (error) {\n    console.error('Upsert by slug error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error upserting document' \n    }, { status: 500 })\n  }\n}\n\n// GET: Find document by slug\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const collection = searchParams.get('collection')\n    const slug = searchParams.get('slug')\n    \n    if (!collection || !slug) {\n      return NextResponse.json({ \n        error: 'Collection and slug parameters required' \n      }, { status: 400 })\n    }\n    \n    if (!adminDb) {\n      return NextResponse.json({ error: 'Database not available' }, { status: 500 })\n    }\n    \n    // Optional admin authentication for private content\n    const authHeader = request.headers.get('authorization')\n    let isAdmin = false\n    \n    if (authHeader) {\n      try {\n        const idToken = authHeader.replace('Bearer ', '')\n        await requireAdmin(idToken)\n        isAdmin = true\n      } catch {\n        // Not admin, continue as public user\n      }\n    }\n    \n    // Find document by slug\n    const query = adminDb.collection(collection).where('slug', '==', slug)\n    const snapshot = await query.get()\n    \n    if (snapshot.empty) {\n      return NextResponse.json({ \n        error: 'Document not found' \n      }, { status: 404 })\n    }\n    \n    const doc = snapshot.docs[0]\n    const data = doc.data()\n    \n    // Check if document is published (unless admin)\n    if (!isAdmin && data.published === false) {\n      return NextResponse.json({ \n        error: 'Document not published' \n      }, { status: 404 })\n    }\n    \n    return NextResponse.json({\n      id: doc.id,\n      ...data\n    })\n    \n  } catch (error) {\n    console.error('Find by slug error:', error)\n    return NextResponse.json({ \n      error: error instanceof Error ? error.message : 'Error finding document' \n    }, { status: 500 })\n  }\n}\n\n// Helper function to get required fields for each collection\nfunction getRequiredFieldsForCollection(collection: string): string[] {\n  const fieldMap: Record<string, string[]> = {\n    [COLLECTIONS.cities]: ['name', 'slug', 'title', 'description'],\n    [COLLECTIONS.experiences]: ['title', 'slug', 'description', 'category'],\n    [COLLECTIONS.travels]: ['title', 'slug', 'description', 'category'],\n    [COLLECTIONS.services]: ['name', 'slug', 'description', 'category'],\n    [COLLECTIONS.blog]: ['title', 'slug', 'content'],\n    [COLLECTIONS.cmsSections]: ['name', 'type'],\n  }\n  \n  return fieldMap[collection] || ['slug']\n}","size_bytes":6027},"components/sections/WhyChooseUs.tsx":{"content":"\"use client\"\n\nimport { Shield, Users, Heart } from \"lucide-react\"\n\nexport default function WhyChooseUs() {\n  const features = [\n    {\n      icon: Shield,\n      title: \"Sicurezza Garantita\",\n      desc: \"Viaggi sicuri con assistenza 24/7 e guide esperte locali certificate\",\n      image: \"/images/safety-morocco.png\",\n    },\n    {\n      icon: Users,\n      title: \"Guide Autentiche\",\n      desc: \"Guide berbere che conoscono ogni segreto del Marocco e parlano la tua lingua\",\n      image: \"/images/berber-guide.png\",\n    },\n    {\n      icon: Heart,\n      title: \"Esperienze Uniche\",\n      desc: \"Vivi il vero spirito marocchino lontano dal turismo di massa\",\n      image: \"/images/authentic-experience.png\",\n    },\n  ]\n\n  return (\n    <div className=\"py-16 lg:py-24 bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Perch√© Scegliere Morocco Dreams</h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n            La tua sicurezza e soddisfazione sono la nostra priorit√†\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-8 lg:gap-12\">\n          {features.map((feature, idx) => (\n            <div key={idx} className=\"group text-center hover:scale-105 transition-all duration-500\">\n              <div className=\"relative mb-6 overflow-hidden rounded-2xl\">\n                <img\n                  src={feature.image || \"/placeholder.svg?height=200&width=350\"}\n                  alt={feature.title}\n                  className=\"w-full h-40 sm:h-48 object-cover group-hover:scale-110 transition-transform duration-500\"\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent\" />\n                <div className=\"absolute bottom-4 left-4\">\n                  <div className=\"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center\">\n                    <feature.icon className=\"w-6 h-6 text-white\" />\n                  </div>\n                </div>\n              </div>\n              <h3 className=\"text-xl lg:text-2xl font-bold text-foreground mb-4\">{feature.title}</h3>\n              <p className=\"text-muted-foreground leading-relaxed\">{feature.desc}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":2425},"app/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect, Suspense } from \"react\"\nimport { Users, Heart, Mountain, Loader2 } from \"lucide-react\"\nimport Link from \"next/link\"\nimport HeroSection from \"@/components/sections/HeroSection\"\nimport WhyChooseUs from \"@/components/sections/WhyChooseUs\"\nimport BlogTeaser from \"@/components/sections/blog-teaser\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport MoroccoMap from \"@/components/sections/MoroccoMap\"\nimport InstagramFeed from \"@/components/InstagramFeed\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { ExperienceCard } from \"@/components/cards/ExperienceCard\"\nimport { TravelCard } from \"@/components/cards/TravelCard\"\nimport { getPublishedExperiences, getPublishedTravels, Experience, Travel } from \"@/lib/public-data\"\n\n// Icon mapping for categories\nconst getIconForCategory = (category?: string) => {\n  switch (category?.toLowerCase()) {\n    case 'adventure':\n    case 'trekking':\n      return Mountain\n    case 'wellness':\n    case 'relaxation':\n      return Heart\n    case 'culture':\n    case 'cooking':\n      return Users\n    default:\n      return Mountain\n  }\n}\n\n// Authentic Experiences Component - Now Dynamic\nconst AuthenticExperiences = () => {\n  const [experiences, setExperiences] = useState<Experience[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const loadExperiences = async () => {\n      try {\n        const data = await getPublishedExperiences({ \n          featured: true, \n          limit: 4 \n        })\n        setExperiences(data)\n      } catch (error) {\n        console.error('Error loading experiences:', error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadExperiences()\n  }, [])\n\n  return (\n    <section className=\"py-16 lg:py-24 bg-background\" data-slot=\"authentic-experiences\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4 lg:mb-6 text-balance\">\n            Esperienze Autentiche\n          </h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto text-pretty leading-relaxed\">\n            Immergiti nella cultura marocchina con le nostre esperienze uniche\n          </p>\n        </div>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n            <span className=\"ml-3 text-muted-foreground\">Caricamento esperienze...</span>\n          </div>\n        ) : experiences.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">Nessuna esperienza disponibile al momento.</p>\n          </div>\n        ) : (\n          <div className=\"grid sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {experiences.map((experience) => {\n              const IconComponent = getIconForCategory(experience.category)\n              \n              return (\n                <ExperienceCard\n                  key={experience.id}\n                  id={experience.id}\n                  image={experience.image || `/placeholder.svg?height=200&width=300&query=${encodeURIComponent(\"esperienza marocco \" + experience.title)}`}\n                  title={experience.title}\n                  description={experience.description}\n                  price={experience.price}\n                  duration={experience.duration || 'Durata variabile'}\n                  quickInfo={[\n                    {\n                      icon: IconComponent,\n                      label: experience.category || 'Esperienza',\n                      value: experience.category || ''\n                    }\n                  ]}\n                  ctas={[\n                    { \n                      label: 'Dettagli', \n                      href: `/esperienze/${experience.id}`, \n                      variant: 'secondary' \n                    },\n                    { \n                      label: 'Prenota', \n                      href: '/contatti', \n                      variant: 'primary' \n                    }\n                  ]}\n                />\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\n// Featured Travels Component - Now Dynamic\nconst FeaturedTravels = () => {\n  const [travels, setTravels] = useState<Travel[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const loadTravels = async () => {\n      try {\n        const data = await getPublishedTravels({ \n          featured: true, \n          limit: 6 \n        })\n        setTravels(data)\n      } catch (error) {\n        console.error('Error loading travels:', error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadTravels()\n  }, [])\n\n  if (loading) {\n    return (\n      <section className=\"py-16 lg:py-24 bg-muted/50\" data-slot=\"featured-travels\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n            <span className=\"ml-3 text-muted-foreground\">Caricamento viaggi...</span>\n          </div>\n        </div>\n      </section>\n    )\n  }\n\n  if (travels.length === 0) {\n    return null\n  }\n\n  return (\n    <section className=\"py-16 lg:py-24 bg-muted/50\" data-slot=\"featured-travels\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4 lg:mb-6 text-balance\">\n            Viaggi in Evidenza\n          </h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto text-pretty leading-relaxed\">\n            Scopri i nostri tour pi√π popolari attraverso il Marocco\n          </p>\n        </div>\n\n        <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8\">\n          {travels.map((travel) => {\n            const highlights = travel.itinerary && Array.isArray(travel.itinerary) && travel.itinerary.length > 0 \n              ? travel.itinerary.slice(0, 3).map((item, idx) => {\n                  return typeof item === 'string' ? item : (item as any).title || (item as any).description || 'Giorno ' + ((item as any).day || idx + 1);\n                })\n              : [];\n            \n            return (\n              <TravelCard\n                key={travel.id}\n                id={travel.id}\n                image={travel.image || `/placeholder.svg?height=300&width=400&query=${encodeURIComponent(\"viaggio marocco \" + travel.title)}`}\n                title={travel.title}\n                description={travel.description}\n                price={travel.price}\n                duration={travel.duration || 'Durata variabile'}\n                highlights={highlights}\n                badges={travel.category ? [{ label: travel.category.replace('-', ' '), variant: 'default' }] : []}\n                ctas={[\n                  { \n                    label: 'Dettagli', \n                    href: `/viaggi/${travel.id}`, \n                    variant: 'secondary' \n                  },\n                  { \n                    label: 'Prenota', \n                    href: '/contatti', \n                    variant: 'primary' \n                  }\n                ]}\n              />\n            )\n          })}\n        </div>\n\n        <div className=\"text-center mt-12\">\n          <Button\n            asChild\n            variant=\"outline\"\n            size=\"lg\"\n            className=\"hover:scale-105 active:scale-95 touch-manipulation\"\n          >\n            <Link href=\"/viaggi\">Vedi Tutti i Viaggi</Link>\n          </Button>\n        </div>\n      </div>\n    </section>\n  )\n}\n\n// Testimonials Component - Dynamic from API\nconst TestimonialsSection = () => {\n  const [testimonials, setTestimonials] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const loadTestimonials = async () => {\n      try {\n        const res = await fetch('/api/testimonials')\n        if (!res.ok) throw new Error('Failed to fetch')\n        const data = await res.json()\n        setTestimonials(data.testimonials || [])\n      } catch (error) {\n        console.error('Error loading testimonials:', error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadTestimonials()\n  }, [])\n\n  return (\n    <section className=\"py-16 lg:py-24 bg-gradient-to-b from-card to-muted\" data-slot=\"testimonials\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4 lg:mb-6 text-balance\">\n            Cosa Dicono i Nostri Viaggiatori\n          </h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground text-pretty leading-relaxed\">\n            Testimonianze autentiche dai nostri clienti\n          </p>\n        </div>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n          </div>\n        ) : testimonials.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">Testimonianze non disponibili al momento</p>\n          </div>\n        ) : (\n          <div className=\"grid md:grid-cols-3 gap-6 lg:gap-8\">\n            {testimonials.map((testimonial) => (\n              <Card\n                key={testimonial.id}\n                className=\"hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 touch-manipulation bg-card\"\n              >\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center mb-4\">\n                    <img\n                      src={\n                        testimonial.image ||\n                        `/placeholder.svg?height=50&width=50&query=${encodeURIComponent(\"testimonial \" + testimonial.name)}`\n                      }\n                      alt={testimonial.name}\n                      className=\"w-12 h-12 rounded-full object-cover mr-4\"\n                    />\n                    <div>\n                      <h4 className=\"font-bold text-card-foreground\">{testimonial.name}</h4>\n                      <p className=\"text-sm text-muted-foreground\">{testimonial.location}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex mb-4\">\n                    {[...Array(testimonial.rating || 5)].map((_, i) => (\n                      <div key={i} className=\"w-5 h-5 text-yellow-400 fill-current\">\n                        ‚≠ê\n                      </div>\n                    ))}\n                  </div>\n\n                  <p className=\"text-muted-foreground mb-4 italic text-pretty leading-relaxed\">\n                    \"{testimonial.comment}\"\n                  </p>\n\n                  {testimonial.service && (\n                    <div className=\"text-sm text-primary font-semibold\">{testimonial.service}</div>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\n// FAQ Section Component - Dynamic from API\nconst FAQSection = () => {\n  const [faqs, setFaqs] = useState<any[]>([])\n  const [openFAQ, setOpenFAQ] = useState<string | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const loadFAQs = async () => {\n      try {\n        const res = await fetch('/api/faq')\n        if (!res.ok) throw new Error('Failed to fetch')\n        const data = await res.json()\n        setFaqs(data.faqs || [])\n      } catch (error) {\n        console.error('Error loading FAQs:', error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadFAQs()\n  }, [])\n\n  return (\n    <section className=\"py-16 lg:py-24 bg-background\" data-slot=\"faq\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4 lg:mb-6 text-balance\">\n            Domande Frequenti\n          </h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground text-pretty leading-relaxed\">\n            Tutto quello che devi sapere per il tuo viaggio in Marocco\n          </p>\n        </div>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n          </div>\n        ) : faqs.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">Domande frequenti non disponibili al momento</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {faqs.map((faq) => (\n              <Card\n                key={faq.id}\n                className=\"overflow-hidden transition-all duration-300 hover:shadow-lg hover:scale-105 active:scale-95 touch-manipulation bg-card\"\n              >\n                <button\n                  onClick={() => setOpenFAQ(openFAQ === faq.id ? null : faq.id)}\n                  className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-accent/10 transition-colors duration-200 min-h-[44px] touch-manipulation\"\n                >\n                  <span className=\"font-semibold text-card-foreground pr-4 text-balance\">{faq.question}</span>\n                  {openFAQ === faq.id ? (\n                    <span className=\"text-primary text-xl\">‚àí</span>\n                  ) : (\n                    <span className=\"text-primary text-xl\">+</span>\n                  )}\n                </button>\n                <div\n                  className={`px-6 overflow-hidden transition-all duration-300 ${\n                    openFAQ === faq.id ? \"max-h-96 pb-4\" : \"max-h-0\"\n                  }`}\n                >\n                  <p className=\"text-muted-foreground leading-relaxed text-pretty\">{faq.answer}</p>\n                </div>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default function Home() {\n  return (\n    <main className=\"min-h-screen bg-background\">\n      <HeroSection />\n      \n      {/* Instagram Section - @omarito_chill */}\n      <section className=\"py-16 lg:py-24 bg-gradient-to-b from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {/* Header */}\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n              Seguici su Instagram\n            </h2>\n            <p className=\"text-lg text-muted-foreground mb-6\">\n              Scopri le avventure dei nostri viaggiatori in Marocco\n            </p>\n            <a\n              href=\"https://www.instagram.com/omarito_chill/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 text-white rounded-full hover:from-purple-700 hover:via-pink-700 hover:to-orange-600 transition-all duration-300 font-semibold text-lg shadow-lg hover:shadow-xl transform hover:scale-105\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n              </svg>\n              @omarito_chill\n            </a>\n          </div>\n\n          {/* Video Grid - Dynamic Instagram feed from Firestore */}\n          <InstagramFeed />\n        </div>\n      </section>\n      \n      <WhyChooseUs />\n      {/* PopularTrips temporaneamente disabilitato - riattivare quando ci saranno viaggi pubblicati */}\n      <Suspense\n        fallback={\n          <section className=\"py-16 lg:py-24 bg-background\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n              <div className=\"text-center\">\n                <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                <p className=\"text-lg font-medium text-foreground\">Caricamento mappa del Marocco...</p>\n              </div>\n            </div>\n          </section>\n        }\n      >\n        <MoroccoMap />\n      </Suspense>\n      <AuthenticExperiences />\n      <FeaturedTravels />\n      <TestimonialsSection />\n      <FAQSection />\n      <BlogTeaser />\n      <ContactBanner\n        title=\"Pronto per la tua avventura in Marocco?\"\n        subtitle=\"Contattaci per pianificare il viaggio dei tuoi sogni\"\n      />\n    </main>\n  )\n}\n","size_bytes":17826},"app/esperienze/surf/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport { Waves, Wind, Sun, Compass, Users, Clock, Shield, Star } from \"lucide-react\"\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\nimport BookingModal from \"@/components/modals/BookingModal\"\n\nexport default function SurfTaghazoutPage() {\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  \n  const surfData = {\n    id: \"surf-taghazout\",\n    name: \"Surf a Taghazout\",\n    price: 35,\n    duration: \"2-4 ore\"\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <ContactBanner\n        title=\"Surf a Taghazout\"\n        subtitle=\"Lezioni e coaching per tutti i livelli. Prenota ora la tua esperienza sulla costa atlantica.\"\n      />\n\n      {/* Hero Image */}\n      <header className=\"relative\">\n        <div className=\"h-[320px] sm:h-[420px] lg:h-[520px] relative overflow-hidden\">\n          {/* Wishlist Button */}\n          <div className=\"absolute top-6 right-6 z-10\">\n            <WishlistButton\n              itemId=\"surf-taghazout\"\n              itemType=\"experience\"\n              itemTitle=\"Surf a Taghazout\"\n              itemImage=\"/images/essaouira-coast.png\"\n              itemDescription=\"Lezioni e coaching per tutti i livelli sulla costa atlantica\"\n            />\n          </div>\n          <img src=\"/images/essaouira-coast.png\" alt=\"Surf a Taghazout\" className=\"w-full h-full object-cover\" />\n          <div className=\"absolute inset-0 bg-black/30\" />\n          <div className=\"absolute bottom-8 left-8 text-white\">\n            <h1 className=\"text-3xl lg:text-4xl font-bold mb-2\">Surf a Taghazout</h1>\n            <p className=\"text-lg opacity-90\">Surf camp e lezioni a Taghazout</p>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <section className=\"py-12 lg:py-16\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            {/* Content */}\n            <div className=\"lg:col-span-2\">\n              <div className=\"prose prose-lg max-w-none\">\n                <h2 className=\"text-2xl lg:text-3xl font-bold mb-4 text-foreground\">\n                  Taghazout: il paradiso del surf marocchino\n                </h2>\n                <p className=\"text-muted-foreground text-lg mb-8\">\n                  Taghazout √® considerata la capitale del surf del Marocco, grazie alle sue onde costanti, ai venti\n                  alisei e all'atmosfera rilassata che caratterizza questo villaggio di pescatori. Le nostre scuole\n                  partner offrono lezioni per tutti i livelli, dal principiante assoluto al surfista esperto che vuole\n                  perfezionare la tecnica. Gli spot variano dalle onde dolci per principianti alle reef break pi√π\n                  impegnative.\n                </p>\n\n                {/* Features Grid */}\n                <div className=\"grid sm:grid-cols-2 gap-6 mb-10\">\n                  {[\n                    {\n                      icon: Waves,\n                      title: \"Spot leggendari\",\n                      text: \"Anchor Point, Killer Point, La Source e spot segreti accessibili solo con le guide\",\n                    },\n                    {\n                      icon: Wind,\n                      title: \"Venti costanti\",\n                      text: \"Aprile-Settembre con alisei perfetti per surf e windsurf, condizioni ideali tutto l'anno\",\n                    },\n                    {\n                      icon: Sun,\n                      title: \"Stagione onde\",\n                      text: \"Ottobre-Marzo per swell atlantici pi√π consistenti, Aprile-Settembre per principianti\",\n                    },\n                    {\n                      icon: Compass,\n                      title: \"Tutti i livelli\",\n                      text: \"Dalle prime onde in schiuma bianca al perfezionamento su reef break impegnative\",\n                    },\n                  ].map((feature, i) => (\n                    <div key={i} className=\"p-6 rounded-2xl bg-card border border-border\">\n                      <feature.icon className=\"w-8 h-8 text-orange-600 dark:text-orange-400 mb-4\" />\n                      <h3 className=\"font-bold text-lg mb-2 text-card-foreground\">{feature.title}</h3>\n                      <p className=\"text-muted-foreground text-sm leading-relaxed\">{feature.text}</p>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Sample Program */}\n                <div className=\"bg-muted/50 rounded-2xl p-6 lg:p-8 mb-10 border border-border\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">Programma surf camp 5 giorni</h3>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        1\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Arrivo e prime onde</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Check-in, briefing sicurezza, prima lezione in spiaggia con tavole soft, teoria delle onde e\n                          posizionamento.\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        2-3\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Tecnica e progressione</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Lezioni mattutine (2h), analisi video, pomeriggi liberi per praticare, introduzione al lineup\n                          e alle priorit√†.\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        4-5\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Spot avanzati e cultura</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Esplorazione spot diversi, sessioni autonome supervisionate, visita della medina e workshop di\n                          artigianato locale.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* What's Included */}\n                <div className=\"mb-10\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">Cosa √® incluso</h3>\n                  <div className=\"grid sm:grid-cols-2 gap-4\">\n                    {[\n                      \"Istruttore ISA certificato\",\n                      \"Tavole e mute per tutta la durata\",\n                      \"Trasferimenti agli spot\",\n                      \"Analisi video delle sessioni\",\n                      \"Alloggio in surf house/riad\",\n                      \"Colazione e cena\",\n                      \"Assicurazione e assistenza medica\",\n                      \"Certificato di partecipazione\",\n                    ].map((item, idx) => (\n                      <div key={idx} className=\"flex items-center gap-3\">\n                        <div className=\"w-2 h-2 bg-green-500 rounded-full\" />\n                        <span className=\"text-muted-foreground\">{item}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Levels */}\n                <div className=\"mb-10\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">Livelli e progressione</h3>\n                  <div className=\"space-y-4\">\n                    <div className=\"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border-l-4 border-green-500\">\n                      <h4 className=\"font-semibold text-green-800 dark:text-green-300\">Principiante</h4>\n                      <p className=\"text-green-700 dark:text-green-400 text-sm\">\n                        Prime onde in schiuma, equilibrio sulla tavola, remata e alzata di base\n                      </p>\n                    </div>\n                    <div className=\"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-l-4 border-orange-500\">\n                      <h4 className=\"font-semibold text-orange-800 dark:text-orange-300\">Intermedio</h4>\n                      <p className=\"text-orange-700 dark:text-orange-400 text-sm\">\n                        Onde non frangenti, curve di base, lettura delle onde e posizionamento\n                      </p>\n                    </div>\n                    <div className=\"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl border-l-4 border-purple-500\">\n                      <h4 className=\"font-semibold text-purple-800 dark:text-purple-300\">Avanzato</h4>\n                      <p className=\"text-purple-700 dark:text-purple-400 text-sm\">\n                        Manovre avanzate, tube riding, spot impegnativi e coaching personalizzato\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Best Time */}\n                <div className=\"bg-yellow-50 dark:bg-yellow-900/20 rounded-2xl p-6 border border-border\">\n                  <h3 className=\"text-xl font-bold mb-3 text-foreground\">Quando andare</h3>\n                  <div className=\"grid sm:grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <h4 className=\"font-semibold mb-2 text-foreground\">Ottobre - Marzo</h4>\n                      <p className=\"text-muted-foreground\">\n                        Swell atlantici pi√π consistenti, onde 1-3m, acqua 18-20¬∞C, ideale per intermedi/avanzati\n                      </p>\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold mb-2 text-foreground\">Aprile - Settembre</h4>\n                      <p className=\"text-muted-foreground\">\n                        Onde pi√π piccole e costanti, acqua 20-22¬∞C, venti per windsurf, perfetto per principianti\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Sidebar */}\n            <aside className=\"lg:col-span-1\">\n              <div className=\"sticky top-24 space-y-6\">\n                {/* Pricing Card */}\n                <div className=\"p-6 rounded-2xl bg-muted/50 border border-border\">\n                  <div className=\"text-center mb-4\">\n                    <h3 className=\"text-xl font-bold text-foreground mb-2\">Prezzo indicativo</h3>\n                    <div className=\"text-3xl font-extrabold text-orange-600 dark:text-orange-400 mb-1\">da ‚Ç¨220</div>\n                    <p className=\"text-sm text-muted-foreground\">5 giorni surf camp completo</p>\n                  </div>\n\n                  <div className=\"space-y-3 mb-6\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Users className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Gruppo: 4-8 persone</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Clock className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">2h lezione al giorno</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Shield className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Istruttori certificati ISA</span>\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={() => setShowBookingModal(true)}\n                    className=\"block w-full text-center px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-semibold hover:from-blue-600 hover:to-cyan-600 transition-all duration-300\"\n                  >\n                    Prenota / Richiedi Info\n                  </button>\n\n                  <p className=\"text-xs text-muted-foreground mt-3 text-center\">\n                    Lezioni singole da ‚Ç¨35. Noleggio attrezzatura disponibile.\n                  </p>\n                </div>\n\n                {/* Weather Info */}\n                <div className=\"p-6 rounded-2xl bg-card border border-border\">\n                  <h3 className=\"text-lg font-bold text-card-foreground mb-4\">Condizioni attuali</h3>\n                  <div className=\"space-y-3 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Altezza onde:</span>\n                      <span className=\"font-semibold text-blue-600\">1.2 - 1.8m</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Vento:</span>\n                      <span className=\"font-semibold text-green-600\">15-20 knots NW</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Temp. acqua:</span>\n                      <span className=\"font-semibold text-blue-600\">19¬∞C</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Condizioni:</span>\n                      <span className=\"font-semibold text-green-600\">Ottime</span>\n                    </div>\n                  </div>\n                  <p className=\"text-xs text-muted-foreground/70 mt-3\">Aggiornato oggi alle 14:00</p>\n                </div>\n\n                {/* Reviews */}\n                <div className=\"p-6 rounded-2xl bg-card border border-border\">\n                  <h3 className=\"text-lg font-bold text-card-foreground mb-4\">Recensioni</h3>\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <div className=\"flex\">\n                      {[...Array(5)].map((_, i) => (\n                        <Star key={i} className=\"w-4 h-4 fill-yellow-400 text-yellow-400\" />\n                      ))}\n                    </div>\n                    <span className=\"text-sm text-muted-foreground\">4.8/5 (94 recensioni)</span>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"text-sm\">\n                      <p className=\"text-muted-foreground italic\">\n                        \"Istruttori fantastici, ho imparato a surfare in 3 giorni!\"\n                      </p>\n                      <p className=\"text-muted-foreground/70 text-xs mt-1\">- Luca, Torino</p>\n                    </div>\n                    <div className=\"text-sm\">\n                      <p className=\"text-muted-foreground italic\">\n                        \"Spot incredibili e atmosfera rilassata. Torner√≤ sicuramente!\"\n                      </p>\n                      <p className=\"text-muted-foreground/70 text-xs mt-1\">- Emma, Firenze</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </aside>\n          </div>\n        </div>\n      </section>\n\n      {/* Booking Modal */}\n      {showBookingModal && (\n        <BookingModal\n          isOpen={showBookingModal}\n          onClose={() => setShowBookingModal(false)}\n          itemId={surfData.id}\n          itemType=\"experience\"\n          itemTitle={surfData.name}\n          basePrice={surfData.price}\n          duration={surfData.duration}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":16122},"app/servizi/guide-private/GuidePrivateClientPage.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  User,\n  Star,\n  Languages,\n  Award,\n  Mountain,\n  Building,\n  Utensils,\n  CheckCircle,\n  ArrowRight,\n  Phone,\n  MessageCircle,\n} from \"lucide-react\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nconst structuredData = {\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"TouristService\",\n  name: \"Guide Private Esperte Marocco\",\n  description: \"Guide turistiche private certificate per esplorare il Marocco autentico con esperienza locale\",\n  provider: {\n    \"@type\": \"Organization\",\n    name: \"Morocco Dreams\",\n  },\n  areaServed: \"Morocco\",\n  offers: [\n    {\n      \"@type\": \"Offer\",\n      name: \"Tour Citt√†\",\n      price: \"35\",\n      priceCurrency: \"EUR\",\n    },\n    {\n      \"@type\": \"Offer\",\n      name: \"Tour Culturale\",\n      price: \"45\",\n      priceCurrency: \"EUR\",\n    },\n    {\n      \"@type\": \"Offer\",\n      name: \"Tour Avventura\",\n      price: \"55\",\n      priceCurrency: \"EUR\",\n    },\n  ],\n}\n\nconst guides = [\n  {\n    id: \"hassan\",\n    name: \"Hassan El Amrani\",\n    specialization: \"Citt√† Imperiali & Storia\",\n    experience: \"12 anni\",\n    languages: [\"Italiano\", \"Francese\", \"Inglese\", \"Arabo\", \"Berbero\"],\n    rating: 4.9,\n    reviews: 247,\n    price: 45,\n    image: \"/images/guides/hassan-guide.png\",\n    description: \"Esperto di storia marocchina e architettura islamica. Laureato in Storia dell'Arte.\",\n    specialties: [\"Medine storiche\", \"Architettura islamica\", \"Storia del Marocco\", \"Tradizioni locali\"],\n    certifications: [\"Guida Turistica Certificata\", \"Laurea in Storia dell'Arte\", \"Primo Soccorso\"],\n  },\n  {\n    id: \"aicha\",\n    name: \"Aicha Benali\",\n    specialization: \"Cultura & Tradizioni\",\n    experience: \"8 anni\",\n    languages: [\"Italiano\", \"Spagnolo\", \"Francese\", \"Arabo\"],\n    rating: 4.8,\n    reviews: 189,\n    price: 40,\n    image: \"/images/guides/aicha-guide.png\",\n    description: \"Specializzata in cultura berbera e tradizioni femminili marocchine.\",\n    specialties: [\"Cultura berbera\", \"Artigianato locale\", \"Cucina tradizionale\", \"Hammam e spa\"],\n    certifications: [\"Guida Culturale Certificata\", \"Esperta Artigianato\", \"Corso Cucina Professionale\"],\n  },\n  {\n    id: \"youssef\",\n    name: \"Youssef Tazi\",\n    specialization: \"Avventura & Natura\",\n    experience: \"15 anni\",\n    languages: [\"Inglese\", \"Francese\", \"Tedesco\", \"Arabo\", \"Berbero\"],\n    rating: 4.9,\n    reviews: 312,\n    price: 55,\n    image: \"/images/guides/youssef-guide.png\",\n    description: \"Guida esperta per trekking nell'Atlante e escursioni nel deserto del Sahara.\",\n    specialties: [\"Trekking Atlante\", \"Deserto Sahara\", \"Fotografia naturalistica\", \"Astronomia\"],\n    certifications: [\"Guida Alpina Certificata\", \"Primo Soccorso Avanzato\", \"Guida Desertica\"],\n  },\n  {\n    id: \"fatima\",\n    name: \"Fatima Ouali\",\n    specialization: \"Gastronomia & Mercati\",\n    experience: \"6 anni\",\n    languages: [\"Italiano\", \"Francese\", \"Inglese\", \"Arabo\"],\n    rating: 4.7,\n    reviews: 156,\n    price: 35,\n    image: \"/images/guides/fatima-guide.png\",\n    description: \"Chef professionista e guida gastronomica, esperta di cucina marocchina autentica.\",\n    specialties: [\"Tour gastronomici\", \"Mercati locali\", \"Corsi di cucina\", \"Prodotti tipici\"],\n    certifications: [\"Chef Professionale\", \"Guida Gastronomica\", \"Igiene Alimentare\"],\n  },\n]\n\nconst tourTypes = [\n  {\n    id: \"city\",\n    name: \"Tour Citt√†\",\n    duration: \"4-8 ore\",\n    price: \"da ‚Ç¨35\",\n    description: \"Esplora le medine, i monumenti storici e i quartieri moderni\",\n    icon: Building,\n    features: [\"Medina e souks\", \"Monumenti storici\", \"Quartieri moderni\", \"Trasporti inclusi\"],\n  },\n  {\n    id: \"cultural\",\n    name: \"Tour Culturale\",\n    duration: \"6-10 ore\",\n    price: \"da ‚Ç¨45\",\n    description: \"Immergiti nella cultura e nelle tradizioni marocchine\",\n    icon: Award,\n    features: [\"Artigiani locali\", \"Case tradizionali\", \"Cerimonie del t√®\", \"Musica e danze\"],\n  },\n  {\n    id: \"adventure\",\n    name: \"Tour Avventura\",\n    duration: \"1-3 giorni\",\n    price: \"da ‚Ç¨55\",\n    description: \"Trekking, deserto e attivit√† all'aria aperta\",\n    icon: Mountain,\n    features: [\"Trekking guidato\", \"Escursioni deserto\", \"Campeggio\", \"Attivit√† outdoor\"],\n  },\n  {\n    id: \"food\",\n    name: \"Tour Gastronomico\",\n    duration: \"3-5 ore\",\n    price: \"da ‚Ç¨35\",\n    description: \"Scopri i sapori autentici della cucina marocchina\",\n    icon: Utensils,\n    features: [\"Mercati locali\", \"Degustazioni\", \"Corsi di cucina\", \"Ristoranti tipici\"],\n  },\n]\n\nconst testimonials = [\n  {\n    name: \"Elena Marchetti\",\n    location: \"Roma, Italia\",\n    guide: \"Hassan El Amrani\",\n    rating: 5,\n    comment:\n      \"Hassan √® stato una guida eccezionale! La sua conoscenza della storia di Fes √® impressionante. Ci ha fatto scoprire angoli nascosti che non avremmo mai trovato da soli.\",\n    date: \"20 Gennaio 2024\",\n  },\n  {\n    name: \"Jean-Pierre Martin\",\n    location: \"Lyon, France\",\n    guide: \"Youssef Tazi\",\n    rating: 5,\n    comment:\n      \"Exp√©rience incroyable dans le d√©sert avec Youssef! Guide tr√®s professionnel et passionn√©. Les photos du coucher de soleil sont magnifiques.\",\n    date: \"15 Gennaio 2024\",\n  },\n  {\n    name: \"Maria Gonz√°lez\",\n    location: \"Madrid, Espa√±a\",\n    guide: \"Aicha Benali\",\n    rating: 5,\n    comment:\n      \"Aicha nos ense√±√≥ la verdadera cultura marroqu√≠. Visitamos talleres de artesanos y aprendimos sobre las tradiciones ber√©beres. ¬°Inolvidable!\",\n    date: \"10 Gennaio 2024\",\n  },\n]\n\nexport default function GuidePrivateClientPage() {\n  const [selectedGuide, setSelectedGuide] = useState(guides[0])\n  const [selectedTour, setSelectedTour] = useState(tourTypes[0])\n\n  return (\n    <>\n      <script type=\"application/ld+json\" dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }} />\n\n      <div className=\"min-h-screen bg-background\">\n        <section className=\"relative py-20 overflow-hidden\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-indigo-600/20\" />\n          <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center\">\n              <div className=\"flex justify-center mb-6\">\n                <div className=\"p-4 bg-blue-100 dark:bg-blue-900/30 rounded-full\">\n                  <User className=\"h-12 w-12 text-blue-600 dark:text-blue-400\" />\n                </div>\n              </div>\n              <h1 className=\"text-4xl md:text-6xl font-bold text-foreground mb-6\">\n                Guide Private <span className=\"text-blue-600 dark:text-blue-400\">Esperte</span>\n              </h1>\n              <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto mb-8\">\n                Scopri il Marocco autentico con le nostre guide locali certificate. Esperienze personalizzate e\n                conoscenza approfondita della cultura marocchina.\n              </p>\n              <div className=\"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground\">\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Guide certificate</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Multilingue</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Esperienza locale</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/* Guide Selection */}\n        <section className=\"py-20\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Le Nostre Guide Esperte</h2>\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n                Professionisti certificati con anni di esperienza e passione per il Marocco\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12\">\n              {guides.map((guide) => (\n                <Card\n                  key={guide.id}\n                  className={`relative cursor-pointer transition-all duration-300 hover:shadow-xl ${\n                    selectedGuide.id === guide.id ? \"ring-2 ring-blue-500 shadow-lg\" : \"hover:shadow-lg\"\n                  }`}\n                  onClick={() => setSelectedGuide(guide)}\n                >\n                  {/* Wishlist Button */}\n                  <div className=\"absolute top-2 right-2 z-10\" onClick={(e) => e.stopPropagation()}>\n                    <WishlistButton\n                      itemId={`guide-${guide.id}`}\n                      itemType=\"service\"\n                      itemTitle={guide.name}\n                      itemImage={guide.image}\n                      itemPrice={guide.price}\n                      itemDescription={guide.specialization}\n                    />\n                  </div>\n                  \n                  <CardHeader className=\"text-center\">\n                    <div className=\"w-20 h-20 mx-auto mb-4 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center\">\n                      <User className=\"h-10 w-10 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                    <CardTitle className=\"text-lg\">{guide.name}</CardTitle>\n                    <CardDescription>{guide.specialization}</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"text-center\">\n                    <div className=\"flex items-center justify-center gap-1 mb-2\">\n                      <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                      <span className=\"font-medium\">{guide.rating}</span>\n                      <span className=\"text-sm text-muted-foreground\">({guide.reviews})</span>\n                    </div>\n\n                    <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2\">\n                      ‚Ç¨{guide.price}/giorno\n                    </div>\n\n                    <div className=\"text-sm text-muted-foreground mb-4\">{guide.experience} di esperienza</div>\n\n                    <div className=\"flex flex-wrap gap-1 justify-center\">\n                      {guide.languages.slice(0, 3).map((lang, index) => (\n                        <Badge\n                          key={index}\n                          variant=\"secondary\"\n                          className=\"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-orange-500 to-red-500 text-white dark:bg-orange-900/40 dark:text-orange-200 shadow-sm transition-colors\"\n                        >\n                          {lang}\n                        </Badge>\n                      ))}\n                      {guide.languages.length > 3 && (\n                        <Badge\n                          variant=\"secondary\"\n                          className=\"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-orange-500 to-red-500 text-white dark:bg-orange-900/40 dark:text-orange-200 shadow-sm transition-colors\"\n                        >\n                          +{guide.languages.length - 3}\n                        </Badge>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n\n            {/* Selected Guide Details */}\n            <Card className=\"mb-12\">\n              <CardHeader>\n                <CardTitle className=\"text-2xl flex items-center gap-3\">\n                  <User className=\"h-6 w-6 text-blue-600\" />\n                  {selectedGuide.name} - Profilo Dettagliato\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid md:grid-cols-2 gap-8\">\n                  <div>\n                    <p className=\"text-muted-foreground mb-6\">{selectedGuide.description}</p>\n\n                    <h4 className=\"font-semibold mb-4 flex items-center gap-2\">\n                      <Award className=\"h-5 w-5 text-blue-600\" />\n                      Specializzazioni:\n                    </h4>\n                    <ul className=\"space-y-2 mb-6\">\n                      {selectedGuide.specialties.map((specialty, index) => (\n                        <li key={index} className=\"flex items-center gap-2\">\n                          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                          <span>{specialty}</span>\n                        </li>\n                      ))}\n                    </ul>\n\n                    <h4 className=\"font-semibold mb-4 flex items-center gap-2\">\n                      <Languages className=\"h-5 w-5 text-blue-600\" />\n                      Lingue Parlate:\n                    </h4>\n                    <div className=\"flex flex-wrap gap-2 mb-6\">\n                      {selectedGuide.languages.map((lang, index) => (\n                        <Badge\n                          key={index}\n                          variant=\"outline\"\n                          className=\"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-orange-500 to-red-500 text-white dark:bg-orange-900/40 dark:text-orange-200 shadow-sm transition-colors\"\n                        >\n                          {lang}\n                        </Badge>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg\">\n                      <h4 className=\"font-semibold mb-4\">Certificazioni:</h4>\n                      <ul className=\"space-y-2 text-sm\">\n                        {selectedGuide.certifications.map((cert, index) => (\n                          <li key={index} className=\"flex items-center gap-2\">\n                            <Award className=\"h-4 w-4 text-blue-600\" />\n                            <span>{cert}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n\n                    <div className=\"bg-gray-50 dark:bg-gray-800 p-6 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <span className=\"font-semibold\">Tariffa giornaliera:</span>\n                        <span className=\"text-2xl font-bold text-blue-600\">‚Ç¨{selectedGuide.price}</span>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground mb-4\">\n                        Include: Guida per 8 ore, trasporti locali, assistenza completa\n                      </p>\n                      <Button className=\"w-full bg-blue-600 hover:bg-blue-700\">\n                        Prenota {selectedGuide.name}\n                        <ArrowRight className=\"ml-2 h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </section>\n\n        <section className=\"py-20 bg-muted/50\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Tipi di Tour Disponibili</h2>\n              <p className=\"text-lg text-muted-foreground\">Scegli l'esperienza che fa per te</p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n              {tourTypes.map((tour) => {\n                const IconComponent = tour.icon\n                return (\n                  <Card key={tour.id} className=\"hover:shadow-lg transition-shadow bg-card\">\n                    <CardHeader className=\"text-center\">\n                      <div className=\"w-16 h-16 mx-auto mb-4 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center\">\n                        <IconComponent className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <CardTitle className=\"text-xl text-card-foreground\">{tour.name}</CardTitle>\n                      <CardDescription>{tour.description}</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-center mb-4\">\n                        <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1\">{tour.price}</div>\n                        <div className=\"text-sm text-muted-foreground\">Durata: {tour.duration}</div>\n                      </div>\n\n                      <ul className=\"space-y-2 text-sm mb-6\">\n                        {tour.features.map((feature, index) => (\n                          <li key={index} className=\"flex items-center gap-2\">\n                            <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                            <span className=\"text-muted-foreground\">{feature}</span>\n                          </li>\n                        ))}\n                      </ul>\n\n                      <Button variant=\"outline\" className=\"w-full bg-transparent\">\n                        Scopri di Pi√π\n                      </Button>\n                    </CardContent>\n                  </Card>\n                )\n              })}\n            </div>\n          </div>\n        </section>\n\n        {/* Testimonials */}\n        <section className=\"py-20\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Esperienze dei Nostri Clienti</h2>\n              <p className=\"text-lg text-muted-foreground\">Recensioni autentiche sui nostre servizi di guida</p>\n            </div>\n\n            <div className=\"grid md:grid-cols-3 gap-8\">\n              {testimonials.map((testimonial, index) => (\n                <Card key={index} className=\"hover:shadow-lg transition-shadow\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center gap-1 mb-4\">\n                      {[...Array(testimonial.rating)].map((_, i) => (\n                        <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                      ))}\n                    </div>\n\n                    <p className=\"text-muted-foreground mb-4 italic\">\"{testimonial.comment}\"</p>\n\n                    <div className=\"border-t pt-4\">\n                      <p className=\"font-medium text-foreground\">{testimonial.name}</p>\n                      <p className=\"text-sm text-muted-foreground\">{testimonial.location}</p>\n                      <p className=\"text-sm text-blue-600\">Guida: {testimonial.guide}</p>\n                      <p className=\"text-xs text-muted-foreground mt-1\">{testimonial.date}</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        {/* CTA Section */}\n        <section className=\"py-20 bg-gradient-to-r from-blue-600 to-indigo-600\">\n          <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">Prenota la Tua Guida Privata</h2>\n            <p className=\"text-xl text-blue-100 mb-8\">\n              Esperienze personalizzate ‚Ä¢ Guide certificate ‚Ä¢ Disponibilit√† immediata\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Button size=\"lg\" variant=\"secondary\" className=\"bg-white text-blue-600 hover:bg-blue-50\">\n                <Phone className=\"mr-2 h-5 w-5\" />\n                Chiama: +212 123 456 789\n              </Button>\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-white text-white hover:bg-white hover:text-blue-600 bg-transparent\"\n              >\n                <MessageCircle className=\"mr-2 h-5 w-5\" />\n                Richiedi Preventivo\n              </Button>\n            </div>\n          </div>\n        </section>\n      </div>\n    </>\n  )\n}\n","size_bytes":20510},"app/terms/page.tsx":{"content":"import ContactBanner from \"@/components/cta/contact-banner\"\nimport { FileText, AlertTriangle, CreditCard, Shield } from 'lucide-react'\n\nexport default function TermsPage() {\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n      <ContactBanner \n        title=\"Domande sui termini di servizio?\" \n        subtitle=\"Contattaci per chiarimenti sui nostri termini e condizioni.\" \n      />\n      \n      <div className=\"py-16 lg:py-24\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <header className=\"text-center mb-12\">\n            <div className=\"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <FileText className=\"w-8 h-8 text-purple-600 dark:text-purple-400\" />\n            </div>\n            <h1 className=\"text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-4\">\n              Termini di Servizio\n            </h1>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\n              I presenti termini regolano l'uso del sito web e i servizi di viaggio offerti da Morocco Dreams.\n            </p>\n            <div className=\"text-sm text-gray-500 dark:text-gray-400 mt-4\">\n              Ultimo aggiornamento: 15 gennaio 2024\n            </div>\n          </header>\n\n          <div className=\"space-y-12\">\n            {/* General Terms */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Termini generali</h2>\n              <div className=\"space-y-4 text-gray-600 dark:text-gray-300\">\n                <p>\n                  Utilizzando il sito web moroccodreams.it e i nostri servizi, accetti automaticamente \n                  i presenti termini e condizioni. Se non sei d'accordo con questi termini, \n                  ti preghiamo di non utilizzare i nostri servizi.\n                </p>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Chi siamo</h3>\n                    <p className=\"text-sm\">\n                      Morocco Dreams √® un tour operator specializzato in viaggi autentici in Marocco, \n                      con sede operativa in Italia e partner locali certificati.\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-2\">I nostri servizi</h3>\n                    <p className=\"text-sm\">\n                      Organizziamo viaggi su misura, tour di gruppo, esperienze culturali e \n                      servizi di assistenza turistica in Marocco.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Bookings and Payments */}\n            <section>\n              <div className=\"flex items-center gap-3 mb-6\">\n                <CreditCard className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Prenotazioni e pagamenti</h2>\n              </div>\n              <div className=\"space-y-6\">\n                <div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n                  <h3 className=\"text-lg font-bold text-green-800 dark:text-green-300 mb-4\">Processo di prenotazione</h3>\n                  <div className=\"space-y-3 text-green-700 dark:text-green-400\">\n                    <div className=\"flex gap-3\">\n                      <span className=\"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">1</span>\n                      <p className=\"text-sm\">Richiesta preventivo gratuito tramite form o WhatsApp</p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                      <span className=\"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">2</span>\n                      <p className=\"text-sm\">Invio proposta personalizzata entro 24-48 ore</p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                      <span className=\"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">3</span>\n                      <p className=\"text-sm\">Conferma prenotazione con acconto del 30%</p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                      <span className=\"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">4</span>\n                      <p className=\"text-sm\">Saldo finale 30 giorni prima della partenza</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Modalit√† di pagamento</h4>\n                    <ul className=\"text-sm text-gray-600 dark:text-gray-300 space-y-2\">\n                      <li>‚Ä¢ Bonifico bancario (preferito)</li>\n                      <li>‚Ä¢ Carta di credito/debito</li>\n                      <li>‚Ä¢ PayPal per importi fino a ‚Ç¨1.000</li>\n                      <li>‚Ä¢ Contanti solo per servizi locali</li>\n                    </ul>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h4 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Cosa include il prezzo</h4>\n                    <ul className=\"text-sm text-gray-600 dark:text-gray-300 space-y-2\">\n                      <li>‚Ä¢ Alloggi selezionati</li>\n                      <li>‚Ä¢ Trasporti privati in Marocco</li>\n                      <li>‚Ä¢ Guide locali certificate</li>\n                      <li>‚Ä¢ Assistenza 24/7 durante il viaggio</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Cancellations */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <AlertTriangle className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Modifiche e cancellazioni</h2>\n              </div>\n              <div className=\"space-y-6\">\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Modifiche al viaggio</h3>\n                    <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-300\">\n                      <p><strong>Fino a 30 giorni:</strong> Modifiche gratuite</p>\n                      <p><strong>15-29 giorni:</strong> Penale 10% del totale</p>\n                      <p><strong>7-14 giorni:</strong> Penale 25% del totale</p>\n                      <p><strong>Meno di 7 giorni:</strong> Modifiche soggette a disponibilit√†</p>\n                    </div>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Cancellazioni</h3>\n                    <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-300\">\n                      <p><strong>Oltre 45 giorni:</strong> Rimborso 90%</p>\n                      <p><strong>30-44 giorni:</strong> Rimborso 75%</p>\n                      <p><strong>15-29 giorni:</strong> Rimborso 50%</p>\n                      <p><strong>Meno di 15 giorni:</strong> Nessun rimborso</p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800\">\n                  <h4 className=\"font-semibold text-orange-800 dark:text-orange-300 mb-2\">üí° Consiglio</h4>\n                  <p className=\"text-sm text-orange-700 dark:text-orange-400\">\n                    Ti consigliamo vivamente di sottoscrivere un'assicurazione di viaggio che copra \n                    cancellazioni per motivi di salute, lavoro o altre emergenze impreviste.\n                  </p>\n                </div>\n              </div>\n            </section>\n\n            {/* Responsibilities */}\n            <section>\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Shield className=\"w-6 h-6 text-purple-600 dark:text-purple-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Responsabilit√† e limitazioni</h2>\n              </div>\n              <div className=\"space-y-6\">\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800\">\n                    <h3 className=\"font-semibold text-purple-800 dark:text-purple-300 mb-3\">Le nostre responsabilit√†</h3>\n                    <ul className=\"text-sm text-purple-700 dark:text-purple-400 space-y-2\">\n                      <li>‚Ä¢ Organizzazione professionale del viaggio</li>\n                      <li>‚Ä¢ Selezione di partner locali affidabili</li>\n                      <li>‚Ä¢ Assistenza durante tutto il soggiorno</li>\n                      <li>‚Ä¢ Rispetto degli standard di qualit√† promessi</li>\n                    </ul>\n                  </div>\n                  <div className=\"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800\">\n                    <h3 className=\"font-semibold text-orange-800 dark:text-orange-300 mb-3\">Limitazioni</h3>\n                    <ul className=\"text-sm text-orange-700 dark:text-orange-400 space-y-2\">\n                      <li>‚Ä¢ Eventi di forza maggiore (meteo, scioperi)</li>\n                      <li>‚Ä¢ Modifiche imposte da autorit√† locali</li>\n                      <li>‚Ä¢ Comportamenti inappropriati dei viaggiatori</li>\n                      <li>‚Ä¢ Danni a propriet√† di terzi</li>\n                    </ul>\n                  </div>\n                </div>\n\n                <div className=\"p-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800\">\n                  <h3 className=\"text-lg font-bold text-yellow-800 dark:text-yellow-300 mb-4\">Forza maggiore</h3>\n                  <p className=\"text-yellow-700 dark:text-yellow-400 text-sm mb-4\">\n                    Non siamo responsabili per ritardi, modifiche o cancellazioni causati da eventi \n                    al di fuori del nostro controllo, inclusi ma non limitati a:\n                  </p>\n                  <div className=\"grid sm:grid-cols-2 gap-4 text-sm text-yellow-700 dark:text-yellow-400\">\n                    <ul className=\"space-y-1\">\n                      <li>‚Ä¢ Condizioni meteorologiche estreme</li>\n                      <li>‚Ä¢ Scioperi e manifestazioni</li>\n                      <li>‚Ä¢ Emergenze sanitarie</li>\n                    </ul>\n                    <ul className=\"space-y-1\">\n                      <li>‚Ä¢ Chiusure governative</li>\n                      <li>‚Ä¢ Disastri naturali</li>\n                      <li>‚Ä¢ Problemi di sicurezza nazionale</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Travel Requirements */}\n            <section className=\"bg-gray-50 dark:bg-gray-900 rounded-2xl p-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Requisiti di viaggio</h2>\n              <div className=\"space-y-4 text-gray-600 dark:text-gray-300\">\n                <p>\n                  √à responsabilit√† del viaggiatore assicurarsi di avere tutti i documenti necessari \n                  e di rispettare i requisiti sanitari del paese di destinazione.\n                </p>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Documenti richiesti</h3>\n                    <ul className=\"text-sm space-y-2\">\n                      <li>‚Ä¢ Passaporto valido (min. 6 mesi)</li>\n                      <li>‚Ä¢ Visto (se richiesto per la nazionalit√†)</li>\n                      <li>‚Ä¢ Certificati sanitari (se applicabili)</li>\n                      <li>‚Ä¢ Assicurazione di viaggio (consigliata)</li>\n                    </ul>\n                  </div>\n                  <div className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-3\">Comportamento</h3>\n                    <ul className=\"text-sm space-y-2\">\n                      <li>‚Ä¢ Rispetto delle leggi locali</li>\n                      <li>‚Ä¢ Comportamento rispettoso verso la cultura</li>\n                      <li>‚Ä¢ Seguire le indicazioni delle guide</li>\n                      <li>‚Ä¢ Rispetto degli altri viaggiatori</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Disputes */}\n            <section>\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">Risoluzione delle controversie</h2>\n              <div className=\"space-y-4 text-gray-600 dark:text-gray-300\">\n                <p>\n                  In caso di problemi o controversie, ci impegniamo a risolverli in modo amichevole \n                  e professionale attraverso il dialogo diretto.\n                </p>\n                <div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border border-orange-200 dark:border-orange-800\">\n                  <h3 className=\"text-lg font-bold text-orange-800 dark:text-orange-300 mb-4\">Procedura di reclamo</h3>\n                  <div className=\"space-y-3 text-orange-700 dark:text-orange-400\">\n                    <div className=\"flex gap-3\">\n                      <span className=\"w-6 h-6 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">1</span>\n                      <p className=\"text-sm\">Contatta immediatamente la nostra assistenza durante il viaggio</p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                      <span className=\"w-6 h-6 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">2</span>\n                      <p className=\"text-sm\">Invia reclamo scritto entro 10 giorni dal rientro</p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                      <span className=\"w-6 h-6 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">3</span>\n                      <p className=\"text-sm\">Riceverai risposta entro 30 giorni lavorativi</p>\n                    </div>\n                  </div>\n                </div>\n                <p className=\"text-sm\">\n                  Per controversie non risolte amichevolmente, √® competente il Foro di Milano. \n                  Si applica la legge italiana per tutti i contratti.\n                </p>\n              </div>\n            </section>\n\n            {/* Contact */}\n            <section className=\"text-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Contatti</h2>\n              <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\n                Per domande sui termini di servizio o chiarimenti contrattuali:\n              </p>\n              <div className=\"space-y-2\">\n                <p className=\"text-gray-900 dark:text-white font-semibold\">Morocco Dreams</p>\n                <p className=\"text-gray-600 dark:text-gray-300\">Email: info@moroccodreams.it</p>\n                <p className=\"text-gray-600 dark:text-gray-300\">Telefono: +39 329 233 3370</p>\n                <p className=\"text-gray-600 dark:text-gray-300\">WhatsApp: +39 329 233 3370</p>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":16947},"lib/google-auth.ts":{"content":"// Google OAuth Client-side Authentication\nimport { signInWithPopup, signOut, onAuthStateChanged } from 'firebase/auth'\nimport { auth, googleProvider } from '@/lib/firebase'\n\n// Configure Google OAuth\ngoogleProvider.setCustomParameters({\n  prompt: 'select_account'\n})\n\nexport class GoogleAuthService {\n  \n  // Sign in with Google popup\n  static async signInWithGoogle(): Promise<{ user: any; idToken: string }> {\n    try {\n      const result = await signInWithPopup(auth, googleProvider)\n      const user = result.user\n      const idToken = await user.getIdToken()\n      \n      return {\n        user: {\n          uid: user.uid,\n          email: user.email,\n          displayName: user.displayName,\n          photoURL: user.photoURL\n        },\n        idToken\n      }\n    } catch (error: any) {\n      console.error('Google sign-in error:', error)\n      \n      if (error.code === 'auth/popup-closed-by-user') {\n        throw new Error('Login annullato dall\\'utente')\n      } else if (error.code === 'auth/popup-blocked') {\n        throw new Error('Popup bloccato dal browser')\n      } else {\n        throw new Error('Errore durante il login con Google')\n      }\n    }\n  }\n  \n  // Sign out\n  static async signOut(): Promise<void> {\n    try {\n      await signOut(auth)\n    } catch (error) {\n      console.error('Sign out error:', error)\n      throw new Error('Errore durante il logout')\n    }\n  }\n  \n  // Get current user ID token\n  static async getCurrentUserToken(): Promise<string | null> {\n    const user = auth.currentUser\n    if (!user) return null\n    \n    try {\n      return await user.getIdToken()\n    } catch (error) {\n      console.error('Error getting user token:', error)\n      return null\n    }\n  }\n  \n  // Listen to auth state changes\n  static onAuthStateChanged(callback: (user: any) => void): () => void {\n    return onAuthStateChanged(auth, callback)\n  }\n  \n  // Verify admin access via API\n  static async verifyAdminAccess(idToken: string): Promise<{ isAdmin: boolean; user: any }> {\n    try {\n      const response = await fetch('/api/admin/auth/google', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ idToken })\n      })\n      \n      const data = await response.json()\n      \n      if (!response.ok) {\n        throw new Error(data.error || 'Verification failed')\n      }\n      \n      return {\n        isAdmin: data.isAdmin,\n        user: data.user\n      }\n    } catch (error) {\n      console.error('Admin verification error:', error)\n      throw error\n    }\n  }\n}","size_bytes":2564},"app/blog/[slug]/page.tsx":{"content":"import { notFound } from \"next/navigation\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport { BlogPost } from \"@/lib/firestore-schema\"\nimport Link from \"next/link\"\nimport { ArrowLeft, Share2, Bookmark } from 'lucide-react'\nimport BlogPostHeader from './BlogPostHeader'\n\nexport default async function BlogPostPage({ params }: { params: { slug: string } }) {\n  // Use public API for database-driven content with publication system\n  // Direct API call in server component to avoid SSR fetch issues\n  const baseUrl = process.env.VERCEL_URL ? `https://${process.env.VERCEL_URL}` : 'http://localhost:5000';\n  const response = await fetch(`${baseUrl}/api/public/content?collection=blogPosts&slug=${params.slug}`, { cache: 'no-store' })\n  \n  if (!response.ok) {\n    return notFound()\n  }\n  \n  const post = await response.json() as BlogPost\n\n  return (\n    <article className=\"min-h-screen bg-white dark:bg-gray-950\">\n      <ContactBanner \n        title=\"Hai bisogno di aiuto per organizzare il viaggio?\" \n        subtitle=\"Contattaci: rispondiamo entro 24 ore con consigli personalizzati.\" \n      />\n\n      {/* Hero Image with Wishlist */}\n      <BlogPostHeader post={post} />\n\n      {/* Article Content */}\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 lg:py-14\">\n        {/* Back Button */}\n        <div className=\"mb-8\">\n          <Link \n            href=\"/blog\" \n            className=\"inline-flex items-center gap-2 text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 font-medium\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            Torna al blog\n          </Link>\n        </div>\n\n        {/* Article Meta */}\n        <div className=\"mb-8 pb-8 border-b border-gray-200 dark:border-gray-800\">\n          <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300 mb-6 leading-relaxed\">\n            {post.excerpt}\n          </p>\n          \n          <div className=\"flex flex-wrap items-center justify-between gap-4\">\n            <div className=\"flex flex-wrap gap-2\">\n              {(post.tags || []).map((tag) => (\n                <span \n                  key={tag} \n                  className=\"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-sm font-medium\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              <button className=\"p-2 text-gray-400 hover:text-orange-600 transition-colors\">\n                <Bookmark className=\"w-5 h-5\" />\n              </button>\n              <button className=\"p-2 text-gray-400 hover:text-orange-600 transition-colors\">\n                <Share2 className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Article Sections */}\n        <div className=\"prose prose-lg dark:prose-invert max-w-none\">\n          {post.sections.map((section, index) => (\n            <section key={index} className=\"mb-10\">\n              <h2 className=\"text-2xl lg:text-3xl font-bold mb-4 text-gray-900 dark:text-white\">\n                {section.heading}\n              </h2>\n              <p className=\"text-gray-700 dark:text-gray-300 leading-relaxed mb-6\">\n                {section.body}\n              </p>\n              {section.image && (\n                <div className=\"my-8\">\n                  <img \n                    src={section.image || \"/placeholder.svg?height=400&width=600\"} \n                    alt={section.heading} \n                    className=\"w-full rounded-2xl border border-gray-200/60 dark:border-gray-800 shadow-lg\" \n                  />\n                </div>\n              )}\n            </section>\n          ))}\n        </div>\n\n        {/* CTA Section */}\n        <div className=\"mt-12 p-8 bg-gradient-to-r from-orange-50 to-red-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl border border-orange-200/60 dark:border-gray-800\">\n          <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\n            Pronto per il tuo viaggio in Marocco?\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\n            Dopo aver letto questa guida, √® il momento di trasformare i tuoi sogni in realt√†. \n            Contattaci per un itinerario personalizzato basato sui tuoi interessi.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <Link\n              href=\"/contatti\"\n              className=\"inline-flex justify-center items-center px-6 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-300\"\n            >\n              Contattaci per un itinerario su misura\n            </Link>\n            <a\n              href=\"https://wa.me/393292333370?text=Ciao! Ho letto il vostro articolo e vorrei informazioni sui viaggi in Marocco.\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"inline-flex justify-center items-center px-6 py-3 rounded-xl border-2 border-orange-500 text-orange-500 font-semibold hover:bg-orange-500 hover:text-white transition-all duration-300\"\n            >\n              Scrivici su WhatsApp\n            </a>\n          </div>\n        </div>\n\n        {/* Related Articles - Database-driven */}\n        <div className=\"mt-16\">\n          <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-8\">Altri articoli che potrebbero interessarti</h3>\n          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n            <p>Articoli correlati saranno mostrati quando il contenuto del blog sar√† popolato nel database.</p>\n          </div>\n        </div>\n      </div>\n    </article>\n  )\n}\n","size_bytes":5810},"components/dashboard/UserWishlist.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Heart, Search, Filter, MapPin, Star, Euro, Calendar, Trash2, Car } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { firestoreService } from '@/lib/firestore';\nimport { WishlistItem as AuthWishlistItem } from '@/lib/auth';\n\ninterface DisplayWishlistItem {\n  id: string;\n  type: 'vehicle' | 'experience' | 'travel' | 'city' | 'activity';\n  title: string;\n  description?: string;\n  price?: number;\n  image?: string;\n  location?: string;\n  rating?: number;\n  addedAt: Date;\n}\n\nconst typeLabels = {\n  vehicle: 'Veicolo',\n  experience: 'Esperienza',\n  travel: 'Viaggio',\n  city: 'Citt√†',\n  activity: 'Attivit√†'\n};\n\nconst typeColors = {\n  vehicle: 'bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20',\n  experience: 'bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20',\n  travel: 'bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-500/20',\n  city: 'bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-500/20',\n  activity: 'bg-pink-500/10 text-pink-600 dark:text-pink-400 border-pink-500/20'\n};\n\nexport default function UserWishlist() {\n  const { user, userProfile } = useAuth();\n  const [wishlistItems, setWishlistItems] = useState<DisplayWishlistItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterType, setFilterType] = useState<string>('all');\n\n  useEffect(() => {\n    const loadWishlist = async () => {\n      if (!user) {\n        setLoading(false);\n        return;\n      }\n\n      const wishlistItemsData = userProfile?.profile?.wishlistItems || [];\n      \n      if (wishlistItemsData.length === 0) {\n        setLoading(false);\n        return;\n      }\n      \n      try {\n        const displayItems: DisplayWishlistItem[] = wishlistItemsData.map((item: AuthWishlistItem) => ({\n          id: item.id,\n          type: item.type,\n          title: item.title,\n          description: item.description,\n          price: item.price,\n          image: item.image,\n          location: 'Marocco',\n          rating: 4.5,\n          addedAt: new Date()\n        }));\n        \n        setWishlistItems(displayItems);\n      } catch (err: any) {\n        setError('Errore nel caricamento della lista desideri');\n        console.error('Wishlist loading error:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadWishlist();\n  }, [user, userProfile]);\n\n  const filteredItems = wishlistItems.filter(item => {\n    const matchesSearch = !searchTerm || \n      item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (item.location?.toLowerCase() || '').includes(searchTerm.toLowerCase());\n    \n    const matchesType = filterType === 'all' || item.type === filterType;\n    \n    return matchesSearch && matchesType;\n  });\n\n  const removeFromWishlist = async (itemId: string, itemType: string) => {\n    if (!user || !userProfile) return;\n    \n    try {\n      const updatedWishlistItems = (userProfile.profile.wishlistItems || []).filter(\n        (item: AuthWishlistItem) => !(item.id === itemId && item.type === itemType)\n      );\n      const updatedWishlist = (userProfile.profile.wishlist || []).filter((id: string) => id !== itemId);\n      \n      await firestoreService.update('users', user.uid, {\n        'profile.wishlistItems': updatedWishlistItems,\n        'profile.wishlist': updatedWishlist\n      });\n\n      setWishlistItems(prev => prev.filter(item => !(item.id === itemId && item.type === itemType)));\n    } catch (err) {\n      console.error('Error removing from wishlist:', err);\n      setError('Errore nella rimozione dalla lista desideri');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Lista Desideri</h2>\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[...Array(6)].map((_, i) => (\n            <div key={i} className=\"bg-card rounded-2xl shadow-sm animate-pulse\">\n              <div className=\"h-48 bg-muted rounded-t-2xl\"></div>\n              <div className=\"p-4 space-y-3\">\n                <div className=\"h-4 bg-muted rounded w-3/4\"></div>\n                <div className=\"h-3 bg-muted rounded w-1/2\"></div>\n                <div className=\"h-6 bg-muted rounded w-1/3\"></div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Lista Desideri</h2>\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300\">\n          {error}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-foreground\">Lista Desideri</h2>\n        <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n          <Heart className=\"w-4 h-4\" />\n          <span>{filteredItems.length} di {wishlistItems.length} elementi</span>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <div className=\"bg-card rounded-2xl p-6 shadow-sm border border-border\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          {/* Search */}\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <input\n              type=\"text\"\n              placeholder=\"Cerca per titolo o destinazione...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground\"\n            />\n          </div>\n\n          {/* Type Filter */}\n          <div className=\"relative\">\n            <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <select\n              value={filterType}\n              onChange={(e) => setFilterType(e.target.value)}\n              className=\"pl-10 pr-8 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground\"\n            >\n              <option value=\"all\">Tutti</option>\n              <option value=\"vehicle\">Veicoli</option>\n              <option value=\"experience\">Esperienze</option>\n              <option value=\"travel\">Viaggi</option>\n              <option value=\"city\">Citt√†</option>\n              <option value=\"activity\">Attivit√†</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Wishlist Items */}\n      {filteredItems.length > 0 ? (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredItems.map((item) => (\n            <div\n              key={item.id}\n              className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-border hover:shadow-lg transition-all group\"\n            >\n              <div className=\"relative\">\n                <img\n                  src={item.image}\n                  alt={item.title}\n                  className=\"w-full h-48 object-cover rounded-t-2xl\"\n                />\n                <div className=\"absolute top-3 left-3\">\n                  <span className={`px-2 py-1 text-xs font-medium rounded-full border ${typeColors[item.type]}`}>\n                    {typeLabels[item.type]}\n                  </span>\n                </div>\n                <button\n                  onClick={() => removeFromWishlist(item.id, item.type)}\n                  className=\"absolute top-3 right-3 p-2 bg-white/90 dark:bg-gray-800/90 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-50 dark:hover:bg-red-900/20\"\n                >\n                  <Trash2 className=\"w-4 h-4 text-red-500\" />\n                </button>\n              </div>\n\n              <div className=\"p-4\">\n                <div className=\"flex items-start justify-between mb-2\">\n                  <h3 className=\"font-semibold text-gray-900 dark:text-white text-sm\">\n                    {item.title}\n                  </h3>\n                  <div className=\"flex items-center space-x-1 text-xs text-gray-500\">\n                    <Star className=\"w-3 h-3 fill-yellow-400 text-yellow-400\" />\n                    <span>{item.rating.toFixed(1)}</span>\n                  </div>\n                </div>\n\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2\">\n                  {item.description}\n                </p>\n\n                <div className=\"flex items-center space-x-2 mb-3\">\n                  <MapPin className=\"w-4 h-4 text-gray-400\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-400\">{item.location}</span>\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-1\">\n                    <Euro className=\"w-4 h-4 text-green-600\" />\n                    <span className=\"font-semibold text-gray-900 dark:text-white\">\n                      {item.price}\n                    </span>\n                    <span className=\"text-sm text-gray-500\">/ persona</span>\n                  </div>\n                  <div className=\"text-xs text-gray-400\">\n                    <Calendar className=\"w-3 h-3 inline mr-1\" />\n                    {item.addedAt.toLocaleDateString('it-IT')}\n                  </div>\n                </div>\n\n                <div className=\"mt-4 space-y-2\">\n                  <button className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-4 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all\">\n                    Prenota Ora\n                  </button>\n                  <button className=\"w-full border border-border text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\n                    Vedi Dettagli\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-sm border border-border text-center\">\n          <Heart className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n            {wishlistItems.length === 0 ? 'Lista desideri vuota' : 'Nessun elemento trovato'}\n          </h3>\n          <p className=\"text-gray-500 dark:text-gray-400 mb-4\">\n            {wishlistItems.length === 0 \n              ? 'Inizia ad aggiungere i tuoi viaggi ed esperienze preferiti alla lista desideri!'\n              : 'Prova a cambiare i filtri di ricerca per trovare gli elementi che stai cercando.'\n            }\n          </p>\n          {wishlistItems.length === 0 && (\n            <a\n              href=\"/viaggi\"\n              className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold rounded-lg hover:from-orange-600 hover:to-red-600 transition-all\"\n            >\n              <MapPin className=\"w-5 h-5 mr-2\" />\n              Esplora Viaggi\n            </a>\n          )}\n        </div>\n      )}\n\n      {/* Summary Stats */}\n      {wishlistItems.length > 0 && (\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n          <div className=\"bg-card rounded-2xl p-4 shadow-sm border border-border\">\n            <div className=\"flex flex-col items-center text-center\">\n              <Car className=\"w-8 h-8 text-blue-600 mb-2\" />\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Veicoli</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {wishlistItems.filter(item => item.type === 'vehicle').length}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-2xl p-4 shadow-sm border border-border\">\n            <div className=\"flex flex-col items-center text-center\">\n              <Star className=\"w-8 h-8 text-green-600 mb-2\" />\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Esperienze</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {wishlistItems.filter(item => item.type === 'experience').length}\n              </p>\n            </div>\n          </div>\n          \n          <div className=\"bg-card rounded-2xl p-4 shadow-sm border border-border\">\n            <div className=\"flex flex-col items-center text-center\">\n              <MapPin className=\"w-8 h-8 text-orange-600 mb-2\" />\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Viaggi</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {wishlistItems.filter(item => item.type === 'travel').length}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-2xl p-4 shadow-sm border border-border\">\n            <div className=\"flex flex-col items-center text-center\">\n              <Heart className=\"w-8 h-8 text-pink-600 mb-2\" />\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Totale</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {wishlistItems.length}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-2xl p-4 shadow-sm border border-border\">\n            <div className=\"flex flex-col items-center text-center\">\n              <Euro className=\"w-8 h-8 text-purple-600 mb-2\" />\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Valore</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                ‚Ç¨{wishlistItems.reduce((sum, item) => sum + (item.price || 0), 0).toLocaleString()}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":14309},"app/viaggi/[slug]/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useParams } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { ArrowLeft, Clock, Users, Star, MapPin, Calendar, Check, Heart, Share2 } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { db } from \"@/lib/firebase\"\nimport { collection, query, where, getDocs, doc, getDoc } from \"firebase/firestore\"\nimport { Travel } from \"@/lib/firestore-schema\"\nimport WishlistButton from \"@/components/WishlistButton\"\nimport { BookingForm } from \"@/components/booking/BookingForm\"\n\nexport default function TravelDetailPage() {\n  const params = useParams()\n  const slug = params.slug as string\n  \n  const [travel, setTravel] = useState<Travel | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n  const [bookingOpen, setBookingOpen] = useState(false)\n\n  useEffect(() => {\n    const fetchTravel = async () => {\n      try {\n        setLoading(true)\n        \n        // Try query by slug first\n        let q = query(\n          collection(db, 'travels'),\n          where('slug', '==', slug),\n          where('status', '==', 'published')\n        )\n        \n        let snapshot = await getDocs(q)\n        \n        // If not found by slug, try by document ID (fallback during migration)\n        if (snapshot.empty) {\n          try {\n            const docRef = doc(db, 'travels', slug)\n            const docSnap = await getDoc(docRef)\n            \n            if (docSnap.exists() && docSnap.data()?.status === 'published') {\n              setTravel({ id: docSnap.id, ...docSnap.data() } as Travel)\n              return\n            }\n          } catch (idError) {\n            console.log('Document ID lookup failed:', idError)\n          }\n          \n          setError(\"Viaggio non trovato\")\n          return\n        }\n        \n        const doc = snapshot.docs[0]\n        setTravel({ id: doc.id, ...doc.data() } as Travel)\n        \n      } catch (err) {\n        console.error('Error fetching travel:', err)\n        setError(\"Errore nel caricamento del viaggio\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (slug) {\n      fetchTravel()\n    }\n  }, [slug])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-4xl mx-auto px-4 py-12\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-64 bg-gray-200 dark:bg-gray-700 rounded-xl mb-8\"></div>\n            <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4\"></div>\n            <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-8\"></div>\n            <div className=\"space-y-4\">\n              {[...Array(5)].map((_, i) => (\n                <div key={i} className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !travel) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-foreground mb-4\">Oops!</h1>\n          <p className=\"text-muted-foreground mb-6\">{error || \"Viaggio non trovato\"}</p>\n          <Button asChild>\n            <Link href=\"/viaggi\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Torna ai Viaggi\n            </Link>\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <section className=\"relative h-96 overflow-hidden\">\n        <img\n          src={travel.images?.[0] || \"/images/placeholder-travel.jpg\"}\n          alt={travel.title}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-black/50\" />\n        \n        {/* Wishlist Button - top right */}\n        <div className=\"absolute top-4 right-4 z-20\">\n          <WishlistButton\n            itemId={`travel-${travel.id}`}\n            itemType=\"travel\"\n            itemTitle={travel.title}\n            itemImage={travel.images?.[0]}\n            itemPrice={travel.price || 0}\n            itemDescription={travel.description}\n          />\n        </div>\n        \n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <div className=\"text-center text-white max-w-4xl mx-auto px-4\">\n            <h1 className=\"text-4xl lg:text-5xl font-bold mb-4\">{travel.title}</h1>\n            <p className=\"text-xl text-gray-200 mb-6\">{travel.description}</p>\n            <div className=\"flex flex-wrap justify-center gap-4 text-sm\">\n              <div className=\"flex items-center\">\n                <Clock className=\"w-4 h-4 mr-2\" />\n                {travel.duration}\n              </div>\n              <div className=\"flex items-center\">\n                <Users className=\"w-4 h-4 mr-2\" />\n                Max 12 persone\n              </div>\n              <div className=\"flex items-center\">\n                <Star className=\"w-4 h-4 mr-2 text-yellow-400 fill-current\" />\n                {travel.rating} ({travel.reviews} recensioni)\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <div className=\"max-w-7xl mx-auto px-4 py-12 grid lg:grid-cols-3 gap-8\">\n        {/* Main Content */}\n        <div className=\"lg:col-span-2 space-y-8\">\n          {/* Description */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <h2 className=\"text-2xl font-bold text-foreground mb-4\">Descrizione</h2>\n              <p className=\"text-muted-foreground leading-relaxed\">{travel.description}</p>\n            </CardContent>\n          </Card>\n\n          {/* Highlights */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <h2 className=\"text-2xl font-bold text-foreground mb-4\">Punti Salienti</h2>\n              <div className=\"grid md:grid-cols-2 gap-3\">\n                {travel.highlights?.map((highlight, index) => (\n                  <div key={index} className=\"flex items-center\">\n                    <Check className=\"w-5 h-5 text-green-500 mr-3 flex-shrink-0\" />\n                    <span className=\"text-muted-foreground\">{highlight}</span>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Itinerary */}\n          {travel.itinerary && travel.itinerary.length > 0 && (\n            <Card>\n              <CardContent className=\"p-6\">\n                <h2 className=\"text-2xl font-bold text-foreground mb-6\">Itinerario</h2>\n                <div className=\"space-y-4\">\n                  {travel.itinerary.map((day, index) => (\n                    <div key={index} className=\"flex gap-4\">\n                      <div className=\"flex-shrink-0 w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center text-sm font-bold\">\n                        {day.day}\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-foreground\">{day.title}</h3>\n                        <p className=\"text-muted-foreground text-sm\">{day.description}</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Included/Excluded */}\n          <div className=\"grid md:grid-cols-2 gap-6\">\n            {travel.included && travel.included.length > 0 && (\n              <Card>\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-lg font-bold text-foreground mb-4\">Incluso nel Prezzo</h3>\n                  <ul className=\"space-y-2\">\n                    {travel.included.map((item, index) => (\n                      <li key={index} className=\"flex items-center text-sm\">\n                        <Check className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0\" />\n                        {item}\n                      </li>\n                    ))}\n                  </ul>\n                </CardContent>\n              </Card>\n            )}\n\n            {travel.excluded && travel.excluded.length > 0 && (\n              <Card>\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-lg font-bold text-foreground mb-4\">Non Incluso</h3>\n                  <ul className=\"space-y-2\">\n                    {travel.excluded.map((item, index) => (\n                      <li key={index} className=\"flex items-center text-sm text-muted-foreground\">\n                        <span className=\"w-4 h-4 mr-2 flex-shrink-0\">‚Ä¢</span>\n                        {item}\n                      </li>\n                    ))}\n                  </ul>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Booking Card */}\n          <Card className=\"sticky top-4\">\n            <CardContent className=\"p-6\">\n              <div className=\"text-center mb-6\">\n                <div className=\"flex items-center justify-center gap-2 mb-2\">\n                  <span className=\"text-3xl font-bold text-foreground\">‚Ç¨{travel.price}</span>\n                  {travel.originalPrice && (\n                    <span className=\"text-lg text-muted-foreground line-through\">\n                      ‚Ç¨{travel.originalPrice}\n                    </span>\n                  )}\n                </div>\n                <p className=\"text-sm text-muted-foreground\">per persona</p>\n              </div>\n\n              <div className=\"space-y-4\">\n                <Button \n                  className=\"w-full bg-orange-500 hover:bg-orange-600\" \n                  size=\"lg\"\n                  onClick={() => setBookingOpen(true)}\n                >\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  Prenota Ora\n                </Button>\n                \n                <div className=\"flex gap-2\">\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                    <Heart className=\"w-4 h-4 mr-2\" />\n                    Salva\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                    <Share2 className=\"w-4 h-4 mr-2\" />\n                    Condividi\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"border-t pt-4 mt-6\">\n                <div className=\"flex items-center justify-between text-sm mb-2\">\n                  <span className=\"text-muted-foreground\">Categoria:</span>\n                  <Badge variant=\"secondary\">{travel.category}</Badge>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">Durata:</span>\n                  <span className=\"font-medium\">{travel.duration}</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Contact Card */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <h3 className=\"text-lg font-bold text-foreground mb-4\">Hai domande?</h3>\n              <p className=\"text-muted-foreground text-sm mb-4\">\n                Il nostro team √® sempre disponibile per aiutarti a pianificare il viaggio perfetto.\n              </p>\n              <Button variant=\"outline\" className=\"w-full\" asChild>\n                <Link href=\"/contatti\">\n                  Contattaci\n                </Link>\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      <BookingForm\n        contentItem={{\n          id: travel.id,\n          type: 'travel',\n          title: travel.title,\n          price: travel.price || null,\n          image: travel.images?.[0] || null\n        }}\n        open={bookingOpen}\n        onClose={() => setBookingOpen(false)}\n      />\n    </div>\n  )\n}","size_bytes":12038},"components/modals/BookingModal.tsx":{"content":"\"use client\";\n\nimport { useState } from 'react';\nimport { X } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport BookingForm from '@/components/forms/BookingForm';\n\ninterface BookingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  itemId: string;\n  itemType: 'travel' | 'experience';\n  itemTitle: string;\n  basePrice: number;\n  duration: string;\n}\n\nexport default function BookingModal({\n  isOpen,\n  onClose,\n  itemId,\n  itemType,\n  itemTitle,\n  basePrice,\n  duration\n}: BookingModalProps) {\n  const handleSuccess = () => {\n    // Keep modal open to show success message\n    // User can close manually or it will auto-close after 8 seconds\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 z-40\"\n            onClick={onClose}\n          />\n          \n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: \"spring\", duration: 0.3 }}\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          >\n            <div className=\"bg-background border border-border rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n              {/* Header */}\n              <div className=\"flex items-center justify-between p-6 border-b border-border bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20\">\n                <div>\n                  <h2 className=\"text-2xl font-bold text-foreground\">Prenota ora</h2>\n                  <p className=\"text-muted-foreground\">Compila il form per richiedere la prenotazione</p>\n                </div>\n                <button\n                  onClick={onClose}\n                  className=\"p-2 hover:bg-muted rounded-full transition-colors\"\n                  aria-label=\"Chiudi\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n              \n              {/* Content */}\n              <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\">\n                <BookingForm\n                  itemId={itemId}\n                  itemType={itemType}\n                  itemTitle={itemTitle}\n                  basePrice={basePrice}\n                  duration={duration}\n                  onSuccess={handleSuccess}\n                />\n              </div>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}","size_bytes":2761},"app/esperienze/hammam/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Droplets, Heart, Sparkles, Clock, Star, Thermometer, Leaf } from \"lucide-react\"\nimport Link from \"next/link\"\nimport BookingModal from \"@/components/modals/BookingModal\"\n\nexport default function HammamPage() {\n  const [bookingModal, setBookingModal] = useState<{\n    isOpen: boolean;\n    hammam: any;\n  }>({ isOpen: false, hammam: null });\n\n  const openBookingModal = (hammam: any) => {\n    setBookingModal({ isOpen: true, hammam });\n  };\n\n  const closeBookingModal = () => {\n    setBookingModal({ isOpen: false, hammam: null });\n  };\n  const hammamTypes = [\n    {\n      id: \"tradizionale\",\n      name: \"Hammam Tradizionale\",\n      title: \"Autentica Esperienza Berbera\",\n      description: \"Rituale completo secondo le antiche tradizioni marocchine\",\n      image: \"/images/traditional-hammam.jpg\",\n      duration: \"2-3 ore\",\n      price: \"‚Ç¨45\",\n      includes: [\n        \"Bagno turco\",\n        \"Scrub con sapone nero\",\n        \"Massaggio con guanto\",\n        \"Maschera all'argilla\",\n        \"T√® alla menta\",\n      ],\n      benefits: [\"Purificazione profonda\", \"Esfoliazione naturale\", \"Rilassamento totale\", \"Pelle morbida\"],\n      rating: 4.9,\n      reviews: 234,\n    },\n    {\n      id: \"lusso\",\n      name: \"Hammam di Lusso\",\n      title: \"Spa Experience Premium\",\n      description: \"Trattamento esclusivo in ambiente raffinato con prodotti premium\",\n      image: \"/images/luxury-hammam.jpg\",\n      duration: \"3-4 ore\",\n      price: \"‚Ç¨120\",\n      includes: [\"Hammam privato\", \"Massaggio argan\", \"Trattamenti viso\", \"Prodotti biologici\", \"Refreshment gourmet\"],\n      benefits: [\"Esperienza privata\", \"Prodotti premium\", \"Servizio personalizzato\", \"Ambiente esclusivo\"],\n      rating: 4.8,\n      reviews: 156,\n    },\n    {\n      id: \"coppia\",\n      name: \"Hammam di Coppia\",\n      title: \"Relax Romantico\",\n      description: \"Esperienza intima per due persone in ambiente riservato\",\n      image: \"/images/couple-hammam.jpg\",\n      duration: \"2.5 ore\",\n      price: \"‚Ç¨180\",\n      includes: [\"Hammam privato coppia\", \"Massaggio di coppia\", \"Champagne\", \"Petali di rosa\", \"Atmosfera romantica\"],\n      benefits: [\"Momento intimo\", \"Esperienza condivisa\", \"Atmosfera romantica\", \"Privacy totale\"],\n      rating: 4.9,\n      reviews: 89,\n    },\n  ]\n\n  const ritualSteps = [\n    {\n      step: 1,\n      title: \"Preparazione\",\n      description: \"Accoglienza con t√® alla menta e preparazione del corpo\",\n      icon: Heart,\n      duration: \"15 min\",\n    },\n    {\n      step: 2,\n      title: \"Bagno Turco\",\n      description: \"Rilassamento nel vapore caldo per aprire i pori\",\n      icon: Droplets,\n      duration: \"20 min\",\n    },\n    {\n      step: 3,\n      title: \"Scrub con Sapone Nero\",\n      description: \"Applicazione del sapone nero tradizionale\",\n      icon: Sparkles,\n      duration: \"15 min\",\n    },\n    {\n      step: 4,\n      title: \"Esfoliazione\",\n      description: \"Massaggio vigoroso con guanto per rimuovere le cellule morte\",\n      icon: Thermometer,\n      duration: \"30 min\",\n    },\n    {\n      step: 5,\n      title: \"Risciacquo\",\n      description: \"Pulizia completa con acqua tiepida\",\n      icon: Droplets,\n      duration: \"10 min\",\n    },\n    {\n      step: 6,\n      title: \"Massaggio Finale\",\n      description: \"Massaggio rilassante con olio di argan\",\n      icon: Leaf,\n      duration: \"30 min\",\n    },\n  ]\n\n  const locations = [\n    {\n      id: \"marrakech\",\n      name: \"Marrakech\",\n      venues: [\n        {\n          name: \"Hammam de la Rose\",\n          type: \"Tradizionale\",\n          rating: 4.9,\n          price: \"‚Ç¨45\",\n          image: \"/images/hammam-rose.jpg\",\n        },\n        {\n          name: \"La Mamounia Spa\",\n          type: \"Lusso\",\n          rating: 4.8,\n          price: \"‚Ç¨150\",\n          image: \"/images/mamounia-spa.jpg\",\n        },\n      ],\n    },\n    {\n      id: \"fes\",\n      name: \"Fes\",\n      venues: [\n        {\n          name: \"Hammam Mouassine\",\n          type: \"Autentico\",\n          rating: 4.7,\n          price: \"‚Ç¨35\",\n          image: \"/images/hammam-mouassine.jpg\",\n        },\n        {\n          name: \"Riad Fes Spa\",\n          type: \"Boutique\",\n          rating: 4.6,\n          price: \"‚Ç¨80\",\n          image: \"/images/riad-fes-spa.jpg\",\n        },\n      ],\n    },\n    {\n      id: \"essaouira\",\n      name: \"Essaouira\",\n      venues: [\n        {\n          name: \"Hammam Lalla Mira\",\n          type: \"Vista mare\",\n          rating: 4.8,\n          price: \"‚Ç¨55\",\n          image: \"/images/hammam-lalla-mira.jpg\",\n        },\n      ],\n    },\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-pink-500 to-purple-600 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <img\n            src=\"/images/traditional-hammam.jpg\"\n            alt=\"Hammam Tradizionale\"\n            className=\"w-full h-full object-cover opacity-30\"\n          />\n          <div className=\"absolute inset-0 bg-black/40\" />\n        </div>\n\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6\">\n            Hammam\n            <span className=\"block text-3xl md:text-4xl lg:text-5xl mt-2 bg-gradient-to-r from-pink-300 to-purple-200 bg-clip-text text-transparent\">\n              Tradizionale\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto mb-8\">\n            Purificazione del corpo e dell'anima secondo le antiche tradizioni marocchine\n          </p>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Rituale Autentico</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Prodotti Naturali</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Relax Totale</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Hammam Types */}\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Tipi di Hammam</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n              Scegli l'esperienza perfetta per le tue esigenze di benessere\n            </p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-3 gap-8 lg:gap-12\">\n            {hammamTypes.map((hammam, idx) => (\n              <div\n                key={hammam.id}\n                className=\"group bg-card border border-border rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105\"\n              >\n                <div className=\"relative h-64 lg:h-80 overflow-hidden\">\n                  <img\n                    src={hammam.image || \"/placeholder.svg?height=400&width=600\"}\n                    alt={hammam.name}\n                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n\n                  {/* Price Badge */}\n                  <div className=\"absolute top-4 right-4 bg-background/90 backdrop-blur-sm px-4 py-2 rounded-full border border-border\">\n                    <span className=\"font-bold text-lg text-foreground\">{hammam.price}</span>\n                  </div>\n\n                  {/* Rating */}\n                  <div className=\"absolute top-4 left-4 bg-black/30 backdrop-blur-sm px-3 py-1 rounded-full\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                      <span className=\"text-white text-sm font-semibold\">{hammam.rating}</span>\n                      <span className=\"text-white/70 text-sm\">({hammam.reviews})</span>\n                    </div>\n                  </div>\n\n                  {/* Title Overlay */}\n                  <div className=\"absolute bottom-6 left-6 text-white\">\n                    <h3 className=\"text-2xl lg:text-3xl font-bold mb-2\">{hammam.title}</h3>\n                    <p className=\"text-gray-200 text-sm lg:text-base\">{hammam.description}</p>\n                  </div>\n                </div>\n\n                <div className=\"p-6 lg:p-8\">\n                  {/* Duration */}\n                  <div className=\"flex items-center space-x-2 text-sm text-muted-foreground mb-6\">\n                    <Clock className=\"w-4 h-4 text-pink-500\" />\n                    <span>{hammam.duration}</span>\n                  </div>\n\n                  {/* Includes */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-card-foreground mb-3\">Include:</h4>\n                    <div className=\"space-y-2\">\n                      {hammam.includes.map((item, iidx) => (\n                        <div key={iidx} className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                          <div className=\"w-2 h-2 bg-pink-500 rounded-full\" />\n                          <span>{item}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Benefits */}\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-semibold text-card-foreground mb-3\">Benefici:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {hammam.benefits.map((benefit, bidx) => (\n                        <span\n                          key={bidx}\n                          className=\"bg-gray-800 dark:bg-gray-700 text-pink-300 dark:text-pink-300 px-3 py-1 rounded-full text-xs font-medium border border-gray-600\"\n                        >\n                          {benefit}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3\">\n                    <button\n                      onClick={() => openBookingModal(hammam)}\n                      className=\"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white py-3 px-4 rounded-xl hover:from-pink-600 hover:to-purple-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      Prenota Ora\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Ritual Steps */}\n      <div className=\"py-16 lg:py-24 bg-muted/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Il Rituale del Hammam</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Un viaggio di purificazione in 6 passi tradizionali\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {ritualSteps.map((step, idx) => (\n              <div\n                key={step.step}\n                className=\"bg-card border border-border rounded-2xl p-6 text-center hover:shadow-lg transition-all duration-300 hover:scale-105\"\n              >\n                <div className=\"relative mb-6\">\n                  <div className=\"w-16 h-16 bg-pink-100 dark:bg-pink-900/30 rounded-full flex items-center justify-center mx-auto\">\n                    <step.icon className=\"w-8 h-8 text-pink-600 dark:text-pink-400\" />\n                  </div>\n                  <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm\">\n                    {step.step}\n                  </div>\n                </div>\n                <h3 className=\"text-lg font-bold text-card-foreground mb-3\">{step.title}</h3>\n                <p className=\"text-muted-foreground text-sm mb-4\">{step.description}</p>\n                <div className=\"flex items-center justify-center space-x-2 text-sm text-pink-600 dark:text-pink-400\">\n                  <Clock className=\"w-4 h-4\" />\n                  <span>{step.duration}</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Locations */}\n      <div className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Dove Vivere l'Esperienza</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              I migliori hammam nelle citt√† imperiali del Marocco\n            </p>\n          </div>\n\n          {locations.map((location, idx) => (\n            <div key={location.id} className=\"mb-12 lg:mb-16\">\n              <h3 className=\"text-2xl font-bold text-foreground mb-8 text-center\">{location.name}</h3>\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {location.venues.map((venue, vidx) => (\n                  <div\n                    key={vidx}\n                    className=\"bg-card border border-border rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n                  >\n                    <div className=\"relative h-48 overflow-hidden\">\n                      <img\n                        src={venue.image || \"/placeholder.svg?height=300&width=400\"}\n                        alt={venue.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                      <div className=\"absolute top-4 right-4 bg-background/90 backdrop-blur-sm px-3 py-1 rounded-full border border-border\">\n                        <span className=\"font-bold text-foreground\">{venue.price}</span>\n                      </div>\n                      <div className=\"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm px-3 py-1 rounded-full\">\n                        <span className=\"text-white text-sm\">{venue.type}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"p-6\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <h4 className=\"text-lg font-bold text-card-foreground\">{venue.name}</h4>\n                        <div className=\"flex items-center space-x-1\">\n                          <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                          <span className=\"text-sm font-semibold\">{venue.rating}</span>\n                        </div>\n                      </div>\n\n                      <button\n                        onClick={() => openBookingModal({\n                          id: `${location.id}-${venue.name.toLowerCase().replace(/\\s+/g, '-')}`,\n                          name: `${venue.name} - ${location.name}`,\n                          price: venue.price,\n                          duration: venue.duration || '2-3 ore',\n                          type: venue.type,\n                          rating: venue.rating\n                        })}\n                        className=\"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white py-3 px-4 rounded-xl hover:from-pink-600 hover:to-purple-600 transition-all duration-300 font-semibold text-center block\"\n                      >\n                        Prenota {venue.name}\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Benefits Section */}\n      <div className=\"py-16 lg:py-24 bg-muted/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12 lg:mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Benefici del Hammam</h2>\n            <p className=\"text-lg lg:text-xl text-muted-foreground\">\n              Pi√π di un semplice bagno: un rituale di benessere completo\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {[\n              {\n                icon: Droplets,\n                title: \"Purificazione\",\n                description: \"Eliminazione delle tossine attraverso il vapore e la sudorazione\",\n              },\n              {\n                icon: Sparkles,\n                title: \"Esfoliazione\",\n                description: \"Rimozione delle cellule morte per una pelle morbida e luminosa\",\n              },\n              {\n                icon: Heart,\n                title: \"Rilassamento\",\n                description: \"Riduzione dello stress e tensioni muscolari\",\n              },\n              {\n                icon: Leaf,\n                title: \"Idratazione\",\n                description: \"Nutrimento profondo con oli naturali di argan\",\n              },\n            ].map((benefit, idx) => (\n              <div\n                key={idx}\n                className=\"bg-card border border-border rounded-2xl p-6 text-center hover:shadow-lg transition-all duration-300\"\n              >\n                <div className=\"w-16 h-16 bg-pink-100 dark:bg-pink-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <benefit.icon className=\"w-8 h-8 text-pink-600 dark:text-pink-400\" />\n                </div>\n                <h3 className=\"text-lg font-bold text-card-foreground mb-3\">{benefit.title}</h3>\n                <p className=\"text-muted-foreground text-sm\">{benefit.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-16 lg:py-24 bg-gradient-to-r from-pink-500 to-purple-600\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">Pronto per il Relax Totale?</h2>\n          <p className=\"text-lg lg:text-xl mb-8 max-w-2xl mx-auto\">\n            Concediti un momento di puro benessere con l'autentico hammam marocchino\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <button\n              onClick={() => openBookingModal(hammamTypes[0])} \n              className=\"bg-white text-pink-600 px-8 py-4 rounded-xl hover:bg-gray-100 transition-all duration-300 font-semibold text-lg\"\n            >\n              Prenota Hammam\n            </button>\n            <Link\n              href=\"/contatti\"\n              className=\"border-2 border-white text-white px-8 py-4 rounded-xl hover:bg-white hover:text-pink-600 transition-all duration-300 font-semibold text-lg\"\n            >\n              Informazioni\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      {/* Booking Modal */}\n      {bookingModal.isOpen && bookingModal.hammam && (\n        <BookingModal\n          isOpen={bookingModal.isOpen}\n          onClose={closeBookingModal}\n          itemId={bookingModal.hammam.id}\n          itemType=\"experience\"\n          itemTitle={bookingModal.hammam.name}\n          basePrice={parseInt(bookingModal.hammam.price.replace('‚Ç¨', ''))}\n          duration={bookingModal.hammam.duration}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":19925},"README.md":{"content":"# Morocco dreams website\n\n*Automatically synced with your [v0.dev](https://v0.dev) deployments*\n\n[![Deployed on Vercel](https://img.shields.io/badge/Deployed%20on-Vercel-black?style=for-the-badge&logo=vercel)](https://vercel.com/wearerighello/v0-morocco-dreams-website)\n[![Built with v0](https://img.shields.io/badge/Built%20with-v0.dev-black?style=for-the-badge)](https://v0.dev/chat/projects/sWPHk3pGCCs)\n\n## Overview\n\nThis repository will stay in sync with your deployed chats on [v0.dev](https://v0.dev).\nAny changes you make to your deployed app will be automatically pushed to this repository from [v0.dev](https://v0.dev).\n\n## Deployment\n\nYour project is live at:\n\n**[https://vercel.com/wearerighello/v0-morocco-dreams-website](https://vercel.com/wearerighello/v0-morocco-dreams-website)**\n\n## Build your app\n\nContinue building your app on:\n\n**[https://v0.dev/chat/projects/sWPHk3pGCCs](https://v0.dev/chat/projects/sWPHk3pGCCs)**\n\n## How It Works\n\n1. Create and modify your project using [v0.dev](https://v0.dev)\n2. Deploy your chats from the v0 interface\n3. Changes are automatically pushed to this repository\n4. Vercel deploys the latest version from this repository","size_bytes":1176},"components/auth/withAuth.tsx":{"content":"'use client';\n\nimport { ComponentType } from 'react';\nimport ProtectedRoute from './ProtectedRoute';\n\ninterface WithAuthOptions {\n  requireAdmin?: boolean;\n  redirectTo?: string;\n  loadingComponent?: React.ReactNode;\n}\n\nexport function withAuth<T extends object>(\n  Component: ComponentType<T>,\n  options: WithAuthOptions = {}\n) {\n  const AuthenticatedComponent = (props: T) => {\n    return (\n      <ProtectedRoute {...options}>\n        <Component {...props} />\n      </ProtectedRoute>\n    );\n  };\n\n  AuthenticatedComponent.displayName = `withAuth(${Component.displayName || Component.name})`;\n  \n  return AuthenticatedComponent;\n}\n\n// Specific HOCs for common use cases\nexport const withUserAuth = <T extends object>(Component: ComponentType<T>) =>\n  withAuth(Component, { requireAdmin: false });\n\nexport const withAdminAuth = <T extends object>(Component: ComponentType<T>) =>\n  withAuth(Component, { requireAdmin: true });","size_bytes":925},"app/servizi/guide-private/page.tsx":{"content":"import GuidePrivateClientPage from \"./GuidePrivateClientPage\"\n\nexport const metadata = {\n  title: \"Guide Private Marocco | Guide Locali Esperte | Morocco Dreams\",\n  description:\n    \"Guide private certificate per il Marocco. Esperienze personalizzate con guide locali multilingue. Prenota la tua guida esperta ora!\",\n  keywords: \"guide private marocco, guida turistica marocco, tour personalizzati marocco, guide locali\",\n  openGraph: {\n    title: \"Guide Private Esperte Marocco - Esperienze Autentiche\",\n    description: \"Scopri il Marocco autentico con le nostre guide locali certificate e multilingue.\",\n    type: \"website\",\n    images: [\"/images/guides-hero.jpg\"],\n  },\n  twitter: {\n    card: \"summary_large_image\",\n    title: \"Guide Private Marocco\",\n    description: \"Guide locali esperte per esperienze autentiche\",\n  },\n}\n\nexport default function GuidePrivatePage() {\n  return <GuidePrivateClientPage />\n}\n","size_bytes":914},"app/esperienze/artigianato/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport { Scissors, Palette, Shield, Hand, Users, Clock, Star, Award } from \"lucide-react\"\nimport Link from \"next/link\"\nimport WishlistButton from \"@/components/WishlistButton\"\nimport BookingModal from \"@/components/modals/BookingModal\"\n\nexport default function ArtigianatoPage() {\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  \n  const workshopData = {\n    id: \"artigianato-workshop\",\n    name: \"Laboratorio Artigianato Marocchino\",\n    price: 45,\n    duration: \"2-8 ore\"\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <ContactBanner\n        title=\"Laboratori di Artigianato\"\n        subtitle=\"Ceramica, tessitura, pelle e zellige: impara con maestri artigiani. Prenota ora.\"\n      />\n\n      {/* Hero Image */}\n      <header className=\"relative\">\n        <div className=\"h-[320px] sm:h-[420px] lg:h-[520px] relative overflow-hidden\">\n          {/* Wishlist Button */}\n          <div className=\"absolute top-6 right-6 z-10\">\n            <WishlistButton\n              itemId=\"artigianato-laboratori\"\n              itemType=\"experience\"\n              itemTitle=\"Laboratori di Artigianato\"\n              itemImage=\"/images/moroccan-souk.png\"\n              itemDescription=\"Ceramica, tessitura, pelle e zellige con maestri artigiani\"\n            />\n          </div>\n          <img\n            src=\"/images/moroccan-souk.png\"\n            alt=\"Laboratori di Artigianato in Marocco\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-black/30\" />\n          <div className=\"absolute bottom-8 left-8 text-white\">\n            <h1 className=\"text-3xl lg:text-4xl font-bold mb-2\">Laboratori di Artigianato</h1>\n            <p className=\"text-lg opacity-90\">Il sapere delle mani maestre</p>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <section className=\"py-12 lg:py-16\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            {/* Content */}\n            <div className=\"lg:col-span-2\">\n              <div className=\"prose prose-lg max-w-none\">\n                <h2 className=\"text-2xl lg:text-3xl font-bold mb-4 text-foreground\">\n                  Artigianato marocchino: tradizioni millenarie tra le tue mani\n                </h2>\n                <p className=\"text-muted-foreground text-lg mb-8\">\n                  L'artigianato marocchino √® patrimonio UNESCO e rappresenta secoli di sapienza tramandata di\n                  generazione in generazione. I nostri laboratori ti permettono di incontrare maestri artigiani nelle\n                  loro botteghe autentiche, imparare tecniche antiche e creare con le tue mani oggetti unici. Ogni\n                  esperienza sostiene direttamente le comunit√† locali e preserva tradizioni a rischio di scomparsa.\n                </p>\n\n                {/* Crafts Grid */}\n                <div className=\"grid sm:grid-cols-2 gap-6 mb-10\">\n                  {[\n                    {\n                      icon: Palette,\n                      title: \"Ceramica & Zellige\",\n                      text: \"Dalla lavorazione dell'argilla alla smaltatura, fino ai mosaici geometrici tradizionali\",\n                    },\n                    {\n                      icon: Scissors,\n                      title: \"Tessitura\",\n                      text: \"Tappeti berberi, coperte e tessuti su telai tradizionali con lane naturali\",\n                    },\n                    {\n                      icon: Hand,\n                      title: \"Lavorazione pelle\",\n                      text: \"Tecniche di concia naturale e cuciture artigianali per borse e accessori\",\n                    },\n                    {\n                      icon: Shield,\n                      title: \"Commercio equo\",\n                      text: \"Compensi equi agli artigiani e filiera trasparente per un turismo responsabile\",\n                    },\n                  ].map((craft, i) => (\n                    <div key={i} className=\"p-6 rounded-2xl bg-card border border-border\">\n                      <craft.icon className=\"w-8 h-8 text-amber-600 dark:text-amber-400 mb-4\" />\n                      <h3 className=\"font-bold text-lg mb-2 text-card-foreground\">{craft.title}</h3>\n                      <p className=\"text-muted-foreground text-sm leading-relaxed\">{craft.text}</p>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Workshop Types */}\n                <div className=\"bg-gradient-to-r from-card to-muted rounded-2xl p-6 lg:p-8 mb-10\">\n                  <h3 className=\"text-2xl font-bold mb-6 text-card-foreground\">Laboratori disponibili</h3>\n                  <div className=\"space-y-6\">\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                      <div className=\"p-4 bg-background/50 rounded-xl\">\n                        <h4 className=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\n                          <Palette className=\"w-5 h-5 text-orange-600\" />\n                          Ceramica di Sal√©\n                        </h4>\n                        <p className=\"text-muted-foreground text-sm mb-2\">\n                          Modellazione, decorazione e cottura di ceramiche tradizionali\n                        </p>\n                        <div className=\"text-xs text-muted-foreground/70\">Durata: 3-6 ore | Livello: Principiante</div>\n                      </div>\n                      <div className=\"p-4 bg-background/50 rounded-xl\">\n                        <h4 className=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\n                          <div className=\"w-5 h-5 bg-green-600 rounded-sm\" />\n                          Zellige di Fes\n                        </h4>\n                        <p className=\"text-muted-foreground text-sm mb-2\">\n                          Taglio e posa dei mosaici geometrici pi√π famosi del mondo\n                        </p>\n                        <div className=\"text-xs text-muted-foreground/70\">Durata: 4-8 ore | Livello: Intermedio</div>\n                      </div>\n                    </div>\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                      <div className=\"p-4 bg-background/50 rounded-xl\">\n                        <h4 className=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\n                          <Scissors className=\"w-5 h-5 text-purple-600\" />\n                          Tessitura berbera\n                        </h4>\n                        <p className=\"text-muted-foreground text-sm mb-2\">\n                          Tappeti e tessuti con simboli tradizionali dell'Alto Atlante\n                        </p>\n                        <div className=\"text-xs text-muted-foreground/70\">Durata: 1-3 giorni | Livello: Tutti</div>\n                      </div>\n                      <div className=\"p-4 bg-background/50 rounded-xl\">\n                        <h4 className=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\n                          <Hand className=\"w-5 h-5 text-amber-600\" />\n                          Pelletteria di Marrakech\n                        </h4>\n                        <p className=\"text-muted-foreground text-sm mb-2\">\n                          Borse, cinture e accessori con tecniche di concia naturale\n                        </p>\n                        <div className=\"text-xs text-muted-foreground/70\">Durata: 2-4 ore | Livello: Principiante</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Process */}\n                <div className=\"mb-10\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">Come funziona il laboratorio</h3>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-amber-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        1\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Accoglienza e presentazione</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Incontro con il maestro artigiano, storia della tecnica e visita della bottega\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-amber-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        2\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Dimostrazione pratica</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Il maestro mostra le tecniche base e i segreti tramandati nella famiglia\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-amber-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        3\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Creazione guidata</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Realizzi il tuo oggetto con assistenza costante e consigli personalizzati\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-4\">\n                      <div className=\"w-8 h-8 bg-amber-500 text-white rounded-full flex items-center justify-center font-bold text-sm\">\n                        4\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-foreground\">Finalizzazione e ricordo</h4>\n                        <p className=\"text-muted-foreground text-sm\">\n                          Completamento dell'opera, confezionamento e certificato di autenticit√†\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* What's Included */}\n                <div className=\"mb-10\">\n                  <h3 className=\"text-2xl font-bold mb-4 text-foreground\">Cosa √® incluso</h3>\n                  <div className=\"grid sm:grid-cols-2 gap-4\">\n                    {[\n                      \"Maestro artigiano dedicato\",\n                      \"Tutti i materiali necessari\",\n                      \"Strumenti e attrezzature\",\n                      \"Traduzione quando necessaria\",\n                      \"T√® alla menta e dolci locali\",\n                      \"Certificato di partecipazione\",\n                      \"Confezionamento dell'opera\",\n                      \"Trasferimenti dalla medina\",\n                    ].map((item, idx) => (\n                      <div key={idx} className=\"flex items-center gap-3\">\n                        <div className=\"w-2 h-2 bg-green-500 rounded-full\" />\n                        <span className=\"text-muted-foreground\">{item}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Sustainability */}\n                <div className=\"bg-green-50 dark:bg-green-900/20 rounded-2xl p-6\">\n                  <h3 className=\"text-xl font-bold mb-3 text-foreground flex items-center gap-2\">\n                    <Award className=\"w-6 h-6 text-green-600\" />\n                    Turismo sostenibile e responsabile\n                  </h3>\n                  <p className=\"text-muted-foreground text-sm mb-4\">\n                    I nostri laboratori seguono principi di commercio equo e turismo responsabile:\n                  </p>\n                  <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                    <li>‚Ä¢ 70% del prezzo va direttamente agli artigiani</li>\n                    <li>‚Ä¢ Materiali locali e tecniche tradizionali</li>\n                    <li>‚Ä¢ Supporto alla preservazione delle competenze</li>\n                    <li>‚Ä¢ Piccoli gruppi per non disturbare il lavoro quotidiano</li>\n                    <li>‚Ä¢ Collaborazione con cooperative femminili</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            {/* Sidebar */}\n            <aside className=\"lg:col-span-1\">\n              <div className=\"sticky top-24 space-y-6\">\n                {/* Pricing Card */}\n                <div className=\"p-6 rounded-2xl bg-gradient-to-b from-card to-muted border border-border\">\n                  <div className=\"text-center mb-4\">\n                    <h3 className=\"text-xl font-bold text-card-foreground mb-2\">Prezzo indicativo</h3>\n                    <div className=\"text-3xl font-extrabold text-primary mb-1\">da ‚Ç¨45</div>\n                    <p className=\"text-sm text-muted-foreground\">workshop introduttivo 2-3 ore</p>\n                  </div>\n\n                  <div className=\"space-y-3 mb-6\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Users className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Gruppo: 2-8 persone</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Clock className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Durata: 2-8 ore</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <Shield className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Maestri certificati</span>\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={() => setShowBookingModal(true)}\n                    className=\"block w-full text-center px-6 py-3 rounded-xl bg-gradient-to-r from-primary to-secondary text-primary-foreground font-semibold hover:from-primary/90 hover:to-secondary/90 transition-all duration-300\"\n                  >\n                    Prenota / Richiedi Info\n                  </button>\n\n                  <p className=\"text-xs text-muted-foreground mt-3 text-center\">\n                    Laboratori privati e percorsi multi-giorno disponibili su richiesta.\n                  </p>\n                </div>\n\n                {/* Craft Calendar */}\n                <div className=\"p-6 rounded-2xl bg-card border border-border\">\n                  <h3 className=\"text-lg font-bold text-card-foreground mb-4\">üìÖ Disponibilit√†</h3>\n                  <div className=\"space-y-3 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Ceramica:</span>\n                      <span className=\"font-semibold text-green-600\">Tutti i giorni</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Zellige:</span>\n                      <span className=\"font-semibold text-orange-600\">Lun-Ven</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Tessitura:</span>\n                      <span className=\"font-semibold text-purple-600\">Mar-Sab</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Pelletteria:</span>\n                      <span className=\"font-semibold text-amber-600\">Tutti i giorni</span>\n                    </div>\n                  </div>\n                  <p className=\"text-xs text-muted-foreground/70 mt-3\">Prenotazione consigliata 48h prima</p>\n                </div>\n\n                {/* Reviews */}\n                <div className=\"p-6 rounded-2xl bg-card border border-border\">\n                  <h3 className=\"text-lg font-bold text-card-foreground mb-4\">Recensioni</h3>\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <div className=\"flex\">\n                      {[...Array(5)].map((_, i) => (\n                        <Star key={i} className=\"w-4 h-4 fill-yellow-400 text-yellow-400\" />\n                      ))}\n                    </div>\n                    <span className=\"text-sm text-muted-foreground\">4.8/5 (156 recensioni)</span>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"text-sm\">\n                      <p className=\"text-muted-foreground italic\">\n                        \"Esperienza autentica! Il maestro ceramista era incredibilmente paziente.\"\n                      </p>\n                      <p className=\"text-muted-foreground/70 text-xs mt-1\">- Giulia, Venezia</p>\n                    </div>\n                    <div className=\"text-sm\">\n                      <p className=\"text-muted-foreground italic\">\n                        \"Ho creato un tappeto bellissimo. Ricordo indimenticabile!\"\n                      </p>\n                      <p className=\"text-muted-foreground/70 text-xs mt-1\">- Roberto, Napoli</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </aside>\n          </div>\n        </div>\n      </section>\n\n      {/* Booking Modal */}\n      {showBookingModal && (\n        <BookingModal\n          isOpen={showBookingModal}\n          onClose={() => setShowBookingModal(false)}\n          itemId={workshopData.id}\n          itemType=\"experience\"\n          itemTitle={workshopData.name}\n          basePrice={workshopData.price}\n          duration={workshopData.duration}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":18173},"middleware.ts":{"content":"import { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/request';\n\n// IMPORTANT: This middleware is currently DISABLED due to security concerns.\n// In a production environment, implement proper Firebase session cookie validation.\n// See: https://firebase.google.com/docs/auth/admin/manage-cookies\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n  \n  // For now, just pass through all requests\n  // Client-side protection is handled by ProtectedRoute component\n  return NextResponse.next();\n  \n  /* \n  TODO: Implement secure server-side authentication\n  \n  1. Set up Firebase session cookies:\n     - Create API route to exchange ID token for session cookie\n     - Use httpOnly, secure, sameSite=Lax cookies\n  \n  2. Verify session cookies in middleware:\n     - Use Firebase Admin SDK to verify session cookies\n     - Check user roles/claims for admin routes\n  \n  3. Example implementation:\n     const sessionCookie = request.cookies.get('__session')?.value;\n     if (sessionCookie) {\n       try {\n         const decodedClaims = await auth.verifySessionCookie(sessionCookie);\n         // User is authenticated\n       } catch (error) {\n         // Invalid session\n       }\n     }\n  */\n}\n\n// Configure which routes to run middleware on\nexport const config = {\n  matcher: [\n    // Match all routes except static files and API routes\n    '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',\n  ],\n};","size_bytes":1494},"components/sections/HeroSection.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\n\nexport default function HeroSection() {\n  const [currentStat, setCurrentStat] = useState(0)\n\n  const stats = [\n    { number: \"500+\", label: \"Viaggiatori Soddisfatti\" },\n    { number: \"15+\", label: \"Destinazioni Uniche\" },\n    { number: \"10\", label: \"Anni di Esperienza\" },\n    { number: \"24/7\", label: \"Assistenza Locale\" },\n  ]\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentStat((prev) => (prev + 1) % stats.length)\n    }, 3000)\n    return () => clearInterval(interval)\n  }, [stats.length])\n\n  return (\n    <section\n      className=\"relative min-h-screen flex items-center justify-center overflow-hidden bg-background\"\n      data-slot=\"hero-section\"\n    >\n      {/* Video Background */}\n      <div className=\"absolute inset-0 z-0\">\n        <video autoPlay muted loop playsInline className=\"w-full h-full object-cover\" poster=\"/images/hero-sahara.png\">\n          <source src=\"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/SONY%20ZV-E1%20_%20CINEMATIC%20TRAVEL%20FILM-W9rM8cs9a7erwhqFuKfHDhC6I2Munn.mp4\" type=\"video/mp4\" />\n        </video>\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-black/30\" />\n        <div className=\"absolute inset-0 bg-black/20\" />\n      </div>\n\n      {/* Hero Content */}\n      <div className=\"relative z-10 text-center text-white px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto\">\n        <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight text-balance drop-shadow-2xl\">\n          <span className=\"text-white drop-shadow-2xl\">Scopri la Magia del</span>\n          <span\n            className=\"block font-extrabold drop-shadow-2xl\"\n            style={{\n              background: \"linear-gradient(to right, #f97316, #dc2626, #f97316)\",\n              WebkitBackgroundClip: \"text\",\n              WebkitTextFillColor: \"transparent\",\n              backgroundClip: \"text\",\n              color: \"#f97316\", // Fallback color\n            }}\n          >\n            Marocco Autentico\n          </span>\n        </h1>\n        <p className=\"text-lg md:text-xl lg:text-2xl mb-8 text-white max-w-3xl mx-auto text-pretty leading-relaxed drop-shadow-lg\">\n          Viaggi su misura nel regno delle mille e una notte\n        </p>\n\n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center mb-12\">\n          <Button asChild variant=\"cta\" size=\"default\" className=\"text-sm sm:text-base min-h-[44px] shadow-lg\">\n            <Link href=\"/viaggi/su-misura\">Pianifica il Tuo Viaggio</Link>\n          </Button>\n          <Button\n            asChild\n            size=\"default\"\n            className=\"text-sm sm:text-base min-h-[44px] backdrop-blur-md bg-white/90 border-2 border-white text-black hover:bg-white hover:text-black shadow-lg hover:border-white transition-all duration-300\"\n          >\n            <Link href=\"/viaggi/gruppo\">Scopri le Offerte</Link>\n          </Button>\n        </div>\n\n        {/* Statistics - Mobile Optimized */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-4xl mx-auto\">\n          {stats.map((stat, idx) => (\n            <div\n              key={idx}\n              className={`text-center transition-all duration-500 p-2 ${\n                idx === currentStat ? \"scale-110 opacity-100\" : \"scale-100 opacity-90\"\n              }`}\n            >\n              <div className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-orange-400 mb-2 drop-shadow-lg\">\n                {stat.number}\n              </div>\n              <div className=\"text-xs sm:text-sm text-white leading-tight drop-shadow-md\">{stat.label}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Scroll Indicator */}\n      <div className=\"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce\"></div>\n    </section>\n  )\n}\n","size_bytes":3958},"lib/package-builder.ts":{"content":"// Advanced Package Builder System for Morocco Dreams\nimport { firestoreService } from './firestore';\n\nexport interface PackageComponent {\n  id: string;\n  type: 'accommodation' | 'transport' | 'activity' | 'meal' | 'guide' | 'experience';\n  name: string;\n  description: string;\n  duration: number; // in days or hours\n  price: number;\n  maxPersons: number;\n  location?: string;\n  included: string[];\n  optional: boolean;\n  category: string;\n  images: string[];\n  rating?: number;\n  availability: {\n    seasons: string[];\n    daysOfWeek: number[];\n    timeSlots?: string[];\n  };\n}\n\nexport interface PackageTemplate {\n  id?: string;\n  name: string;\n  description: string;\n  category: 'imperial-cities' | 'desert' | 'coast' | 'mountains' | 'cultural' | 'adventure';\n  duration: number;\n  basePrice: number;\n  components: PackageComponent[];\n  routes: Array<{\n    from: string;\n    to: string;\n    transport: string;\n    duration: string;\n  }>;\n  seasons: string[];\n  difficulty: 1 | 2 | 3 | 4 | 5;\n  groupSize: {\n    min: number;\n    max: number;\n  };\n  highlights: string[];\n  includes: string[];\n  notIncludes: string[];\n  itinerary: Array<{\n    day: number;\n    title: string;\n    description: string;\n    location: string;\n    activities: string[];\n    meals: string[];\n    accommodation?: string;\n  }>;\n  published: boolean;\n  featured: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface CustomPackage {\n  id?: string;\n  userId?: string;\n  templateId?: string;\n  name: string;\n  selectedComponents: Array<{\n    componentId: string;\n    quantity: number;\n    customizations?: Record<string, any>;\n  }>;\n  totalPrice: number;\n  totalDuration: number;\n  personalizations: {\n    budget: 'economy' | 'standard' | 'luxury';\n    interests: string[];\n    specialRequests: string[];\n    groupSize: number;\n  };\n  status: 'draft' | 'requested' | 'confirmed' | 'completed';\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport class PackageBuilderService {\n  // Get all available components\n  static async getComponents(type?: string): Promise<PackageComponent[]> {\n    try {\n      if (type) {\n        return await firestoreService.getWhere<PackageComponent>('package_components', 'type', '==', type);\n      }\n      return await firestoreService.getAll<PackageComponent>('package_components');\n    } catch (error) {\n      console.error('Error fetching components:', error);\n      return [];\n    }\n  }\n\n  // Get package templates\n  static async getTemplates(): Promise<PackageTemplate[]> {\n    try {\n      return await firestoreService.getWhere<PackageTemplate>('package_templates', 'published', '==', true);\n    } catch (error) {\n      console.error('Error fetching templates:', error);\n      return [];\n    }\n  }\n\n  // Create custom package\n  static async createCustomPackage(packageData: Omit<CustomPackage, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {\n    try {\n      return await firestoreService.create('custom_packages', {\n        ...packageData,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error creating custom package:', error);\n      throw error;\n    }\n  }\n\n  // Calculate package price\n  static calculatePackagePrice(components: Array<{ componentId: string; quantity: number }>, componentsList: PackageComponent[]): number {\n    return components.reduce((total, item) => {\n      const component = componentsList.find(c => c.id === item.componentId);\n      return total + (component ? component.price * item.quantity : 0);\n    }, 0);\n  }\n\n  // Validate package compatibility\n  static validatePackageCompatibility(components: PackageComponent[]): { valid: boolean; issues: string[] } {\n    const issues: string[] = [];\n    \n    // Check for accommodation in multi-day packages\n    const totalDuration = components.reduce((sum, c) => sum + c.duration, 0);\n    const hasAccommodation = components.some(c => c.type === 'accommodation');\n    \n    if (totalDuration > 1 && !hasAccommodation) {\n      issues.push('Pacchetto multi-giorno senza alloggio');\n    }\n\n    // Check for transport between locations\n    const locations = components.map(c => c.location).filter(Boolean);\n    const uniqueLocations = [...new Set(locations)];\n    const hasTransport = components.some(c => c.type === 'transport');\n    \n    if (uniqueLocations.length > 1 && !hasTransport) {\n      issues.push('Pi√π destinazioni senza trasporto');\n    }\n\n    // Check for guide in complex packages\n    const hasActivities = components.filter(c => c.type === 'activity').length > 2;\n    const hasGuide = components.some(c => c.type === 'guide');\n    \n    if (hasActivities && !hasGuide) {\n      issues.push('Molte attivit√† senza guida - consigliabile aggiungerne una');\n    }\n\n    return {\n      valid: issues.length === 0,\n      issues\n    };\n  }\n\n  // Generate itinerary from components\n  static generateItinerary(components: PackageComponent[]): Array<{\n    day: number;\n    title: string;\n    description: string;\n    location: string;\n    activities: string[];\n    meals: string[];\n    accommodation?: string;\n  }> {\n    const sortedComponents = components.sort((a, b) => a.duration - b.duration);\n    const itinerary: Array<any> = [];\n    let currentDay = 1;\n\n    // Group components by location and day\n    const accommodations = components.filter(c => c.type === 'accommodation');\n    const activities = components.filter(c => c.type === 'activity');\n    const meals = components.filter(c => c.type === 'meal');\n\n    // Calculate total days\n    const totalDays = Math.max(1, accommodations.reduce((sum, acc) => sum + acc.duration, 0) + 1);\n\n    for (let day = 1; day <= totalDays; day++) {\n      const dayAccommodation = accommodations.find(acc => \n        day >= currentDay && day < currentDay + acc.duration\n      );\n\n      const dayActivities = activities.filter(act => \n        // Simple logic: distribute activities across days\n        Math.ceil(activities.indexOf(act) / activities.length * totalDays) === day\n      );\n\n      const dayMeals = meals.filter(meal =>\n        Math.ceil(meals.indexOf(meal) / meals.length * totalDays) === day\n      );\n\n      itinerary.push({\n        day,\n        title: `Giorno ${day}${dayActivities.length > 0 ? ` - ${dayActivities[0].location || 'Esperienza'}` : ''}`,\n        description: dayActivities.map(act => act.description).join('. ') || 'Giornata libera',\n        location: dayActivities[0]?.location || dayAccommodation?.location || '',\n        activities: dayActivities.map(act => act.name),\n        meals: dayMeals.map(meal => meal.name),\n        accommodation: dayAccommodation?.name\n      });\n    }\n\n    return itinerary;\n  }\n\n  // Get user's custom packages\n  static async getUserPackages(userId: string): Promise<CustomPackage[]> {\n    try {\n      return await firestoreService.getWhere<CustomPackage>('custom_packages', 'userId', '==', userId);\n    } catch (error) {\n      console.error('Error fetching user packages:', error);\n      return [];\n    }\n  }\n\n  // Update custom package\n  static async updateCustomPackage(packageId: string, updates: Partial<CustomPackage>): Promise<void> {\n    try {\n      await firestoreService.update('custom_packages', packageId, {\n        ...updates,\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error updating custom package:', error);\n      throw error;\n    }\n  }\n\n  // Create sample components\n  static async createSampleComponents(): Promise<void> {\n    const sampleComponents: Omit<PackageComponent, 'id'>[] = [\n      {\n        type: 'accommodation',\n        name: 'Riad Tradizionale Marrakech',\n        description: 'Autentico riad nel cuore della medina con patio interno e terrazza panoramica',\n        duration: 3,\n        price: 85,\n        maxPersons: 2,\n        location: 'Marrakech',\n        included: ['Colazione', 'WiFi', 'Hammam tradizionale'],\n        optional: false,\n        category: 'standard',\n        images: ['/images/riad-marrakech.png'],\n        rating: 4.6,\n        availability: {\n          seasons: ['primavera', 'autunno', 'inverno'],\n          daysOfWeek: [1, 2, 3, 4, 5, 6, 7]\n        }\n      },\n      {\n        type: 'activity',\n        name: 'Tour Guidato della Medina',\n        description: 'Esplorazione dei souq e monumenti storici con guida esperta locale',\n        duration: 4,\n        price: 45,\n        maxPersons: 8,\n        location: 'Marrakech',\n        included: ['Guida certificata', 'Ingresso monumenti', 'T√® alla menta'],\n        optional: false,\n        category: 'culturale',\n        images: ['/images/medina-tour.png'],\n        rating: 4.8,\n        availability: {\n          seasons: ['tutto-anno'],\n          daysOfWeek: [1, 2, 3, 4, 5, 6, 7],\n          timeSlots: ['09:00', '14:00']\n        }\n      },\n      {\n        type: 'experience',\n        name: 'Notte nel Deserto del Sahara',\n        description: 'Campo tendato tradizionale con cena berbera e musica sotto le stelle',\n        duration: 1,\n        price: 180,\n        maxPersons: 12,\n        location: 'Merzouga',\n        included: ['Escursione cammelli', 'Cena e colazione', 'Musica tradizionale'],\n        optional: false,\n        category: 'avventura',\n        images: ['/images/desert-camp.png'],\n        rating: 4.9,\n        availability: {\n          seasons: ['primavera', 'autunno', 'inverno'],\n          daysOfWeek: [1, 2, 3, 4, 5, 6, 7]\n        }\n      },\n      {\n        type: 'transport',\n        name: 'Trasporto Privato 4x4',\n        description: 'Veicolo fuoristrada con autista esperto per deserti e montagne',\n        duration: 1,\n        price: 120,\n        maxPersons: 4,\n        location: 'varie',\n        included: ['Autista', 'Carburante', 'Assicurazione'],\n        optional: false,\n        category: 'trasporto',\n        images: ['/images/4x4-transport.png'],\n        availability: {\n          seasons: ['tutto-anno'],\n          daysOfWeek: [1, 2, 3, 4, 5, 6, 7]\n        }\n      }\n    ];\n\n    for (const component of sampleComponents) {\n      await firestoreService.create('package_components', component);\n    }\n  }\n\n  // Search components\n  static searchComponents(components: PackageComponent[], query: string): PackageComponent[] {\n    const searchTerm = query.toLowerCase();\n    return components.filter(component =>\n      component.name.toLowerCase().includes(searchTerm) ||\n      component.description.toLowerCase().includes(searchTerm) ||\n      component.location?.toLowerCase().includes(searchTerm) ||\n      component.category.toLowerCase().includes(searchTerm)\n    );\n  }\n\n  // Filter components\n  static filterComponents(\n    components: PackageComponent[], \n    filters: {\n      type?: string;\n      category?: string;\n      maxPrice?: number;\n      location?: string;\n    }\n  ): PackageComponent[] {\n    return components.filter(component => {\n      if (filters.type && component.type !== filters.type) return false;\n      if (filters.category && component.category !== filters.category) return false;\n      if (filters.maxPrice && component.price > filters.maxPrice) return false;\n      if (filters.location && component.location !== filters.location) return false;\n      return true;\n    });\n  }\n}","size_bytes":11134},"components/admin/ContentDataGrid.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { Eye, EyeOff, Edit, Trash2, Plus, Search, Filter } from 'lucide-react'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface ContentDataGridProps {\n  collection: string\n  title: string\n  columns: Array<{\n    key: string\n    label: string\n    type?: 'text' | 'number' | 'boolean' | 'date' | 'array' | 'image'\n    sortable?: boolean\n  }>\n  onEdit?: (item: any) => void\n  onCreate?: () => void\n}\n\nexport default function ContentDataGrid({ \n  collection, \n  title, \n  columns, \n  onEdit, \n  onCreate \n}: ContentDataGridProps) {\n  const { user } = useAuth()\n  const [items, setItems] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [sortBy, setSortBy] = useState<string>('')\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc')\n  const [showPublishedOnly, setShowPublishedOnly] = useState(false)\n\n  // Load data from API\n  const loadData = async () => {\n    try {\n      setLoading(true)\n      const token = user ? await user.getIdToken() : null\n      \n      const params = new URLSearchParams({\n        collection,\n        ...(showPublishedOnly && { published: 'true' })\n      })\n      \n      const response = await fetch(`/api/admin/content?${params}`, {\n        headers: {\n          ...(token && { 'Authorization': `Bearer ${token}` })\n        }\n      })\n      \n      if (!response.ok) {\n        throw new Error('Failed to load data')\n      }\n      \n      const data = await response.json()\n      setItems(data.items || [])\n      setError('')\n    } catch (error: any) {\n      console.error('Load data error:', error)\n      setError(error.message || 'Errore nel caricamento dei dati')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    loadData()\n  }, [collection, showPublishedOnly])\n\n  // Toggle published status\n  const togglePublished = async (item: any) => {\n    try {\n      const token = user ? await user.getIdToken() : null\n      if (!token) throw new Error('Token not available')\n      \n      const response = await fetch('/api/admin/content', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          collection,\n          id: item.id,\n          data: { published: !item.published }\n        })\n      })\n      \n      if (!response.ok) {\n        throw new Error('Failed to update item')\n      }\n      \n      // Update local state\n      setItems(prev => prev.map(i => \n        i.id === item.id ? { ...i, published: !i.published } : i\n      ))\n    } catch (error: any) {\n      console.error('Toggle published error:', error)\n      setError(error.message || 'Errore durante l\\'aggiornamento')\n    }\n  }\n\n  // Delete item\n  const deleteItem = async (item: any) => {\n    if (!confirm(`Sei sicuro di voler eliminare \"${item.title || item.name}\"?`)) {\n      return\n    }\n\n    try {\n      const token = user ? await user.getIdToken() : null\n      if (!token) throw new Error('Token not available')\n      \n      const response = await fetch(`/api/admin/content?collection=${collection}&id=${item.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n      \n      if (!response.ok) {\n        throw new Error('Failed to delete item')\n      }\n      \n      // Remove from local state\n      setItems(prev => prev.filter(i => i.id !== item.id))\n    } catch (error: any) {\n      console.error('Delete error:', error)\n      setError(error.message || 'Errore durante l\\'eliminazione')\n    }\n  }\n\n  // Format cell value based on type\n  const formatCellValue = (value: any, type: string = 'text') => {\n    if (value === null || value === undefined) return '-'\n    \n    switch (type) {\n      case 'boolean':\n        return value ? 'S√¨' : 'No'\n      case 'date':\n        return new Date(value.seconds ? value.seconds * 1000 : value).toLocaleDateString('it-IT')\n      case 'array':\n        return Array.isArray(value) ? value.join(', ') : '-'\n      case 'image':\n        return value ? (\n          <img src={value} alt=\"\" className=\"w-12 h-12 object-cover rounded-lg\" />\n        ) : '-'\n      case 'number':\n        return typeof value === 'number' ? value.toLocaleString() : value\n      default:\n        return typeof value === 'string' ? (value.length > 50 ? `${value.substring(0, 50)}...` : value) : String(value)\n    }\n  }\n\n  // Filter and sort items\n  const filteredItems = items\n    .filter(item => {\n      if (!searchTerm) return true\n      const searchFields = ['title', 'name', 'description', 'slug']\n      return searchFields.some(field => \n        item[field]?.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    })\n    .sort((a, b) => {\n      if (!sortBy) return 0\n      \n      const aVal = a[sortBy]\n      const bVal = b[sortBy]\n      \n      if (sortOrder === 'asc') {\n        return aVal > bVal ? 1 : -1\n      } else {\n        return aVal < bVal ? 1 : -1\n      }\n    })\n\n  if (loading) {\n    return (\n      <div className=\"bg-card rounded-2xl p-8 text-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n        <p className=\"text-muted-foreground\">Caricamento {title.toLowerCase()}...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold text-foreground\">{title}</h2>\n        {onCreate && (\n          <button\n            onClick={onCreate}\n            className=\"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 transition-all duration-300\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            Aggiungi\n          </button>\n        )}\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-card rounded-2xl p-4 space-y-4\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          {/* Search */}\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <input\n              type=\"text\"\n              placeholder=\"Cerca...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-xl bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent\"\n            />\n          </div>\n\n          {/* Published filter */}\n          <div className=\"flex items-center gap-2\">\n            <Filter className=\"w-4 h-4 text-muted-foreground\" />\n            <label className=\"flex items-center gap-2 text-sm text-foreground\">\n              <input\n                type=\"checkbox\"\n                checked={showPublishedOnly}\n                onChange={(e) => setShowPublishedOnly(e.target.checked)}\n                className=\"rounded border-border\"\n              />\n              Solo pubblicati\n            </label>\n          </div>\n        </div>\n        \n        <div className=\"text-sm text-muted-foreground\">\n          {filteredItems.length} di {items.length} elementi\n        </div>\n      </div>\n\n      {/* Error display */}\n      {error && (\n        <div className=\"bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-xl\">\n          {error}\n        </div>\n      )}\n\n      {/* Data Grid */}\n      <div className=\"bg-card rounded-2xl overflow-hidden border border-border\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-muted/50\">\n              <tr>\n                {columns.map((column) => (\n                  <th \n                    key={column.key} \n                    className={`px-4 py-3 text-left text-sm font-medium text-foreground ${\n                      column.sortable ? 'cursor-pointer hover:bg-muted' : ''\n                    }`}\n                    onClick={() => {\n                      if (column.sortable) {\n                        if (sortBy === column.key) {\n                          setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')\n                        } else {\n                          setSortBy(column.key)\n                          setSortOrder('asc')\n                        }\n                      }\n                    }}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      {column.label}\n                      {column.sortable && sortBy === column.key && (\n                        <span className=\"text-xs\">\n                          {sortOrder === 'asc' ? '‚Üë' : '‚Üì'}\n                        </span>\n                      )}\n                    </div>\n                  </th>\n                ))}\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-foreground\">Stato</th>\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-foreground\">Azioni</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-border\">\n              {filteredItems.map((item) => (\n                <tr key={item.id} className=\"hover:bg-muted/30 transition-colors\">\n                  {columns.map((column) => (\n                    <td key={column.key} className=\"px-4 py-3 text-sm text-foreground\">\n                      {formatCellValue(item[column.key], column.type)}\n                    </td>\n                  ))}\n                  <td className=\"px-4 py-3\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${\n                      item.published \n                        ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                        : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n                    }`}>\n                      {item.published ? 'Pubblicato' : 'Bozza'}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        onClick={() => togglePublished(item)}\n                        className={`p-1 rounded-lg transition-colors ${\n                          item.published \n                            ? 'text-green-600 hover:bg-green-100 dark:hover:bg-green-900'\n                            : 'text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900'\n                        }`}\n                        title={item.published ? 'Nascondi' : 'Pubblica'}\n                      >\n                        {item.published ? <Eye className=\"w-4 h-4\" /> : <EyeOff className=\"w-4 h-4\" />}\n                      </button>\n                      \n                      {onEdit && (\n                        <button\n                          onClick={() => onEdit(item)}\n                          className=\"p-1 text-orange-600 hover:bg-orange-100 dark:hover:bg-orange-900 rounded-lg transition-colors\"\n                          title=\"Modifica\"\n                        >\n                          <Edit className=\"w-4 h-4\" />\n                        </button>\n                      )}\n                      \n                      <button\n                        onClick={() => deleteItem(item)}\n                        className=\"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors\"\n                        title=\"Elimina\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredItems.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              {searchTerm ? 'Nessun risultato trovato' : 'Nessun elemento presente'}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":12162},"components/auth/SignUp.tsx":{"content":"\"use client\";\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Mail, Lock, User, Loader2, Eye, EyeOff, ArrowRight } from 'lucide-react';\nimport Link from 'next/link';\nimport { signUp, signInWithGoogle } from '@/lib/auth';\n\ninterface SignUpProps {\n  onSuccess?: () => void;\n  redirectTo?: string;\n  className?: string;\n}\n\nexport default function SignUp({ onSuccess, redirectTo = '/dashboard', className = '' }: SignUpProps) {\n  const router = useRouter();\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [googleLoading, setGoogleLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  });\n  const [error, setError] = useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const validateForm = () => {\n    if (!formData.name.trim()) {\n      setError('Il nome √® obbligatorio');\n      return false;\n    }\n    if (!formData.email.trim()) {\n      setError('L\\'email √® obbligatoria');\n      return false;\n    }\n    if (formData.password.length < 6) {\n      setError('La password deve essere di almeno 6 caratteri');\n      return false;\n    }\n    if (formData.password !== formData.confirmPassword) {\n      setError('Le password non coincidono');\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    if (!validateForm()) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      await signUp(formData.email, formData.password, formData.name);\n      \n      if (onSuccess) {\n        onSuccess();\n      } else {\n        router.push(redirectTo);\n      }\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore durante la registrazione');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    setGoogleLoading(true);\n    setError('');\n\n    try {\n      await signInWithGoogle();\n      \n      if (onSuccess) {\n        onSuccess();\n      } else {\n        router.push(redirectTo);\n      }\n    } catch (err: any) {\n      setError(err.message || 'Si √® verificato un errore durante la registrazione con Google');\n    } finally {\n      setGoogleLoading(false);\n    }\n  };\n\n  return (\n    <div className={`w-full max-w-md mx-auto ${className}`}>\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {error && (\n          <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-300 text-sm\">\n            {error}\n          </div>\n        )}\n\n        {/* Name */}\n        <div>\n          <label htmlFor=\"name\" className=\"block text-sm font-medium text-foreground mb-2\">\n            Nome completo\n          </label>\n          <div className=\"relative\">\n            <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleChange}\n              required\n              className=\"w-full pl-10 pr-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground placeholder-muted-foreground\"\n              placeholder=\"Il tuo nome completo\"\n            />\n          </div>\n        </div>\n\n        {/* Email */}\n        <div>\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-foreground mb-2\">\n            Email\n          </label>\n          <div className=\"relative\">\n            <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n              className=\"w-full pl-10 pr-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground placeholder-muted-foreground\"\n              placeholder=\"inserisci@email.com\"\n            />\n          </div>\n        </div>\n\n        {/* Password */}\n        <div>\n          <label htmlFor=\"password\" className=\"block text-sm font-medium text-foreground mb-2\">\n            Password\n          </label>\n          <div className=\"relative\">\n            <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type={showPassword ? \"text\" : \"password\"}\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n              className=\"w-full pl-10 pr-12 py-3 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground placeholder-muted-foreground\"\n              placeholder=\"Crea una password sicura\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(!showPassword)}\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n            >\n              {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n            </button>\n          </div>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            Almeno 6 caratteri\n          </p>\n        </div>\n\n        {/* Confirm Password */}\n        <div>\n          <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-foreground mb-2\">\n            Conferma password\n          </label>\n          <div className=\"relative\">\n            <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type={showConfirmPassword ? \"text\" : \"password\"}\n              id=\"confirmPassword\"\n              name=\"confirmPassword\"\n              value={formData.confirmPassword}\n              onChange={handleChange}\n              required\n              className=\"w-full pl-10 pr-12 py-3 border border-border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-background text-foreground placeholder-muted-foreground\"\n              placeholder=\"Ripeti la password\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n            >\n              {showConfirmPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n            </button>\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <button\n          type=\"submit\"\n          disabled={loading || googleLoading}\n          className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-lg font-semibold hover:from-orange-600 hover:to-red-600 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n        >\n          {loading ? (\n            <Loader2 className=\"w-5 h-5 animate-spin\" />\n          ) : (\n            <>\n              Crea Account\n              <ArrowRight className=\"w-5 h-5\" />\n            </>\n          )}\n        </button>\n\n        {/* Divider */}\n        <div className=\"relative my-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <span className=\"w-full border-t border-border\" />\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"bg-background px-2 text-muted-foreground\">oppure</span>\n          </div>\n        </div>\n\n        {/* Google Sign In */}\n        <button\n          type=\"button\"\n          onClick={handleGoogleSignIn}\n          disabled={loading || googleLoading}\n          className=\"w-full bg-white dark:bg-gray-800 border border-border text-foreground py-3 px-4 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n        >\n          {googleLoading ? (\n            <Loader2 className=\"w-5 h-5 animate-spin\" />\n          ) : (\n            <>\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n              </svg>\n              Continua con Google\n            </>\n          )}\n        </button>\n\n        {/* Terms and Privacy */}\n        <div className=\"text-center text-xs text-muted-foreground\">\n          Registrandoti accetti i nostri{' '}\n          <Link href=\"/terms\" className=\"text-orange-600 hover:text-orange-500\">\n            Termini di Servizio\n          </Link>{' '}\n          e{' '}\n          <Link href=\"/privacy\" className=\"text-orange-600 hover:text-orange-500\">\n            Privacy Policy\n          </Link>\n        </div>\n\n        {/* Sign In Link */}\n        <div className=\"text-center text-sm text-muted-foreground\">\n          Hai gi√† un account?{' '}\n          <Link href=\"/auth/signin\" className=\"text-orange-600 hover:text-orange-500 font-medium\">\n            Accedi qui\n          </Link>\n        </div>\n      </form>\n    </div>\n  );\n}","size_bytes":10425},"components/ChatBot.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect, useRef } from 'react'\nimport { MessageCircle, X, Send, Bot, User, Loader2 } from 'lucide-react'\nimport { useNotifications } from './NotificationSystem'\n\ninterface Message {\n  id: string\n  role: 'user' | 'assistant'\n  content: string\n  timestamp: Date\n}\n\nexport default function ChatBot() {\n  const { showError } = useNotifications()\n  const [isOpen, setIsOpen] = useState(false)\n  const [messages, setMessages] = useState<Message[]>([])\n  const [input, setInput] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  // Welcome message\n  useEffect(() => {\n    if (isOpen && messages.length === 0) {\n      setMessages([{\n        id: '1',\n        role: 'assistant',\n        content: 'üëã Ciao! Sono l\\'assistente virtuale di Morocco Dreams. Posso aiutarti con informazioni sui nostri viaggi, servizi, itinerari e tutto quello che vuoi sapere sul Marocco. Come posso aiutarti oggi?',\n        timestamp: new Date()\n      }])\n    }\n  }, [isOpen, messages.length])\n\n  const sendMessage = async () => {\n    if (!input.trim() || isLoading) return\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: input.trim(),\n      timestamp: new Date()\n    }\n\n    setMessages(prev => [...prev, userMessage])\n    setInput('')\n    setIsLoading(true)\n\n    try {\n      const response = await fetch('/api/chatbot', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: input.trim(),\n          conversation: messages\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error('Errore nella comunicazione con il chatbot')\n      }\n\n      const data = await response.json()\n      \n      const assistantMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: data.response,\n        timestamp: new Date()\n      }\n\n      setMessages(prev => [...prev, assistantMessage])\n\n    } catch (error) {\n      console.error('Chat error:', error)\n      showError('Errore Chat', 'Si √® verificato un errore. Riprova tra qualche minuto.')\n      \n      // Fallback response\n      const fallbackMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: '‚ö†Ô∏è Mi dispiace, sto avendo problemi tecnici. Puoi contattarci direttamente via email o telefono per assistenza immediata. I nostri recapiti sono nella sezione contatti del sito.',\n        timestamp: new Date()\n      }\n      setMessages(prev => [...prev, fallbackMessage])\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      sendMessage()\n    }\n  }\n\n  if (!isOpen) {\n    return (\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed bottom-6 right-6 z-50 bg-orange-500 hover:bg-orange-600 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110\"\n        aria-label=\"Apri chat assistenza\"\n      >\n        <MessageCircle className=\"w-6 h-6\" />\n      </button>\n    )\n  }\n\n  return (\n    <div className=\"fixed bottom-6 right-6 z-50 w-96 h-[500px] bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-orange-500 text-white rounded-t-xl\">\n        <div className=\"flex items-center gap-3\">\n          <Bot className=\"w-6 h-6\" />\n          <div>\n            <h3 className=\"font-semibold\">Assistente Morocco Dreams</h3>\n            <p className=\"text-sm opacity-90\">Sempre qui per te</p>\n          </div>\n        </div>\n        <button\n          onClick={() => setIsOpen(false)}\n          className=\"p-1 hover:bg-orange-600 rounded-lg transition-colors\"\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((message) => (\n          <div\n            key={message.id}\n            className={`flex gap-3 ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n          >\n            {message.role === 'assistant' && (\n              <div className=\"w-8 h-8 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center flex-shrink-0\">\n                <Bot className=\"w-4 h-4 text-orange-600 dark:text-orange-400\" />\n              </div>\n            )}\n            \n            <div\n              className={`max-w-[80%] p-3 rounded-lg ${\n                message.role === 'user'\n                  ? 'bg-orange-500 text-white'\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100'\n              }`}\n            >\n              <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n              <p className={`text-xs mt-1 opacity-70 ${\n                message.role === 'user' ? 'text-orange-100' : 'text-gray-500'\n              }`}>\n                {message.timestamp.toLocaleTimeString('it-IT', { \n                  hour: '2-digit', \n                  minute: '2-digit' \n                })}\n              </p>\n            </div>\n\n            {message.role === 'user' && (\n              <div className=\"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0\">\n                <User className=\"w-4 h-4 text-gray-600 dark:text-gray-400\" />\n              </div>\n            )}\n          </div>\n        ))}\n        \n        {isLoading && (\n          <div className=\"flex gap-3 justify-start\">\n            <div className=\"w-8 h-8 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center flex-shrink-0\">\n              <Bot className=\"w-4 h-4 text-orange-600 dark:text-orange-400\" />\n            </div>\n            <div className=\"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg\">\n              <div className=\"flex items-center gap-2\">\n                <Loader2 className=\"w-4 h-4 animate-spin text-orange-500\" />\n                <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Sto pensando...\n                </span>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <div className=\"p-4 border-t border-gray-200 dark:border-gray-700\">\n        <div className=\"flex gap-2\">\n          <textarea\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"Scrivi il tuo messaggio...\"\n            className=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none max-h-20 min-h-[40px] bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\"\n            rows={1}\n            disabled={isLoading}\n          />\n          <button\n            onClick={sendMessage}\n            disabled={!input.trim() || isLoading}\n            className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            <Send className=\"w-4 h-4\" />\n          </button>\n        </div>\n        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n          Premi Invio per inviare, Shift+Invio per andare a capo\n        </p>\n      </div>\n    </div>\n  )\n}","size_bytes":7805},"app/admin/page.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useNotifications } from \"@/components/NotificationSystem\"\nimport {\n  BarChart3,\n  Users,\n  MapPin,\n  Car,\n  TrendingUp,\n  Calendar,\n  Star,\n  Heart,\n  Plus,\n  Settings,\n  Instagram,\n  MessageSquare,\n  FileText,\n  Map\n} from \"lucide-react\"\nimport Link from \"next/link\"\n\ninterface DashboardStats {\n  experiences: {\n    total: number\n    published: number\n  }\n  travels: {\n    total: number\n    published: number\n  }\n  vehicles: {\n    total: number\n    published: number\n  }\n  users: {\n    total: number\n  }\n}\n\nexport default function AdminDashboard() {\n  const [stats, setStats] = useState<DashboardStats>({\n    experiences: { total: 0, published: 0 },\n    travels: { total: 0, published: 0 },\n    vehicles: { total: 0, published: 0 },\n    users: { total: 0 }\n  })\n  const [loading, setLoading] = useState(true)\n  const { showError } = useNotifications()\n\n  useEffect(() => {\n    fetchDashboardStats()\n  }, [])\n\n  const fetchDashboardStats = async () => {\n    try {\n      const response = await fetch('/api/stats')\n      if (!response.ok) throw new Error('Failed to fetch stats')\n      \n      const data = await response.json()\n      setStats(data.stats)\n    } catch (error) {\n      console.error(\"Error fetching dashboard stats:\", error)\n      showError(\"Errore\", \"Impossibile caricare le statistiche\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const statCards = [\n    {\n      title: \"Esperienze\",\n      value: stats.experiences.total,\n      published: stats.experiences.published,\n      subtitle: `${stats.experiences.published} pubblicate`,\n      icon: MapPin,\n      color: \"from-blue-500 to-cyan-600\",\n      link: \"/admin/experiences\",\n      showPercentage: true\n    },\n    {\n      title: \"Viaggi\",\n      value: stats.travels.total,\n      published: stats.travels.published,\n      subtitle: `${stats.travels.published} pubblicati`,\n      icon: TrendingUp,\n      color: \"from-orange-500 to-red-600\",\n      link: \"/admin/travels\",\n      showPercentage: true\n    },\n    {\n      title: \"Veicoli\",\n      value: stats.vehicles.total,\n      published: stats.vehicles.published,\n      subtitle: `${stats.vehicles.published} pubblicati`,\n      icon: Car,\n      color: \"from-green-500 to-emerald-600\",\n      link: \"/admin/vehicles\",\n      showPercentage: true\n    },\n    {\n      title: \"Utenti\",\n      value: stats.users.total,\n      published: 0,\n      subtitle: \"Registrati\",\n      icon: Users,\n      color: \"from-purple-500 to-pink-600\",\n      link: \"/admin/users\",\n      showPercentage: false\n    }\n  ]\n\n  const quickActions = [\n    {\n      icon: FileText,\n      title: \"Gestisci Contenuti\",\n      description: \"Esperienze, Viaggi, Servizi, Blog & Veicoli\",\n      link: \"/admin/content?tab=experience\",\n      color: \"bg-blue-500\"\n    },\n    {\n      icon: Calendar,\n      title: \"Gestisci Prenotazioni\",\n      description: \"Visualizza e gestisci tutte le prenotazioni\",\n      link: \"/admin/content?tab=bookings\",\n      color: \"bg-orange-500\"\n    },\n    {\n      icon: Users,\n      title: \"Gestisci Utenti\",\n      description: \"Admin, permessi e ruoli utente\",\n      link: \"/admin/users\",\n      color: \"bg-green-500\"\n    },\n    {\n      icon: Map,\n      title: \"Gestisci Citt√†\",\n      description: \"Destinazioni marocchine\",\n      link: \"/admin/cities\",\n      color: \"bg-indigo-500\"\n    },\n    {\n      icon: Settings,\n      title: \"Gestisci Servizi\",\n      description: \"Guide, trasferimenti, assicurazioni\",\n      link: \"/admin/services\",\n      color: \"bg-purple-500\"\n    },\n    {\n      icon: Instagram,\n      title: \"Gestisci Instagram\",\n      description: \"Video feed homepage\",\n      link: \"/admin/instagram\",\n      color: \"bg-teal-500\"\n    }\n  ]\n\n  const managementSections = [\n    {\n      icon: MessageSquare,\n      title: \"Testimonianze\",\n      description: \"Gestisci recensioni clienti\",\n      link: \"/admin/testimonials\",\n      count: 0\n    },\n    {\n      icon: FileText,\n      title: \"FAQ\",\n      description: \"Domande frequenti\",\n      link: \"/admin/faq\",\n      count: 0\n    },\n    {\n      icon: Instagram,\n      title: \"Instagram\",\n      description: \"Video feed homepage\",\n      link: \"/admin/instagram\",\n      count: 3\n    },\n    {\n      icon: Settings,\n      title: \"Menu\",\n      description: \"Navigazione sito\",\n      link: \"/admin/menu\",\n      count: 0\n    }\n  ]\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-muted-foreground text-lg\">Caricamento dashboard...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-8 pb-12\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-orange-500 to-red-600 rounded-2xl p-8 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-4xl font-bold mb-2\">\n              Morocco Dreams CMS\n            </h1>\n            <p className=\"text-orange-100 text-lg\">\n              Dashboard Amministratore - Gestione Contenuti\n            </p>\n          </div>\n          <BarChart3 className=\"w-16 h-16 text-white/30\" />\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div>\n        <h2 className=\"text-2xl font-bold mb-4 text-foreground\">Statistiche Contenuti</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {statCards.map((card) => {\n            const Icon = card.icon\n            const percentage = card.showPercentage && card.value > 0 \n              ? (card.published / card.value) * 100 \n              : 0\n            \n            return (\n              <Link\n                key={card.title}\n                href={card.link}\n                className=\"bg-card border-2 border-border rounded-2xl p-6 hover:shadow-xl hover:border-orange-500/50 transition-all group\"\n              >\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div className={`p-4 rounded-xl bg-gradient-to-br ${card.color} shadow-lg`}>\n                    <Icon className=\"w-7 h-7 text-white\" />\n                  </div>\n                  {card.showPercentage && (\n                    <span className=\"text-xs font-semibold text-muted-foreground bg-muted px-2 py-1 rounded-full\">\n                      {Math.round(percentage)}%\n                    </span>\n                  )}\n                </div>\n                \n                <div>\n                  <p className=\"text-sm text-muted-foreground mb-1 font-medium\">{card.title}</p>\n                  <p className=\"text-4xl font-bold text-foreground mb-2 group-hover:text-orange-600 transition-colors\">\n                    {card.value}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">{card.subtitle}</p>\n                </div>\n              </Link>\n            )\n          })}\n        </div>\n      </div>\n\n      {/* Content Progress */}\n      <div className=\"bg-card border border-border rounded-2xl p-8\">\n        <div className=\"flex items-center space-x-3 mb-6\">\n          <div className=\"p-3 rounded-xl bg-orange-100 dark:bg-orange-900/20\">\n            <BarChart3 className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\n          </div>\n          <h2 className=\"text-2xl font-bold\">Stato Pubblicazioni</h2>\n        </div>\n        \n        <div className=\"grid md:grid-cols-3 gap-6\">\n          <div>\n            <div className=\"flex justify-between items-center mb-3\">\n              <span className=\"text-sm font-semibold text-muted-foreground\">Esperienze</span>\n              <span className=\"text-sm font-bold\">\n                {stats.experiences.published} / {stats.experiences.total}\n              </span>\n            </div>\n            <div className=\"w-full bg-muted rounded-full h-3 overflow-hidden\">\n              <div\n                className=\"bg-gradient-to-r from-blue-500 to-cyan-600 h-3 rounded-full transition-all duration-500\"\n                style={{\n                  width: `${stats.experiences.total > 0 ? (stats.experiences.published / stats.experiences.total) * 100 : 0}%`\n                }}\n              />\n            </div>\n          </div>\n\n          <div>\n            <div className=\"flex justify-between items-center mb-3\">\n              <span className=\"text-sm font-semibold text-muted-foreground\">Viaggi</span>\n              <span className=\"text-sm font-bold\">\n                {stats.travels.published} / {stats.travels.total}\n              </span>\n            </div>\n            <div className=\"w-full bg-muted rounded-full h-3 overflow-hidden\">\n              <div\n                className=\"bg-gradient-to-r from-orange-500 to-red-600 h-3 rounded-full transition-all duration-500\"\n                style={{\n                  width: `${stats.travels.total > 0 ? (stats.travels.published / stats.travels.total) * 100 : 0}%`\n                }}\n              />\n            </div>\n          </div>\n\n          <div>\n            <div className=\"flex justify-between items-center mb-3\">\n              <span className=\"text-sm font-semibold text-muted-foreground\">Veicoli</span>\n              <span className=\"text-sm font-bold\">\n                {stats.vehicles.published} / {stats.vehicles.total}\n              </span>\n            </div>\n            <div className=\"w-full bg-muted rounded-full h-3 overflow-hidden\">\n              <div\n                className=\"bg-gradient-to-r from-green-500 to-emerald-600 h-3 rounded-full transition-all duration-500\"\n                style={{\n                  width: `${stats.vehicles.total > 0 ? (stats.vehicles.published / stats.vehicles.total) * 100 : 0}%`\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Quick Actions */}\n      <div>\n        <h2 className=\"text-2xl font-bold mb-4 text-foreground flex items-center gap-2\">\n          <Plus className=\"w-6 h-6\" />\n          Azioni Rapide\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {quickActions.map((action) => {\n            const Icon = action.icon\n            return (\n              <Link\n                key={action.title}\n                href={action.link}\n                className=\"group bg-card border border-border rounded-xl p-5 hover:shadow-lg hover:border-orange-500/50 transition-all\"\n              >\n                <div className=\"flex items-start gap-4\">\n                  <div className={`p-3 rounded-lg ${action.color} text-white shrink-0`}>\n                    <Icon className=\"w-5 h-5\" />\n                  </div>\n                  <div>\n                    <p className=\"font-bold text-foreground group-hover:text-orange-600 transition-colors\">\n                      {action.title}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {action.description}\n                    </p>\n                  </div>\n                </div>\n              </Link>\n            )\n          })}\n        </div>\n      </div>\n\n      {/* Management Sections */}\n      <div>\n        <h2 className=\"text-2xl font-bold mb-4 text-foreground\">Gestione Sistema</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {managementSections.map((section) => {\n            const Icon = section.icon\n            return (\n              <Link\n                key={section.title}\n                href={section.link}\n                className=\"bg-card border border-border rounded-xl p-5 hover:shadow-lg hover:border-orange-500/50 transition-all group\"\n              >\n                <Icon className=\"w-8 h-8 text-orange-600 mb-3 group-hover:scale-110 transition-transform\" />\n                <p className=\"font-bold text-foreground mb-1 group-hover:text-orange-600 transition-colors\">\n                  {section.title}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {section.description}\n                </p>\n              </Link>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":12232},"components/sections/MoroccoMap.tsx":{"content":"\"use client\"\n\nimport { useRef, useEffect, useState } from \"react\"\nimport { Star, Heart, ArrowRight } from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\nimport Link from \"next/link\"\n\ninterface City {\n  id: string\n  name: string\n  coordinates: [number, number]\n  description: string\n  image: string\n  category: \"imperial\" | \"coastal\" | \"mountain\" | \"modern\"\n  rating: number\n  tours: number\n  highlights: string[]\n  pageUrl: string\n}\n\nconst MOROCCO_CITIES: City[] = [\n  {\n    id: \"marrakech\",\n    name: \"Marrakech\",\n    coordinates: [-7.9811, 31.6295],\n    description: \"La Perla Rossa del Marocco, famosa per la piazza Jemaa el-Fnaa e i suoi souks colorati.\",\n    image: \"/images/marrakech-medina.png\",\n    category: \"imperial\",\n    rating: 4.8,\n    tours: 12,\n    highlights: [\"Jemaa el-Fnaa\", \"Souks\", \"Giardini Majorelle\", \"Palazzo Bahia\"],\n    pageUrl: \"/viaggi/citta-imperiali\",\n  },\n  {\n    id: \"casablanca\",\n    name: \"Casablanca\",\n    coordinates: [-7.5898, 33.5731],\n    description: \"La capitale economica del Marocco, moderna e cosmopolita.\",\n    image: \"/images/casablanca-hassan.png\",\n    category: \"modern\",\n    rating: 4.5,\n    tours: 8,\n    highlights: [\"Moschea Hassan II\", \"Corniche\", \"Quartiere Habous\", \"Centro Moderno\"],\n    pageUrl: \"/viaggi/citta-imperiali\",\n  },\n  {\n    id: \"fes\",\n    name: \"F√®s\",\n    coordinates: [-5.0078, 34.0181],\n    description: \"La capitale spirituale del Marocco, con la medina pi√π grande del mondo.\",\n    image: \"/images/fes-architecture.png\",\n    category: \"imperial\",\n    rating: 4.9,\n    tours: 15,\n    highlights: [\"Medina UNESCO\", \"Universit√† Al Quaraouiyine\", \"Concerie Chouara\", \"Palazzo Reale\"],\n    pageUrl: \"/viaggi/citta-imperiali\",\n  },\n  {\n    id: \"rabat\",\n    name: \"Rabat\",\n    coordinates: [-6.8498, 33.9716],\n    description: \"La capitale moderna del Marocco, patrimonio UNESCO.\",\n    image: \"/images/imperial-cities-tour.png\",\n    category: \"imperial\",\n    rating: 4.6,\n    tours: 10,\n    highlights: [\"Torre Hassan\", \"Kasbah Oudayas\", \"Mausoleo Mohammed V\", \"Chellah\"],\n    pageUrl: \"/viaggi/citta-imperiali\",\n  },\n  {\n    id: \"chefchaouen\",\n    name: \"Chefchaouen\",\n    coordinates: [-5.2636, 35.1688],\n    description: \"La perla blu del Rif, citt√† dalle case azzurre.\",\n    image: \"/images/chefchaouen-blue.png\",\n    category: \"mountain\",\n    rating: 4.9,\n    tours: 6,\n    highlights: [\"Medina blu\", \"Monti del Rif\", \"Artigianato\", \"Cascate Akchour\"],\n    pageUrl: \"/viaggi/montagne-atlas\",\n  },\n  {\n    id: \"essaouira\",\n    name: \"Essaouira\",\n    coordinates: [-9.7595, 31.5085],\n    description: \"La citt√† del vento, perla della costa atlantica.\",\n    image: \"/images/essaouira-coast.png\",\n    category: \"coastal\",\n    rating: 4.7,\n    tours: 9,\n    highlights: [\"Medina UNESCO\", \"Porto\", \"Spiagge\", \"Argan\"],\n    pageUrl: \"/viaggi/costa-atlantica\",\n  },\n]\n\nconst categoryConfig = {\n  imperial: {\n    color: \"from-amber-500 to-orange-600\",\n    icon: \"üëë\",\n    label: \"Imperiale\",\n  },\n  coastal: {\n    color: \"from-orange-500 to-red-600\",\n    icon: \"üåä\",\n    label: \"Costiera\",\n  },\n  mountain: {\n    color: \"from-green-500 to-emerald-600\",\n    icon: \"‚õ∞Ô∏è\",\n    label: \"Montagna\",\n  },\n  modern: {\n    color: \"from-gray-500 to-slate-600\",\n    icon: \"üèôÔ∏è\",\n    label: \"Moderna\",\n  },\n}\n\nexport default function MoroccoMap() {\n  const mapContainerRef = useRef<HTMLDivElement>(null)\n  const mapRef = useRef<any>(null)\n  const markersRef = useRef<any[]>([])\n  const popupsRef = useRef<any[]>([])\n  const [selectedCity, setSelectedCity] = useState<City | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [favorites, setFavorites] = useState<string[]>([])\n  const [mounted, setMounted] = useState(false)\n\n  const { resolvedTheme } = useTheme()\n  const isDark = resolvedTheme === \"dark\"\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  const toggleFavorite = (cityId: string) => {\n    setFavorites((prev) => (prev.includes(cityId) ? prev.filter((id) => id !== cityId) : [...prev, cityId]))\n  }\n\n  const handleCitySelect = (city: City) => {\n    setSelectedCity(city)\n\n    if (mapRef.current) {\n      // Centra la mappa sulla citt√† selezionata\n      mapRef.current.flyTo({\n        center: city.coordinates,\n        zoom: 8,\n        duration: 1500,\n        padding: { top: 100, bottom: 100, left: 50, right: 50 },\n      })\n\n      // Chiudi tutti i popup esistenti\n      popupsRef.current.forEach((popup) => popup.remove())\n      popupsRef.current = []\n\n      // Trova il marker corrispondente e mostra il popup\n      setTimeout(() => {\n        const cityIndex = MOROCCO_CITIES.findIndex((c) => c.id === city.id)\n        if (cityIndex !== -1 && markersRef.current[cityIndex]) {\n          const marker = markersRef.current[cityIndex]\n          const popup = createPopup(city, isDark)\n          popup.setLngLat(city.coordinates).addTo(mapRef.current)\n          popupsRef.current.push(popup)\n\n          // Aggiorna stili marker\n          document.querySelectorAll(\".morocco-marker\").forEach((m) => m.classList.remove(\"selected\"))\n          marker.getElement().classList.add(\"selected\")\n        }\n      }, 1600) // Aspetta che l'animazione flyTo finisca\n    }\n  }\n\n  const createPopup = (city: City, isDark: boolean) => {\n    return new (window as any).mapboxgl.Popup({\n      closeButton: true,\n      closeOnClick: false,\n      offset: [0, -20],\n      anchor: \"bottom\",\n      maxWidth: \"380px\",\n    }).setHTML(`\n      <div class=\"p-0 ${isDark ? \"bg-gray-900 text-white\" : \"bg-white text-gray-900\"} rounded-xl overflow-hidden\">\n        <div class=\"relative h-32 overflow-hidden\">\n          <img src=\"${city.image || \"/placeholder.svg\"}\" alt=\"${city.name}\" class=\"w-full h-full object-cover\" />\n          <div class=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\"></div>\n          <div class=\"absolute bottom-3 left-3 text-white\">\n            <h3 class=\"font-bold text-lg\">${city.name}</h3>\n            <div class=\"flex items-center gap-2\">\n              <div class=\"flex items-center gap-1\">\n                <svg class=\"w-4 h-4 text-yellow-400 fill-current\" viewBox=\"0 0 20 20\">\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\n                </svg>\n                <span class=\"text-sm font-medium\">${city.rating}</span>\n              </div>\n              <span class=\"text-xs opacity-80\">${city.tours} tour</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"p-4\">\n          <p class=\"text-sm ${isDark ? \"text-gray-300\" : \"text-gray-600\"} mb-3 line-clamp-2\">${city.description}</p>\n          \n          <div class=\"mb-3\">\n            <p class=\"text-xs font-medium ${isDark ? \"text-gray-400\" : \"text-gray-500\"} mb-2\">Highlights:</p>\n            <div class=\"flex flex-wrap gap-1\">\n              ${city.highlights\n                .slice(0, 3)\n                .map(\n                  (highlight) => `\n                <span class=\"px-2 py-1 text-xs rounded-full ${isDark ? \"bg-gray-800 text-gray-300\" : \"bg-gray-100 text-gray-600\"}\">${highlight}</span>\n              `,\n                )\n                .join(\"\")}\n            </div>\n          </div>\n          \n          <div class=\"flex gap-2\">\n            <button onclick=\"window.location.href='${city.pageUrl}'\" class=\"flex-1 bg-gradient-to-r from-orange-500 to-red-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:from-orange-600 hover:to-red-700 transition-all flex items-center justify-center gap-1\">\n              Scopri\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\"></path>\n              </svg>\n            </button>\n            <button onclick=\"event.stopPropagation(); toggleCityFavorite('${city.id}')\" class=\"px-3 py-2 border ${\n              isDark\n                ? \"border-gray-600 text-gray-300 hover:bg-gray-800\"\n                : \"border-gray-300 text-gray-700 hover:bg-gray-50\"\n            } rounded-lg text-sm transition-all\">\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    `)\n  }\n\n  useEffect(() => {\n    if (!mounted) return\n\n    // Load Mapbox CSS\n    const mapboxCSS = document.createElement(\"link\")\n    mapboxCSS.rel = \"stylesheet\"\n    mapboxCSS.href = \"https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css\"\n    document.head.appendChild(mapboxCSS)\n\n    // Load Mapbox JS\n    const mapboxJS = document.createElement(\"script\")\n    mapboxJS.src = \"https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js\"\n    mapboxJS.onload = initializeMap\n    document.head.appendChild(mapboxJS)\n\n    // Add custom styles\n    const customStyles = document.createElement(\"style\")\n    customStyles.textContent = `\n      .mapboxgl-popup {\n        z-index: 50;\n      }\n      .mapboxgl-popup-content {\n        padding: 0 !important;\n        border-radius: 1rem !important;\n        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;\n        border: none !important;\n        max-width: 380px !important;\n      }\n      .mapboxgl-popup-close-button {\n        color: ${isDark ? \"#9ca3af\" : \"#6b7280\"} !important;\n        font-size: 20px !important;\n        padding: 8px !important;\n        right: 8px !important;\n        top: 8px !important;\n      }\n      .mapboxgl-popup-close-button:hover {\n        background-color: ${isDark ? \"rgba(55, 65, 81, 0.8)\" : \"rgba(0, 0, 0, 0.1)\"} !important;\n        border-radius: 50% !important;\n      }\n      .mapboxgl-popup-tip {\n        border-top-color: ${isDark ? \"rgb(17 24 39)\" : \"white\"} !important;\n      }\n      .mapboxgl-ctrl-attrib {\n        display: none !important;\n      }\n      .morocco-marker {\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        cursor: pointer;\n      }\n      .morocco-marker:hover {\n        transform: scale(1.2) translateY(-4px);\n        z-index: 10;\n      }\n      .morocco-marker.selected {\n        transform: scale(1.3) translateY(-6px);\n        z-index: 20;\n      }\n    `\n    document.head.appendChild(customStyles)\n\n    function initializeMap() {\n      if (!(window as any).mapboxgl || !mapContainerRef.current) return\n      ;(window as any).mapboxgl.accessToken =\n        \"pk.eyJ1IjoiZWRpc2JhbGkwMyIsImEiOiJjbTFvcnFvbjcxNTNnMmtxdnA0cjJkZGx0In0.gk1glAL0jkmWK1_Tyf4Fow\"\n\n      const map = new (window as any).mapboxgl.Map({\n        container: mapContainerRef.current,\n        style: isDark ? \"mapbox://styles/mapbox/dark-v11\" : \"mapbox://styles/mapbox/satellite-streets-v12\",\n        center: [-6.2, 32.2],\n        zoom: 5.5,\n        attributionControl: false,\n      })\n\n      map.addControl(new (window as any).mapboxgl.NavigationControl(), \"top-right\")\n\n      map.on(\"load\", () => {\n        setIsLoading(false)\n        createMarkers(map)\n      })\n\n      mapRef.current = map\n    }\n\n    function createMarkers(map: any) {\n      // Clear existing markers and popups\n      markersRef.current.forEach((marker) => marker.remove())\n      popupsRef.current.forEach((popup) => popup.remove())\n      markersRef.current = []\n      popupsRef.current = []\n\n      MOROCCO_CITIES.forEach((city, index) => {\n        // Create marker element\n        const markerEl = document.createElement(\"div\")\n        markerEl.className = \"morocco-marker\"\n        markerEl.innerHTML = `\n          <div class=\"w-12 h-12 rounded-full bg-gradient-to-br ${\n            categoryConfig[city.category].color\n          } border-4 border-white shadow-lg flex items-center justify-center text-white text-lg font-bold relative\">\n            ${categoryConfig[city.category].icon}\n            <div class=\"absolute -top-1 -right-1 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center text-white text-xs font-bold\">\n              ${city.tours}\n            </div>\n          </div>\n        `\n\n        // Create marker\n        const marker = new (window as any).mapboxgl.Marker({\n          element: markerEl,\n          anchor: \"bottom\",\n        })\n          .setLngLat(city.coordinates)\n          .addTo(map)\n\n        markersRef.current.push(marker)\n\n        // Add click event to marker\n        markerEl.addEventListener(\"click\", () => {\n          handleCitySelect(city)\n        })\n\n        // Add hover events for temporary popup\n        let hoverPopup: any = null\n        markerEl.addEventListener(\"mouseenter\", () => {\n          if (!selectedCity || selectedCity.id !== city.id) {\n            hoverPopup = createPopup(city, isDark)\n            hoverPopup.setLngLat(city.coordinates).addTo(map)\n          }\n        })\n\n        markerEl.addEventListener(\"mouseleave\", () => {\n          if (hoverPopup && (!selectedCity || selectedCity.id !== city.id)) {\n            setTimeout(() => {\n              if (hoverPopup && !hoverPopup.getElement()?.matches(\":hover\")) {\n                hoverPopup.remove()\n                hoverPopup = null\n              }\n            }, 300)\n          }\n        })\n      })\n\n      // Fit bounds to show all cities\n      if (MOROCCO_CITIES.length > 0) {\n        const bounds = new (window as any).mapboxgl.LngLatBounds()\n        MOROCCO_CITIES.forEach((city) => bounds.extend(city.coordinates))\n        map.fitBounds(bounds, { padding: 100, maxZoom: 8 })\n      }\n    }\n    // Global function for popup buttons\n    ;(window as any).toggleCityFavorite = (cityId: string) => {\n      toggleFavorite(cityId)\n    }\n\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.remove()\n      }\n    }\n  }, [isDark, mounted])\n\n  // Update map style when theme changes\n  useEffect(() => {\n    if (mapRef.current && mounted) {\n      const newStyle = isDark ? \"mapbox://styles/mapbox/dark-v11\" : \"mapbox://styles/mapbox/satellite-streets-v12\"\n      mapRef.current.setStyle(newStyle)\n    }\n  }, [isDark, mounted])\n\n  if (!mounted) {\n    return (\n      <section className=\"py-16 lg:py-24 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">\n            <div className=\"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-lg font-medium text-foreground\">Caricamento mappa del Marocco...</p>\n          </div>\n        </div>\n      </section>\n    )\n  }\n\n  return (\n    <section className=\"py-16 lg:py-24 bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"text-center mb-12 lg:mb-16\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Esplora le Citt√† del Marocco</h2>\n          <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto\">\n            Scopri le meraviglie del Regno del Marocco attraverso le sue citt√† pi√π affascinanti\n          </p>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"grid lg:grid-cols-4 gap-8\">\n          {/* Sidebar */}\n          <div className=\"lg:col-span-1\">\n            {/* Cities List */}\n            <div className=\"bg-card rounded-2xl p-6 shadow-lg\">\n              <h3 className=\"text-xl font-bold text-foreground mb-4\">Citt√† ({MOROCCO_CITIES.length})</h3>\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {MOROCCO_CITIES.map((city) => (\n                  <button\n                    key={city.id}\n                    onClick={() => handleCitySelect(city)}\n                    className={`w-full p-4 rounded-xl text-left transition-all ${\n                      selectedCity?.id === city.id\n                        ? \"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg\"\n                        : \"bg-muted hover:bg-muted/80\"\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <div\n                        className={`w-12 h-12 rounded-xl bg-gradient-to-br ${\n                          categoryConfig[city.category].color\n                        } flex items-center justify-center text-white font-bold text-lg shadow-lg`}\n                      >\n                        {categoryConfig[city.category].icon}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h4\n                            className={`font-semibold text-sm truncate ${\n                              selectedCity?.id === city.id ? \"text-white\" : \"text-foreground\"\n                            }`}\n                          >\n                            {city.name}\n                          </h4>\n                          <div\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              toggleFavorite(city.id)\n                            }}\n                            className=\"p-0.5 cursor-pointer\"\n                          >\n                            <Heart\n                              className={`w-3 h-3 ${\n                                favorites.includes(city.id)\n                                  ? \"fill-red-500 text-red-500\"\n                                  : selectedCity?.id === city.id\n                                    ? \"text-white/70\"\n                                    : \"text-muted-foreground\"\n                              }`}\n                            />\n                          </div>\n                        </div>\n                        <p\n                          className={`text-xs line-clamp-2 mb-2 ${\n                            selectedCity?.id === city.id ? \"text-white/80\" : \"text-muted-foreground\"\n                          }`}\n                        >\n                          {city.description}\n                        </p>\n                        <div className=\"flex items-center justify-between text-xs\">\n                          <div className=\"flex items-center gap-1\">\n                            <Star className=\"w-3 h-3 text-yellow-400 fill-current\" />\n                            <span className={selectedCity?.id === city.id ? \"text-white/80\" : \"text-muted-foreground\"}>\n                              {city.rating}\n                            </span>\n                          </div>\n                          <span className={selectedCity?.id === city.id ? \"text-white/80\" : \"text-muted-foreground\"}>\n                            {city.tours} tour\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Map */}\n          <div className=\"lg:col-span-3\">\n            <div className=\"bg-card rounded-2xl overflow-hidden shadow-lg relative\">\n              {isLoading && (\n                <div className=\"absolute inset-0 bg-muted/50 backdrop-blur-sm flex items-center justify-center z-50\">\n                  <div className=\"text-center\">\n                    <div className=\"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                    <p className=\"text-lg font-medium text-foreground\">Caricamento mappa...</p>\n                  </div>\n                </div>\n              )}\n              <div ref={mapContainerRef} className=\"w-full h-[600px]\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Mobile Selected City Details */}\n        {selectedCity && (\n          <div className=\"lg:hidden mt-8 bg-card rounded-2xl shadow-lg p-6\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex-1\">\n                <h3 className=\"text-xl font-bold text-foreground mb-1\">{selectedCity.name}</h3>\n                <p className=\"text-muted-foreground text-sm\">{selectedCity.description}</p>\n              </div>\n              <button\n                onClick={() => setSelectedCity(null)}\n                className=\"p-2 hover:bg-muted rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"mb-4\">\n              <img\n                src={selectedCity.image || \"/placeholder.svg\"}\n                alt={selectedCity.name}\n                className=\"w-full h-48 object-cover rounded-lg\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-3 mb-4\">\n              <div className=\"text-center p-3 bg-muted rounded-lg\">\n                <div className=\"font-bold text-orange-500\">{selectedCity.rating}</div>\n                <div className=\"text-xs text-muted-foreground\">Rating</div>\n              </div>\n              <div className=\"text-center p-3 bg-muted rounded-lg\">\n                <div className=\"font-bold text-orange-500\">{selectedCity.tours}</div>\n                <div className=\"text-xs text-muted-foreground\">Tour</div>\n              </div>\n              <div className=\"text-center p-3 bg-muted rounded-lg\">\n                <div className=\"font-bold text-orange-500\">{categoryConfig[selectedCity.category].icon}</div>\n                <div className=\"text-xs text-muted-foreground\">{categoryConfig[selectedCity.category].label}</div>\n              </div>\n            </div>\n\n            <div className=\"space-y-3\">\n              <div>\n                <h4 className=\"font-semibold text-foreground mb-2\">Highlights</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {selectedCity.highlights.map((highlight, index) => (\n                    <span key={index} className=\"px-2 py-1 bg-muted text-muted-foreground text-xs rounded-lg\">\n                      {highlight}\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <Link\n                  href={selectedCity.pageUrl}\n                  className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-orange-600 hover:to-red-700 transition-all flex items-center justify-center gap-2\"\n                >\n                  Scopri {selectedCity.name}\n                  <ArrowRight className=\"w-4 h-4\" />\n                </Link>\n                <button\n                  onClick={() => toggleFavorite(selectedCity.id)}\n                  className=\"px-4 py-3 border-2 border-orange-500 text-orange-500 rounded-xl font-semibold hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-all\"\n                >\n                  <Heart className={`w-5 h-5 ${favorites.includes(selectedCity.id) ? \"fill-current\" : \"\"}`} />\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n","size_bytes":23555},"lib/populate-database-direct.ts":{"content":"// Direct database population with upsert logic and proper error handling\nimport { firestoreService, COLLECTIONS } from './firestore';\n\n// Safe population with upsert by slug/unique identifiers\nexport async function populateDatabaseDirect() {\n  console.log('üöÄ Starting safe database population...');\n  \n  const results = {\n    cities: [] as Array<{ id: string; name: string; action: 'created' | 'updated' }>,\n    experiences: [] as Array<{ id: string; title: string; action: 'created' | 'updated' }>,\n    travels: [] as Array<{ id: string; title: string; action: 'created' | 'updated' }>,\n    blog: [] as Array<{ id: string; title: string; action: 'created' | 'updated' }>,\n    packageComponents: [] as Array<{ id: string; name: string; action: 'created' | 'updated' }>,\n    errors: [] as string[]\n  };\n\n  try {\n    // Cities data with upsert by slug - COMPLETE DATA FROM CODEBASE\n    const citiesData = [\n      {\n        name: \"Marrakech\",\n        slug: \"marrakech\",\n        title: \"La Perla Rossa\",\n        description: \"Citt√† vibrante con la famosa piazza Jemaa el-Fnaa e souks colorati\",\n        image: \"/images/marrakech-medina.png\",\n        highlights: [\"Jemaa el-Fnaa\", \"Souks\", \"Giardini Majorelle\", \"Palazzo Bahia\", \"Koutoubia\"],\n        duration: \"2-3 giorni\",\n        bestTime: \"Ottobre - Aprile\",\n        rating: 4.9,\n        reviews: 234,\n        category: 'imperial-cities' as const,\n        published: true,\n        featured: true,\n        coordinates: { lat: 31.6295, lng: -7.9811 },\n        region: \"Marrakech-Safi\",\n        population: \"928,850\"\n      },\n      {\n        name: \"F√®s\",\n        slug: \"fes\",\n        title: \"Capitale Spirituale\",\n        description: \"La medina pi√π grande del mondo e centro della cultura islamica\",\n        image: \"/images/fes-architecture.png\",\n        highlights: [\"Medina UNESCO\", \"Universit√† Al Quaraouiyine\", \"Concerie Chouara\", \"Palazzo Reale\"],\n        duration: \"2-3 giorni\",\n        bestTime: \"Marzo - Maggio, Settembre - Novembre\",\n        rating: 4.8,\n        reviews: 189,\n        category: 'imperial-cities' as const,\n        published: true,\n        featured: true,\n        coordinates: { lat: 34.0181, lng: -5.0078 },\n        region: \"F√®s-Mekn√®s\",\n        population: \"1,112,072\"\n      },\n      {\n        name: \"Casablanca\",\n        slug: \"casablanca\",\n        title: \"Capitale Economica\",\n        description: \"La capitale economica del Marocco, moderna e cosmopolita\",\n        image: \"/images/casablanca-hassan.png\",\n        highlights: [\"Moschea Hassan II\", \"Corniche\", \"Quartiere Habous\", \"Centro Moderno\"],\n        duration: \"1-2 giorni\",\n        bestTime: \"Tutto l'anno\",\n        rating: 4.5,\n        reviews: 167,\n        category: 'imperial-cities' as const,\n        published: true,\n        featured: false,\n        coordinates: { lat: 33.5731, lng: -7.5898 },\n        region: \"Casablanca-Settat\",\n        population: \"3,359,818\"\n      },\n      {\n        name: \"Rabat\",\n        slug: \"rabat\",\n        title: \"Capitale Moderna\",\n        description: \"La capitale moderna del Marocco, patrimonio UNESCO\",\n        image: \"/images/imperial-cities-tour.png\",\n        highlights: [\"Torre Hassan\", \"Kasbah Oudayas\", \"Mausoleo Mohammed V\", \"Chellah\"],\n        duration: \"1-2 giorni\",\n        bestTime: \"Tutto l'anno\",\n        rating: 4.6,\n        reviews: 143,\n        category: 'imperial-cities' as const,\n        published: true,\n        featured: false,\n        coordinates: { lat: 33.9716, lng: -6.8498 },\n        region: \"Rabat-Sal√©-K√©nitra\",\n        population: \"577,827\"\n      },\n      {\n        name: \"Chefchaouen\",\n        slug: \"chefchaouen\",\n        title: \"La Perla Blu\",\n        description: \"La perla blu del Rif, citt√† dalle case azzurre\",\n        image: \"/images/chefchaouen-blue.png\",\n        highlights: [\"Medina blu\", \"Monti del Rif\", \"Artigianato\", \"Cascate Akchour\"],\n        duration: \"1-2 giorni\",\n        bestTime: \"Aprile - Ottobre\",\n        rating: 4.9,\n        reviews: 298,\n        category: 'mountains' as const,\n        published: true,\n        featured: true,\n        coordinates: { lat: 35.1688, lng: -5.2636 },\n        region: \"Tanger-T√©touan-Al Hoceima\",\n        population: \"42,786\"\n      },\n      {\n        name: \"Essaouira\",\n        slug: \"essaouira\",\n        title: \"La Citt√† del Vento\",\n        description: \"La citt√† del vento, perla della costa atlantica\",\n        image: \"/images/essaouira-coast.png\",\n        highlights: [\"Medina UNESCO\", \"Porto\", \"Spiagge\", \"Argan\"],\n        duration: \"2-3 giorni\",\n        bestTime: \"Aprile - Ottobre\",\n        rating: 4.7,\n        reviews: 201,\n        category: 'coast' as const,\n        published: true,\n        featured: true,\n        coordinates: { lat: 31.5085, lng: -9.7595 },\n        region: \"Marrakech-Safi\",\n        population: \"77,966\"\n      },\n      {\n        name: \"Meknes\",\n        slug: \"meknes\",\n        title: \"La Versailles del Marocco\",\n        description: \"Monumenti imperiali grandiosi e atmosfera pi√π rilassata\",\n        image: \"/images/imperial-cities.png\",\n        highlights: [\"Bab Mansour\", \"Mausoleo Moulay Ismail\", \"Heri es-Souani\", \"Volubilis\"],\n        duration: \"1-2 giorni\",\n        bestTime: \"Tutto l'anno\",\n        rating: 4.7,\n        reviews: 156,\n        category: 'imperial-cities' as const,\n        published: true,\n        featured: false,\n        coordinates: { lat: 33.8730, lng: -5.5407 },\n        region: \"F√®s-Mekn√®s\",\n        population: \"632,079\"\n      }\n    ];\n\n    // Upsert cities by slug\n    for (const city of citiesData) {\n      try {\n        const existing = await firestoreService.getWhere(COLLECTIONS.cities, 'slug', '==', city.slug);\n        if (existing.length > 0) {\n          const existingCity = existing[0] as any;\n          await firestoreService.update(COLLECTIONS.cities, existingCity.id!, city);\n          results.cities.push({ id: existingCity.id!, name: city.name, action: 'updated' });\n        } else {\n          const cityId = await firestoreService.create(COLLECTIONS.cities, city);\n          results.cities.push({ id: cityId, name: city.name, action: 'created' });\n        }\n      } catch (error) {\n        results.errors.push(`City ${city.name}: ${(error as Error).message}`);\n      }\n    }\n\n    // Experiences data with upsert by title - COMPLETE DATA FROM CODEBASE\n    const experiencesData = [\n      // COOKING EXPERIENCES\n      {\n        title: \"Cucina Tradizionale\",\n        description: \"Impara a preparare i piatti iconici della cucina marocchina con chef locali\",\n        images: [\"/images/cooking-class.png\"],\n        price: 65,\n        duration: \"4 ore\",\n        category: 'cooking' as const,\n        published: true,\n        rating: 4.9,\n        reviews: 234,\n        maxParticipants: 8,\n        includes: [\"Tagine di pollo\", \"Couscous\", \"Pastilla\", \"T√® alla menta\", \"Ingredienti locali\", \"Ricette scritte\"],\n        location: \"Marrakech\"\n      },\n      {\n        title: \"Cucina Vegetariana\",\n        description: \"Scopri la ricchezza della cucina vegetariana marocchina\",\n        images: [\"/images/vegetarian-cooking.png\"],\n        price: 55,\n        duration: \"3.5 ore\",\n        category: 'cooking' as const,\n        published: true,\n        rating: 4.8,\n        reviews: 156,\n        maxParticipants: 10,\n        includes: [\"Tagine di verdure\", \"Couscous vegetariano\", \"Briouats\", \"Harira\"],\n        location: \"Marrakech\"\n      },\n      {\n        title: \"Cucina Avanzata\",\n        description: \"Perfeziona le tue abilit√† con tecniche avanzate da chef\",\n        images: [\"/images/advanced-cooking.png\"],\n        price: 120,\n        duration: \"6 ore\",\n        category: 'cooking' as const,\n        published: true,\n        rating: 4.9,\n        reviews: 89,\n        maxParticipants: 6,\n        includes: [\"Mechoui\", \"Pastilla complessa\", \"Dolci tradizionali\", \"Conserve\"],\n        location: \"Fes\"\n      },\n      // HAMMAM EXPERIENCES\n      {\n        title: \"Hammam Tradizionale\",\n        description: \"Rituale completo secondo le antiche tradizioni marocchine\",\n        images: [\"/images/traditional-hammam.jpg\"],\n        price: 45,\n        duration: \"2-3 ore\",\n        category: 'hammam' as const,\n        published: true,\n        rating: 4.9,\n        reviews: 234,\n        maxParticipants: 12,\n        includes: [\"Bagno turco\", \"Scrub con sapone nero\", \"Massaggio con guanto\", \"Maschera all'argilla\", \"T√® alla menta\"],\n        location: \"Marrakech\"\n      },\n      {\n        title: \"Hammam di Lusso\",\n        description: \"Trattamento esclusivo in ambiente raffinato con prodotti premium\",\n        images: [\"/images/luxury-hammam.jpg\"],\n        price: 120,\n        duration: \"3-4 ore\",\n        category: 'hammam' as const,\n        published: true,\n        rating: 4.8,\n        reviews: 156,\n        maxParticipants: 4,\n        includes: [\"Hammam privato\", \"Massaggio argan\", \"Trattamenti viso\", \"Prodotti biologici\", \"Refreshment gourmet\"],\n        location: \"Marrakech\"\n      },\n      {\n        title: \"Hammam di Coppia\",\n        description: \"Esperienza intima per due persone in ambiente riservato\",\n        images: [\"/images/couple-hammam.jpg\"],\n        price: 180,\n        duration: \"2.5 ore\",\n        category: 'hammam' as const,\n        published: true,\n        rating: 4.9,\n        reviews: 89,\n        maxParticipants: 2,\n        includes: [\"Hammam privato coppia\", \"Massaggio di coppia\", \"Champagne\", \"Petali di rosa\", \"Atmosfera romantica\"],\n        location: \"Essaouira\"\n      },\n      // TREKKING EXPERIENCES\n      {\n        title: \"Trekking Atlante Alto\",\n        description: \"Attraversa villaggi berberi e valli mozzafiato nel cuore dell'Alto Atlante\",\n        images: [\"/images/atlas-mountains.png\"],\n        price: 180,\n        duration: \"3-7 giorni\",\n        category: 'trekking' as const,\n        published: true,\n        rating: 4.8,\n        reviews: 167,\n        maxParticipants: 12,\n        includes: [\"Guide locali\", \"Pernottamento rifugi\", \"Muli per bagagli\", \"Pasti tradizionali\"],\n        location: \"Alto Atlante\"\n      },\n      {\n        title: \"Trekking Toubkal\",\n        description: \"Conquista la vetta pi√π alta del Nord Africa a 4.167m\",\n        images: [\"/images/toubkal-summit.png\"],\n        price: 220,\n        duration: \"2 giorni\",\n        category: 'trekking' as const,\n        published: true,\n        rating: 4.9,\n        reviews: 145,\n        maxParticipants: 8,\n        includes: [\"Guida di montagna\", \"Rifugio Toubkal\", \"Attrezzatura sicurezza\", \"Certificato sommit√†\"],\n        location: \"Imlil\"\n      },\n      // SURF EXPERIENCES\n      {\n        title: \"Surf Taghazout Principianti\",\n        description: \"Lezioni di surf per principianti nelle acque di Taghazout\",\n        images: [\"/images/essaouira-coast.png\"],\n        price: 220,\n        duration: \"4-7 giorni\",\n        category: 'surf' as const,\n        published: true,\n        rating: 4.7,\n        reviews: 198,\n        maxParticipants: 10,\n        includes: [\"Tavole e mute\", \"Istruttori certificati\", \"Spot sicuri\", \"Trasporti spiagge\"],\n        location: \"Taghazout\"\n      },\n      {\n        title: \"Surf Camp Avanzato\",\n        description: \"Perfeziona la tua tecnica negli spot leggendari di Anchor Point\",\n        images: [\"/images/surf-advanced.png\"],\n        price: 280,\n        duration: \"5-7 giorni\",\n        category: 'surf' as const,\n        published: true,\n        rating: 4.8,\n        reviews: 134,\n        maxParticipants: 6,\n        includes: [\"Spot avanzati\", \"Video analisi\", \"Coaching personalizzato\", \"Previsioni onde\"],\n        location: \"Taghazout\"\n      },\n      // PHOTOGRAPHY EXPERIENCES\n      {\n        title: \"Workshop Fotografia Deserto\",\n        description: \"Cattura la magia del deserto con fotografi professionisti\",\n        images: [\"/images/photo-tour.png\"],\n        price: 150,\n        duration: \"1-2 giorni\",\n        category: 'photography' as const,\n        published: true,\n        rating: 4.9,\n        reviews: 112,\n        maxParticipants: 8,\n        includes: [\"Coaching tecnico\", \"Golden/Blue Hour\", \"Elaborazione campo\", \"Portfolio review\"],\n        location: \"Merzouga\"\n      },\n      {\n        title: \"Street Photography Medina\",\n        description: \"Immortala la vita quotidiana nelle medine storiche\",\n        images: [\"/images/street-photography.png\"],\n        price: 80,\n        duration: \"Mezza giornata\",\n        category: 'photography' as const,\n        published: true,\n        rating: 4.7,\n        reviews: 89,\n        maxParticipants: 6,\n        includes: [\"Permessi speciali\", \"Guida locale\", \"Etica fotografica\", \"Stampe immediate\"],\n        location: \"Fes\"\n      },\n      // CRAFTS EXPERIENCES\n      {\n        title: \"Laboratorio Ceramica\",\n        description: \"Dalla lavorazione dell'argilla alla smaltatura con maestri ceramisti\",\n        images: [\"/images/moroccan-souk.png\"],\n        price: 45,\n        duration: \"2-4 ore\",\n        category: 'crafts' as const,\n        published: true,\n        rating: 4.8,\n        reviews: 234,\n        maxParticipants: 12,\n        includes: [\"Argilla locale\", \"Tornio pottery\", \"Smaltatura\", \"Cottura fornace\"],\n        location: \"Safi\"\n      },\n      {\n        title: \"Tessitura Berbera\",\n        description: \"Tappeti e tessuti su telai tradizionali con lane naturali\",\n        images: [\"/images/berber-weaving.png\"],\n        price: 65,\n        duration: \"4-6 ore\",\n        category: 'crafts' as const,\n        published: true,\n        rating: 4.9,\n        reviews: 156,\n        maxParticipants: 8,\n        includes: [\"Telaio tradizionale\", \"Lane colorate\", \"Motivi berberi\", \"Piccolo tappeto\"],\n        location: \"Tinghir\"\n      },\n      {\n        title: \"Lavorazione Pelle\",\n        description: \"Tecniche di concia naturale e cuciture artigianali\",\n        images: [\"/images/leather-crafts.png\"],\n        price: 55,\n        duration: \"3-5 ore\",\n        category: 'crafts' as const,\n        published: true,\n        rating: 4.7,\n        reviews: 98,\n        maxParticipants: 10,\n        includes: [\"Conceria tradizionale\", \"Strumenti artigiano\", \"Cuciture mano\", \"Borsa personalizzata\"],\n        location: \"Fes\"\n      }\n    ];\n\n    // Upsert experiences by title\n    for (const experience of experiencesData) {\n      try {\n        const existing = await firestoreService.getWhere(COLLECTIONS.experiences, 'title', '==', experience.title);\n        if (existing.length > 0) {\n          const existingExp = existing[0] as any;\n          // Only update if the category matches or if we're updating an existing record completely\n          await firestoreService.update(COLLECTIONS.experiences, existingExp.id!, { \n            title: experience.title,\n            description: experience.description,\n            images: experience.images,\n            price: experience.price,\n            duration: experience.duration,\n            category: experience.category,\n            published: experience.published,\n            rating: experience.rating,\n            reviews: experience.reviews,\n            maxParticipants: experience.maxParticipants,\n            includes: experience.includes,\n            location: experience.location,\n            updatedAt: new Date(), \n            createdAt: existingExp.createdAt \n          });\n          results.experiences.push({ id: existingExp.id!, title: experience.title, action: 'updated' });\n        } else {\n          const expId = await firestoreService.create(COLLECTIONS.experiences, { \n            ...experience, \n            createdAt: new Date(), \n            updatedAt: new Date() \n          });\n          results.experiences.push({ id: expId, title: experience.title, action: 'created' });\n        }\n      } catch (error) {\n        results.errors.push(`Experience ${experience.title}: ${(error as Error).message}`);\n      }\n    }\n\n    // Travels data (basic package structure)\n    const travelsData = [\n      {\n        id: 'imperial-cities-tour',\n        title: 'Tour delle Citt√† Imperiali',\n        description: 'Scopri le quattro citt√† imperiali del Marocco: Fez, Meknes, Rabat e Marrakech.',\n        duration: '8 giorni',\n        price: 1200,\n        category: 'cultural',\n        published: true,\n        featured: true,\n        images: ['/images/fez-mosque.jpg', '/images/marrakech-square.jpg'],\n        itinerary: ['Giorno 1: Arrivo a Casablanca', 'Giorno 2-3: Fez', 'Giorno 4-5: Meknes e Rabat', 'Giorno 6-8: Marrakech'],\n        includes: ['Trasporti privati', 'Guide locali', 'Pernottamenti in riad tradizionali'],\n        rating: 4.8,\n        reviews: 156\n      }\n    ];\n\n    // Blog data  \n    const blogData = [\n      {\n        title: 'Guida Completa al Viaggio in Marocco',\n        slug: 'guida-completa-viaggio-marocco',\n        excerpt: 'Tutto quello che devi sapere per organizzare il tuo primo viaggio in Marocco.',\n        content: 'Il Marocco √® una destinazione che affascina con i suoi colori, profumi e tradizioni millenarie...',\n        author: 'Morocco Dreams Team',\n        publishedAt: new Date('2024-01-15'),\n        published: true,\n        featured: true,\n        category: 'guide',\n        tags: ['viaggio', 'consigli', 'cultura'],\n        readTime: 8,\n        image: '/images/blog/morocco-guide.jpg'\n      }\n    ];\n\n    // Package components data\n    const packageComponentsData = [\n      {\n        name: \"Riad Tradizionale\",\n        type: 'accommodation' as const,\n        description: \"Riad autentico nel cuore della medina con architettura tradizionale\",\n        price: 120,\n        duration: \"per notte\",\n        capacity: 2,\n        category: \"Premium\",\n        location: \"Medina\",\n        available: true,\n        providers: [\"Riad Atlas\", \"Riad Marrakech\"],\n        inclusions: [\"Colazione tradizionale\", \"WiFi\", \"Aria condizionata\", \"Terrazza panoramica\"],\n        exclusions: [\"Pranzi\", \"Cene\", \"Bevande\"]\n      }\n    ];\n\n    // Upsert package components by name\n    for (const component of packageComponentsData) {\n      try {\n        const existing = await firestoreService.getWhere(COLLECTIONS.packageComponents, 'name', '==', component.name);\n        if (existing.length > 0) {\n          const existingComp = existing[0] as any;\n          await firestoreService.update(COLLECTIONS.packageComponents, existingComp.id!, component);\n          results.packageComponents.push({ id: existingComp.id!, name: component.name, action: 'updated' });\n        } else {\n          const compId = await firestoreService.create(COLLECTIONS.packageComponents, component);\n          results.packageComponents.push({ id: compId, name: component.name, action: 'created' });\n        }\n      } catch (error) {\n        results.errors.push(`Component ${component.name}: ${(error as Error).message}`);\n      }\n    }\n\n    // Upsert travels by title\n    for (const travel of travelsData) {\n      try {\n        const existing = await firestoreService.getWhere(COLLECTIONS.travels, 'title', '==', travel.title);\n        if (existing.length > 0) {\n          const existingTravel = existing[0] as any;\n          await firestoreService.update(COLLECTIONS.travels, existingTravel.id!, travel);\n          results.travels.push({ id: existingTravel.id!, title: travel.title, action: 'updated' });\n        } else {\n          const travelId = await firestoreService.create(COLLECTIONS.travels, travel);\n          results.travels.push({ id: travelId, title: travel.title, action: 'created' });\n        }\n      } catch (error) {\n        results.errors.push(`Travel ${travel.title}: ${(error as Error).message}`);\n      }\n    }\n\n    // Upsert blog posts by slug\n    for (const post of blogData) {\n      try {\n        const existing = await firestoreService.getWhere(COLLECTIONS.blog, 'slug', '==', post.slug);\n        if (existing.length > 0) {\n          const existingPost = existing[0] as any;\n          await firestoreService.update(COLLECTIONS.blog, existingPost.id!, post);\n          results.blog.push({ id: existingPost.id!, title: post.title, action: 'updated' });\n        } else {\n          const postId = await firestoreService.create(COLLECTIONS.blog, post);\n          results.blog.push({ id: postId, title: post.title, action: 'created' });\n        }\n      } catch (error) {\n        results.errors.push(`Blog ${post.title}: ${(error as Error).message}`);\n      }\n    }\n\n    return {\n      success: true,\n      message: 'Database popolato con successo!',\n      results,\n      summary: {\n        cities: results.cities.length,\n        experiences: results.experiences.length,\n        travels: results.travels.length,\n        blog: results.blog.length,\n        packageComponents: results.packageComponents.length,\n        errors: results.errors.length\n      }\n    };\n\n  } catch (error) {\n    console.error('Error populating database:', error);\n    return {\n      success: false,\n      error: 'Errore durante la popolazione del database',\n      details: error\n    };\n  }\n}","size_bytes":20783},"lib/translations.ts":{"content":"// Multi-language support system for Morocco Dreams\nexport type Language = 'it' | 'en' | 'ar' | 'ru' | 'zh';\n\nexport const languages = {\n  it: 'Italiano',\n  en: 'English', \n  ar: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',\n  ru: '–†—É—Å—Å–∫–∏–π',\n  zh: '‰∏≠Êñá'\n};\n\nexport const translations = {\n  it: {\n    'nav.home': 'Home',\n    'nav.travels': 'Viaggi',\n    'nav.experiences': 'Esperienze',\n    'nav.about': 'Chi Siamo',\n    'nav.contact': 'Contatti',\n    'hero.title': 'Scopri il Marocco Autentico',\n    'hero.subtitle': 'Viaggi indimenticabili nelle terre del Maghreb',\n    'button.plan_trip': 'Pianifica il Tuo Viaggio',\n    'button.add_to_cart': 'Aggiungi al Carrello',\n    'cart.title': 'Il Tuo Carrello',\n    'dashboard.title': 'La Mia Dashboard'\n  },\n  en: {\n    'nav.home': 'Home',\n    'nav.travels': 'Travels',\n    'nav.experiences': 'Experiences', \n    'nav.about': 'About Us',\n    'nav.contact': 'Contact',\n    'hero.title': 'Discover Authentic Morocco',\n    'hero.subtitle': 'Unforgettable journeys in Maghreb lands',\n    'button.plan_trip': 'Plan Your Trip',\n    'button.add_to_cart': 'Add to Cart',\n    'cart.title': 'Your Cart',\n    'dashboard.title': 'My Dashboard'\n  },\n  ar: {\n    'nav.home': 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',\n    'nav.travels': 'ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™',\n    'nav.experiences': 'ÿßŸÑÿ™ÿ¨ÿßÿ±ÿ®',\n    'nav.about': 'ŸÖŸÜ ŸÜÿ≠ŸÜ',\n    'nav.contact': 'ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß',\n    'hero.title': 'ÿßŸÉÿ™ÿ¥ŸÅ ÿßŸÑŸÖÿ∫ÿ±ÿ® ÿßŸÑÿ£ÿµŸäŸÑ',\n    'hero.subtitle': 'ÿ±ÿ≠ŸÑÿßÿ™ ŸÑÿß ÿ™ŸèŸÜÿ≥Ÿâ ŸÅŸä ÿ£ÿ±ÿßÿ∂Ÿä ÿßŸÑŸÖÿ∫ÿ±ÿ® ÿßŸÑÿπÿ±ÿ®Ÿä',\n    'button.plan_trip': 'ÿÆÿ∑ÿ∑ ŸÑÿ±ÿ≠ŸÑÿ™ŸÉ',\n    'button.add_to_cart': 'ÿ£ÿ∂ŸÅ ŸÑŸÑÿ≥ŸÑÿ©',\n    'cart.title': 'ÿ≥ŸÑÿ© ÿßŸÑÿ™ÿ≥ŸàŸÇ',\n    'dashboard.title': 'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ'\n  },\n  ru: {\n    'nav.home': '–ì–ª–∞–≤–Ω–∞—è',\n    'nav.travels': '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',\n    'nav.experiences': '–í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è',\n    'nav.about': '–û –Ω–∞—Å',\n    'nav.contact': '–ö–æ–Ω—Ç–∞–∫—Ç—ã',\n    'hero.title': '–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ø–æ–¥–ª–∏–Ω–Ω–æ–µ –ú–∞—Ä–æ–∫–∫–æ',\n    'hero.subtitle': '–ù–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –∑–µ–º–ª—è–º –ú–∞–≥—Ä–∏–±–∞',\n    'button.plan_trip': '–ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–µ–∑–¥–∫—É',\n    'button.add_to_cart': '–í –∫–æ—Ä–∑–∏–Ω—É',\n    'cart.title': '–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞',\n    'dashboard.title': '–ú–æ—è –ø–∞–Ω–µ–ª—å'\n  },\n  zh: {\n    'nav.home': 'È¶ñÈ°µ',\n    'nav.travels': 'ÊóÖË°å',\n    'nav.experiences': '‰ΩìÈ™å',\n    'nav.about': 'ÂÖ≥‰∫éÊàë‰ª¨',\n    'nav.contact': 'ËÅîÁ≥ªÊàë‰ª¨',\n    'hero.title': 'ÂèëÁé∞ÁúüÊ≠£ÁöÑÊë©Ê¥õÂì•',\n    'hero.subtitle': 'È©¨Ê†ºÈáåÂ∏ÉÂúüÂú∞‰∏äÁöÑÈöæÂøò‰πãÊóÖ',\n    'button.plan_trip': 'ËÆ°ÂàíÊÇ®ÁöÑÊóÖË°å',\n    'button.add_to_cart': 'Ê∑ªÂä†Âà∞Ë¥≠Áâ©ËΩ¶',\n    'cart.title': 'ÊÇ®ÁöÑË¥≠Áâ©ËΩ¶',\n    'dashboard.title': 'ÊàëÁöÑ‰ª™Ë°®Êùø'\n  }\n};\n\nexport const useTranslation = (language: Language = 'it') => {\n  const t = (key: string): string => {\n    return translations[language][key] || translations.it[key] || key;\n  };\n\n  return { t };\n};","size_bytes":2947},"app/dashboard/page.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport ProtectedRoute from '@/components/auth/ProtectedRoute';\nimport { Home, Calendar, Heart, User, LogOut, Menu, X, Users, Share2 } from 'lucide-react';\nimport UserOverview from '@/components/dashboard/UserOverview';\nimport UserBookings from '@/components/dashboard/UserBookings';\nimport UserWishlist from '@/components/dashboard/UserWishlist';\nimport UserProfile from '@/components/dashboard/UserProfile';\nimport { NotificationCenter } from '@/components/NotificationSystem';\nimport FriendCodeCard from '@/components/dashboard/FriendCodeCard';\nimport AddFriendForm from '@/components/dashboard/AddFriendForm';\nimport FriendRequests from '@/components/dashboard/FriendRequests';\nimport FriendsList from '@/components/dashboard/FriendsList';\nimport SharedCollections from '@/components/dashboard/SharedCollections';\nimport FriendNotifications from '@/components/dashboard/FriendNotifications';\n\nfunction UserDashboardContent() {\n  const { user, userProfile, signOut, isAdmin, loading } = useAuth();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  // Redirect admin users to the unified /admin dashboard\n  useEffect(() => {\n    // Only redirect after auth loading is complete\n    if (!loading && isAdmin) {\n      router.replace('/admin');\n    }\n  }, [isAdmin, loading, router]);\n\n  // Show loading state while checking admin status\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Caricamento dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Read tab from URL query params on mount\n  useEffect(() => {\n    const tabParam = searchParams.get('tab');\n    if (tabParam) {\n      setActiveTab(tabParam);\n    }\n  }, [searchParams]);\n\n  const navigation = [\n    { id: \"overview\", name: \"Panoramica\", icon: Home },\n    { id: \"wishlist\", name: \"Lista Desideri\", icon: Heart },\n    { id: \"friends\", name: \"Amici\", icon: Users },\n    { id: \"shared\", name: \"Condivisioni\", icon: Share2 },\n    { id: \"bookings\", name: \"Le Mie Prenotazioni\", icon: Calendar },\n    { id: \"profile\", name: \"Il Mio Profilo\", icon: User },\n  ];\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      router.push('/');\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  const handleViewWishlist = (friendId: string, friendName: string) => {\n    setActiveTab(\"shared\");\n  };\n\n  const renderActiveComponent = () => {\n    switch (activeTab) {\n      case \"overview\":\n        return <UserOverview />;\n      case \"wishlist\":\n        return <UserWishlist />;\n      case \"friends\":\n        return (\n          <div className=\"space-y-8\">\n            <FriendCodeCard />\n            <AddFriendForm />\n            <FriendRequests />\n            <FriendsList onViewWishlist={handleViewWishlist} />\n          </div>\n        );\n      case \"shared\":\n        return <SharedCollections />;\n      case \"bookings\":\n        return <UserBookings />;\n      case \"profile\":\n        return <UserProfile />;\n      default:\n        return <UserOverview />;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Mobile sidebar overlay */}\n      {sidebarOpen && (\n        <div className=\"fixed inset-0 z-40 lg:hidden\">\n          <div className=\"absolute inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\n          <div className=\"absolute left-0 top-0 h-full w-64 bg-card shadow-lg\">\n            <div className=\"flex items-center justify-between p-4 border-b border-border\">\n              <h2 className=\"text-lg font-semibold text-card-foreground\">Dashboard</h2>\n              <button\n                onClick={() => setSidebarOpen(false)}\n                className=\"p-2 hover:bg-accent/10 rounded-lg\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            <nav className=\"p-4 space-y-2\">\n              {navigation.map((item) => (\n                <button\n                  key={item.id}\n                  onClick={() => {\n                    setActiveTab(item.id);\n                    setSidebarOpen(false);\n                  }}\n                  className={`w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-colors ${\n                    activeTab === item.id\n                      ? \"bg-primary/10 text-primary\"\n                      : \"text-muted-foreground hover:bg-accent/10\"\n                  }`}\n                >\n                  <item.icon className=\"w-5 h-5\" />\n                  <span className=\"font-medium\">{item.name}</span>\n                </button>\n              ))}\n              <div className=\"pt-4 border-t border-border\">\n                <button\n                  onClick={handleSignOut}\n                  className=\"w-full flex items-center space-x-3 px-4 py-3 text-destructive hover:bg-destructive/10 rounded-xl transition-colors\"\n                >\n                  <LogOut className=\"w-5 h-5\" />\n                  <span className=\"font-medium\">Esci</span>\n                </button>\n              </div>\n            </nav>\n          </div>\n        </div>\n      )}\n\n      {/* Header */}\n      <div className=\"bg-card border-b border-border\">\n        <div className=\"px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => setSidebarOpen(true)}\n                className=\"lg:hidden p-2 hover:bg-accent/10 rounded-lg\"\n              >\n                <Menu className=\"w-5 h-5\" />\n              </button>\n              <h1 className=\"text-xl font-bold text-card-foreground\">\n                La Mia Dashboard\n              </h1>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <NotificationCenter />\n              <div className=\"hidden sm:block text-sm text-muted-foreground\">\n                Benvenuto, {userProfile?.displayName || user?.email}\n              </div>\n              <div className=\"w-8 h-8 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white text-sm font-semibold\">\n                {userProfile?.displayName?.charAt(0)?.toUpperCase() || user?.email?.charAt(0)?.toUpperCase()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex\">\n        {/* Desktop Sidebar */}\n        <div className=\"hidden lg:block w-64 bg-card border-r border-border min-h-screen\">\n          <nav className=\"p-4 space-y-2\">\n            {navigation.map((item) => (\n              <button\n                key={item.id}\n                onClick={() => setActiveTab(item.id)}\n                className={`w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-colors ${\n                  activeTab === item.id\n                    ? \"bg-primary/10 text-primary\"\n                    : \"text-muted-foreground hover:bg-accent/10\"\n                }`}\n              >\n                <item.icon className=\"w-5 h-5\" />\n                <span className=\"font-medium\">{item.name}</span>\n              </button>\n            ))}\n            \n            <div className=\"pt-4 border-t border-border\">\n              <button\n                onClick={handleSignOut}\n                className=\"w-full flex items-center space-x-3 px-4 py-3 text-destructive hover:bg-destructive/10 rounded-xl transition-colors\"\n              >\n                <LogOut className=\"w-5 h-5\" />\n                <span className=\"font-medium\">Esci</span>\n              </button>\n            </div>\n          </nav>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 p-4 lg:p-8\">\n          {renderActiveComponent()}\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\nexport default function UserDashboard() {\n  return (\n    <ProtectedRoute>\n      <UserDashboardContent />\n    </ProtectedRoute>\n  );\n}","size_bytes":8417},"app/blog/page.tsx":{"content":"\"use client\"\n\nimport { Calendar, User, Clock, ArrowRight, Tag, Search, TrendingUp, Eye, MessageCircle, Share2, Bookmark } from 'lucide-react'\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport WishlistButton from \"@/components/WishlistButton\"\nimport { useContent } from \"@/hooks/useContent\"\nimport { LoadingSkeleton } from \"@/components/ui/loading-skeleton\"\nimport { ErrorMessage } from \"@/components/ui/error-message\"\n\nexport default function BlogPage() {\n  const { items: blogPosts, loading, error, refetch } = useContent({ type: 'blog' })\n  const featuredPost = {\n    id: 1,\n    title: \"Guida Completa al Viaggio in Marocco: Tutto quello che Devi Sapere nel 2024\",\n    excerpt: \"Una guida dettagliata e aggiornata per pianificare il tuo primo viaggio in Marocco, con consigli pratici, itinerari consigliati, informazioni essenziali su visti, clima, cultura e molto altro ancora.\",\n    image: \"/images/blog/morocco-complete-guide.png\",\n    author: \"Ahmed El Fassi\",\n    date: \"15 Gennaio 2024\",\n    readTime: \"12 min\",\n    category: \"Guide di Viaggio\",\n    tags: [\"Marocco\", \"Guida\", \"Consigli\", \"Pianificazione\", \"Cultura\"],\n    featured: true,\n    views: 15420,\n    comments: 89,\n  }\n\n  const categories = [\n    { name: \"Guide di Viaggio\", count: 15, color: \"bg-orange-500\", description: \"Consigli pratici e itinerari\" },\n    { name: \"Gastronomia\", count: 12, color: \"bg-orange-500\", description: \"Cucina e tradizioni culinarie\" },\n    { name: \"Cultura\", count: 18, color: \"bg-purple-500\", description: \"Tradizioni e storia marocchina\" },\n    { name: \"Avventura\", count: 9, color: \"bg-green-500\", description: \"Trekking e attivit√† outdoor\" },\n    { name: \"Benessere\", count: 7, color: \"bg-pink-500\", description: \"Hammam e relax\" },\n    { name: \"Shopping\", count: 5, color: \"bg-yellow-500\", description: \"Souks e artigianato\" },\n    { name: \"Mare\", count: 8, color: \"bg-orange-500\", description: \"Spiagge e costa atlantica\" },\n    { name: \"Montagna\", count: 6, color: \"bg-emerald-500\", description: \"Atlante e natura\" },\n  ]\n\n  const popularTags = [\n    \"Marocco\", \"Marrakech\", \"Fes\", \"Sahara\", \"Cucina\", \"Hammam\", \"Trekking\", \"Souks\", \"Tradizioni\", \"Consigli\", \"Atlante\", \"Deserto\"\n  ]\n\n  const recentPosts = [\n    {\n      id: 10,\n      title: \"Come Vestirsi in Marocco: Guida al Dress Code\",\n      date: \"20 Gennaio 2024\",\n      views: 3240,\n    },\n    {\n      id: 11,\n      title: \"I Migliori Riad di Marrakech per Ogni Budget\",\n      date: \"18 Gennaio 2024\",\n      views: 5670,\n    },\n    {\n      id: 12,\n      title: \"Trasporti in Marocco: Treni, Bus e Taxi\",\n      date: \"16 Gennaio 2024\",\n      views: 4320,\n    },\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 lg:py-32 bg-gradient-to-r from-indigo-600 to-purple-600 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <Image \n            src=\"/images/blog/morocco-blog-hero.png\" \n            alt=\"Blog Morocco Dreams\" \n            fill\n            className=\"object-cover opacity-30\" \n          />\n          <div className=\"absolute inset-0 bg-black/40\" />\n        </div>\n\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6\">\n            Blog\n            <span className=\"block text-3xl md:text-4xl lg:text-5xl mt-2 bg-gradient-to-r from-indigo-300 to-purple-200 bg-clip-text text-transparent\">\n              Morocco Dreams\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto mb-8\">\n            Storie, consigli e guide per scoprire il Marocco autentico attraverso gli occhi di chi lo vive ogni giorno\n          </p>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">‚úì Guide Esperte</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">‚úì Consigli Pratici</span>\n            </div>\n            <div className=\"bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">‚úì Storie Autentiche</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Contact Banner */}\n      <ContactBanner title=\"Domande sui nostri viaggi?\" subtitle=\"Scrivici: ti consigliamo l‚Äôitinerario perfetto.\" />\n\n      {/* Search and Filters */}\n      <div className=\"py-8 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col lg:flex-row gap-4 items-center justify-between\">\n            {/* Search Bar */}\n            <div className=\"relative flex-1 max-w-md\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Cerca articoli, destinazioni, consigli...\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n              />\n            </div>\n\n            {/* Category Filter */}\n            <div className=\"flex flex-wrap gap-2\">\n              <button className=\"px-4 py-2 bg-indigo-500 text-white rounded-full text-sm font-medium hover:bg-indigo-600 transition-colors\">\n                Tutti gli Articoli\n              </button>\n              {categories.slice(0, 4).map((category) => (\n                <button\n                  key={category.name}\n                  className=\"px-4 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-full text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors\"\n                >\n                  {category.name}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Featured Post */}\n      <div className=\"py-16 lg:py-24 bg-white dark:bg-gray-900\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-4\">\n              Articolo in Evidenza\n            </h2>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300\">\n              Il nostro articolo pi√π letto e apprezzato dai viaggiatori\n            </p>\n          </div>\n\n          <div className=\"bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-2xl hover:shadow-3xl transition-all duration-500\">\n            <div className=\"grid lg:grid-cols-2 gap-0\">\n              <div className=\"relative h-64 lg:h-full overflow-hidden\">\n                <Image\n                  src={featuredPost.image || \"/placeholder.svg\"}\n                  alt={featuredPost.title}\n                  fill\n                  className=\"object-cover hover:scale-105 transition-transform duration-500\"\n                />\n                <div className=\"absolute top-4 left-4 bg-indigo-500 px-4 py-2 rounded-full\">\n                  <span className=\"text-white text-sm font-semibold\">‚ú® In Evidenza</span>\n                </div>\n                \n                {/* Wishlist Button - top right */}\n                <div className=\"absolute top-4 right-4 z-10\">\n                  <WishlistButton\n                    itemId={`blog-${featuredPost.id}`}\n                    itemType=\"activity\"\n                    itemTitle={featuredPost.title}\n                    itemImage={featuredPost.image}\n                    itemDescription={featuredPost.excerpt}\n                  />\n                </div>\n                <div className=\"absolute bottom-4 left-4 flex items-center space-x-4\">\n                  <div className=\"bg-black/50 backdrop-blur-sm px-3 py-1 rounded-full flex items-center space-x-1\">\n                    <Eye className=\"w-4 h-4 text-white\" />\n                    <span className=\"text-white text-sm\">{featuredPost.views.toLocaleString()}</span>\n                  </div>\n                  <div className=\"bg-black/50 backdrop-blur-sm px-3 py-1 rounded-full flex items-center space-x-1\">\n                    <MessageCircle className=\"w-4 h-4 text-white\" />\n                    <span className=\"text-white text-sm\">{featuredPost.comments}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"p-8 lg:p-12 flex flex-col justify-center\">\n                <div className=\"flex items-center space-x-4 mb-4\">\n                  <span className=\"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 px-3 py-1 rounded-full text-sm font-medium\">\n                    {featuredPost.category}\n                  </span>\n                  <div className=\"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>{featuredPost.readTime}</span>\n                  </div>\n                </div>\n\n                <h3 className=\"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-4 leading-tight\">\n                  {featuredPost.title}\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed\">\n                  {featuredPost.excerpt}\n                </p>\n\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center\">\n                      <User className=\"w-5 h-5 text-indigo-600 dark:text-indigo-400\" />\n                    </div>\n                    <div>\n                      <p className=\"font-semibold text-gray-900 dark:text-white\">{featuredPost.author}</p>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">{featuredPost.date}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <button className=\"p-2 text-gray-400 hover:text-indigo-600 transition-colors\">\n                      <Bookmark className=\"w-5 h-5\" />\n                    </button>\n                    <button className=\"p-2 text-gray-400 hover:text-indigo-600 transition-colors\">\n                      <Share2 className=\"w-5 h-5\" />\n                    </button>\n                  </div>\n                </div>\n\n                <Link\n                  href={`/blog/${featuredPost.id}`}\n                  className=\"inline-flex items-center space-x-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-6 py-3 rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 font-semibold group\"\n                >\n                  <span>Leggi l'articolo completo</span>\n                  <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform duration-300\" />\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Blog Posts Grid */}\n      <div className=\"py-16 lg:py-24 bg-gray-50 dark:bg-gray-800\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid lg:grid-cols-4 gap-8\">\n            {/* Main Content */}\n            <div className=\"lg:col-span-3\">\n              <div className=\"mb-8\">\n                <h2 className=\"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-4\">\n                  Ultimi Articoli\n                </h2>\n                <p className=\"text-gray-600 dark:text-gray-300\">\n                  Scopri le nostre guide pi√π recenti e i consigli aggiornati per il tuo viaggio in Marocco\n                </p>\n              </div>\n\n              {loading ? (\n                <LoadingSkeleton count={4} />\n              ) : error ? (\n                <ErrorMessage error={error} retry={refetch} />\n              ) : (\n                <>\n                  <div className=\"grid md:grid-cols-2 gap-8\">\n                    {blogPosts.map((post) => {\n                      const metadata = post.metadata || {}\n                      const tags = metadata.tags || []\n                      const readingMinutes = metadata.readingMinutes || '5'\n                      \n                      return (\n                        <article\n                          key={post.slug}\n                          className=\"bg-white dark:bg-gray-900 rounded-2xl overflow-hidden border border-gray-200/60 dark:border-gray-800 hover:shadow-lg transition\"\n                        >\n                          <Link href={`/blog/${post.slug}`}>\n                            <div className=\"relative aspect-[16/9] overflow-hidden\">\n                              <img src={post.image || \"/placeholder.svg\"} alt={post.title} className=\"w-full h-full object-cover hover:scale-105 transition-transform duration-500\" />\n                              \n                              {/* Wishlist Button - top left */}\n                              <div className=\"absolute top-2 left-2 z-10\" onClick={(e) => e.preventDefault()}>\n                                <WishlistButton\n                                  itemId={`blog-${post.slug}`}\n                                  itemType=\"activity\"\n                                  itemTitle={post.title}\n                                  itemImage={post.image || undefined}\n                                  itemDescription={post.description || undefined}\n                                />\n                              </div>\n                            </div>\n                          </Link>\n                          <div className=\"p-6\">\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                              {post.publishedAt ? new Date(post.publishedAt).toLocaleDateString(\"it-IT\") : new Date(post.createdAt).toLocaleDateString(\"it-IT\")} ‚Ä¢ {readingMinutes} min\n                            </div>\n                            <h2 className=\"text-xl font-bold mb-2\">\n                              <Link href={`/blog/${post.slug}`}>{post.title}</Link>\n                            </h2>\n                            <p className=\"text-gray-600 dark:text-gray-300 mb-4\">{post.description}</p>\n                            <div className=\"flex gap-2 flex-wrap\">\n                              {tags.map((t: string) => (\n                                <span key={t} className=\"text-xs px-2 py-1 rounded-full bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-300\">\n                                  {t}\n                                </span>\n                              ))}\n                            </div>\n                          </div>\n                        </article>\n                      )\n                    })}\n                  </div>\n\n                  {blogPosts.length === 0 && (\n                    <div className=\"text-center py-12\">\n                      <p className=\"text-gray-600 dark:text-gray-400 text-lg\">\n                        Nessun articolo disponibile al momento. Torna presto per nuovi contenuti!\n                      </p>\n                    </div>\n                  )}\n                </>\n              )}\n\n              {/* Load More */}\n              <div className=\"text-center mt-12\">\n                <button className=\"bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-8 py-4 rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 font-semibold hover:scale-105\">\n                  Carica Altri Articoli\n                </button>\n              </div>\n            </div>\n\n            {/* Sidebar */}\n            <div className=\"lg:col-span-1 space-y-8\">\n              {/* Categories */}\n              <div className=\"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg\">\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center\">\n                  <Tag className=\"w-5 h-5 mr-2 text-indigo-500\" />\n                  Categorie\n                </h3>\n                <div className=\"space-y-3\">\n                  {categories.map((category) => (\n                    <Link\n                      key={category.name}\n                      href={`/blog/categoria/${category.name.toLowerCase().replace(/\\s+/g, '-')}`}\n                      className=\"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`w-3 h-3 ${category.color} rounded-full`} />\n                        <div>\n                          <span className=\"text-gray-700 dark:text-gray-300 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 font-medium\">\n                            {category.name}\n                          </span>\n                          <div className=\"text-xs text-gray-500 dark:text-gray-400\">{category.description}</div>\n                        </div>\n                      </div>\n                      <span className=\"text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full\">\n                        {category.count}\n                      </span>\n                    </Link>\n                  ))}\n                </div>\n              </div>\n\n              {/* Popular Tags */}\n              <div className=\"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg\">\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center\">\n                  <TrendingUp className=\"w-5 h-5 mr-2 text-indigo-500\" />\n                  Tag Popolari\n                </h3>\n                <div className=\"flex flex-wrap gap-2\">\n                  {popularTags.map((tag) => (\n                    <Link\n                      key={tag}\n                      href={`/blog/tag/${tag.toLowerCase()}`}\n                      className=\"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full text-sm hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors\"\n                    >\n                      #{tag}\n                    </Link>\n                  ))}\n                </div>\n              </div>\n\n              {/* Recent Posts */}\n              <div className=\"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg\">\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-4\">\n                  Articoli Recenti\n                </h3>\n                <div className=\"space-y-4\">\n                  {recentPosts.map((post) => (\n                    <Link\n                      key={post.id}\n                      href={`/blog/${post.id}`}\n                      className=\"block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group\"\n                    >\n                      <h4 className=\"font-medium text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 mb-2 line-clamp-2\">\n                        {post.title}\n                      </h4>\n                      <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400\">\n                        <span>{post.date}</span>\n                        <div className=\"flex items-center space-x-1\">\n                          <Eye className=\"w-3 h-3\" />\n                          <span>{post.views.toLocaleString()}</span>\n                        </div>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              </div>\n\n              {/* Newsletter */}\n              <div className=\"bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl p-6 text-white\">\n                <h3 className=\"text-lg font-bold mb-3\">üìß Newsletter</h3>\n                <p className=\"text-sm mb-4 text-indigo-100\">\n                  Ricevi i nostri ultimi articoli, consigli di viaggio e offerte esclusive direttamente nella tua email\n                </p>\n                <div className=\"space-y-3\">\n                  <input\n                    type=\"email\"\n                    placeholder=\"La tua email\"\n                    className=\"w-full px-4 py-3 rounded-lg text-gray-900 focus:ring-2 focus:ring-white focus:outline-none\"\n                  />\n                  <button className=\"w-full bg-white text-indigo-600 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors\">\n                    Iscriviti Gratis\n                  </button>\n                </div>\n                <p className=\"text-xs text-indigo-200 mt-3\">\n                  Niente spam, solo contenuti di qualit√†. Cancellati quando vuoi.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-16 lg:py-24 bg-white dark:bg-gray-900\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-6\">\n            Pronto per il Tuo Viaggio in Marocco?\n          </h2>\n          <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto\">\n            Dopo aver letto le nostre guide, √® il momento di trasformare i tuoi sogni in realt√†. Pianifica il tuo viaggio perfetto con noi!\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/viaggi/su-misura\"\n              className=\"bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-8 py-4 rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all duration-300 font-semibold text-lg hover:scale-105\"\n            >\n              Pianifica il Tuo Viaggio\n            </Link>\n            <Link\n              href=\"/contatti\"\n              className=\"border-2 border-indigo-500 text-indigo-500 px-8 py-4 rounded-xl hover:bg-indigo-500 hover:text-white transition-all duration-300 font-semibold text-lg\"\n            >\n              Parla con un Esperto\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":22634},"app/esperienze/page.tsx":{"content":"\"use client\";\n\nimport Link from \"next/link\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport { Mountain, Waves, Hammer } from \"lucide-react\"\nimport { ExperienceCard } from \"@/components/cards/ExperienceCard\"\nimport { useContent } from \"@/hooks/useContent\"\nimport { LoadingSkeleton } from \"@/components/ui/loading-skeleton\"\nimport { ErrorMessage } from \"@/components/ui/error-message\"\n\nconst iconMap: Record<string, any> = {\n  'trekking': Mountain,\n  'surf': Waves,\n  'artigianato': Hammer,\n};\n\nexport default function EsperienzeIndexPage() {\n  const { items: experiences, loading, error, refetch } = useContent({ type: 'experience' })\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n        <ContactBanner\n          title=\"Vuoi prenotare un'esperienza?\"\n          subtitle=\"Contattaci subito: progettiamo tutto su misura per te.\"\n        />\n        <section className=\"relative py-16 lg:py-24 bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <header className=\"text-center max-w-3xl mx-auto mb-12\">\n              <h1 className=\"text-4xl lg:text-5xl font-bold mb-6 text-gray-900 dark:text-white\">\n                Esperienze Autentiche in Marocco\n              </h1>\n              <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300\">\n                Scegli tra attivit√† uniche per vivere il Marocco come un locale. Ogni esperienza √® guidata da esperti\n                locali e progettata per offrirti momenti indimenticabili.\n              </p>\n            </header>\n            <LoadingSkeleton count={4} />\n          </div>\n        </section>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n        <ContactBanner\n          title=\"Vuoi prenotare un'esperienza?\"\n          subtitle=\"Contattaci subito: progettiamo tutto su misura per te.\"\n        />\n        <section className=\"relative py-16 lg:py-24 bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <ErrorMessage error={error} retry={refetch} />\n          </div>\n        </section>\n      </div>\n    );\n  }\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n      <ContactBanner\n        title=\"Vuoi prenotare un'esperienza?\"\n        subtitle=\"Contattaci subito: progettiamo tutto su misura per te.\"\n      />\n\n      {/* Hero Section */}\n      <section className=\"relative py-16 lg:py-24 bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <header className=\"text-center max-w-3xl mx-auto mb-12\">\n            <h1 className=\"text-4xl lg:text-5xl font-bold mb-6 text-gray-900 dark:text-white\">\n              Esperienze Autentiche in Marocco\n            </h1>\n            <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300\">\n              Scegli tra attivit√† uniche per vivere il Marocco come un locale. Ogni esperienza √® guidata da esperti\n              locali e progettata per offrirti momenti indimenticabili.\n            </p>\n          </header>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-10\">\n            {experiences.map((exp) => {\n              const IconComponent = iconMap[exp.slug] || Mountain;\n              \n              return (\n                <ExperienceCard\n                  key={exp.id}\n                  id={exp.id || exp.slug}\n                  image={exp.image || \"/placeholder.svg?height=400&width=600\"}\n                  title={exp.title}\n                  description={exp.description || undefined}\n                  price={exp.price || undefined}\n                  duration={exp.duration || 'Varia'}\n                  quickInfo={[\n                    {\n                      icon: IconComponent,\n                      label: exp.category || 'Esperienza',\n                      value: exp.category || ''\n                    }\n                  ]}\n                  ctas={[\n                    { \n                      label: 'Scopri i dettagli', \n                      href: `/esperienze/${exp.slug}`, \n                      variant: 'secondary' \n                    },\n                    { \n                      label: 'Prenota ora', \n                      href: '/contatti', \n                      variant: 'primary' \n                    }\n                  ]}\n                />\n              );\n            })}\n          </div>\n        </div>\n      </section>\n\n      {/* Why Choose Our Experiences */}\n      <section className=\"py-16 lg:py-24 bg-gray-50 dark:bg-gray-900\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-4\">\n              Perch√© Scegliere le Nostre Esperienze\n            </h2>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\n              Ogni esperienza √® curata nei minimi dettagli per garantirti autenticit√† e sicurezza\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8\">\n            {[\n              {\n                title: \"Guide Locali Esperte\",\n                description: \"Accompagnatori certificati che conoscono ogni segreto del territorio\",\n                icon: \"üë®‚Äçüè´\",\n              },\n              {\n                title: \"Piccoli Gruppi\",\n                description: \"Massimo 8 persone per garantire un'esperienza personalizzata\",\n                icon: \"üë•\",\n              },\n              {\n                title: \"Assistenza 24/7\",\n                description: \"Supporto continuo durante tutta l'esperienza via WhatsApp\",\n                icon: \"üìû\",\n              },\n            ].map((feature, idx) => (\n              <div key={idx} className=\"text-center p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg\">\n                <div className=\"text-4xl mb-4\">{feature.icon}</div>\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-3\">{feature.title}</h3>\n                <p className=\"text-gray-600 dark:text-gray-300\">{feature.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"py-16 lg:py-24 bg-white dark:bg-gray-950\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-6\">\n            Pronto per la Tua Prossima Avventura?\n          </h2>\n          <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto\">\n            Contattaci per personalizzare la tua esperienza o per ricevere consigli sui migliori periodi per ogni\n            attivit√†.\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/contatti\"\n              className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-lg\"\n            >\n              Pianifica la Tua Esperienza\n            </Link>\n            <a\n              href=\"https://wa.me/393292333370?text=Ciao! Vorrei informazioni sulle esperienze in Marocco.\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"border-2 border-orange-500 text-orange-500 px-8 py-4 rounded-xl hover:bg-orange-500 hover:text-white transition-all duration-300 font-semibold text-lg\"\n            >\n              Scrivici su WhatsApp\n            </a>\n          </div>\n        </div>\n      </section>\n    </div>\n  )\n}\n","size_bytes":7935},"components/admin/ExperienceEditModal.tsx":{"content":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { X, Save, Loader2 } from 'lucide-react'\nimport VisualEditor from './VisualEditor'\nimport { useNotifications } from '../NotificationSystem'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface ExperienceEditModalProps {\n  isOpen: boolean\n  onClose: () => void\n  experience: any\n  onSave?: () => void\n  onRefreshData?: () => void\n}\n\nexport default function ExperienceEditModal({ \n  isOpen, \n  onClose, \n  experience, \n  onSave,\n  onRefreshData \n}: ExperienceEditModalProps) {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [saving, setSaving] = useState(false)\n  const [editingBlocks, setEditingBlocks] = useState<any[]>([])\n\n  useEffect(() => {\n    if (experience && isOpen) {\n      // Initialize blocks from experience data\n      setEditingBlocks(experience.content || [])\n    }\n  }, [experience, isOpen])\n\n  const handleSave = async (blocks: any[]) => {\n    if (!experience || !user) return\n\n    setSaving(true)\n    try {\n      const token = await user.getIdToken()\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n      \n      const response = await fetch(`/api/experiences/${experience.id}`, {\n        method: 'PUT',\n        headers,\n        body: JSON.stringify({\n          ...experience,\n          content: blocks,\n          updatedAt: new Date().toISOString()\n        })\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to save experience')\n      }\n\n      // Success feedback\n      showSuccess('Salvata', 'Esperienza salvata con successo!')\n      onSave?.()\n      onRefreshData && onRefreshData()\n      onClose()\n    } catch (error) {\n      console.error('Error saving experience:', error)\n      showError('Errore', 'Errore nel salvataggio dell\\'esperienza')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-background border border-border rounded-xl w-full max-w-6xl h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-foreground\">\n              ‚úèÔ∏è Modifica Esperienza\n            </h2>\n            <p className=\"text-muted-foreground mt-1\">\n              {experience?.title || 'Esperienza senza titolo'}\n            </p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={() => handleSave(editingBlocks)}\n              disabled={saving}\n              className=\"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {saving ? (\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n              ) : (\n                <Save className=\"w-4 h-4\" />\n              )}\n              {saving ? 'Salvataggio...' : 'Salva'}\n            </button>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-accent/10 rounded-lg transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Visual Editor */}\n        <div className=\"flex-1 overflow-hidden\">\n          <VisualEditor\n            pageId={experience?.id}\n            pageType=\"experience\"\n            onSave={setEditingBlocks}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":3685},"components/WishlistButton.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Heart } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotifications } from '@/components/NotificationSystem';\n\ninterface WishlistButtonProps {\n  itemId: string;\n  itemType: 'vehicle' | 'experience' | 'travel' | 'city' | 'activity' | 'service';\n  itemTitle: string;\n  itemImage?: string;\n  itemPrice?: number;\n  itemDescription?: string;\n  className?: string;\n}\n\nexport default function WishlistButton({ \n  itemId, \n  itemType, \n  itemTitle, \n  itemImage,\n  itemPrice,\n  itemDescription,\n  className = '' \n}: WishlistButtonProps) {\n  const { user } = useAuth();\n  const { showSuccess, showInfo, showWarning } = useNotifications();\n  const [isInWishlist, setIsInWishlist] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (user) {\n      checkWishlistStatus();\n    } else {\n      setIsInWishlist(false);\n    }\n  }, [user, itemId, itemType]);\n\n  const getAuthHeaders = async (): Promise<HeadersInit> => {\n    const headers = new Headers();\n    headers.set('Content-Type', 'application/json');\n    \n    if (!user) return headers;\n    \n    try {\n      const token = await (user as any).getIdToken();\n      headers.set('Authorization', `Bearer ${token}`);\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n    }\n    \n    return headers;\n  };\n\n  const checkWishlistStatus = async () => {\n    if (!user) return;\n\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`/api/wishlist`, { headers });\n      if (!response.ok) return;\n\n      const data = await response.json();\n      const found = data.wishlist.some(\n        (item: any) => item.itemId === itemId && item.itemType === itemType\n      );\n      setIsInWishlist(found);\n    } catch (error) {\n      console.error('Error checking wishlist status:', error);\n    }\n  };\n\n  const handleToggleWishlist = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!itemId || itemId === 'undefined') {\n      console.error('WishlistButton: Invalid itemId', itemId);\n      showWarning(\n        'Errore',\n        'ID elemento non valido. Impossibile aggiungere alla wishlist.'\n      );\n      return;\n    }\n\n    if (!user) {\n      showWarning(\n        'Login Richiesto',\n        'Devi effettuare il login per aggiungere elementi alla wishlist',\n        [\n          {\n            label: 'Vai al Login',\n            onClick: () => window.location.href = '/auth/signin',\n            variant: 'primary'\n          }\n        ]\n      );\n      return;\n    }\n\n    if (isLoading) return;\n\n    setIsLoading(true);\n\n    try {\n      const headers = await getAuthHeaders();\n\n      if (isInWishlist) {\n        // Remove from wishlist\n        const response = await fetch(\n          `/api/wishlist?itemType=${itemType}&itemId=${itemId}`,\n          { method: 'DELETE', headers }\n        );\n\n        if (!response.ok) throw new Error('Failed to remove from wishlist');\n\n        setIsInWishlist(false);\n        showInfo(\n          'Rimosso dalla Wishlist',\n          `\"${itemTitle}\" √® stato rimosso dalla tua lista desideri`\n        );\n      } else {\n        // Add to wishlist\n        const response = await fetch('/api/wishlist', {\n          method: 'POST',\n          headers,\n          body: JSON.stringify({\n            itemType,\n            itemId,\n            itemData: {\n              title: itemTitle,\n              image: itemImage,\n              price: itemPrice,\n              description: itemDescription\n            }\n          })\n        });\n\n        if (!response.ok) throw new Error('Failed to add to wishlist');\n\n        setIsInWishlist(true);\n        showSuccess(\n          'Aggiunto alla Wishlist',\n          `\"${itemTitle}\" √® stato aggiunto alla tua lista desideri`,\n          [\n            {\n              label: 'Vedi Wishlist',\n              onClick: () => window.location.href = '/dashboard',\n              variant: 'primary'\n            }\n          ]\n        );\n      }\n    } catch (error) {\n      console.error('Error toggling wishlist:', error);\n      showWarning(\n        'Errore',\n        'Si √® verificato un errore. Riprova pi√π tardi.'\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleToggleWishlist}\n      disabled={isLoading}\n      className={`\n        group flex items-center justify-center\n        p-2 rounded-full transition-all duration-200\n        ${isInWishlist \n          ? 'bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400' \n          : 'bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-500'\n        }\n        ${isLoading ? 'opacity-50 cursor-not-allowed' : 'hover:scale-110'}\n        shadow-md hover:shadow-lg\n        ${className}\n      `}\n      aria-label={isInWishlist ? 'Rimuovi dalla wishlist' : 'Aggiungi alla wishlist'}\n      title={isInWishlist ? 'Rimuovi dalla wishlist' : 'Aggiungi alla wishlist'}\n    >\n      <Heart \n        className={`w-5 h-5 transition-all ${isInWishlist ? 'fill-current' : ''}`}\n      />\n    </button>\n  );\n}\n","size_bytes":5193},"components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5629},"components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":824},"components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":724},"components/ui/separator.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":770},"app/servizi/noleggio-auto/NoleggioAutoClientPage.tsx":{"content":"\"use client\"\n\nimport { useState, useMemo, useEffect } from \"react\"\nimport Image from \"next/image\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  Car,\n  Settings,\n  Fuel,\n  Users,\n  DoorClosed,\n  CheckCircle,\n  ArrowRight,\n  MessageCircle,\n  Euro,\n  Calendar,\n  Shield,\n  Loader2,\n} from \"lucide-react\"\nimport { includedServices, extraServices, calculateRentalPrice, periodNames } from \"@/lib/utils/vehicle-pricing\"\nimport { getPublishedVehicles, type Vehicle } from \"@/lib/public-data\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nconst structuredData = {\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Product\",\n  name: \"Noleggio Auto Marrakech\",\n  description: \"Servizio di noleggio auto a Marrakech con tariffe trasparenti e assistenza 24/7\",\n  provider: {\n    \"@type\": \"Organization\",\n    name: \"Morocco Dreams\",\n  },\n  areaServed: \"Morocco\",\n}\n\nconst WHATSAPP_NUMBER = \"393292333370\"\n\nexport default function NoleggioAutoClientPage() {\n  const [vehicles, setVehicles] = useState<Vehicle[]>([])\n  const [loading, setLoading] = useState(true)\n  const [selectedVehicle, setSelectedVehicle] = useState<Vehicle | null>(null)\n  const [categoryFilter, setCategoryFilter] = useState<\"all\" | \"economica\" | \"suv\" | \"Premium\">(\"all\")\n  const [startDate, setStartDate] = useState<string>(\"\")\n  const [endDate, setEndDate] = useState<string>(\"\")\n  const [customerName, setCustomerName] = useState<string>(\"\")\n  const [customerPhone, setCustomerPhone] = useState<string>(\"\")\n\n  useEffect(() => {\n    const loadVehicles = async () => {\n      try {\n        setLoading(true)\n        const data = await getPublishedVehicles()\n        setVehicles(data)\n        if (data.length > 0) {\n          setSelectedVehicle(data[0])\n        }\n      } catch (error) {\n        console.error('Error loading vehicles:', error)\n      } finally {\n        setLoading(false)\n      }\n    }\n    \n    loadVehicles()\n  }, [])\n\n  const filteredVehicles = useMemo(() => {\n    if (categoryFilter === \"all\") return vehicles\n    return vehicles.filter((v) => v.category === categoryFilter)\n  }, [categoryFilter, vehicles])\n\n  const priceInfo = useMemo(() => {\n    if (!startDate || !endDate || !selectedVehicle) return null\n    return calculateRentalPrice(selectedVehicle, new Date(startDate), new Date(endDate))\n  }, [selectedVehicle, startDate, endDate])\n\n  const categories = useMemo(() => [\n    { value: \"all\", label: \"Tutte\", icon: Car, count: vehicles.length },\n    { value: \"economica\", label: \"Economica\", icon: Euro, count: vehicles.filter((v) => v.category === \"economica\").length },\n    { value: \"suv\", label: \"SUV\", icon: Car, count: vehicles.filter((v) => v.category === \"suv\").length },\n    { value: \"Premium\", label: \"Premium\", icon: Shield, count: vehicles.filter((v) => v.category === \"Premium\").length },\n  ], [vehicles])\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-16 h-16 animate-spin text-orange-500 mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Caricamento veicoli...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (vehicles.length === 0 || !selectedVehicle) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center max-w-md\">\n          <Car className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-foreground mb-2\">Nessun veicolo disponibile</h2>\n          <p className=\"text-muted-foreground\">\n            Al momento non ci sono veicoli pubblicati. Torna pi√π tardi o contattaci su WhatsApp.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  const composeWhatsappMessage = () => {\n    const priceText = priceInfo\n      ? `‚Ç¨${priceInfo.dailyRate}/giorno x ${priceInfo.totalDays} giorni = ‚Ç¨${priceInfo.totalPrice} (Periodo: ${periodNames[priceInfo.period]})`\n      : \"Da calcolare\"\n\n    return `Ciao Morocco Dreams! Vorrei noleggiare un'auto:\n\nüöó *Veicolo selezionato*\nModello: ${selectedVehicle.name}\nCategoria: ${selectedVehicle.category}\nCambio: ${selectedVehicle.transmission}\nCarburante: ${selectedVehicle.fuel}\n\nüë§ *Dati personali*\nNome: ${customerName || \"-\"}\nTelefono: ${customerPhone || \"-\"}\n\nüìÖ *Date noleggio*\nData Inizio: ${startDate || \"?\"}\nData Fine: ${endDate || \"?\"}\n${priceInfo ? `Durata: ${priceInfo.totalDays} giorni` : \"\"}\n\nüí∞ *Prezzo*\n${priceText}\n\n‚úÖ *Servizi inclusi*\n${includedServices.map((s) => \"‚Ä¢ \" + s.name).join(\"\\n\")}\n\n_Grazie!_`\n  }\n\n  const handleWhatsappBooking = () => {\n    if (!startDate || !endDate || !customerName) {\n      alert(\"Per favore compila i campi obbligatori: Nome, Data Inizio e Data Fine\")\n      return\n    }\n    const msg = encodeURIComponent(composeWhatsappMessage())\n    window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`, \"_blank\")\n  }\n\n  return (\n    <>\n      <script type=\"application/ld+json\" dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }} />\n\n      <div className=\"min-h-screen bg-background\">\n        <section className=\"relative py-20 overflow-hidden\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-orange-600/20 to-red-600/20\" />\n          <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center\">\n              <div className=\"flex justify-center mb-6\">\n                <div className=\"p-4 bg-orange-100 dark:bg-orange-900/30 rounded-full\">\n                  <Car className=\"h-12 w-12 text-orange-600 dark:text-orange-400\" />\n                </div>\n              </div>\n              <h1 className=\"text-4xl md:text-6xl font-bold text-foreground mb-6\">\n                Noleggio Auto a <span className=\"text-orange-600 dark:text-orange-400\">Marrakech</span>\n              </h1>\n              <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto mb-8\">\n                Scopri il Marocco in totale libert√† con la nostra flotta di veicoli selezionati. Tariffe trasparenti,\n                assistenza 24/7 e chilometraggio illimitato incluso.\n              </p>\n              <div className=\"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground\">\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Chilometraggio illimitato</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Assistenza 24/7</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span>Consegna gratuita</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-12 bg-muted/30\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex flex-wrap justify-center gap-4 mb-8\">\n              {categories.map((cat) => (\n                <Button\n                  key={cat.value}\n                  variant={categoryFilter === cat.value ? \"default\" : \"outline\"}\n                  onClick={() => setCategoryFilter(cat.value as any)}\n                  className={categoryFilter === cat.value ? \"bg-orange-600 hover:bg-orange-700\" : \"\"}\n                >\n                  <cat.icon className=\"h-4 w-4 mr-2\" />\n                  {cat.label} ({cat.count})\n                </Button>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-20\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"text-center mb-16\">\n              <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">La Nostra Flotta</h2>\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n                Scegli il veicolo perfetto per la tua avventura in Marocco\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12\">\n              {filteredVehicles.map((vehicle) => (\n                <Card\n                  key={vehicle.id}\n                  className={`cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl ${\n                    selectedVehicle.id === vehicle.id \n                      ? \"ring-4 ring-orange-500 shadow-2xl bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 scale-105\" \n                      : \"hover:shadow-xl\"\n                  }`}\n                  onClick={() => setSelectedVehicle(vehicle)}\n                >\n                  <CardHeader className=\"text-center relative pb-4\">\n                    {/* WishlistButton - Top Left */}\n                    <div className=\"absolute top-3 left-3 z-20\">\n                      <WishlistButton\n                        itemId={vehicle.id}\n                        itemType=\"vehicle\"\n                        itemTitle={vehicle.name}\n                        itemImage={vehicle.image}\n                        itemPrice={vehicle.pricing ? Math.min(vehicle.pricing.period1.short, vehicle.pricing.period2.short, vehicle.pricing.period3.short, vehicle.pricing.period4.short) : 0}\n                        itemDescription={`${vehicle.category} - ${vehicle.transmission} - ${vehicle.seats} posti`}\n                      />\n                    </div>\n                    \n                    {/* Selection Indicator - Top Right */}\n                    {selectedVehicle.id === vehicle.id && (\n                      <div className=\"absolute top-3 right-3 z-20 bg-white dark:bg-gray-800 rounded-full p-1 shadow-lg\">\n                        <CheckCircle className=\"h-5 w-5 text-orange-500 fill-current\" />\n                      </div>\n                    )}\n                    \n                    {/* Vehicle Image */}\n                    <div className=\"relative w-full h-40 mb-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800\">\n                      <Image\n                        src={vehicle.image}\n                        alt={vehicle.name}\n                        fill\n                        className=\"object-contain\"\n                        sizes=\"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 25vw\"\n                      />\n                    </div>\n                    \n                    {/* Badges - Below Image */}\n                    <div className=\"flex items-center justify-between gap-2 mb-3 px-1\">\n                      <Badge\n                        className={`text-xs ${\n                          vehicle.category === \"economica\"\n                            ? \"bg-green-500 hover:bg-green-600\"\n                            : vehicle.category === \"suv\"\n                              ? \"bg-blue-500 hover:bg-blue-600\"\n                              : \"bg-purple-500 hover:bg-purple-600\"\n                        }`}\n                      >\n                        {vehicle.category}\n                      </Badge>\n                      <Badge className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold text-xs\">\n                        Da ‚Ç¨{vehicle.pricing ? Math.min(vehicle.pricing.period1.short, vehicle.pricing.period2.short, vehicle.pricing.period3.short, vehicle.pricing.period4.short) : 0}/gg\n                      </Badge>\n                    </div>\n                    \n                    <CardTitle className=\"text-xl\">{vehicle.name}</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"text-center space-y-3\">\n                    <div className=\"grid grid-cols-2 gap-2 text-sm text-muted-foreground\">\n                      <div className=\"flex items-center gap-1\">\n                        <Settings className=\"h-3 w-3\" />\n                        {vehicle.transmission}\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <Fuel className=\"h-3 w-3\" />\n                        {vehicle.fuel}\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <Users className=\"h-3 w-3\" />\n                        {vehicle.seats} posti\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <DoorClosed className=\"h-3 w-3\" />\n                        {vehicle.doors} porte\n                      </div>\n                    </div>\n\n                    <div className=\"text-xs text-muted-foreground\">Franchigia: ‚Ç¨{vehicle.dailyDeductible}/gg</div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n\n            <Card className=\"mb-12\">\n              <CardHeader>\n                <CardTitle className=\"text-2xl flex items-center gap-3\">\n                  <Car className=\"h-6 w-6 text-orange-600\" />\n                  {selectedVehicle.name} - Dettagli e Prenotazione\n                </CardTitle>\n                <CardDescription>Completa i dati per ricevere un preventivo personalizzato</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid md:grid-cols-2 gap-8\">\n                  <div>\n                    <div className=\"relative w-full h-64 mb-6 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 shadow-md\">\n                      <Image\n                        src={selectedVehicle.image}\n                        alt={selectedVehicle.name}\n                        fill\n                        className=\"object-contain\"\n                        sizes=\"(max-width: 768px) 100vw, 50vw\"\n                        priority\n                      />\n                    </div>\n                    <h4 className=\"font-semibold mb-4 text-lg\">Caratteristiche Veicolo</h4>\n                    <div className=\"space-y-3 mb-6\">\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span>Categoria: {selectedVehicle.category}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span>Cambio: {selectedVehicle.transmission}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span>Carburante: {selectedVehicle.fuel}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span>Posti: {selectedVehicle.seats}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span>Porte: {selectedVehicle.doors}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                        <span>Aria condizionata</span>\n                      </div>\n                    </div>\n\n                    <h4 className=\"font-semibold mb-4 text-lg text-green-600 dark:text-green-400\">\n                      Servizi Inclusi SENZA FRANCHIGIA\n                    </h4>\n                    <ul className=\"space-y-2 mb-6\">\n                      {includedServices.map((service, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                          <span className=\"text-sm\">{service.name}</span>\n                        </li>\n                      ))}\n                    </ul>\n\n                    <h4 className=\"font-semibold mb-4 text-lg text-blue-600 dark:text-blue-400\">\n                      Servizi Extra Disponibili\n                    </h4>\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4\">\n                      <p className=\"text-sm text-blue-800 dark:text-blue-200 font-medium flex items-start gap-2\">\n                        <Shield className=\"h-4 w-4 mt-0.5 flex-shrink-0\" />\n                        <span>La <strong>franchigia ridotta o azzerata</strong> √® disponibile come extra opzionale su ogni veicolo. Contattaci per maggiori dettagli.</span>\n                      </p>\n                    </div>\n                    <ul className=\"space-y-2\">\n                      {extraServices.map((service, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <CheckCircle className=\"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0\" />\n                          <span className=\"text-sm\">{service.name}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n\n                  <div>\n                    <div className=\"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-lg mb-6\">\n                      <h4 className=\"font-semibold mb-4 text-lg\">Dati Prenotazione</h4>\n                      <div className=\"space-y-4\">\n                        <div>\n                          <label className=\"block text-sm font-medium mb-2\">\n                            Nome <span className=\"text-red-500\">*</span>\n                          </label>\n                          <input\n                            type=\"text\"\n                            value={customerName}\n                            onChange={(e) => setCustomerName(e.target.value)}\n                            className=\"w-full px-3 py-2 border rounded-md\"\n                            placeholder=\"Il tuo nome\"\n                          />\n                        </div>\n\n                        <div>\n                          <label className=\"block text-sm font-medium mb-2\">Telefono</label>\n                          <input\n                            type=\"tel\"\n                            value={customerPhone}\n                            onChange={(e) => setCustomerPhone(e.target.value)}\n                            className=\"w-full px-3 py-2 border rounded-md\"\n                            placeholder=\"+39 ...\"\n                          />\n                        </div>\n\n                        <div>\n                          <label className=\"block text-sm font-medium mb-2 flex items-center gap-1\">\n                            <Calendar className=\"h-4 w-4\" />\n                            Data Inizio <span className=\"text-red-500\">*</span>\n                          </label>\n                          <input\n                            type=\"date\"\n                            value={startDate}\n                            onChange={(e) => setStartDate(e.target.value)}\n                            className=\"w-full px-3 py-2 border rounded-md\"\n                          />\n                        </div>\n\n                        <div>\n                          <label className=\"block text-sm font-medium mb-2 flex items-center gap-1\">\n                            <Calendar className=\"h-4 w-4\" />\n                            Data Fine <span className=\"text-red-500\">*</span>\n                          </label>\n                          <input\n                            type=\"date\"\n                            value={endDate}\n                            onChange={(e) => setEndDate(e.target.value)}\n                            className=\"w-full px-3 py-2 border rounded-md\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    {priceInfo && (\n                      <div className=\"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg mb-6\">\n                        <h4 className=\"font-semibold mb-4 text-lg\">Riepilogo Prezzo</h4>\n                        <div className=\"space-y-2 text-sm mb-4\">\n                          <div className=\"flex justify-between\">\n                            <span>Periodo:</span>\n                            <span className=\"font-medium\">{periodNames[priceInfo.period]}</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span>Durata:</span>\n                            <span className=\"font-medium\">{priceInfo.totalDays} giorni</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span>Tariffa giornaliera:</span>\n                            <span className=\"font-medium\">‚Ç¨{priceInfo.dailyRate}</span>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span>Franchigia giornaliera:</span>\n                            <span className=\"font-medium\">‚Ç¨{selectedVehicle.dailyDeductible}</span>\n                          </div>\n                        </div>\n                        <div className=\"border-t pt-4\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"font-semibold text-lg\">Prezzo Totale:</span>\n                            <span className=\"text-3xl font-bold text-orange-600 dark:text-orange-400\">\n                              ‚Ç¨{priceInfo.totalPrice}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    <Button\n                      onClick={handleWhatsappBooking}\n                      className=\"w-full bg-green-600 hover:bg-green-700 text-lg py-6\"\n                      size=\"lg\"\n                    >\n                      <MessageCircle className=\"mr-2 h-5 w-5\" />\n                      Prenota su WhatsApp\n                    </Button>\n\n                    {!priceInfo && (\n                      <p className=\"text-sm text-muted-foreground text-center mt-4\">\n                        Seleziona le date per visualizzare il prezzo\n                      </p>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </section>\n\n        <section className=\"py-20 bg-gradient-to-r from-orange-600 to-red-600\">\n          <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">Prenota la Tua Auto Ora</h2>\n            <p className=\"text-xl text-orange-100 mb-8\">\n              Tariffe trasparenti ‚Ä¢ Assistenza 24/7 ‚Ä¢ Chilometraggio illimitato\n            </p>\n            <div className=\"flex justify-center\">\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-white text-white hover:bg-white hover:text-orange-600 bg-transparent\"\n                onClick={() => document.querySelector(\"input[type='text']\")?.scrollIntoView({ behavior: \"smooth\" })}\n              >\n                <MessageCircle className=\"mr-2 h-5 w-5\" />\n                Prenota Online\n              </Button>\n            </div>\n          </div>\n        </section>\n      </div>\n    </>\n  )\n}\n","size_bytes":23603},"components/ui/radio-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1481},"components/ui/checkbox.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1070},"app/blog/[slug]/BlogPostHeader.tsx":{"content":"\"use client\"\n\nimport { Calendar, Clock, User } from 'lucide-react'\nimport WishlistButton from '@/components/WishlistButton'\n\ninterface BlogPostHeaderProps {\n  post: {\n    id: string\n    slug: string\n    title: string\n    cover?: string\n    author: string\n    date: string\n    readingMinutes: number\n    excerpt: string\n  }\n}\n\nexport default function BlogPostHeader({ post }: BlogPostHeaderProps) {\n  return (\n    <header className=\"relative\">\n      <div className=\"h-[280px] sm:h-[360px] lg:h-[460px] relative overflow-hidden\">\n        <img \n          src={post.cover || \"/placeholder.svg?height=460&width=800\"} \n          alt={post.title} \n          className=\"w-full h-full object-cover\" \n        />\n        <div className=\"absolute inset-0 bg-black/40\" />\n        \n        {/* Wishlist Button - top right */}\n        <div className=\"absolute top-4 right-4 z-20\">\n          <WishlistButton\n            itemId={`blog-${post.slug}`}\n            itemType=\"activity\"\n            itemTitle={post.title}\n            itemImage={post.cover}\n            itemDescription={post.excerpt}\n          />\n        </div>\n        \n        <div className=\"absolute bottom-8 left-8 right-8 text-white\">\n          <div className=\"max-w-4xl\">\n            <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold mb-4 leading-tight\">{post.title}</h1>\n            <div className=\"flex flex-wrap items-center gap-4 text-sm\">\n              <div className=\"flex items-center gap-2\">\n                <User className=\"w-4 h-4\" />\n                <span>{post.author}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"w-4 h-4\" />\n                <span>{new Date(post.date).toLocaleDateString(\"it-IT\")}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Clock className=\"w-4 h-4\" />\n                <span>{post.readingMinutes} min di lettura</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n","size_bytes":2046},"app/prenotazioni/[id]/riepilogo/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport { doc, getDoc, updateDoc, Timestamp } from \"firebase/firestore\"\nimport { db } from \"@/lib/firebase\"\nimport { COLLECTIONS, type Booking, type BookingParticipant } from \"@/lib/firestore\"\nimport { useAuth } from \"@/context/AuthContext\"\nimport { useNotifications } from \"@/components/NotificationSystem\"\nimport { generateShareToken } from \"@/lib/utils/booking-utils\"\nimport ShareInviteButton from \"@/components/ShareInviteButton\"\nimport { ArrowLeft, CheckCircle2, Calendar, Users, MapPin, Phone, Mail, User } from \"lucide-react\"\nimport Link from \"next/link\"\n\nexport default function BookingSummaryPage() {\n  const params = useParams()\n  const router = useRouter()\n  const { user } = useAuth()\n  const { showSuccess, showError, showWarning } = useNotifications()\n  \n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [bookingData, setBookingData] = useState<any>(null)\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false)\n  const [generatedShareToken, setGeneratedShareToken] = useState<string | null>(null)\n  \n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    travelers: 2,\n    children: 0,\n    childrenAges: \"\",\n    departureDate: \"\",\n    returnDate: \"\",\n    departureCity: \"\",\n    customRequests: \"\"\n  })\n\n  const bookingId = params.id as string\n\n  useEffect(() => {\n    if (!user) {\n      router.push(`/auth/signin?redirect=/prenotazioni/${bookingId}/riepilogo`)\n      return\n    }\n    loadBookingData()\n  }, [user, bookingId])\n\n  const loadBookingData = async () => {\n    try {\n      // Fetch existing booking by ID\n      const bookingRef = doc(db, COLLECTIONS.bookings, bookingId)\n      const bookingDoc = await getDoc(bookingRef)\n      \n      if (!bookingDoc.exists()) {\n        showError(\"Prenotazione Non Trovata\", \"Impossibile trovare la prenotazione richiesta\")\n        router.push('/dashboard')\n        return\n      }\n\n      const existingBooking = bookingDoc.data() as Booking\n      \n      // Pre-fill form with existing booking data\n      if (existingBooking.personalDetails) {\n        setFormData({\n          name: existingBooking.personalDetails.name || user?.displayName || \"\",\n          email: existingBooking.personalDetails.email || user?.email || \"\",\n          phone: existingBooking.personalDetails.phone || \"\",\n          travelers: existingBooking.personalDetails.travelers || 2,\n          children: existingBooking.personalDetails.children || 0,\n          childrenAges: existingBooking.personalDetails.childrenAges || \"\",\n          departureDate: existingBooking.personalDetails.departureDate || \"\",\n          returnDate: existingBooking.personalDetails.returnDate || \"\",\n          departureCity: existingBooking.personalDetails.departureCity || \"\",\n          customRequests: existingBooking.customRequests || \"\"\n        })\n      } else {\n        // Fallback to user data if booking has no details yet\n        setFormData(prev => ({\n          ...prev,\n          name: user?.displayName || \"\",\n          email: user?.email || \"\"\n        }))\n      }\n\n      // Load associated travel/experience data\n      let itemData = null\n      if (existingBooking.travelId) {\n        const itemDoc = await getDoc(doc(db, COLLECTIONS.travels, existingBooking.travelId))\n        if (itemDoc.exists()) {\n          itemData = itemDoc.data()\n        }\n      } else if (existingBooking.experienceId) {\n        const itemDoc = await getDoc(doc(db, COLLECTIONS.experiences, existingBooking.experienceId))\n        if (itemDoc.exists()) {\n          itemData = itemDoc.data()\n        }\n      }\n\n      // Distinguish between totalPrice and pricePerPerson\n      let pricePerPerson = 0\n      let totalPrice = 0\n      let hasConfirmedTotal = false\n      \n      if (existingBooking.totalPrice && existingBooking.totalPrice > 0) {\n        // Booking already has confirmed total - preserve as-is, DO NOT recalculate\n        totalPrice = existingBooking.totalPrice\n        hasConfirmedTotal = true\n        \n        // Derive per-person ONLY for display (not for calculation)\n        // Only if we have travelers count, otherwise leave at 0\n        if (existingBooking.personalDetails?.travelers && existingBooking.personalDetails.travelers > 0) {\n          pricePerPerson = existingBooking.totalPrice / existingBooking.personalDetails.travelers\n        }\n      } else {\n        // New booking, calculate from item data\n        pricePerPerson = itemData?.price || itemData?.pricePerPerson || 0\n        totalPrice = pricePerPerson * (existingBooking.personalDetails?.travelers || formData.travelers)\n      }\n\n      setBookingData({\n        ...existingBooking,\n        title: itemData?.title || itemData?.name || \"Esperienza Marocco\",\n        description: itemData?.description || \"\",\n        duration: itemData?.duration || \"\",\n        pricePerPerson,         // Per-person rate for display only\n        totalPrice,             // Total amount (existing or calculated)\n        hasConfirmedTotal       // Flag to prevent recalculation\n      })\n\n    } catch (error) {\n      console.error(\"Error loading booking data:\", error)\n      showError(\"Errore\", \"Impossibile caricare i dati della prenotazione\")\n      router.push('/dashboard')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!user) {\n      showWarning(\"Login Richiesto\", \"Effettua il login per completare la prenotazione\")\n      return\n    }\n\n    // Validation\n    if (!formData.name || !formData.email || !formData.phone || !formData.departureDate) {\n      showWarning(\"Campi Obbligatori\", \"Compila tutti i campi obbligatori per continuare\")\n      return\n    }\n\n    // Calculate total price correctly\n    let calculatedPrice = 0\n    \n    if (bookingData?.hasConfirmedTotal) {\n      // Booking already has confirmed total - USE AS-IS, do not recalculate\n      calculatedPrice = bookingData.totalPrice\n    } else if (bookingData?.pricePerPerson && bookingData.pricePerPerson > 0) {\n      // New booking or editable - calculate from per-person rate\n      calculatedPrice = bookingData.pricePerPerson * formData.travelers\n    } else if (bookingData?.totalPrice && bookingData.totalPrice > 0) {\n      // Fallback to existing total\n      calculatedPrice = bookingData.totalPrice\n    }\n\n    if (calculatedPrice <= 0) {\n      showError(\"Errore Prezzo\", \"Impossibile calcolare il prezzo totale. Contattaci direttamente.\")\n      return\n    }\n\n    setSaving(true)\n    try {\n      // Update existing booking (preserve travelId/experienceId/userId)\n      const bookingRef = doc(db, COLLECTIONS.bookings, bookingId)\n      \n      // Generate group booking fields if not exists\n      const groupFields: any = {}\n      if (!bookingData.shareToken) {\n        const newShareToken = generateShareToken()\n        groupFields.shareToken = newShareToken\n        groupFields.groupId = `group_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n        groupFields.participants = [{\n          userId: user.uid,\n          name: formData.name,\n          email: formData.email,\n          phone: formData.phone,\n          joinedAt: Timestamp.now(),\n          status: 'joined',\n          role: 'organizer'\n        }] as BookingParticipant[]\n        \n        // Stash for success UI\n        setGeneratedShareToken(newShareToken)\n      } else {\n        // Use existing shareToken\n        setGeneratedShareToken(bookingData.shareToken)\n      }\n      \n      const updateData = {\n        status: 'confirmed' as const,\n        personalDetails: {\n          name: formData.name,\n          email: formData.email,\n          phone: formData.phone,\n          travelers: formData.travelers,\n          children: formData.children || 0,\n          childrenAges: formData.childrenAges,\n          departureDate: formData.departureDate,\n          returnDate: formData.returnDate,\n          departureCity: formData.departureCity\n        },\n        customRequests: formData.customRequests,\n        totalPrice: calculatedPrice,\n        ...groupFields,\n        updatedAt: Timestamp.now()\n      }\n\n      // Update booking (merge to preserve existing fields)\n      await updateDoc(bookingRef, updateData)\n\n      setShowSuccessMessage(true)\n      showSuccess(\n        \"Prenotazione Confermata!\",\n        \"La tua prenotazione √® stata inserita in Mie Prenotazioni\"\n      )\n\n      // Redirect to dashboard after 3 seconds\n      setTimeout(() => {\n        router.push('/dashboard?tab=bookings')\n      }, 3000)\n\n    } catch (error) {\n      console.error(\"Error saving booking:\", error)\n      showError(\n        \"Errore Prenotazione\",\n        \"Si √® verificato un errore. Riprova o contattaci direttamente.\"\n      )\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600\"></div>\n      </div>\n    )\n  }\n\n  if (showSuccessMessage) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-white p-4\">\n        <div className=\"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center\">\n          <div className=\"mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6\">\n            <CheckCircle2 className=\"w-12 h-12 text-green-600\" />\n          </div>\n          \n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n            Prenotazione Confermata!\n          </h1>\n          \n          <p className=\"text-gray-600 mb-6\">\n            La tua prenotazione √® stata inserita con successo in <strong>Mie Prenotazioni</strong>.\n            Ti contatteremo presto per confermare tutti i dettagli del tuo viaggio.\n          </p>\n\n          {generatedShareToken && (\n            <div className=\"mb-6 p-4 bg-orange-50 rounded-lg border border-orange-200\">\n              <p className=\"text-sm text-gray-700 mb-3\">\n                Vuoi viaggiare con amici? Invitali a unirti al tuo gruppo!\n              </p>\n              <ShareInviteButton \n                shareToken={generatedShareToken}\n                bookingId={bookingId}\n                variant=\"primary\"\n                className=\"w-full\"\n              />\n            </div>\n          )}\n\n          <Link \n            href=\"/dashboard?tab=bookings\"\n            className=\"inline-flex items-center gap-2 bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition-all\"\n          >\n            Vai alle Mie Prenotazioni\n          </Link>\n\n          <p className=\"text-sm text-gray-500 mt-6\">\n            Reindirizzamento automatico in corso...\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 py-12 px-4\">\n      <div className=\"max-w-3xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Link \n            href=\"/dashboard\" \n            className=\"inline-flex items-center gap-2 text-orange-600 hover:text-orange-700 mb-4\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            Torna alla Dashboard\n          </Link>\n          \n          <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n            Riepilogo Prenotazione\n          </h1>\n          <p className=\"text-gray-600\">\n            Completa i tuoi dati per finalizzare la prenotazione\n          </p>\n        </div>\n\n        {/* Booking Info Card */}\n        {bookingData && (\n          <div className=\"bg-white rounded-xl shadow-lg p-6 mb-8 border-l-4 border-orange-600\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-2\">\n              {bookingData.title}\n            </h2>\n            <p className=\"text-gray-600 mb-4\">{bookingData.description}</p>\n            <div className=\"flex flex-wrap gap-4 text-sm\">\n              {bookingData.duration && (\n                <div className=\"flex items-center gap-2\">\n                  <Calendar className=\"w-4 h-4 text-orange-600\" />\n                  <span>{bookingData.duration}</span>\n                </div>\n              )}\n              {bookingData.pricePerPerson > 0 && (\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"font-semibold text-orange-600\">\n                    ‚Ç¨{bookingData.pricePerPerson}\n                  </span>\n                  <span className=\"text-gray-500\">/ persona</span>\n                </div>\n              )}\n              {bookingData.totalPrice > 0 && !bookingData.pricePerPerson && (\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"font-semibold text-orange-600\">\n                    ‚Ç¨{bookingData.totalPrice}\n                  </span>\n                  <span className=\"text-gray-500\">totale</span>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-xl shadow-lg p-8\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">\n            I Tuoi Dati\n          </h2>\n\n          {/* Personal Info */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <User className=\"w-4 h-4 inline mr-2\" />\n                Nome Completo *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"Mario Rossi\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Mail className=\"w-4 h-4 inline mr-2\" />\n                Email *\n              </label>\n              <input\n                type=\"email\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"mario.rossi@example.com\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Phone className=\"w-4 h-4 inline mr-2\" />\n                Telefono *\n              </label>\n              <input\n                type=\"tel\"\n                value={formData.phone}\n                onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"+39 123 456 7890\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <MapPin className=\"w-4 h-4 inline mr-2\" />\n                Citt√† di Partenza\n              </label>\n              <input\n                type=\"text\"\n                value={formData.departureCity}\n                onChange={(e) => setFormData({ ...formData, departureCity: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder=\"Roma, Milano, ...\"\n              />\n            </div>\n          </div>\n\n          {/* Travel Details */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Users className=\"w-4 h-4 inline mr-2\" />\n                Numero Adulti\n              </label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                max=\"20\"\n                value={formData.travelers}\n                onChange={(e) => setFormData({ ...formData, travelers: parseInt(e.target.value) || 1 })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Users className=\"w-4 h-4 inline mr-2\" />\n                Numero Bambini\n              </label>\n              <input\n                type=\"number\"\n                min=\"0\"\n                max=\"10\"\n                value={formData.children}\n                onChange={(e) => setFormData({ ...formData, children: parseInt(e.target.value) || 0 })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            {formData.children > 0 && (\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Et√† Bambini (separata da virgole)\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.childrenAges}\n                  onChange={(e) => setFormData({ ...formData, childrenAges: e.target.value })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                  placeholder=\"es. 5, 8, 12\"\n                />\n              </div>\n            )}\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Calendar className=\"w-4 h-4 inline mr-2\" />\n                Data Partenza *\n              </label>\n              <input\n                type=\"date\"\n                value={formData.departureDate}\n                onChange={(e) => setFormData({ ...formData, departureDate: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Calendar className=\"w-4 h-4 inline mr-2\" />\n                Data Ritorno\n              </label>\n              <input\n                type=\"date\"\n                value={formData.returnDate}\n                onChange={(e) => setFormData({ ...formData, returnDate: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          {/* Custom Requests */}\n          <div className=\"mb-8\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Richieste Speciali\n            </label>\n            <textarea\n              value={formData.customRequests}\n              onChange={(e) => setFormData({ ...formData, customRequests: e.target.value })}\n              rows={4}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none\"\n              placeholder=\"Eventuali richieste particolari, allergie, esigenze speciali...\"\n            />\n          </div>\n\n          {/* Price Summary */}\n          {(bookingData?.pricePerPerson || bookingData?.totalPrice) && (\n            <div className=\"bg-orange-50 rounded-lg p-6 mb-8\">\n              {bookingData.pricePerPerson > 0 && (\n                <div className=\"flex justify-between items-center mb-2\">\n                  <span className=\"text-gray-700\">Prezzo per persona:</span>\n                  <span className=\"font-semibold\">‚Ç¨{bookingData.pricePerPerson}</span>\n                </div>\n              )}\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-gray-700\">Numero viaggiatori:</span>\n                <span className=\"font-semibold\">{formData.travelers}</span>\n              </div>\n              <div className=\"border-t border-orange-200 pt-2 mt-2\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-lg font-bold text-gray-900\">Totale Stimato:</span>\n                  <span className=\"text-2xl font-bold text-orange-600\">\n                    ‚Ç¨{bookingData.pricePerPerson > 0 \n                      ? bookingData.pricePerPerson * formData.travelers \n                      : bookingData.totalPrice}\n                  </span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Submit */}\n          <button\n            type=\"submit\"\n            disabled={saving}\n            className=\"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {saving ? (\n              <span className=\"flex items-center justify-center gap-2\">\n                <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                Salvataggio in corso...\n              </span>\n            ) : (\n              \"Conferma Prenotazione\"\n            )}\n          </button>\n\n          <p className=\"text-sm text-gray-500 text-center mt-4\">\n            Riceverai una conferma via email entro 24 ore\n          </p>\n        </form>\n      </div>\n    </div>\n  )\n}\n","size_bytes":22008},"components/ShareInviteButton.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport { Share2, Copy, Check } from 'lucide-react'\nimport { getShareInviteLink } from '@/lib/utils/booking-utils'\nimport { useNotifications } from '@/components/NotificationSystem'\n\ninterface ShareInviteButtonProps {\n  shareToken?: string\n  bookingId?: string\n  className?: string\n  variant?: 'primary' | 'secondary' | 'ghost'\n}\n\nexport default function ShareInviteButton({ \n  shareToken, \n  bookingId,\n  className = '',\n  variant = 'secondary'\n}: ShareInviteButtonProps) {\n  const { showSuccess, showInfo } = useNotifications()\n  const [copied, setCopied] = useState(false)\n\n  if (!shareToken) {\n    return null\n  }\n\n  const handleShare = async () => {\n    const shareLink = getShareInviteLink(shareToken)\n    \n    try {\n      await navigator.clipboard.writeText(shareLink)\n      setCopied(true)\n      showSuccess(\n        'Link Copiato!',\n        'Il link di invito √® stato copiato negli appunti. Condividilo con i tuoi amici!'\n      )\n      \n      setTimeout(() => setCopied(false), 2000)\n    } catch (error) {\n      console.error('Error copying link:', error)\n      showInfo('Link di Invito', shareLink)\n    }\n  }\n\n  const variantStyles = {\n    primary: 'bg-orange-600 hover:bg-orange-700 text-white',\n    secondary: 'bg-orange-100 hover:bg-orange-200 text-orange-700',\n    ghost: 'bg-transparent hover:bg-orange-50 text-orange-600 border border-orange-200'\n  }\n\n  return (\n    <button\n      onClick={handleShare}\n      className={`flex items-center gap-2 font-semibold py-2 px-4 rounded-lg transition-colors ${variantStyles[variant]} ${className}`}\n    >\n      {copied ? (\n        <>\n          <Check className=\"w-4 h-4\" />\n          Copiato!\n        </>\n      ) : (\n        <>\n          <Share2 className=\"w-4 h-4\" />\n          Invita Amici\n        </>\n      )}\n    </button>\n  )\n}\n","size_bytes":1836},"app/prenotazioni/gruppo/[shareToken]/join/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter, useParams } from 'next/navigation'\nimport { useAuth } from '@/context/AuthContext'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { validateShareToken, joinGroupBooking } from '@/lib/utils/booking-utils'\nimport { Booking } from '@/lib/firestore'\nimport { Loader2, Users, Calendar, MapPin } from 'lucide-react'\n\nexport default function JoinGroupBookingPage() {\n  const router = useRouter()\n  const params = useParams()\n  const shareToken = params.shareToken as string\n  const { user, loading: authLoading } = useAuth()\n  const { showSuccess, showError, showInfo } = useNotifications()\n  \n  const [booking, setBooking] = useState<Booking | null>(null)\n  const [validating, setValidating] = useState(true)\n  const [joining, setJoining] = useState(false)\n  const [validationError, setValidationError] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (!shareToken) return\n    \n    async function validate() {\n      setValidating(true)\n      const result = await validateShareToken(shareToken)\n      \n      if (result.valid && result.booking) {\n        setBooking(result.booking)\n      } else {\n        setValidationError(result.error || 'Link non valido')\n      }\n      \n      setValidating(false)\n    }\n    \n    validate()\n  }, [shareToken])\n\n  const handleJoinGroup = async () => {\n    if (!user) {\n      showInfo('Accesso Richiesto', 'Effettua il login per unirti al gruppo')\n      router.push(`/login?redirect=/prenotazioni/gruppo/${shareToken}/join`)\n      return\n    }\n    \n    if (!booking?.id) {\n      showError('Errore', 'Prenotazione non trovata')\n      return\n    }\n    \n    setJoining(true)\n    \n    try {\n      const result = await joinGroupBooking(\n        booking.id,\n        user.uid,\n        user.displayName || user.email || 'Utente',\n        user.email || '',\n        user.phoneNumber || undefined\n      )\n      \n      if (result.success) {\n        showSuccess(\n          'Gruppo Unito!',\n          'Sei stato aggiunto al gruppo di viaggio. Vai alla dashboard per vedere i dettagli.'\n        )\n        \n        setTimeout(() => {\n          router.push('/dashboard?tab=bookings')\n        }, 1500)\n      } else {\n        showError('Errore', result.error || 'Impossibile unirti al gruppo')\n      }\n    } catch (error) {\n      console.error('Error joining group:', error)\n      showError('Errore', 'Si √® verificato un errore. Riprova pi√π tardi.')\n    } finally {\n      setJoining(false)\n    }\n  }\n\n  if (authLoading || validating) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-50\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-12 h-12 animate-spin text-orange-600 mx-auto mb-4\" />\n          <p className=\"text-gray-600\">Caricamento invito...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (validationError) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-50 px-4\">\n        <div className=\"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg className=\"w-8 h-8 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            Link Non Valido\n          </h1>\n          <p className=\"text-gray-600 mb-6\">\n            {validationError}\n          </p>\n          <button\n            onClick={() => router.push('/viaggi')}\n            className=\"w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors\"\n          >\n            Esplora Viaggi\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  if (!booking) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 py-12 px-4\">\n      <div className=\"max-w-2xl mx-auto\">\n        <div className=\"bg-white rounded-2xl shadow-xl overflow-hidden\">\n          <div className=\"bg-gradient-to-r from-orange-600 to-amber-600 p-8 text-white\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <Users className=\"w-8 h-8\" />\n              <h1 className=\"text-3xl font-bold\">\n                Invito Gruppo di Viaggio\n              </h1>\n            </div>\n            <p className=\"text-orange-100\">\n              Sei stato invitato a unirti a questo gruppo per un'avventura in Marocco!\n            </p>\n          </div>\n\n          <div className=\"p-8\">\n            <div className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n                {booking.title || 'Viaggio in Marocco'}\n              </h2>\n              \n              {booking.description && (\n                <p className=\"text-gray-600 mb-6\">\n                  {booking.description}\n                </p>\n              )}\n\n              <div className=\"grid gap-4\">\n                {booking.personalDetails?.departureDate && (\n                  <div className=\"flex items-center gap-3 text-gray-700\">\n                    <Calendar className=\"w-5 h-5 text-orange-600\" />\n                    <div>\n                      <span className=\"font-semibold\">Data Partenza:</span>{' '}\n                      {new Date(booking.personalDetails.departureDate).toLocaleDateString('it-IT')}\n                    </div>\n                  </div>\n                )}\n\n                {booking.personalDetails?.departureCity && (\n                  <div className=\"flex items-center gap-3 text-gray-700\">\n                    <MapPin className=\"w-5 h-5 text-orange-600\" />\n                    <div>\n                      <span className=\"font-semibold\">Citt√† di Partenza:</span>{' '}\n                      {booking.personalDetails.departureCity}\n                    </div>\n                  </div>\n                )}\n\n                {booking.personalDetails?.travelers && (\n                  <div className=\"flex items-center gap-3 text-gray-700\">\n                    <Users className=\"w-5 h-5 text-orange-600\" />\n                    <div>\n                      <span className=\"font-semibold\">Partecipanti:</span>{' '}\n                      {booking.personalDetails.travelers} viaggiatori\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {booking.participants && booking.participants.length > 0 && (\n              <div className=\"mb-8 p-4 bg-orange-50 rounded-lg\">\n                <h3 className=\"font-semibold text-gray-900 mb-3\">\n                  Membri del Gruppo ({booking.participants.length})\n                </h3>\n                <div className=\"space-y-2\">\n                  {booking.participants.map((participant, index) => (\n                    <div key={index} className=\"flex items-center gap-2 text-sm\">\n                      <div className=\"w-8 h-8 bg-orange-200 rounded-full flex items-center justify-center\">\n                        <span className=\"text-orange-700 font-semibold\">\n                          {participant.name.charAt(0).toUpperCase()}\n                        </span>\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-gray-900\">{participant.name}</div>\n                        <div className=\"text-gray-500 text-xs\">\n                          {participant.role === 'organizer' ? 'Organizzatore' : 'Partecipante'}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"space-y-4\">\n              {user ? (\n                <button\n                  onClick={handleJoinGroup}\n                  disabled={joining}\n                  className=\"w-full bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white font-semibold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2\"\n                >\n                  {joining ? (\n                    <>\n                      <Loader2 className=\"w-5 h-5 animate-spin\" />\n                      Unione in corso...\n                    </>\n                  ) : (\n                    <>\n                      <Users className=\"w-5 h-5\" />\n                      Unisciti al Gruppo\n                    </>\n                  )}\n                </button>\n              ) : (\n                <button\n                  onClick={() => router.push(`/login?redirect=/prenotazioni/gruppo/${shareToken}/join`)}\n                  className=\"w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors\"\n                >\n                  Accedi per Unirti al Gruppo\n                </button>\n              )}\n\n              <button\n                onClick={() => router.push('/viaggi')}\n                className=\"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-lg transition-colors\"\n              >\n                Esplora Altri Viaggi\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":9406},"lib/utils/booking-utils.ts":{"content":"import { doc, getDoc, updateDoc, arrayUnion, Timestamp, collection, query, where, getDocs } from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\nimport { Booking, BookingParticipant } from '@/lib/firestore'\n\nconst COLLECTIONS = {\n  bookings: 'bookings'\n}\n\nexport function generateShareToken(): string {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n  let token = ''\n  for (let i = 0; i < 16; i++) {\n    token += chars.charAt(Math.floor(Math.random() * chars.length))\n  }\n  return token\n}\n\nexport async function validateShareToken(shareToken: string): Promise<{\n  valid: boolean\n  booking?: Booking\n  error?: string\n}> {\n  try {\n    const bookingsRef = collection(db, COLLECTIONS.bookings)\n    const q = query(bookingsRef, where('shareToken', '==', shareToken))\n    const snapshot = await getDocs(q)\n    \n    if (snapshot.empty) {\n      return { valid: false, error: 'Link di invito non valido o scaduto' }\n    }\n    \n    const bookingDoc = snapshot.docs[0]\n    const booking = { id: bookingDoc.id, ...bookingDoc.data() } as Booking\n    \n    if (booking.status === 'cancelled') {\n      return { valid: false, error: 'Questa prenotazione √® stata cancellata' }\n    }\n    \n    return { valid: true, booking }\n  } catch (error) {\n    console.error('Error validating share token:', error)\n    return { valid: false, error: 'Errore durante la validazione del link' }\n  }\n}\n\nexport async function joinGroupBooking(\n  bookingId: string,\n  userId: string,\n  userName: string,\n  userEmail: string,\n  userPhone?: string\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const bookingRef = doc(db, COLLECTIONS.bookings, bookingId)\n    const bookingDoc = await getDoc(bookingRef)\n    \n    if (!bookingDoc.exists()) {\n      return { success: false, error: 'Prenotazione non trovata' }\n    }\n    \n    const booking = bookingDoc.data() as Booking\n    \n    const existingParticipant = booking.participants?.find(\n      p => p.userId === userId\n    )\n    if (existingParticipant) {\n      return { success: false, error: 'Sei gi√† parte di questo gruppo' }\n    }\n    \n    const newParticipant: BookingParticipant = {\n      userId,\n      name: userName,\n      email: userEmail,\n      phone: userPhone,\n      joinedAt: Timestamp.now(),\n      status: 'joined',\n      role: 'participant'\n    }\n    \n    await updateDoc(bookingRef, {\n      participants: arrayUnion(newParticipant)\n    })\n    \n    return { success: true }\n  } catch (error) {\n    console.error('Error joining group booking:', error)\n    return { success: false, error: 'Errore durante l\\'aggiunta al gruppo' }\n  }\n}\n\nexport function getShareInviteLink(shareToken: string): string {\n  if (typeof window === 'undefined') return ''\n  const baseUrl = window.location.origin\n  return `${baseUrl}/prenotazioni/gruppo/${shareToken}/join`\n}\n","size_bytes":2835},"lib/utils/chat-utils.ts":{"content":"// Chat utility functions for group conversations\nimport { \n  collection, \n  doc, \n  addDoc, \n  updateDoc, \n  query, \n  where, \n  orderBy, \n  getDocs,\n  getDoc,\n  Timestamp,\n  onSnapshot,\n  arrayUnion,\n  increment\n} from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\nimport { COLLECTIONS, ChatMessage, Conversation } from '@/lib/firestore'\n\n/**\n * Create or get conversation for a booking group\n */\nexport async function getOrCreateConversation(\n  groupId: string,\n  bookingId: string,\n  participants: Array<{ userId: string; name: string; avatar?: string }>\n): Promise<string> {\n  try {\n    // Check if conversation exists\n    const conversationsRef = collection(db, COLLECTIONS.conversations)\n    const q = query(conversationsRef, where('groupId', '==', groupId))\n    const snapshot = await getDocs(q)\n    \n    if (!snapshot.empty) {\n      return snapshot.docs[0].id\n    }\n    \n    // Create new conversation\n    const lastReadMap: { [userId: string]: any } = {}\n    const unreadCount: { [userId: string]: number } = {}\n    participants.forEach(p => {\n      lastReadMap[p.userId] = Timestamp.now()\n      unreadCount[p.userId] = 0\n    })\n    \n    const conversationData: Omit<Conversation, 'id'> = {\n      groupId,\n      bookingId,\n      participants: participants.map(p => ({\n        userId: p.userId,\n        name: p.name,\n        avatar: p.avatar\n      })),\n      lastReadMap,\n      unreadCount,\n      createdAt: Timestamp.now(),\n      updatedAt: Timestamp.now()\n    }\n    \n    const docRef = await addDoc(conversationsRef, conversationData)\n    return docRef.id\n  } catch (error) {\n    console.error('Error creating conversation:', error)\n    throw error\n  }\n}\n\n/**\n * Send a message to a conversation\n */\nexport async function sendMessage(\n  conversationId: string,\n  senderId: string,\n  senderName: string,\n  text: string,\n  senderAvatar?: string\n): Promise<void> {\n  try {\n    // Get conversation to find participants\n    const conversationRef = doc(db, COLLECTIONS.conversations, conversationId)\n    const conversationSnap = await getDoc(conversationRef)\n    \n    if (!conversationSnap.exists()) {\n      throw new Error('Conversation not found')\n    }\n    \n    const conversation = conversationSnap.data() as Conversation\n    \n    // Add message to messages collection\n    const messagesRef = collection(db, COLLECTIONS.messages)\n    const messageData: Omit<ChatMessage, 'id'> = {\n      conversationId,\n      senderId,\n      senderName,\n      senderAvatar,\n      text,\n      timestamp: Timestamp.now(),\n      readBy: [senderId] // Sender has read their own message\n    }\n    \n    await addDoc(messagesRef, messageData)\n    \n    // Build update object with unread increments\n    const updateData: any = {\n      lastMessage: {\n        text,\n        senderId,\n        senderName,\n        timestamp: Timestamp.now()\n      },\n      updatedAt: Timestamp.now(),\n      [`unreadCount.${senderId}`]: 0 // Reset sender's unread count\n    }\n    \n    // Increment unread count for all other participants\n    conversation.participants.forEach(participant => {\n      if (participant.userId !== senderId) {\n        updateData[`unreadCount.${participant.userId}`] = increment(1)\n      }\n    })\n    \n    // Update conversation\n    await updateDoc(conversationRef, updateData)\n  } catch (error) {\n    console.error('Error sending message:', error)\n    throw error\n  }\n}\n\n/**\n * Mark messages as read by user\n */\nexport async function markMessagesAsRead(\n  conversationId: string,\n  userId: string\n): Promise<void> {\n  try {\n    // Get all messages for this conversation\n    const messagesRef = collection(db, COLLECTIONS.messages)\n    const q = query(\n      messagesRef,\n      where('conversationId', '==', conversationId)\n    )\n    \n    const snapshot = await getDocs(q)\n    \n    // Filter unread messages client-side and update\n    const updatePromises = snapshot.docs\n      .filter(doc => {\n        const message = doc.data() as ChatMessage\n        return !message.readBy?.includes(userId)\n      })\n      .map(doc => \n        updateDoc(doc.ref, {\n          readBy: arrayUnion(userId)\n        })\n      )\n    \n    if (updatePromises.length > 0) {\n      await Promise.all(updatePromises)\n    }\n    \n    // Reset unread count and update lastRead in conversation\n    const conversationRef = doc(db, COLLECTIONS.conversations, conversationId)\n    await updateDoc(conversationRef, {\n      [`unreadCount.${userId}`]: 0,\n      [`lastReadMap.${userId}`]: Timestamp.now()\n    })\n  } catch (error) {\n    console.error('Error marking messages as read:', error)\n    // Don't throw - this is not critical\n  }\n}\n\n/**\n * Subscribe to messages in real-time\n */\nexport function subscribeToMessages(\n  conversationId: string,\n  onMessagesUpdate: (messages: ChatMessage[]) => void\n): () => void {\n  const messagesRef = collection(db, COLLECTIONS.messages)\n  const q = query(\n    messagesRef,\n    where('conversationId', '==', conversationId),\n    orderBy('timestamp', 'asc')\n  )\n  \n  const unsubscribe = onSnapshot(q, (snapshot) => {\n    const messages: ChatMessage[] = snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    } as ChatMessage))\n    \n    onMessagesUpdate(messages)\n  })\n  \n  return unsubscribe\n}\n\n/**\n * Subscribe to conversation updates\n */\nexport function subscribeToConversation(\n  conversationId: string,\n  onConversationUpdate: (conversation: Conversation) => void\n): () => void {\n  const conversationRef = doc(db, COLLECTIONS.conversations, conversationId)\n  \n  const unsubscribe = onSnapshot(conversationRef, (snapshot) => {\n    if (snapshot.exists()) {\n      const conversation: Conversation = {\n        id: snapshot.id,\n        ...snapshot.data()\n      } as Conversation\n      \n      onConversationUpdate(conversation)\n    }\n  })\n  \n  return unsubscribe\n}\n\n/**\n * Get conversation by group ID\n */\nexport async function getConversationByGroupId(groupId: string): Promise<Conversation | null> {\n  try {\n    const conversationsRef = collection(db, COLLECTIONS.conversations)\n    const q = query(conversationsRef, where('groupId', '==', groupId))\n    const snapshot = await getDocs(q)\n    \n    if (snapshot.empty) {\n      return null\n    }\n    \n    const doc = snapshot.docs[0]\n    return {\n      id: doc.id,\n      ...doc.data()\n    } as Conversation\n  } catch (error) {\n    console.error('Error getting conversation:', error)\n    return null\n  }\n}\n","size_bytes":6367},"components/ChatWidget.tsx":{"content":"'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { useAuth } from '@/context/AuthContext'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { \n  subscribeToMessages, \n  sendMessage, \n  markMessagesAsRead,\n  getOrCreateConversation \n} from '@/lib/utils/chat-utils'\nimport { ChatMessage } from '@/lib/firestore'\nimport { Send, X, Users } from 'lucide-react'\nimport { format } from 'date-fns'\nimport { it } from 'date-fns/locale'\n\ninterface ChatWidgetProps {\n  groupId: string\n  bookingId: string\n  participants: Array<{ userId: string; name: string; avatar?: string }>\n  onClose?: () => void\n  className?: string\n}\n\nexport default function ChatWidget({ \n  groupId, \n  bookingId, \n  participants,\n  onClose,\n  className = '' \n}: ChatWidgetProps) {\n  const { user } = useAuth()\n  const { showError } = useNotifications()\n  \n  const [messages, setMessages] = useState<ChatMessage[]>([])\n  const [newMessage, setNewMessage] = useState('')\n  const [conversationId, setConversationId] = useState<string | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [sending, setSending] = useState(false)\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  // Initialize conversation\n  useEffect(() => {\n    async function initConversation() {\n      try {\n        setLoading(true)\n        const convId = await getOrCreateConversation(groupId, bookingId, participants)\n        setConversationId(convId)\n      } catch (error) {\n        console.error('Error initializing conversation:', error)\n        showError('Errore Chat', 'Impossibile caricare la chat. Riprova pi√π tardi.')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (groupId && bookingId) {\n      initConversation()\n    }\n  }, [groupId, bookingId, participants, showError])\n\n  // Subscribe to messages\n  useEffect(() => {\n    if (!conversationId) return\n\n    const unsubscribe = subscribeToMessages(conversationId, (msgs) => {\n      setMessages(msgs)\n      scrollToBottom()\n      \n      // Mark as read when messages arrive\n      if (user) {\n        markMessagesAsRead(conversationId, user.uid)\n      }\n    })\n\n    return () => unsubscribe()\n  }, [conversationId, user])\n\n  // Auto-scroll to bottom\n  const scrollToBottom = () => {\n    setTimeout(() => {\n      messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n    }, 100)\n  }\n\n  // Send message\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!newMessage.trim() || !conversationId || !user) return\n\n    try {\n      setSending(true)\n      \n      const currentUser = participants.find(p => p.userId === user.uid)\n      const userName = currentUser?.name || user.email || 'Utente'\n      \n      await sendMessage(\n        conversationId,\n        user.uid,\n        userName,\n        newMessage.trim(),\n        currentUser?.avatar\n      )\n      \n      setNewMessage('')\n      inputRef.current?.focus()\n    } catch (error) {\n      console.error('Error sending message:', error)\n      showError('Errore Invio', 'Impossibile inviare il messaggio. Riprova.')\n    } finally {\n      setSending(false)\n    }\n  }\n\n  // Format timestamp\n  const formatMessageTime = (timestamp: any) => {\n    if (!timestamp?.toDate) return ''\n    \n    const date = timestamp.toDate()\n    const now = new Date()\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60)\n    \n    if (diffInHours < 24) {\n      return format(date, 'HH:mm', { locale: it })\n    } else if (diffInHours < 7 * 24) {\n      return format(date, 'EEE HH:mm', { locale: it })\n    } else {\n      return format(date, 'dd/MM HH:mm', { locale: it })\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className={`bg-white rounded-lg shadow-lg ${className}`}>\n        <div className=\"p-6 text-center\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-4 bg-gray-200 rounded w-3/4 mx-auto mb-4\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-1/2 mx-auto\"></div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`bg-white rounded-lg shadow-lg flex flex-col ${className}`}>\n      {/* Header */}\n      <div className=\"px-4 py-3 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-orange-50 to-red-50\">\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"w-5 h-5 text-orange-600\" />\n          <div>\n            <h3 className=\"font-semibold text-gray-900\">Chat Gruppo</h3>\n            <p className=\"text-xs text-gray-500\">\n              {participants.length} partecipant{participants.length !== 1 ? 'i' : 'e'}\n            </p>\n          </div>\n        </div>\n        \n        {onClose && (\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-white/50 rounded-lg transition-colors\"\n            aria-label=\"Chiudi chat\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        )}\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4 max-h-[400px] min-h-[300px]\">\n        {messages.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <Users className=\"w-12 h-12 text-gray-300 mx-auto mb-2\" />\n            <p className=\"text-gray-500 text-sm\">\n              Nessun messaggio ancora. Inizia la conversazione!\n            </p>\n          </div>\n        ) : (\n          messages.map((message) => {\n            const isOwnMessage = message.senderId === user?.uid\n            \n            return (\n              <div\n                key={message.id}\n                className={`flex ${isOwnMessage ? 'justify-end' : 'justify-start'}`}\n              >\n                <div className={`max-w-[70%] ${isOwnMessage ? 'items-end' : 'items-start'} flex flex-col`}>\n                  {!isOwnMessage && (\n                    <span className=\"text-xs text-gray-500 mb-1 px-2\">\n                      {message.senderName}\n                    </span>\n                  )}\n                  \n                  <div\n                    className={`px-4 py-2 rounded-lg ${\n                      isOwnMessage\n                        ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white'\n                        : 'bg-gray-100 text-gray-900'\n                    }`}\n                  >\n                    <p className=\"text-sm whitespace-pre-wrap break-words\">\n                      {message.text}\n                    </p>\n                  </div>\n                  \n                  <span className=\"text-xs text-gray-400 mt-1 px-2\">\n                    {formatMessageTime(message.timestamp)}\n                  </span>\n                </div>\n              </div>\n            )\n          })\n        )}\n        \n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <form onSubmit={handleSendMessage} className=\"p-4 border-t border-gray-200\">\n        <div className=\"flex gap-2\">\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n            placeholder=\"Scrivi un messaggio...\"\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            disabled={sending}\n          />\n          \n          <button\n            type=\"submit\"\n            disabled={!newMessage.trim() || sending}\n            className=\"px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n          >\n            <Send className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Invia</span>\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n","size_bytes":7879},"app/viaggi/deserto/sahara/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Star, Clock, Users, CheckCircle, ArrowLeft } from \"lucide-react\"\nimport Link from \"next/link\"\nimport BookingModal from \"@/components/modals/BookingModal\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function SaharaToursPage() {\n  const [selectedTour, setSelectedTour] = useState<number | null>(null);\n  const [bookingModal, setBookingModal] = useState<{\n    isOpen: boolean;\n    tour: any;\n  }>({ isOpen: false, tour: null });\n\n  const openBookingModal = (tour: any) => {\n    setBookingModal({ isOpen: true, tour });\n  };\n\n  const closeBookingModal = () => {\n    setBookingModal({ isOpen: false, tour: null });\n  };\n\n  const saharaTours = [\n    {\n      id: 1,\n      title: \"Deserto Express\",\n      subtitle: \"L'essenza del Sahara in 48 ore\",\n      duration: \"2 giorni / 1 notte\",\n      price: \"‚Ç¨180\",\n      originalPrice: \"‚Ç¨220\",\n      image: \"/images/desert-express.png\",\n      difficulty: 1,\n      rating: 4.7,\n      reviews: 89,\n      groupSize: \"2-8 persone\",\n      highlights: [\n        \"Tramonto sulle dune di Erg Chebbi\",\n        \"Notte in campo tendato tradizionale\",\n        \"Escursione in cammello\",\n        \"Alba nel deserto\",\n        \"Trasporto da/per Marrakech\",\n      ],\n      itinerary: [\n        {\n          day: 1,\n          title: \"Marrakech ‚Üí Merzouga\",\n          description: \"Partenza mattutina, attraversamento dell'Atlante, arrivo al tramonto per l'escursione in cammello\",\n        },\n        {\n          day: 2,\n          title: \"Alba nel deserto ‚Üí Marrakech\",\n          description: \"Sveglia per l'alba, colazione berbera, rientro a Marrakech nel pomeriggio\",\n        },\n      ],\n      includes: [\n        \"Trasporto in 4x4/minivan climatizzato\",\n        \"1 notte in campo tendato standard\",\n        \"Cena e colazione nel deserto\",\n        \"Escursione in cammello (1h)\",\n        \"Guida locale parlante italiano\",\n      ],\n      notIncludes: [\"Pranzi\", \"Bevande\", \"Mance\", \"Spese personali\"],\n      bestFor: \"Chi ha poco tempo ma non vuole perdersi l'esperienza del Sahara\",\n      season: \"Tutto l'anno (migliore: Mar-Mag, Set-Nov)\",\n    },\n    {\n      id: 2,\n      title: \"Classic Desert Adventure\",\n      subtitle: \"Il tour del deserto pi√π completo\",\n      duration: \"3 giorni / 2 notti\",\n      price: \"‚Ç¨320\",\n      originalPrice: \"‚Ç¨380\",\n      image: \"/images/classic-desert.png\",\n      difficulty: 2,\n      rating: 4.9,\n      reviews: 156,\n      groupSize: \"2-12 persone\",\n      highlights: [\n        \"Kasbah di Ait Benhaddou (UNESCO)\",\n        \"Gole del Todra\",\n        \"2 notti nel deserto\",\n        \"Musica berbera attorno al fuoco\",\n        \"Visita a famiglia nomade\",\n      ],\n      itinerary: [\n        {\n          day: 1,\n          title: \"Marrakech ‚Üí Ouarzazate\",\n          description: \"Attraversamento dell'Atlante, visita Ait Benhaddou, pernottamento a Ouarzazate\",\n        },\n        {\n          day: 2,\n          title: \"Ouarzazate ‚Üí Merzouga\",\n          description: \"Gole del Todra, arrivo nel deserto, escursione in cammello, notte in campo\",\n        },\n        {\n          day: 3,\n          title: \"Merzouga ‚Üí Fes\",\n          description: \"Alba nel deserto, viaggio verso Fes attraverso la valle dello Ziz\",\n        },\n      ],\n      includes: [\n        \"Trasporto privato 4x4\",\n        \"2 notti: 1 hotel + 1 campo berbero\",\n        \"Mezza pensione (colazioni e cene)\",\n        \"Escursione in cammello\",\n        \"Guida esperta multilingue\",\n        \"Ingressi monumenti principali\",\n      ],\n      notIncludes: [\"Pranzi\", \"Bevande alcoliche\", \"Assicurazione viaggio\", \"Voli\"],\n      bestFor: \"Perfetto equilibrio tra avventura e comfort\",\n      season: \"Tutto l'anno (evitare Luglio-Agosto per il caldo)\",\n    },\n    {\n      id: 3,\n      title: \"Grand Desert Journey\",\n      subtitle: \"Immersione totale nel Sahara\",\n      duration: \"4 giorni / 3 notti\",\n      price: \"‚Ç¨480\",\n      originalPrice: \"‚Ç¨560\",\n      image: \"/images/grand-desert.png\",\n      difficulty: 3,\n      rating: 4.8,\n      reviews: 73,\n      groupSize: \"2-8 persone\",\n      highlights: [\n        \"3 notti nel deserto\",\n        \"Trekking sulle dune\",\n        \"Incontro con nomadi\",\n        \"Sandboarding\",\n        \"Osservazione stelle con telescopio\",\n      ],\n      itinerary: [\n        {\n          day: 1,\n          title: \"Marrakech ‚Üí Valle del Draa\",\n          description: \"Kasbah Telouet, valle del Draa, pernottamento in kasbah tradizionale\",\n        },\n        {\n          day: 2,\n          title: \"Valle del Draa ‚Üí Erg Chebbi\",\n          description: \"Arrivo nel deserto, prima notte in campo fisso\",\n        },\n        {\n          day: 3,\n          title: \"Giornata nel deserto\",\n          description: \"Trekking, sandboarding, visita nomadi, notte in campo mobile\",\n        },\n        {\n          day: 4,\n          title: \"Deserto ‚Üí Marrakech\",\n          description: \"Alba finale, rientro via Ouarzazate\",\n        },\n      ],\n      includes: [\n        \"Trasporto 4x4 premium\",\n        \"3 notti: kasbah + 2 campi diversi\",\n        \"Pensione completa\",\n        \"Tutte le attivit√† nel deserto\",\n        \"Guida berbera esperta\",\n        \"Telescopio per stelle\",\n        \"Attrezzatura sandboarding\",\n      ],\n      notIncludes: [\"Bevande alcoliche\", \"Spese personali\", \"Assicurazione\", \"Equipaggiamento personale\"],\n      bestFor: \"Avventurieri che vogliono vivere il deserto a 360¬∞\",\n      season: \"Mar-Mag, Set-Nov (temperature ideali)\",\n    },\n    {\n      id: 4,\n      title: \"Luxury Desert Experience\",\n      subtitle: \"Il deserto con tutti i comfort\",\n      duration: \"3 giorni / 2 notti\",\n      price: \"‚Ç¨750\",\n      originalPrice: \"‚Ç¨890\",\n      image: \"/images/luxury-desert.png\",\n      difficulty: 1,\n      rating: 5.0,\n      reviews: 42,\n      groupSize: \"2-6 persone\",\n      highlights: [\n        \"Campo tendato 5 stelle\",\n        \"Bagno privato in tenda\",\n        \"Cena gourmet nel deserto\",\n        \"Massaggio berbero\",\n        \"Trasporto di lusso\",\n      ],\n      itinerary: [\n        {\n          day: 1,\n          title: \"Marrakech ‚Üí Deserto VIP\",\n          description: \"Trasferimento in veicolo di lusso, arrivo al campo deluxe, aperitivo al tramonto\",\n        },\n        {\n          day: 2,\n          title: \"Giornata di relax nel deserto\",\n          description: \"Escursioni opzionali, trattamenti spa, cena sotto le stelle\",\n        },\n        {\n          day: 3,\n          title: \"Deserto ‚Üí Marrakech\",\n          description: \"Colazione gourmet, rientro con soste panoramiche\",\n        },\n      ],\n      includes: [\n        \"Trasporto Mercedes/BMW\",\n        \"Campo tendato luxury (bagno privato)\",\n        \"Pensione completa gourmet\",\n        \"Champagne di benvenuto\",\n        \"Trattamento spa incluso\",\n        \"Maggiordomo personale\",\n        \"Fotografo professionale (su richiesta)\",\n      ],\n      notIncludes: [\"Voli internazionali\", \"Assicurazione premium\", \"Servizi extra spa\"],\n      bestFor: \"Coppie in luna di miele, viaggi di lusso, occasioni speciali\",\n      season: \"Tutto l'anno (clima controllato)\",\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative py-32 bg-gradient-to-r from-orange-600 via-red-500 to-orange-500 dark:from-orange-900 dark:via-red-900 dark:to-orange-900 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <img src=\"/images/sahara-sunset.png\" alt=\"Sahara Desert\" className=\"w-full h-full object-cover opacity-30\" />\n          <div className=\"absolute inset-0 bg-black/40 dark:bg-black/60\" />\n        </div>\n\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-white\">\n          <Link href=\"/viaggi/deserto\" className=\"inline-flex items-center space-x-2 text-white/90 hover:text-white mb-6 transition-colors\">\n            <ArrowLeft className=\"w-5 h-5\" />\n            <span>Torna alla scelta deserto</span>\n          </Link>\n          \n          <h1 className=\"text-5xl md:text-7xl font-bold mb-6\">\n            Tour del\n            <span className=\"block bg-gradient-to-r from-yellow-300 to-orange-200 bg-clip-text text-transparent\">\n              Sahara\n            </span>\n          </h1>\n          <p className=\"text-xl md:text-2xl max-w-3xl mb-8\">\n            Le leggendarie dune dorate di Erg Chebbi ti aspettano\n          </p>\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"bg-white/20 dark:bg-white/5 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">550 km da Marrakech</span>\n            </div>\n            <div className=\"bg-white/20 dark:bg-white/5 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Dune di sabbia dorata</span>\n            </div>\n            <div className=\"bg-white/20 dark:bg-white/5 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Campi berberi autentici</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tours Grid */}\n      <div className=\"py-20 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl font-bold text-foreground mb-4\">Tour Disponibili nel Sahara</h2>\n            <p className=\"text-xl text-muted-foreground\">\n              Da 2 a 4 giorni di avventura autentica nelle dune\n            </p>\n          </div>\n          \n          <div className=\"grid lg:grid-cols-2 gap-8\">\n            {saharaTours.map((tour) => (\n              <div\n                key={tour.id}\n                className=\"bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-border\"\n              >\n                {/* Image */}\n                <div className=\"relative h-64 overflow-hidden\">\n                  <img\n                    src={tour.image || \"/placeholder.svg?height=256&width=500\"}\n                    alt={tour.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n                  \n                  {/* Wishlist Button */}\n                  <div className=\"absolute top-4 left-4 z-10\">\n                    <WishlistButton\n                      itemId={`sahara-tour-${tour.id}`}\n                      itemType=\"travel\"\n                      itemTitle={tour.title}\n                      itemImage={tour.image}\n                      itemPrice={parseInt(tour.price.replace('‚Ç¨', ''))}\n                      itemDescription={tour.subtitle}\n                    />\n                  </div>\n                  \n                  {/* Price Badge */}\n                  <div className=\"absolute top-4 right-4 bg-white/95 dark:bg-card/80 backdrop-blur-sm rounded-full px-4 py-2\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-bold text-lg text-foreground\">{tour.price}</span>\n                      {tour.originalPrice && (\n                        <span className=\"text-sm line-through text-muted-foreground\">{tour.originalPrice}</span>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Rating */}\n                  <div className=\"absolute bottom-4 right-4 flex items-center space-x-1 bg-black/30 backdrop-blur-sm px-3 py-1 rounded-full\">\n                    <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                    <span className=\"text-white text-sm font-semibold\">{tour.rating}</span>\n                    <span className=\"text-white/70 text-sm\">({tour.reviews})</span>\n                  </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"p-6 space-y-6\">\n                  <div>\n                    <h3 className=\"text-2xl font-bold text-foreground mb-2\">{tour.title}</h3>\n                    <p className=\"text-orange-600 dark:text-orange-400 font-medium mb-3\">{tour.subtitle}</p>\n                    <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex items-center space-x-1\">\n                          <Clock className=\"w-4 h-4\" />\n                          <span>{tour.duration}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-1\">\n                          <Users className=\"w-4 h-4\" />\n                          <span>{tour.groupSize}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Highlights */}\n                  <div>\n                    <h4 className=\"font-semibold text-foreground mb-3\">Highlights principali:</h4>\n                    <div className=\"space-y-2\">\n                      {tour.highlights.slice(0, 3).map((highlight, idx) => (\n                        <div key={idx} className=\"flex items-center space-x-2\">\n                          <CheckCircle className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                          <span className=\"text-sm text-muted-foreground\">{highlight}</span>\n                        </div>\n                      ))}\n                      {tour.highlights.length > 3 && (\n                        <div className=\"text-sm text-orange-600 dark:text-orange-400 font-medium\">\n                          +{tour.highlights.length - 3} altre esperienze\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Best For */}\n                  <div className=\"rounded-xl p-4 bg-gradient-to-r from-orange-500 to-red-500 text-white\">\n                    <h4 className=\"font-semibold mb-2\">Perfetto per:</h4>\n                    <p className=\"text-sm\">{tour.bestFor}</p>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex space-x-3\">\n                    <button\n                      onClick={() => setSelectedTour(selectedTour === tour.id ? null : tour.id)}\n                      className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 dark:from-orange-900 dark:to-red-900 text-white py-3 px-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      {selectedTour === tour.id ? \"Nascondi Dettagli\" : \"Vedi Dettagli\"}\n                    </button>\n                    <button\n                      onClick={() => openBookingModal(tour)}\n                      className=\"px-6 py-3 border-2 border-orange-500 text-orange-500 rounded-xl hover:bg-orange-500 hover:text-white transition-all duration-300 font-semibold\"\n                    >\n                      Prenota\n                    </button>\n                  </div>\n\n                  {/* Expanded Details */}\n                  {selectedTour === tour.id && (\n                    <div className=\"mt-6 pt-6 border-t border-border space-y-6\">\n                      {/* Itinerary */}\n                      <div>\n                        <h4 className=\"font-semibold text-foreground mb-4\">Itinerario:</h4>\n                        <div className=\"space-y-4\">\n                          {tour.itinerary.map((day, idx) => (\n                            <div key={idx} className=\"flex space-x-4\">\n                              <div className=\"flex-shrink-0 w-10 h-10 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold\">\n                                {day.day}\n                              </div>\n                              <div>\n                                <h5 className=\"font-semibold text-foreground\">{day.title}</h5>\n                                <p className=\"text-sm text-muted-foreground mt-1\">{day.description}</p>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n\n                      {/* Includes/Not Includes */}\n                      <div className=\"grid md:grid-cols-2 gap-4\">\n                        <div>\n                          <h4 className=\"font-semibold text-green-600 mb-3\">‚úì Incluso:</h4>\n                          <ul className=\"space-y-1\">\n                            {tour.includes.map((item, idx) => (\n                              <li key={idx} className=\"text-sm text-muted-foreground\">‚Ä¢ {item}</li>\n                            ))}\n                          </ul>\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-red-600 mb-3\">‚úó Non incluso:</h4>\n                          <ul className=\"space-y-1\">\n                            {tour.notIncludes.map((item, idx) => (\n                              <li key={idx} className=\"text-sm text-muted-foreground\">‚Ä¢ {item}</li>\n                            ))}\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Booking Modal */}\n      <BookingModal\n        isOpen={bookingModal.isOpen}\n        onClose={closeBookingModal}\n        itemId={`sahara-tour-${bookingModal.tour?.id || 0}`}\n        itemType=\"travel\"\n        itemTitle={bookingModal.tour?.title || \"\"}\n        basePrice={parseInt(bookingModal.tour?.price?.replace('‚Ç¨', '') || '0')}\n        duration={bookingModal.tour?.duration || \"\"}\n      />\n    </div>\n  )\n}\n","size_bytes":17752},"app/viaggi/deserto/agafay/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Star, Clock, Users, CheckCircle, ArrowLeft } from \"lucide-react\"\nimport Link from \"next/link\"\nimport BookingModal from \"@/components/modals/BookingModal\"\nimport WishlistButton from \"@/components/WishlistButton\"\n\nexport default function AgafayToursPage() {\n  const [selectedTour, setSelectedTour] = useState<number | null>(null);\n  const [bookingModal, setBookingModal] = useState<{\n    isOpen: boolean;\n    tour: any;\n  }>({ isOpen: false, tour: null });\n\n  const openBookingModal = (tour: any) => {\n    setBookingModal({ isOpen: true, tour });\n  };\n\n  const closeBookingModal = () => {\n    setBookingModal({ isOpen: false, tour: null });\n  };\n\n  const agafayTours = [\n    {\n      id: 0,\n      title: \"Deserto di Agafay - Giornata\",\n      subtitle: \"Fuga dal caos cittadino a 40 minuti da Marrakech\",\n      duration: \"1 giorno (8 ore)\",\n      price: \"‚Ç¨50\",\n      originalPrice: \"\",\n      image: \"/images/agafay-desert.png\",\n      difficulty: 1,\n      rating: 4.6,\n      reviews: 124,\n      groupSize: \"2-15 persone\",\n      highlights: [\n        \"Deserto roccioso di Agafay\",\n        \"Pranzo berbero incluso\",\n        \"Quad o cammelli (opzionale)\",\n        \"Vista sull'Atlante\",\n        \"Trasporto da/per Marrakech\",\n      ],\n      itinerary: [\n        {\n          day: 1,\n          title: \"Marrakech ‚Üí Agafay ‚Üí Marrakech\",\n          description: \"Partenza mattutina, esplorazione del deserto di Agafay, pranzo tradizionale, attivit√† opzionali, rientro al tramonto\",\n        },\n      ],\n      includes: [\n        \"Trasporto in minivan/4x4\",\n        \"Pranzo berbero tradizionale\",\n        \"Guida parlante italiano\",\n        \"T√® alla menta\",\n      ],\n      notIncludes: [\"Quad/cammelli (opzionali)\", \"Bevande extra\", \"Mance\"],\n      bestFor: \"Chi ha poco tempo o vuole un assaggio del deserto vicino a Marrakech\",\n      season: \"Tutto l'anno\",\n    },\n    {\n      id: -1,\n      title: \"Deserto di Agafay con Notte in Tenda - Standard\",\n      subtitle: \"Esperienza autentica nel deserto roccioso\",\n      duration: \"1 giorno / 1 notte\",\n      price: \"‚Ç¨76\",\n      originalPrice: \"\",\n      image: \"/images/agafay-night.png\",\n      difficulty: 1,\n      rating: 4.7,\n      reviews: 98,\n      groupSize: \"2-12 persone\",\n      highlights: [\n        \"Notte in campo tendato standard\",\n        \"Tramonto e alba nel deserto\",\n        \"Cena e colazione berbere\",\n        \"Musica tradizionale attorno al fuoco\",\n        \"Vista spettacolare sull'Atlante\",\n      ],\n      itinerary: [\n        {\n          day: 1,\n          title: \"Marrakech ‚Üí Agafay\",\n          description: \"Partenza pomeridiana, arrivo al campo, t√® di benvenuto, tramonto, cena tradizionale, musica\",\n        },\n        {\n          day: 2,\n          title: \"Alba ‚Üí Marrakech\",\n          description: \"Sveglia per l'alba, colazione, rientro a Marrakech\",\n        },\n      ],\n      includes: [\n        \"Trasporto in minivan\",\n        \"1 notte in tenda standard (letti condivisi o privati)\",\n        \"Cena e colazione berbere\",\n        \"T√® alla menta e dolcetti\",\n        \"Musica live\",\n      ],\n      notIncludes: [\"Pranzi\", \"Bevande alcoliche\", \"Attivit√† extra\"],\n      bestFor: \"Budget-conscious travelers che vogliono vivere il deserto\",\n      season: \"Tutto l'anno\",\n    },\n    {\n      id: -2,\n      title: \"Deserto di Agafay con Notte in Tenda - Luxury\",\n      subtitle: \"Glamping esclusivo con vista sull'Atlante\",\n      duration: \"1 giorno / 1 notte\",\n      price: \"‚Ç¨230\",\n      originalPrice: \"\",\n      image: \"/images/agafay-luxury.png\",\n      difficulty: 1,\n      rating: 4.9,\n      reviews: 67,\n      groupSize: \"2-8 persone\",\n      highlights: [\n        \"Tenda luxury con bagno privato\",\n        \"Cena gourmet sotto le stelle\",\n        \"Piscina panoramica (alcuni campi)\",\n        \"Servizio premium\",\n        \"Spa e massaggi (opzionali)\",\n      ],\n      itinerary: [\n        {\n          day: 1,\n          title: \"Marrakech ‚Üí Agafay Luxury\",\n          description: \"Transfer privato, check-in luxury camp, aperitivo panoramico, cena gourmet, intrattenimento\",\n        },\n        {\n          day: 2,\n          title: \"Relax ‚Üí Marrakech\",\n          description: \"Colazione gourmet, tempo libero, rientro con soste panoramiche\",\n        },\n      ],\n      includes: [\n        \"Trasporto premium\",\n        \"Tenda luxury con bagno en-suite\",\n        \"Cena e colazione gourmet\",\n        \"Champagne di benvenuto\",\n        \"Servizio maggiordomo\",\n        \"Wi-Fi nel campo\",\n      ],\n      notIncludes: [\"Trattamenti spa\", \"Bevande premium\", \"Trasferimenti extra\"],\n      bestFor: \"Coppie romantiche, luna di miele, viaggi di lusso\",\n      season: \"Tutto l'anno\",\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative py-32 bg-gradient-to-r from-amber-600 via-yellow-600 to-amber-500 dark:from-amber-900 dark:via-yellow-900 dark:to-amber-900 overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <img src=\"/images/agafay-desert.png\" alt=\"Agafay Desert\" className=\"w-full h-full object-cover opacity-30\" />\n          <div className=\"absolute inset-0 bg-black/40 dark:bg-black/60\" />\n        </div>\n\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-white\">\n          <Link href=\"/viaggi/deserto\" className=\"inline-flex items-center space-x-2 text-white/90 hover:text-white mb-6 transition-colors\">\n            <ArrowLeft className=\"w-5 h-5\" />\n            <span>Torna alla scelta deserto</span>\n          </Link>\n          \n          <h1 className=\"text-5xl md:text-7xl font-bold mb-6\">\n            Tour del Deserto di\n            <span className=\"block bg-gradient-to-r from-yellow-300 to-amber-200 bg-clip-text text-transparent\">\n              Agafay\n            </span>\n          </h1>\n          <p className=\"text-xl md:text-2xl max-w-3xl mb-8\">\n            Il deserto roccioso a 40 minuti da Marrakech con vista sull'Atlante\n          </p>\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"bg-white/20 dark:bg-white/5 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">40 km da Marrakech</span>\n            </div>\n            <div className=\"bg-white/20 dark:bg-white/5 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Paesaggio lunare</span>\n            </div>\n            <div className=\"bg-white/20 dark:bg-white/5 backdrop-blur-sm px-6 py-3 rounded-full\">\n              <span className=\"font-semibold\">Glamping di lusso</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tours Grid */}\n      <div className=\"py-20 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl font-bold text-foreground mb-4\">Tour Disponibili ad Agafay</h2>\n            <p className=\"text-xl text-muted-foreground\">\n              Da escursioni giornaliere a notti in campi luxury\n            </p>\n          </div>\n          \n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            {agafayTours.map((tour) => (\n              <div\n                key={tour.id}\n                className=\"bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-border\"\n              >\n                {/* Image */}\n                <div className=\"relative h-64 overflow-hidden\">\n                  <img\n                    src={tour.image || \"/placeholder.svg?height=256&width=500\"}\n                    alt={tour.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n                  \n                  {/* Wishlist Button */}\n                  <div className=\"absolute top-4 left-4 z-10\">\n                    <WishlistButton\n                      itemId={`agafay-tour-${tour.id}`}\n                      itemType=\"travel\"\n                      itemTitle={tour.title}\n                      itemImage={tour.image}\n                      itemPrice={parseInt(tour.price.replace('‚Ç¨', ''))}\n                      itemDescription={tour.subtitle}\n                    />\n                  </div>\n                  \n                  {/* Price Badge */}\n                  <div className=\"absolute top-4 right-4 bg-white/95 dark:bg-card/80 backdrop-blur-sm rounded-full px-4 py-2\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-bold text-lg text-foreground\">{tour.price}</span>\n                    </div>\n                  </div>\n                  \n                  {/* Rating */}\n                  <div className=\"absolute bottom-4 right-4 flex items-center space-x-1 bg-black/30 backdrop-blur-sm px-3 py-1 rounded-full\">\n                    <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n                    <span className=\"text-white text-sm font-semibold\">{tour.rating}</span>\n                    <span className=\"text-white/70 text-sm\">({tour.reviews})</span>\n                  </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"p-6 space-y-6\">\n                  <div>\n                    <h3 className=\"text-xl font-bold text-foreground mb-2\">{tour.title}</h3>\n                    <p className=\"text-amber-600 dark:text-amber-400 font-medium mb-3\">{tour.subtitle}</p>\n                    <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex items-center space-x-1\">\n                          <Clock className=\"w-4 h-4\" />\n                          <span>{tour.duration}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-1\">\n                          <Users className=\"w-4 h-4\" />\n                          <span>{tour.groupSize}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Highlights */}\n                  <div>\n                    <h4 className=\"font-semibold text-foreground mb-3\">Highlights principali:</h4>\n                    <div className=\"space-y-2\">\n                      {tour.highlights.slice(0, 3).map((highlight, idx) => (\n                        <div key={idx} className=\"flex items-center space-x-2\">\n                          <CheckCircle className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                          <span className=\"text-sm text-muted-foreground\">{highlight}</span>\n                        </div>\n                      ))}\n                      {tour.highlights.length > 3 && (\n                        <div className=\"text-sm text-amber-600 dark:text-amber-400 font-medium\">\n                          +{tour.highlights.length - 3} altre esperienze\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Best For */}\n                  <div className=\"rounded-xl p-4 bg-gradient-to-r from-amber-500 to-yellow-500 text-white\">\n                    <h4 className=\"font-semibold mb-2\">Perfetto per:</h4>\n                    <p className=\"text-sm\">{tour.bestFor}</p>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex space-x-3\">\n                    <button\n                      onClick={() => setSelectedTour(selectedTour === tour.id ? null : tour.id)}\n                      className=\"flex-1 bg-gradient-to-r from-amber-500 to-yellow-500 dark:from-amber-900 dark:to-yellow-900 text-white py-3 px-4 rounded-xl hover:from-amber-600 hover:to-yellow-600 transition-all duration-300 font-semibold text-center\"\n                    >\n                      {selectedTour === tour.id ? \"Nascondi\" : \"Vedi Dettagli\"}\n                    </button>\n                    <button\n                      onClick={() => openBookingModal(tour)}\n                      className=\"px-6 py-3 border-2 border-amber-500 text-amber-500 rounded-xl hover:bg-amber-500 hover:text-white transition-all duration-300 font-semibold\"\n                    >\n                      Prenota\n                    </button>\n                  </div>\n\n                  {/* Expanded Details */}\n                  {selectedTour === tour.id && (\n                    <div className=\"mt-6 pt-6 border-t border-border space-y-6\">\n                      {/* Itinerary */}\n                      <div>\n                        <h4 className=\"font-semibold text-foreground mb-4\">Itinerario:</h4>\n                        <div className=\"space-y-4\">\n                          {tour.itinerary.map((day, idx) => (\n                            <div key={idx} className=\"flex space-x-4\">\n                              <div className=\"flex-shrink-0 w-10 h-10 bg-amber-500 text-white rounded-full flex items-center justify-center font-bold\">\n                                {day.day}\n                              </div>\n                              <div>\n                                <h5 className=\"font-semibold text-foreground\">{day.title}</h5>\n                                <p className=\"text-sm text-muted-foreground mt-1\">{day.description}</p>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n\n                      {/* Includes/Not Includes */}\n                      <div className=\"grid md:grid-cols-2 gap-4\">\n                        <div>\n                          <h4 className=\"font-semibold text-green-600 mb-3\">‚úì Incluso:</h4>\n                          <ul className=\"space-y-1\">\n                            {tour.includes.map((item, idx) => (\n                              <li key={idx} className=\"text-sm text-muted-foreground\">‚Ä¢ {item}</li>\n                            ))}\n                          </ul>\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-red-600 mb-3\">‚úó Non incluso:</h4>\n                          <ul className=\"space-y-1\">\n                            {tour.notIncludes.map((item, idx) => (\n                              <li key={idx} className=\"text-sm text-muted-foreground\">‚Ä¢ {item}</li>\n                            ))}\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Booking Modal */}\n      <BookingModal\n        isOpen={bookingModal.isOpen}\n        onClose={closeBookingModal}\n        itemId={`agafay-tour-${bookingModal.tour?.id || 0}`}\n        itemType=\"travel\"\n        itemTitle={bookingModal.tour?.title || \"\"}\n        basePrice={parseInt(bookingModal.tour?.price?.replace('‚Ç¨', '') || '0')}\n        duration={bookingModal.tour?.duration || \"\"}\n      />\n    </div>\n  )\n}\n","size_bytes":15186},"app/admin/login/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { signInWithEmailAndPassword } from \"firebase/auth\"\nimport { auth } from \"@/lib/firebase\"\nimport { useAuth } from \"@/context/AuthContext\"\nimport { Lock, Mail, AlertCircle, LogIn } from \"lucide-react\"\n\nexport default function AdminLoginPage() {\n  const router = useRouter()\n  const { user, loading } = useAuth()\n  \n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [error, setError] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(false)\n\n  useEffect(() => {\n    if (!loading && user) {\n      checkAdminAccess(user.uid)\n    }\n  }, [user, loading])\n\n  const checkAdminAccess = async (uid: string) => {\n    try {\n      // Get the user's ID token to verify admin access via API\n      const idToken = await user?.getIdToken()\n      \n      const response = await fetch(\"/api/auth/check-admin\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${idToken}`,\n          \"Content-Type\": \"application/json\",\n        },\n      })\n\n      const data = await response.json()\n\n      if (response.ok && data.isAdmin) {\n        router.push(\"/admin\")\n      } else {\n        setError(\"Accesso negato: non sei un amministratore autorizzato\")\n      }\n    } catch (err) {\n      console.error(\"Error checking admin access:\", err)\n    }\n  }\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(\"\")\n    setIsLoading(true)\n\n    try {\n      const userCredential = await signInWithEmailAndPassword(auth, email, password)\n      const idToken = await userCredential.user.getIdToken()\n      \n      // Verify admin access via PostgreSQL\n      const response = await fetch(\"/api/auth/check-admin\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${idToken}`,\n          \"Content-Type\": \"application/json\",\n        },\n      })\n\n      const data = await response.json()\n      \n      if (!response.ok || !data.isAdmin) {\n        setError(\"Accesso negato: account non autorizzato come amministratore\")\n        await auth.signOut()\n        setIsLoading(false)\n        return\n      }\n\n      // Don't navigate immediately - let the useEffect handle it after user state updates\n      // The useEffect will trigger when user changes in AuthContext\n      setIsLoading(false)\n    } catch (err: any) {\n      console.error(\"Login error:\", err)\n      \n      if (err.code === \"auth/user-not-found\") {\n        setError(\"Email non trovata\")\n      } else if (err.code === \"auth/wrong-password\") {\n        setError(\"Password errata\")\n      } else if (err.code === \"auth/invalid-email\") {\n        setError(\"Email non valida\")\n      } else if (err.code === \"auth/too-many-requests\") {\n        setError(\"Troppi tentativi falliti. Riprova pi√π tardi\")\n      } else {\n        setError(\"Errore durante il login. Riprova\")\n      }\n      \n      setIsLoading(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center\">\n        <div className=\"text-white text-lg\">Caricamento...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full\">\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 border border-slate-200 dark:border-slate-700\">\n          <div className=\"text-center mb-8\">\n            <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-orange-500 to-red-500 mb-4\">\n              <Lock className=\"w-8 h-8 text-white\" />\n            </div>\n            <h1 className=\"text-3xl font-bold text-slate-900 dark:text-white mb-2\">\n              Admin Panel\n            </h1>\n            <p className=\"text-slate-600 dark:text-slate-400\">\n              Accedi al pannello di controllo\n            </p>\n          </div>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start space-x-3\">\n              <AlertCircle className=\"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5\" />\n              <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n            </div>\n          )}\n\n          <form onSubmit={handleLogin} className=\"space-y-6\">\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2\">\n                Email\n              </label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  required\n                  autoComplete=\"email\"\n                  className=\"w-full pl-11 pr-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-slate-700 dark:text-white transition-all\"\n                  placeholder=\"admin@moroccodreams.com\"\n                  disabled={isLoading}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\n                <input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  required\n                  autoComplete=\"current-password\"\n                  className=\"w-full pl-11 pr-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-slate-700 dark:text-white transition-all\"\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                  disabled={isLoading}\n                />\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold py-3 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                  <span>Accesso in corso...</span>\n                </>\n              ) : (\n                <>\n                  <LogIn className=\"w-5 h-5\" />\n                  <span>Accedi</span>\n                </>\n              )}\n            </button>\n          </form>\n\n          <div className=\"mt-6 pt-6 border-t border-slate-200 dark:border-slate-700\">\n            <p className=\"text-center text-sm text-slate-600 dark:text-slate-400\">\n              Solo per amministratori autorizzati\n            </p>\n          </div>\n        </div>\n\n        <div className=\"mt-6 text-center\">\n          <a\n            href=\"/\"\n            className=\"text-sm text-slate-300 hover:text-white transition-colors\"\n          >\n            ‚Üê Torna al sito\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":7756},"app/admin/layout.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter, usePathname } from \"next/navigation\"\nimport { useAuth } from \"@/context/AuthContext\"\nimport {\n  LayoutDashboard,\n  Compass,\n  MapPin,\n  Car,\n  Instagram,\n  Users,\n  Menu,\n  X,\n  LogOut,\n  Sun,\n  Moon,\n  FileText,\n  Settings,\n  Calendar\n} from \"lucide-react\"\nimport Link from \"next/link\"\nimport { useTheme } from \"next-themes\"\nimport PublishBanner from \"@/components/admin/PublishBanner\"\n\nexport default function AdminLayout({ children }: { children: React.ReactNode }) {\n  const router = useRouter()\n  const pathname = usePathname()\n  const { user, loading, isAdmin, signOut } = useAuth()\n  const { theme, setTheme } = useTheme()\n  \n  const [isSidebarOpen, setIsSidebarOpen] = useState(false)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  useEffect(() => {\n    if (pathname === \"/admin/login\") return\n    \n    // Check auth/admin status after loading completes\n    if (!loading) {\n      if (!user) {\n        router.push(\"/admin/login\")\n      } else if (!isAdmin) {\n        // User is not admin, redirect to home\n        router.push(\"/\")\n      }\n    }\n  }, [user, isAdmin, loading, pathname, router])\n\n  const handleLogout = async () => {\n    try {\n      await signOut()\n      router.push(\"/admin/login\")\n    } catch (error) {\n      console.error(\"Logout error:\", error)\n    }\n  }\n\n  if (pathname === \"/admin/login\") {\n    return children\n  }\n\n  // Show loading while checking authentication\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Verifica accesso...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Don't render if user is not admin (will redirect via useEffect)\n  if (!user || !isAdmin) {\n    return null\n  }\n\n  const navItems = [\n    { href: \"/admin\", icon: LayoutDashboard, label: \"Dashboard\" },\n    { href: \"/admin/content\", icon: FileText, label: \"Content Manager\" },\n    { href: \"/admin/bookings\", icon: Calendar, label: \"Bookings\" },\n    { href: \"/admin/cities\", icon: MapPin, label: \"Citt√†\" },\n    { href: \"/admin/services\", icon: Settings, label: \"Servizi\" },\n    { href: \"/admin/instagram\", icon: Instagram, label: \"Instagram\" },\n    { href: \"/admin/settings\", icon: Settings, label: \"Impostazioni Sito\" },\n    { href: \"/admin/users\", icon: Users, label: \"Utenti Admin\" },\n  ]\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {isSidebarOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\"\n          onClick={() => setIsSidebarOpen(false)}\n        />\n      )}\n\n      <aside\n        className={`fixed top-0 left-0 h-screen w-72 bg-card border-r border-border z-40 transform transition-transform duration-300 lg:translate-x-0 ${\n          isSidebarOpen ? \"translate-x-0\" : \"-translate-x-full\"\n        }`}\n      >\n        <div className=\"flex flex-col h-full\">\n          <div className=\"p-6 border-b border-border\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-xl font-bold bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent\">\n                  Morocco Dreams\n                </h1>\n                <p className=\"text-sm text-muted-foreground mt-1\">Admin Panel</p>\n              </div>\n              <button\n                onClick={() => setIsSidebarOpen(false)}\n                className=\"lg:hidden p-2 hover:bg-muted rounded-lg transition-colors\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </div>\n\n          <div className=\"p-4 border-b border-border\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white font-semibold\">\n                {user?.displayName?.charAt(0).toUpperCase() || \"A\"}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium truncate\">{user?.displayName || \"Admin\"}</p>\n                <p className=\"text-xs text-muted-foreground truncate capitalize\">\n                  super_admin\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <nav className=\"flex-1 p-4 overflow-y-auto\">\n            <ul className=\"space-y-2\">\n              {navItems.map((item) => {\n                const Icon = item.icon\n                const isActive = pathname === item.href\n                \n                return (\n                  <li key={item.href}>\n                    <Link\n                      href={item.href}\n                      onClick={() => setIsSidebarOpen(false)}\n                      className={`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${\n                        isActive\n                          ? \"bg-gradient-to-r from-orange-500 to-red-500 text-white\"\n                          : \"hover:bg-muted text-muted-foreground hover:text-foreground\"\n                      }`}\n                    >\n                      <Icon className=\"w-5 h-5\" />\n                      <span className=\"font-medium\">{item.label}</span>\n                    </Link>\n                  </li>\n                )\n              })}\n            </ul>\n          </nav>\n\n          <div className=\"p-4 border-t border-border space-y-2\">\n            {mounted && (\n              <button\n                onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n                className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\"\n              >\n                {theme === \"dark\" ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n                <span className=\"font-medium\">\n                  {theme === \"dark\" ? \"Light Mode\" : \"Dark Mode\"}\n                </span>\n              </button>\n            )}\n            \n            <button\n              onClick={handleLogout}\n              className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Logout</span>\n            </button>\n          </div>\n        </div>\n      </aside>\n\n      <div className=\"lg:pl-72\">\n        <header className=\"sticky top-0 z-30 bg-card border-b border-border px-4 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <button\n              onClick={() => setIsSidebarOpen(true)}\n              className=\"lg:hidden p-2 hover:bg-muted rounded-lg transition-colors\"\n            >\n              <Menu className=\"w-6 h-6\" />\n            </button>\n            \n            <div className=\"hidden lg:block\">\n              <h2 className=\"text-2xl font-bold text-foreground\">\n                {navItems.find((item) => item.href === pathname)?.label || \"Admin Panel\"}\n              </h2>\n            </div>\n\n            <div className=\"flex items-center space-x-4\">\n              <Link\n                href=\"/\"\n                target=\"_blank\"\n                className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\"\n              >\n                Visita sito ‚Üí\n              </Link>\n            </div>\n          </div>\n        </header>\n\n        <main className=\"p-4 lg:p-8\">\n          <PublishBanner />\n          <div className=\"mt-6\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  )\n}\n","size_bytes":7874},"lib/firebase-admin.ts":{"content":"import * as admin from 'firebase-admin';\n\nlet firebaseAdmin: admin.app.App;\n\nexport function formatPrivateKey(key: string | undefined): string {\n  if (!key) {\n    console.warn('Firebase Admin private key is not set. Admin SDK will not be available.');\n    return '';\n  }\n  \n  const header = '-----BEGIN PRIVATE KEY-----';\n  const footer = '-----END PRIVATE KEY-----';\n  \n  // If already properly formatted, return as-is\n  if (key.startsWith(header) && key.endsWith(footer + '\\n')) {\n    return key;\n  }\n  \n  // Replace literal \\n strings with actual newlines\n  let cleanKey = key.replace(/\\\\n/g, '\\n');\n  \n  // If already has proper structure, return\n  if (cleanKey.includes(header) && cleanKey.includes(footer)) {\n    return cleanKey;\n  }\n  \n  // Remove header/footer if present for reconstruction\n  cleanKey = cleanKey\n    .replace(header, '')\n    .replace(footer, '')\n    .replace(/\\s/g, ''); // Remove all whitespace\n  \n  // Split into 64-character lines\n  const formatted = cleanKey.match(/.{1,64}/g)?.join('\\n') || cleanKey;\n  \n  return `${header}\\n${formatted}\\n${footer}`;\n}\n\nexport function getFirebaseAdmin() {\n  if (!firebaseAdmin) {\n    try {\n      const privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY);\n      const clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL;\n      const projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID;\n\n      if (!privateKey || !clientEmail || !projectId) {\n        console.warn('Firebase Admin SDK credentials missing. Some features may not work.');\n        return null as any;\n      }\n\n      firebaseAdmin = admin.initializeApp({\n        credential: admin.credential.cert({\n          projectId,\n          clientEmail,\n          privateKey,\n        }),\n      });\n\n      console.log('‚úÖ Firebase Admin SDK initialized successfully');\n    } catch (error: any) {\n      if (error.code === 'app/duplicate-app') {\n        firebaseAdmin = admin.app();\n      } else {\n        console.error('‚ùå Firebase Admin initialization error:', error);\n        throw error;\n      }\n    }\n  }\n\n  return firebaseAdmin;\n}\n\nexport function getFirebaseAdminDb() {\n  const app = getFirebaseAdmin();\n  return admin.firestore(app);\n}\n\nexport function getFirebaseAdminAuth() {\n  const app = getFirebaseAdmin();\n  return admin.auth(app);\n}\n","size_bytes":2285},"scripts/create-demo-admin.ts":{"content":"import * as admin from 'firebase-admin';\nimport * as crypto from 'crypto';\n\nfunction formatPrivateKey(key: string): string {\n  const header = '-----BEGIN PRIVATE KEY-----';\n  const footer = '-----END PRIVATE KEY-----';\n  \n  if (key.includes(header) && key.includes(footer)) {\n    return key;\n  }\n  \n  if (key.includes('\\\\n')) {\n    key = key.replace(/\\\\n/g, '\\n');\n  }\n  \n  const cleanKey = key.replace(/\\s/g, '').replace(/\\\\n/g, '');\n  const formatted = cleanKey.match(/.{1,64}/g)?.join('\\n') || cleanKey;\n  return `${header}\\n${formatted}\\n${footer}\\n`;\n}\n\nconst privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY || '');\nconst clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL;\nconst projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID;\n\nif (!privateKey || !clientEmail || !projectId) {\n  throw new Error('Missing Firebase Admin credentials');\n}\n\nconst app = admin.initializeApp({\n  credential: admin.credential.cert({\n    projectId,\n    clientEmail,\n    privateKey,\n  }),\n});\n\nconst auth = admin.auth(app);\nconst db = admin.firestore(app);\n\nfunction generateSecurePassword(): string {\n  const length = 16;\n  const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=';\n  let password = '';\n  const randomBytes = crypto.randomBytes(length);\n  \n  for (let i = 0; i < length; i++) {\n    password += charset[randomBytes[i] % charset.length];\n  }\n  \n  return password;\n}\n\nasync function createDemoAdmin() {\n  const email = 'demo-admin@moroccodreams.com';\n  const password = generateSecurePassword();\n  const displayName = 'Demo Admin';\n\n  try {\n    console.log('üîë Creazione account admin demo...\\n');\n    \n    let userRecord;\n    try {\n      userRecord = await auth.getUserByEmail(email);\n      console.log(`‚úÖ Utente ${email} gi√† esiste (UID: ${userRecord.uid})`);\n      \n      await auth.updateUser(userRecord.uid, {\n        password: password,\n        displayName: displayName\n      });\n      console.log('üîÑ Password aggiornata\\n');\n    } catch (error: any) {\n      if (error.code === 'auth/user-not-found') {\n        userRecord = await auth.createUser({\n          email,\n          password,\n          displayName,\n          emailVerified: true\n        });\n        console.log(`‚úÖ Utente creato con successo (UID: ${userRecord.uid})\\n`);\n      } else {\n        throw error;\n      }\n    }\n\n    const adminData = {\n      email,\n      displayName,\n      role: 'super_admin' as const,\n      permissions: [\n        'manage_experiences',\n        'manage_travels',\n        'manage_vehicles',\n        'manage_instagram',\n        'manage_cities',\n        'manage_users',\n        'view_analytics'\n      ],\n      active: true,\n      createdAt: admin.firestore.FieldValue.serverTimestamp(),\n      updatedAt: admin.firestore.FieldValue.serverTimestamp()\n    };\n\n    await db.collection('adminUsers').doc(userRecord.uid).set(adminData, { merge: true });\n    console.log('‚úÖ Documento adminUsers creato/aggiornato in Firestore\\n');\n\n    console.log('‚îÄ'.repeat(60));\n    console.log('üéâ Account admin demo creato con successo!');\n    console.log('‚îÄ'.repeat(60));\n    console.log('\\nüìß Credenziali di accesso:');\n    console.log(`   Email:    ${email}`);\n    console.log(`   Password: ${password}`);\n    console.log(`   UID:      ${userRecord.uid}`);\n    console.log(`   Ruolo:    super_admin`);\n    console.log('\\nüîó Accedi a: /admin/login');\n    console.log('\\n‚ö†Ô∏è  IMPORTANTE: Salva queste credenziali in un luogo sicuro!');\n    console.log('    La password non sar√† mostrata di nuovo.\\n');\n\n  } catch (error) {\n    console.error('‚ùå Errore durante creazione account admin:', error);\n    throw error;\n  }\n}\n\ncreateDemoAdmin()\n  .then(() => {\n    console.log('\\n‚úÖ Script completato con successo');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('\\n‚ùå Script fallito:', error);\n    process.exit(1);\n  });\n","size_bytes":3899},"scripts/populate-desert-tours.ts":{"content":"import * as admin from 'firebase-admin';\n\nfunction formatPrivateKey(key: string): string {\n  const header = '-----BEGIN PRIVATE KEY-----';\n  const footer = '-----END PRIVATE KEY-----';\n  \n  if (key.includes(header) && key.includes(footer)) {\n    return key;\n  }\n  \n  if (key.includes('\\\\n')) {\n    key = key.replace(/\\\\n/g, '\\n');\n  }\n  \n  const cleanKey = key.replace(/\\s/g, '').replace(/\\\\n/g, '');\n  \n  const formatted = cleanKey.match(/.{1,64}/g)?.join('\\n') || cleanKey;\n  return `${header}\\n${formatted}\\n${footer}\\n`;\n}\n\nconst privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY || '');\nconst clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL;\nconst projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID;\n\nif (!privateKey || !clientEmail || !projectId) {\n  throw new Error('Missing Firebase Admin credentials');\n}\n\nconst app = admin.initializeApp({\n  credential: admin.credential.cert({\n    projectId,\n    clientEmail,\n    privateKey,\n  }),\n});\n\nconst db = admin.firestore(app);\n\nconst saharaTours = [\n  {\n    id: 'sahara-tour-1',\n    title: 'Deserto Express',\n    slug: 'sahara-deserto-express',\n    description: 'L\\'essenza del Sahara in 48 ore',\n    longDescription: 'Un tour intenso di 2 giorni che ti porta nel cuore del Sahara. Attraversa l\\'Atlante, raggiungi le dune dorate di Erg Chebbi al tramonto, dormi in un campo berbero tradizionale e svegliati con l\\'alba nel deserto.',\n    images: ['/images/desert-express.png'],\n    price: 180,\n    originalPrice: 220,\n    currency: 'EUR',\n    duration: '2 giorni / 1 notte',\n    category: 'desert' as const,\n    includes: [\n      'Trasporto in 4x4/minivan climatizzato',\n      '1 notte in campo tendato standard',\n      'Cena e colazione nel deserto',\n      'Escursione in cammello (1h)',\n      'Guida locale parlante italiano'\n    ],\n    notIncludes: ['Pranzi', 'Bevande', 'Mance', 'Spese personali'],\n    highlights: [\n      'Tramonto sulle dune di Erg Chebbi',\n      'Notte in campo tendato tradizionale',\n      'Escursione in cammello',\n      'Alba nel deserto',\n      'Trasporto da/per Marrakech'\n    ],\n    itinerary: [\n      {\n        day: 1,\n        title: 'Marrakech ‚Üí Merzouga',\n        description: 'Partenza mattutina, attraversamento dell\\'Atlante, arrivo al tramonto per l\\'escursione in cammello',\n        activities: ['Attraversamento Atlante', 'Escursione cammello', 'Tramonto dune'],\n        accommodation: 'Campo tendato standard',\n        meals: ['Cena']\n      },\n      {\n        day: 2,\n        title: 'Alba nel deserto ‚Üí Marrakech',\n        description: 'Sveglia per l\\'alba, colazione berbera, rientro a Marrakech nel pomeriggio',\n        activities: ['Alba deserto', 'Rientro Marrakech'],\n        accommodation: '',\n        meals: ['Colazione']\n      }\n    ],\n    rating: 4.7,\n    reviews: 89,\n    status: 'published' as const,\n    published: true,\n    featured: true\n  },\n  {\n    id: 'sahara-tour-2',\n    title: 'Classic Desert Adventure',\n    slug: 'sahara-classic-adventure',\n    description: 'Il tour del deserto pi√π completo',\n    longDescription: '3 giorni attraverso l\\'Atlante, le kasbah storiche, le gole spettacolari fino al cuore del Sahara. Due notti che uniscono comfort e autenticit√†.',\n    images: ['/images/classic-desert.png'],\n    price: 320,\n    originalPrice: 380,\n    currency: 'EUR',\n    duration: '3 giorni / 2 notti',\n    category: 'desert' as const,\n    includes: [\n      'Trasporto privato 4x4',\n      '2 notti: 1 hotel + 1 campo berbero',\n      'Mezza pensione (colazioni e cene)',\n      'Escursione in cammello',\n      'Guida esperta multilingue',\n      'Ingressi monumenti principali'\n    ],\n    notIncludes: ['Pranzi', 'Bevande alcoliche', 'Assicurazione viaggio', 'Voli'],\n    highlights: [\n      'Kasbah di Ait Benhaddou (UNESCO)',\n      'Gole del Todra',\n      '2 notti nel deserto',\n      'Musica berbera attorno al fuoco',\n      'Visita a famiglia nomade'\n    ],\n    itinerary: [\n      {\n        day: 1,\n        title: 'Marrakech ‚Üí Ouarzazate',\n        description: 'Attraversamento dell\\'Atlante, visita Ait Benhaddou, pernottamento a Ouarzazate',\n        activities: ['Atlante', 'Ait Benhaddou UNESCO', 'Ouarzazate'],\n        accommodation: 'Hotel Ouarzazate',\n        meals: ['Cena']\n      },\n      {\n        day: 2,\n        title: 'Ouarzazate ‚Üí Merzouga',\n        description: 'Gole del Todra, arrivo nel deserto, escursione in cammello, notte in campo',\n        activities: ['Gole Todra', 'Escursione cammello', 'Musica berbera'],\n        accommodation: 'Campo tendato',\n        meals: ['Colazione', 'Cena']\n      },\n      {\n        day: 3,\n        title: 'Merzouga ‚Üí Fes',\n        description: 'Alba nel deserto, viaggio verso Fes attraverso la valle dello Ziz',\n        activities: ['Alba deserto', 'Valle Ziz', 'Fes'],\n        accommodation: '',\n        meals: ['Colazione']\n      }\n    ],\n    rating: 4.9,\n    reviews: 156,\n    status: 'published' as const,\n    published: true,\n    featured: true\n  },\n  {\n    id: 'sahara-tour-3',\n    title: 'Grand Desert Journey',\n    slug: 'sahara-grand-journey',\n    description: 'Immersione totale nel Sahara',\n    longDescription: '4 giorni di vera avventura nel deserto. Trekking sulle dune, incontro con nomadi, sandboarding, osservazione stelle con telescopio. Per chi vuole vivere il Sahara a 360¬∞.',\n    images: ['/images/grand-desert.png'],\n    price: 480,\n    originalPrice: 560,\n    currency: 'EUR',\n    duration: '4 giorni / 3 notti',\n    category: 'desert' as const,\n    includes: [\n      'Trasporto 4x4 premium',\n      '3 notti: kasbah + 2 campi diversi',\n      'Pensione completa',\n      'Tutte le attivit√† nel deserto',\n      'Guida berbera esperta',\n      'Telescopio per stelle',\n      'Attrezzatura sandboarding'\n    ],\n    notIncludes: ['Bevande alcoliche', 'Spese personali', 'Assicurazione', 'Equipaggiamento personale'],\n    highlights: [\n      '3 notti nel deserto',\n      'Trekking sulle dune',\n      'Incontro con nomadi',\n      'Sandboarding',\n      'Osservazione stelle con telescopio'\n    ],\n    itinerary: [\n      {\n        day: 1,\n        title: 'Marrakech ‚Üí Valle del Draa',\n        description: 'Kasbah Telouet, valle del Draa, pernottamento in kasbah tradizionale',\n        activities: ['Kasbah Telouet', 'Valle Draa'],\n        accommodation: 'Kasbah tradizionale',\n        meals: ['Cena']\n      },\n      {\n        day: 2,\n        title: 'Valle del Draa ‚Üí Erg Chebbi',\n        description: 'Arrivo nel deserto, prima notte in campo fisso',\n        activities: ['Viaggio deserto', 'Campo fisso'],\n        accommodation: 'Campo fisso',\n        meals: ['Colazione', 'Cena']\n      },\n      {\n        day: 3,\n        title: 'Giornata nel deserto',\n        description: 'Trekking, sandboarding, visita nomadi, notte in campo mobile',\n        activities: ['Trekking dune', 'Sandboarding', 'Nomadi', 'Stelle telescopio'],\n        accommodation: 'Campo mobile',\n        meals: ['Colazione', 'Pranzo', 'Cena']\n      },\n      {\n        day: 4,\n        title: 'Deserto ‚Üí Marrakech',\n        description: 'Alba finale, rientro via Ouarzazate',\n        activities: ['Alba finale', 'Rientro'],\n        accommodation: '',\n        meals: ['Colazione']\n      }\n    ],\n    rating: 4.8,\n    reviews: 73,\n    status: 'published' as const,\n    published: true,\n    featured: true\n  },\n  {\n    id: 'sahara-tour-4',\n    title: 'Luxury Desert Experience',\n    slug: 'sahara-luxury-experience',\n    description: 'Il deserto con tutti i comfort',\n    longDescription: 'Esperienza esclusiva nel Sahara con campo 5 stelle, bagno privato, cena gourmet, trattamenti spa e trasporto di lusso. Il perfetto equilibrio tra avventura e comfort.',\n    images: ['/images/luxury-desert.png'],\n    price: 750,\n    originalPrice: 890,\n    currency: 'EUR',\n    duration: '3 giorni / 2 notti',\n    category: 'desert' as const,\n    includes: [\n      'Trasporto Mercedes/BMW',\n      'Campo tendato luxury (bagno privato)',\n      'Pensione completa gourmet',\n      'Champagne di benvenuto',\n      'Trattamento spa incluso',\n      'Maggiordomo personale',\n      'Fotografo professionale (su richiesta)'\n    ],\n    notIncludes: ['Voli internazionali', 'Assicurazione premium', 'Servizi extra spa'],\n    highlights: [\n      'Campo tendato 5 stelle',\n      'Bagno privato in tenda',\n      'Cena gourmet nel deserto',\n      'Massaggio berbero',\n      'Trasporto di lusso'\n    ],\n    itinerary: [\n      {\n        day: 1,\n        title: 'Marrakech ‚Üí Deserto VIP',\n        description: 'Trasferimento in veicolo di lusso, arrivo al campo deluxe, aperitivo al tramonto',\n        activities: ['Transfer luxury', 'Aperitivo tramonto'],\n        accommodation: 'Campo luxury 5 stelle',\n        meals: ['Cena gourmet']\n      },\n      {\n        day: 2,\n        title: 'Giornata di relax nel deserto',\n        description: 'Escursioni opzionali, trattamenti spa, cena sotto le stelle',\n        activities: ['Relax', 'Spa', 'Escursioni opzionali'],\n        accommodation: 'Campo luxury 5 stelle',\n        meals: ['Colazione', 'Pranzo', 'Cena gourmet']\n      },\n      {\n        day: 3,\n        title: 'Deserto ‚Üí Marrakech',\n        description: 'Colazione gourmet, rientro con soste panoramiche',\n        activities: ['Soste panoramiche', 'Rientro'],\n        accommodation: '',\n        meals: ['Colazione']\n      }\n    ],\n    rating: 5.0,\n    reviews: 42,\n    status: 'published' as const,\n    published: true,\n    featured: true\n  }\n];\n\nconst agafayTours = [\n  {\n    id: 'agafay-tour-0',\n    title: 'Deserto di Agafay - Giornata',\n    slug: 'agafay-giornata',\n    description: 'Fuga dal caos cittadino a 40 minuti da Marrakech',\n    longDescription: 'Escursione giornaliera nel deserto roccioso di Agafay. Paesaggio lunare con vista sull\\'Atlante, pranzo berbero tradizionale e possibilit√† di aggiungere quad o cammelli.',\n    images: ['/images/agafay-desert.png'],\n    price: 50,\n    currency: 'EUR',\n    duration: '1 giorno (8 ore)',\n    category: 'desert' as const,\n    includes: [\n      'Trasporto in minivan/4x4',\n      'Pranzo berbero tradizionale',\n      'Guida parlante italiano',\n      'T√® alla menta'\n    ],\n    notIncludes: ['Quad/cammelli (opzionali)', 'Bevande extra', 'Mance'],\n    highlights: [\n      'Deserto roccioso di Agafay',\n      'Pranzo berbero incluso',\n      'Quad o cammelli (opzionale)',\n      'Vista sull\\'Atlante',\n      'Trasporto da/per Marrakech'\n    ],\n    itinerary: [\n      {\n        day: 1,\n        title: 'Marrakech ‚Üí Agafay ‚Üí Marrakech',\n        description: 'Partenza mattutina, esplorazione del deserto di Agafay, pranzo tradizionale, attivit√† opzionali, rientro al tramonto',\n        activities: ['Esplorazione Agafay', 'Pranzo berbero', 'Attivit√† opzionali', 'Vista Atlante'],\n        accommodation: '',\n        meals: ['Pranzo']\n      }\n    ],\n    rating: 4.6,\n    reviews: 124,\n    status: 'published' as const,\n    published: true,\n    featured: false\n  },\n  {\n    id: 'agafay-tour--1',\n    title: 'Deserto di Agafay con Notte in Tenda - Standard',\n    slug: 'agafay-notte-standard',\n    description: 'Esperienza autentica nel deserto roccioso',\n    longDescription: 'Notte sotto le stelle nel deserto di Agafay. Campo tendato standard con cena berbera, musica tradizionale e vista spettacolare sull\\'Atlante.',\n    images: ['/images/agafay-night.png'],\n    price: 76,\n    currency: 'EUR',\n    duration: '1 giorno / 1 notte',\n    category: 'desert' as const,\n    includes: [\n      'Trasporto in minivan',\n      '1 notte in tenda standard (letti condivisi o privati)',\n      'Cena e colazione berbere',\n      'T√® alla menta e dolcetti',\n      'Musica live'\n    ],\n    notIncludes: ['Pranzi', 'Bevande alcoliche', 'Attivit√† extra'],\n    highlights: [\n      'Notte in campo tendato standard',\n      'Tramonto e alba nel deserto',\n      'Cena e colazione berbere',\n      'Musica tradizionale attorno al fuoco',\n      'Vista spettacolare sull\\'Atlante'\n    ],\n    itinerary: [\n      {\n        day: 1,\n        title: 'Marrakech ‚Üí Agafay',\n        description: 'Partenza pomeridiana, arrivo al campo, t√® di benvenuto, tramonto, cena tradizionale, musica',\n        activities: ['Arrivo campo', 'Tramonto', 'Cena berbera', 'Musica live'],\n        accommodation: 'Campo tendato standard',\n        meals: ['Cena']\n      },\n      {\n        day: 2,\n        title: 'Alba ‚Üí Marrakech',\n        description: 'Sveglia per l\\'alba, colazione, rientro a Marrakech',\n        activities: ['Alba deserto', 'Rientro'],\n        accommodation: '',\n        meals: ['Colazione']\n      }\n    ],\n    rating: 4.7,\n    reviews: 98,\n    status: 'published' as const,\n    published: true,\n    featured: false\n  },\n  {\n    id: 'agafay-tour--2',\n    title: 'Deserto di Agafay con Notte in Tenda - Luxury',\n    slug: 'agafay-luxury',\n    description: 'Glamping esclusivo con vista sull\\'Atlante',\n    longDescription: 'Esperienza luxury nel deserto di Agafay. Tenda con bagno privato, cena gourmet sotto le stelle, piscina panoramica e servizio premium.',\n    images: ['/images/agafay-luxury.png'],\n    price: 230,\n    currency: 'EUR',\n    duration: '1 giorno / 1 notte',\n    category: 'desert' as const,\n    includes: [\n      'Trasporto premium',\n      'Tenda luxury con bagno en-suite',\n      'Cena e colazione gourmet',\n      'Champagne di benvenuto',\n      'Servizio maggiordomo',\n      'Wi-Fi nel campo'\n    ],\n    notIncludes: ['Trattamenti spa', 'Bevande premium', 'Trasferimenti extra'],\n    highlights: [\n      'Tenda luxury con bagno privato',\n      'Cena gourmet sotto le stelle',\n      'Piscina panoramica (alcuni campi)',\n      'Servizio premium',\n      'Spa e massaggi (opzionali)'\n    ],\n    itinerary: [\n      {\n        day: 1,\n        title: 'Marrakech ‚Üí Agafay Luxury',\n        description: 'Transfer privato, check-in luxury camp, aperitivo panoramico, cena gourmet, intrattenimento',\n        activities: ['Transfer luxury', 'Aperitivo panoramico', 'Cena gourmet'],\n        accommodation: 'Campo luxury con bagno privato',\n        meals: ['Cena gourmet']\n      },\n      {\n        day: 2,\n        title: 'Relax ‚Üí Marrakech',\n        description: 'Colazione gourmet, tempo libero, rientro con soste panoramiche',\n        activities: ['Relax', 'Soste panoramiche'],\n        accommodation: '',\n        meals: ['Colazione']\n      }\n    ],\n    rating: 4.9,\n    reviews: 67,\n    status: 'published' as const,\n    published: true,\n    featured: true\n  }\n];\n\nasync function populateDesertTours() {\n  try {\n    console.log('üèúÔ∏è  Inizio popolamento tour deserto...\\n');\n    \n    const travelsRef = db.collection('travels');\n    \n    console.log('üìç Popolamento 4 tour Sahara...\\n');\n    for (const tour of saharaTours) {\n      const { id, ...tourData } = tour;\n      await travelsRef.doc(id).set({\n        ...tourData,\n        createdAt: admin.firestore.FieldValue.serverTimestamp(),\n        updatedAt: admin.firestore.FieldValue.serverTimestamp()\n      });\n      console.log(`‚úÖ Sahara tour salvato: ${tour.title} (${tour.price}‚Ç¨, ${tour.duration})`);\n      console.log(`   ID: ${id}, Slug: ${tour.slug}, Rating: ${tour.rating}\\n`);\n    }\n    \n    console.log('üìç Popolamento 3 tour Agafay...\\n');\n    for (const tour of agafayTours) {\n      const { id, ...tourData } = tour;\n      await travelsRef.doc(id).set({\n        ...tourData,\n        createdAt: admin.firestore.FieldValue.serverTimestamp(),\n        updatedAt: admin.firestore.FieldValue.serverTimestamp()\n      });\n      console.log(`‚úÖ Agafay tour salvato: ${tour.title} (${tour.price}‚Ç¨, ${tour.duration})`);\n      console.log(`   ID: ${id}, Slug: ${tour.slug}, Rating: ${tour.rating}\\n`);\n    }\n    \n    console.log('‚îÄ'.repeat(50));\n    console.log('üéâ Popolamento completato!');\n    console.log(`üìä Statistiche:`);\n    console.log(`   - Tour Sahara salvati: ${saharaTours.length}`);\n    console.log(`   - Tour Agafay salvati: ${agafayTours.length}`);\n    console.log(`   - Totale tour deserto: ${saharaTours.length + agafayTours.length}`);\n    \n  } catch (error) {\n    console.error('‚ùå Errore durante popolamento:', error);\n    throw error;\n  }\n}\n\npopulateDesertTours()\n  .then(() => {\n    console.log('\\n‚úÖ Script completato con successo');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('\\n‚ùå Script fallito:', error);\n    process.exit(1);\n  });\n","size_bytes":16272},"scripts/update-experience-prices.ts":{"content":"import * as admin from 'firebase-admin';\n\nfunction formatPrivateKey(key: string): string {\n  const header = '-----BEGIN PRIVATE KEY-----';\n  const footer = '-----END PRIVATE KEY-----';\n  \n  if (key.includes(header) && key.includes(footer)) {\n    return key;\n  }\n  \n  if (key.includes('\\\\n')) {\n    key = key.replace(/\\\\n/g, '\\n');\n  }\n  \n  const cleanKey = key.replace(/\\s/g, '').replace(/\\\\n/g, '');\n  \n  const formatted = cleanKey.match(/.{1,64}/g)?.join('\\n') || cleanKey;\n  return `${header}\\n${formatted}\\n${footer}\\n`;\n}\n\nconst privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY || '');\nconst clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL;\nconst projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID;\n\nif (!privateKey || !clientEmail || !projectId) {\n  throw new Error('Missing Firebase Admin credentials');\n}\n\nconst app = admin.initializeApp({\n  credential: admin.credential.cert({\n    projectId,\n    clientEmail,\n    privateKey,\n  }),\n});\n\nconst db = admin.firestore(app);\n\nconst priceUpdates: Record<string, number> = {\n  'surf-taghazout': 35,\n  'trekking-atlante': 35,\n  'hammam-tradizionale': 50,\n  'artigianato-laboratori': 45,\n  'fotografia-workshop': 60,\n  'quad-cammelli-deserto': 180,\n  'cucina-tradizionale': 46,\n  'corso-cucina-marocchina': 46\n};\n\nasync function updateExperiencePrices() {\n  try {\n    console.log('üîÑ Inizio aggiornamento prezzi esperienze...\\n');\n    \n    const experiencesRef = db.collection('experiences');\n    const snapshot = await experiencesRef.get();\n    \n    console.log(`üìä Trovate ${snapshot.docs.length} esperienze in Firestore\\n`);\n    \n    let updatedCount = 0;\n    let skippedCount = 0;\n    \n    for (const docSnapshot of snapshot.docs) {\n      const data = docSnapshot.data();\n      const slug = data.slug || docSnapshot.id;\n      const currentPrice = data.price;\n      \n      if (priceUpdates[slug]) {\n        const newPrice = priceUpdates[slug];\n        \n        if (currentPrice !== newPrice) {\n          await docSnapshot.ref.update({\n            price: newPrice,\n            currency: 'EUR',\n            updatedAt: admin.firestore.FieldValue.serverTimestamp()\n          });\n          \n          console.log(`‚úÖ Aggiornato: ${data.title || slug}`);\n          console.log(`   Prezzo: ‚Ç¨${currentPrice} ‚Üí ‚Ç¨${newPrice}`);\n          console.log(`   Slug: ${slug}\\n`);\n          updatedCount++;\n        } else {\n          console.log(`‚è≠Ô∏è  Saltato: ${data.title || slug}`);\n          console.log(`   Prezzo gi√† corretto: ‚Ç¨${currentPrice}`);\n          console.log(`   Slug: ${slug}\\n`);\n          skippedCount++;\n        }\n      } else {\n        console.log(`‚ÑπÔ∏è  Nessun update previsto per: ${data.title || slug}`);\n        console.log(`   Prezzo attuale: ‚Ç¨${currentPrice || 'N/A'}`);\n        console.log(`   Slug: ${slug}\\n`);\n        skippedCount++;\n      }\n    }\n    \n    console.log('‚îÄ'.repeat(50));\n    console.log('üéâ Aggiornamento completato!');\n    console.log(`üìä Statistiche:`);\n    console.log(`   - Esperienze aggiornate: ${updatedCount}`);\n    console.log(`   - Esperienze saltate: ${skippedCount}`);\n    console.log(`   - Totale esperienze: ${snapshot.docs.length}`);\n    \n  } catch (error) {\n    console.error('‚ùå Errore durante aggiornamento:', error);\n    throw error;\n  }\n}\n\nupdateExperiencePrices()\n  .then(() => {\n    console.log('\\n‚úÖ Script completato con successo');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('\\n‚ùå Script fallito:', error);\n    process.exit(1);\n  });\n","size_bytes":3523},"components/modals/ConfirmationDialog.tsx":{"content":"\"use client\";\n\nimport { useEffect } from 'react';\nimport { X, CheckCircle, Calendar, Users, DollarSign, ArrowRight } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { format } from 'date-fns';\nimport { it } from 'date-fns/locale';\n\ninterface ConfirmationDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  itemTitle: string;\n  startDate?: Date;\n  endDate?: Date;\n  participants: number;\n  totalPrice: number;\n  onGoToDashboard?: () => void;\n}\n\nexport default function ConfirmationDialog({\n  isOpen,\n  onClose,\n  itemTitle,\n  startDate,\n  endDate,\n  participants,\n  totalPrice,\n  onGoToDashboard\n}: ConfirmationDialogProps) {\n  useEffect(() => {\n    if (isOpen) {\n      const timer = setTimeout(() => {\n        onClose();\n      }, 10000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [isOpen, onClose]);\n\n  const formatDateRange = () => {\n    if (!startDate) return 'Date da confermare';\n    \n    const startStr = format(startDate, 'd MMMM yyyy', { locale: it });\n    \n    if (endDate) {\n      const endStr = format(endDate, 'd MMMM yyyy', { locale: it });\n      return `${startStr} - ${endStr}`;\n    }\n    \n    return startStr;\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50\"\n            onClick={onClose}\n          />\n          \n          <motion.div\n            initial={{ opacity: 0, scale: 0.9, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 20 }}\n            transition={{ type: \"spring\", duration: 0.5 }}\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          >\n            <div className=\"bg-white dark:bg-slate-800 rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden border-2 border-green-500/20\">\n              <button\n                onClick={onClose}\n                className=\"absolute top-4 right-4 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors z-10\"\n                aria-label=\"Chiudi\"\n              >\n                <X className=\"w-6 h-6 text-slate-600 dark:text-slate-300\" />\n              </button>\n\n              <div className=\"bg-gradient-to-br from-green-500 to-emerald-600 p-8 text-white relative overflow-hidden\">\n                <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-32 -mt-32\" />\n                <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full -ml-24 -mb-24\" />\n                \n                <div className=\"relative\">\n                  <div className=\"flex items-center justify-center mb-4\">\n                    <div className=\"w-20 h-20 bg-white rounded-full flex items-center justify-center\">\n                      <CheckCircle className=\"w-12 h-12 text-green-500\" />\n                    </div>\n                  </div>\n                  \n                  <h2 className=\"text-3xl font-bold text-center mb-2\">\n                    Richiesta Inviata!\n                  </h2>\n                  <p className=\"text-center text-green-50 text-lg\">\n                    La tua prenotazione √® stata ricevuta con successo\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"p-8 space-y-6\">\n                <div className=\"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-2xl p-6 border border-orange-200 dark:border-orange-800\">\n                  <h3 className=\"font-bold text-xl text-slate-900 dark:text-white mb-4\">\n                    Riepilogo Prenotazione\n                  </h3>\n                  \n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                        <Calendar className=\"w-5 h-5 text-white\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 font-medium\">\n                          Esperienza/Viaggio\n                        </p>\n                        <p className=\"text-lg font-bold text-slate-900 dark:text-white\">\n                          {itemTitle}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                        <Calendar className=\"w-5 h-5 text-white\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 font-medium\">\n                          Date\n                        </p>\n                        <p className=\"text-lg font-semibold text-slate-900 dark:text-white\">\n                          {formatDateRange()}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                        <Users className=\"w-5 h-5 text-white\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 font-medium\">\n                          Partecipanti\n                        </p>\n                        <p className=\"text-lg font-semibold text-slate-900 dark:text-white\">\n                          {participants} {participants === 1 ? 'persona' : 'persone'}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"pt-4 border-t-2 border-orange-300 dark:border-orange-700\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center\">\n                            <DollarSign className=\"w-5 h-5 text-white\" />\n                          </div>\n                          <p className=\"text-sm text-slate-600 dark:text-slate-400 font-medium\">\n                            Prezzo Totale\n                          </p>\n                        </div>\n                        <p className=\"text-3xl font-bold text-green-600 dark:text-green-400\">\n                          ‚Ç¨{totalPrice}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800\">\n                  <p className=\"text-sm text-blue-900 dark:text-blue-100 text-center\">\n                    <strong>Prossimo passo:</strong> Ti contatteremo a breve via WhatsApp per confermare i dettagli e finalizzare la prenotazione.\n                  </p>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row gap-3\">\n                  <button\n                    onClick={onClose}\n                    className=\"flex-1 px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white rounded-xl font-semibold hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors\"\n                  >\n                    Chiudi\n                  </button>\n                  {onGoToDashboard && (\n                    <button\n                      onClick={onGoToDashboard}\n                      className=\"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all flex items-center justify-center space-x-2 shadow-lg\"\n                    >\n                      <span>Vai a Dashboard</span>\n                      <ArrowRight className=\"w-5 h-5\" />\n                    </button>\n                  )}\n                </div>\n\n                <p className=\"text-xs text-center text-slate-500 dark:text-slate-400\">\n                  Questo popup si chiuder√† automaticamente tra 10 secondi\n                </p>\n              </div>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n","size_bytes":8615},"app/admin/travels/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { Search, Edit, Trash2, Plus, Eye, EyeOff } from 'lucide-react'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface Travel {\n  id: string\n  title: string\n  category: string\n  duration?: string\n  price?: number\n  published: boolean\n  featured: boolean\n  description?: string\n}\n\nexport default function AdminTravelsPage() {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [travels, setTravels] = useState<Travel[]>([])\n  const [filteredTravels, setFilteredTravels] = useState<Travel[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [categoryFilter, setCategoryFilter] = useState('')\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [formData, setFormData] = useState({ title: '', category: '', price: 0, published: true, featured: false })\n\n  const categories = ['desert', 'city', 'coast', 'mountain', 'group']\n\n  useEffect(() => {\n    fetchTravels()\n  }, [])\n\n  useEffect(() => {\n    let filtered = travels\n    if (searchTerm) {\n      filtered = filtered.filter(t => t.title.toLowerCase().includes(searchTerm.toLowerCase()))\n    }\n    if (categoryFilter) {\n      filtered = filtered.filter(t => t.category === categoryFilter)\n    }\n    setFilteredTravels(filtered)\n  }, [searchTerm, categoryFilter, travels])\n\n  const fetchTravels = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch('/api/travels', { cache: 'no-store' })\n      if (!response.ok) throw new Error('Failed to fetch')\n      const data = await response.json()\n      setTravels(data.travels || [])\n      setFilteredTravels(data.travels || [])\n    } catch (error) {\n      console.error('Error:', error)\n      showError('Errore', 'Nel caricamento viaggi')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const togglePublished = async (travel: Travel) => {\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/travels/${travel.id}`, { \n        method: 'PUT', \n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }, \n        body: JSON.stringify({ published: !travel.published }) \n      })\n      if (!response.ok) throw new Error('Failed to update')\n      showSuccess('Successo', travel.published ? 'Nascosto' : 'Pubblicato')\n      fetchTravels()\n    } catch (error) {\n      showError('Errore', 'nell\\'aggiornamento')\n    }\n  }\n\n  const toggleFeatured = async (travel: Travel) => {\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/travels/${travel.id}`, { \n        method: 'PUT', \n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }, \n        body: JSON.stringify({ featured: !travel.featured }) \n      })\n      if (!response.ok) throw new Error('Failed to update')\n      showSuccess('Successo', travel.featured ? 'Rimosso da in evidenza' : 'Aggiunto a in evidenza')\n      fetchTravels()\n    } catch (error) {\n      showError('Errore', 'nell\\'aggiornamento')\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Eliminare questo viaggio?')) return\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/travels/${id}`, { \n        method: 'DELETE', \n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n      if (!response.ok) throw new Error('Failed to delete')\n      showSuccess('Successo', 'Viaggio eliminato')\n      fetchTravels()\n    } catch (error) {\n      showError('Errore', 'nell\\'eliminazione')\n    }\n  }\n\n  if (loading) return <div className=\"text-center py-8\">Caricamento...</div>\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <h1 className=\"text-3xl font-bold\">Viaggi ({travels.length})</h1>\n      <div className=\"flex gap-4\">\n        <input type=\"text\" placeholder=\"Cerca...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className=\"flex-1 px-4 py-2 border rounded-lg\" />\n        <select value={categoryFilter} onChange={(e) => setCategoryFilter(e.target.value)} className=\"px-4 py-2 border rounded-lg\">\n          <option value=\"\">Tutte le categorie</option>\n          {categories.map(cat => (<option key={cat} value={cat}>{cat}</option>))}\n        </select>\n      </div>\n      <div className=\"grid gap-4\">\n        {filteredTravels.map((travel) => (\n          <div key={travel.id} className=\"border rounded-lg p-4 flex items-center justify-between\">\n            <div><h3 className=\"font-semibold\">{travel.title}</h3><p className=\"text-sm text-muted-foreground\">{travel.category}</p></div>\n            <div className=\"flex gap-2\">\n              <button onClick={() => togglePublished(travel)} className=\"p-2 hover:bg-gray-100 rounded\">{travel.published ? <Eye className=\"w-4 h-4\" /> : <EyeOff className=\"w-4 h-4\" />}</button>\n              <button onClick={() => handleDelete(travel.id)} className=\"p-2 hover:bg-red-100 rounded text-red-600\"><Trash2 className=\"w-4 h-4\" /></button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":5400},"app/admin/users/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { collection, getDocs, doc, updateDoc } from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\nimport { Search, Edit, Shield, User, Clock } from 'lucide-react'\n\ninterface AdminUser {\n  id: string\n  email: string\n  displayName: string\n  role: 'super_admin' | 'content_editor' | 'viewer'\n  permissions: string[]\n  active: boolean\n  createdAt: any\n  lastLogin?: any\n}\n\nexport default function AdminUsersPage() {\n  const [users, setUsers] = useState<AdminUser[]>([])\n  const [filteredUsers, setFilteredUsers] = useState<AdminUser[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [roleFilter, setRoleFilter] = useState('')\n\n  const roles = [\n    { value: 'super_admin', label: 'Super Admin', color: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300' },\n    { value: 'content_editor', label: 'Content Editor', color: 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300' },\n    { value: 'viewer', label: 'Viewer', color: 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400' }\n  ]\n\n  useEffect(() => {\n    fetchUsers()\n  }, [])\n\n  useEffect(() => {\n    let filtered = users\n\n    if (searchTerm) {\n      filtered = filtered.filter(u => \n        u.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        u.displayName.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    }\n\n    if (roleFilter) {\n      filtered = filtered.filter(u => u.role === roleFilter)\n    }\n\n    setFilteredUsers(filtered)\n  }, [searchTerm, roleFilter, users])\n\n  const fetchUsers = async () => {\n    try {\n      setLoading(true)\n      const querySnapshot = await getDocs(collection(db, 'adminUsers'))\n      const usrs: AdminUser[] = []\n      \n      querySnapshot.forEach((doc) => {\n        usrs.push({ id: doc.id, ...doc.data() } as AdminUser)\n      })\n      \n      setUsers(usrs)\n      setFilteredUsers(usrs)\n    } catch (error) {\n      console.error('Error fetching users:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const toggleActive = async (user: AdminUser) => {\n    try {\n      const userRef = doc(db, 'adminUsers', user.id)\n      await updateDoc(userRef, { active: !user.active })\n      \n      setUsers(prev => prev.map(u => \n        u.id === user.id ? { ...u, active: !u.active } : u\n      ))\n    } catch (error) {\n      console.error('Error toggling active:', error)\n    }\n  }\n\n  const getRoleBadge = (role: string) => {\n    const roleInfo = roles.find(r => r.value === role)\n    return roleInfo || roles[2]\n  }\n\n  const formatDate = (timestamp: any) => {\n    if (!timestamp) return 'Mai'\n    try {\n      const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp)\n      return new Intl.DateTimeFormat('it-IT', { \n        day: '2-digit', \n        month: '2-digit', \n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      }).format(date)\n    } catch {\n      return 'N/A'\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[50vh]\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Caricamento utenti admin...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-foreground\">Gestione Utenti Admin</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {users.length} admin totali, {users.filter(u => u.active).length} attivi\n          </p>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-card border border-border rounded-xl p-4 space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type=\"text\"\n              placeholder=\"Cerca per email o nome...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n          \n          <select\n            value={roleFilter}\n            onChange={(e) => setRoleFilter(e.target.value)}\n            className=\"px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n          >\n            <option value=\"\">Tutti i ruoli</option>\n            {roles.map(role => (\n              <option key={role.value} value={role.value}>\n                {role.label}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"bg-card border border-border rounded-xl overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-muted\">\n              <tr>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Utente</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Ruolo</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Permessi</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Ultimo Accesso</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Stato</th>\n                <th className=\"px-6 py-4 text-right text-sm font-semibold text-foreground\">Azioni</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-border\">\n              {filteredUsers.length === 0 ? (\n                <tr>\n                  <td colSpan={6} className=\"px-6 py-12 text-center text-muted-foreground\">\n                    Nessun utente trovato\n                  </td>\n                </tr>\n              ) : (\n                filteredUsers.map((user) => {\n                  const roleBadge = getRoleBadge(user.role)\n                  return (\n                    <tr key={user.id} className=\"hover:bg-muted/50 transition-colors\">\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-10 h-10 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center text-white font-bold\">\n                            {user.displayName.charAt(0).toUpperCase()}\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-foreground\">{user.displayName}</p>\n                            <p className=\"text-sm text-muted-foreground\">{user.email}</p>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${roleBadge.color}`}>\n                          <Shield className=\"w-3 h-3 inline mr-1\" />\n                          {roleBadge.label}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex flex-wrap gap-1\">\n                          {user.permissions?.slice(0, 3).map((perm, i) => (\n                            <span\n                              key={i}\n                              className=\"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded text-xs\"\n                            >\n                              {perm.replace('_', ' ')}\n                            </span>\n                          ))}\n                          {user.permissions?.length > 3 && (\n                            <span className=\"px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded text-xs\">\n                              +{user.permissions.length - 3}\n                            </span>\n                          )}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                          <Clock className=\"w-4 h-4\" />\n                          {formatDate(user.lastLogin)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <button\n                          onClick={() => toggleActive(user)}\n                          className={`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium transition-colors ${\n                            user.active\n                              ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300'\n                              : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400'\n                          }`}\n                        >\n                          {user.active ? 'Attivo' : 'Disattivato'}\n                        </button>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center justify-end gap-2\">\n                          <button\n                            className=\"p-2 hover:bg-muted rounded-lg transition-colors text-blue-600\"\n                            title=\"Modifica\"\n                          >\n                            <Edit className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  )\n                })\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":10102},"app/admin/experiences/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { Search, Edit, Trash2, Plus, Eye, EyeOff } from 'lucide-react'\nimport ExperienceModal from '@/components/admin/ExperienceModal'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface Experience {\n  id: string\n  title: string\n  category: string\n  price?: number\n  published: boolean\n  featured: boolean\n  image?: string\n  description?: string\n  slug: string\n}\n\nexport default function AdminExperiencesPage() {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [experiences, setExperiences] = useState<Experience[]>([])\n  const [filteredExperiences, setFilteredExperiences] = useState<Experience[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [categoryFilter, setCategoryFilter] = useState('')\n  const [selectedExperience, setSelectedExperience] = useState<Experience | null>(null)\n  const [showModal, setShowModal] = useState(false)\n\n  const categories = ['adventure', 'wellness', 'culture', 'food', 'sports']\n\n  useEffect(() => {\n    fetchExperiences()\n  }, [])\n\n  useEffect(() => {\n    let filtered = experiences\n\n    if (searchTerm) {\n      filtered = filtered.filter(exp => \n        exp.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        exp.category.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    }\n\n    if (categoryFilter) {\n      filtered = filtered.filter(exp => exp.category === categoryFilter)\n    }\n\n    setFilteredExperiences(filtered)\n  }, [searchTerm, categoryFilter, experiences])\n\n  const fetchExperiences = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch('/api/experiences', { cache: 'no-store' })\n      \n      if (!response.ok) throw new Error('Failed to fetch')\n\n      const data = await response.json()\n      setExperiences(data.experiences || [])\n      setFilteredExperiences(data.experiences || [])\n    } catch (error) {\n      console.error('Error:', error)\n      showError('Errore nel caricamento esperienze')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const togglePublished = async (exp: Experience) => {\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/experiences/${exp.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ published: !exp.published })\n      })\n\n      if (!response.ok) throw new Error('Failed to update')\n\n      showSuccess(exp.published ? 'Nascosta' : 'Pubblicata')\n      fetchExperiences()\n    } catch (error) {\n      showError('Errore nell\\'aggiornamento')\n    }\n  }\n\n  const toggleFeatured = async (exp: Experience) => {\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/experiences/${exp.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ featured: !exp.featured })\n      })\n\n      if (!response.ok) throw new Error('Failed to update')\n\n      showSuccess(exp.featured ? 'Rimosso da in evidenza' : 'Aggiunto a in evidenza')\n      fetchExperiences()\n    } catch (error) {\n      showError('Errore nell\\'aggiornamento')\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Eliminare questa esperienza?')) return\n\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/experiences/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n\n      if (!response.ok) throw new Error('Failed to delete')\n\n      showSuccess('Esperienza eliminata')\n      fetchExperiences()\n    } catch (error) {\n      showError('Errore nell\\'eliminazione')\n    }\n  }\n\n  if (loading) {\n    return <div className=\"text-center py-8\">Caricamento...</div>\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold\">Esperienze</h1>\n        <button \n          onClick={() => { setSelectedExperience(null); setShowModal(true) }}\n          className=\"bg-primary text-primary-foreground px-4 py-2 rounded-lg flex items-center gap-2\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Nuova\n        </button>\n      </div>\n\n      <div className=\"flex gap-4 mb-6\">\n        <input\n          type=\"text\"\n          placeholder=\"Cerca...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"flex-1 px-4 py-2 border rounded-lg\"\n        />\n        <select\n          value={categoryFilter}\n          onChange={(e) => setCategoryFilter(e.target.value)}\n          className=\"px-4 py-2 border rounded-lg\"\n        >\n          <option value=\"\">Tutte le categorie</option>\n          {categories.map(cat => (\n            <option key={cat} value={cat}>{cat}</option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {filteredExperiences.map((exp) => (\n          <div key={exp.id} className=\"border rounded-lg p-4 flex items-center justify-between\">\n            <div>\n              <h3 className=\"font-semibold\">{exp.title}</h3>\n              <p className=\"text-sm text-muted-foreground\">{exp.category}</p>\n            </div>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => togglePublished(exp)}\n                className=\"p-2 hover:bg-gray-100 rounded\"\n                title={exp.published ? 'Nascondi' : 'Pubblica'}\n              >\n                {exp.published ? <Eye className=\"w-4 h-4\" /> : <EyeOff className=\"w-4 h-4\" />}\n              </button>\n              <button\n                onClick={() => { setSelectedExperience(exp); setShowModal(true) }}\n                className=\"p-2 hover:bg-gray-100 rounded\"\n              >\n                <Edit className=\"w-4 h-4\" />\n              </button>\n              <button\n                onClick={() => handleDelete(exp.id)}\n                className=\"p-2 hover:bg-red-100 rounded text-red-600\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {showModal && (\n        <ExperienceModal\n          experience={selectedExperience}\n          isOpen={showModal}\n          onClose={() => {\n            setShowModal(false)\n            fetchExperiences()\n          }}\n          onSaveSuccess={() => {\n            setShowModal(false)\n            fetchExperiences()\n          }}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":6907},"app/admin/vehicles/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { Search, Plus, Car } from 'lucide-react'\nimport VehicleModal from '@/components/admin/VehicleModal'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { useAuth } from '@/context/AuthContext'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { \n  UnifiedAdminTable, \n  TableColumn,\n  createPublishedColumn, \n  createFeaturedColumn,\n  createBooleanBadgeColumn,\n  createStandardActions \n} from '@/components/admin/UnifiedAdminTable'\n\ninterface PricingPeriod {\n  name: string\n  startDate: string\n  endDate: string\n  prices: {\n    short: number\n    medium: number\n    long: number\n  }\n}\n\ninterface Vehicle {\n  id: string\n  name: string\n  slug: string\n  category: string\n  transmission: string\n  fuelType: string\n  seats: number\n  doors: number\n  luggage: number\n  image?: string\n  features?: string[]\n  pricingPeriods?: PricingPeriod[]\n  published: boolean\n  featured: boolean\n  available: boolean\n}\n\nexport default function AdminVehiclesPage() {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [vehicles, setVehicles] = useState<Vehicle[]>([])\n  const [filteredVehicles, setFilteredVehicles] = useState<Vehicle[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [categoryFilter, setCategoryFilter] = useState('')\n  const [selectedVehicle, setSelectedVehicle] = useState<Vehicle | null>(null)\n  const [showModal, setShowModal] = useState(false)\n\n  const categories = ['economica', 'suv', 'Premium']\n\n  useEffect(() => {\n    fetchVehicles()\n  }, [])\n\n  useEffect(() => {\n    let filtered = vehicles\n\n    if (searchTerm) {\n      filtered = filtered.filter(vehicle => \n        vehicle.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        vehicle.category.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    }\n\n    if (categoryFilter) {\n      filtered = filtered.filter(vehicle => vehicle.category === categoryFilter)\n    }\n\n    setFilteredVehicles(filtered)\n  }, [searchTerm, categoryFilter, vehicles])\n\n  const fetchVehicles = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch('/api/vehicles', {\n        cache: 'no-store'\n      })\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch vehicles')\n      }\n\n      const data = await response.json()\n      setVehicles(data.vehicles || [])\n      setFilteredVehicles(data.vehicles || [])\n    } catch (error) {\n      console.error('Error fetching vehicles:', error)\n      showError('Errore', 'Impossibile caricare i veicoli')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const togglePublished = async (vehicle: Vehicle) => {\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/vehicles/${vehicle.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ published: !vehicle.published })\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to update vehicle')\n      }\n\n      setVehicles(prev => prev.map(v => \n        v.id === vehicle.id ? { ...v, published: !v.published } : v\n      ))\n      showSuccess('Aggiornato', `Veicolo ${!vehicle.published ? 'pubblicato' : 'nascosto'}`)\n    } catch (error) {\n      console.error('Error toggling published:', error)\n      showError('Errore', 'Impossibile aggiornare lo stato di pubblicazione')\n    }\n  }\n\n  const toggleFeatured = async (vehicle: Vehicle) => {\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/vehicles/${vehicle.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ featured: !vehicle.featured })\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to update vehicle')\n      }\n\n      setVehicles(prev => prev.map(v => \n        v.id === vehicle.id ? { ...v, featured: !v.featured } : v\n      ))\n      showSuccess('Aggiornato', `Veicolo ${!vehicle.featured ? 'in evidenza' : 'rimosso dall\\'evidenza'}`)\n    } catch (error) {\n      console.error('Error toggling featured:', error)\n      showError('Errore', 'Impossibile aggiornare lo stato in evidenza')\n    }\n  }\n\n  const deleteVehicle = async (vehicle: Vehicle) => {\n    if (!confirm(`Sei sicuro di voler eliminare \"${vehicle.name}\"?`)) return\n\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/vehicles/${vehicle.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to delete vehicle')\n      }\n\n      setVehicles(prev => prev.filter(v => v.id !== vehicle.id))\n      showSuccess('Eliminato', 'Veicolo eliminato con successo')\n    } catch (error) {\n      console.error('Error deleting vehicle:', error)\n      showError('Errore', 'Impossibile eliminare il veicolo')\n    }\n  }\n\n  const handleEdit = (vehicle: Vehicle) => {\n    setSelectedVehicle(vehicle)\n    setShowModal(true)\n  }\n\n  const handleCloseModal = () => {\n    setShowModal(false)\n    setSelectedVehicle(null)\n  }\n\n  const handleSave = () => {\n    fetchVehicles()\n    handleCloseModal()\n  }\n\n  const columns: TableColumn<Vehicle>[] = [\n    {\n      key: 'name',\n      label: 'Vehicle',\n      render: (vehicle) => (\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0 h-10 w-10\">\n            {vehicle.image ? (\n              <img\n                className=\"h-10 w-10 rounded-full object-cover\"\n                src={vehicle.image}\n                alt={vehicle.name}\n              />\n            ) : (\n              <div className=\"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center\">\n                <Car className=\"w-5 h-5 text-gray-400\" />\n              </div>\n            )}\n          </div>\n          <div className=\"ml-4\">\n            <div className=\"text-sm font-medium\">{vehicle.name}</div>\n            <div className=\"text-sm text-muted-foreground\">{vehicle.slug}</div>\n          </div>\n        </div>\n      )\n    },\n    {\n      key: 'category',\n      label: 'Category',\n      render: (vehicle) => (\n        <Badge variant=\"outline\" className=\"capitalize\">\n          {vehicle.category}\n        </Badge>\n      )\n    },\n    {\n      key: 'transmission',\n      label: 'Details',\n      render: (vehicle) => (\n        <div className=\"text-sm\">\n          <div>{vehicle.transmission} ‚Ä¢ {vehicle.fuelType}</div>\n          <div className=\"text-muted-foreground\">\n            {vehicle.seats} seats ‚Ä¢ {vehicle.doors} doors\n          </div>\n        </div>\n      )\n    },\n    createPublishedColumn<Vehicle>(),\n    createFeaturedColumn<Vehicle>(),\n    createBooleanBadgeColumn<Vehicle>('available', 'Available', 'Yes', 'No')\n  ]\n\n  const actions = createStandardActions<Vehicle>({\n    onEdit: handleEdit,\n    onTogglePublished: togglePublished,\n    onToggleFeatured: toggleFeatured,\n    onDelete: deleteVehicle\n  })\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Caricamento veicoli...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Gestione Veicoli</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {vehicles.length} veicoli totali\n          </p>\n        </div>\n        <Button\n          onClick={() => {\n            setSelectedVehicle(null)\n            setShowModal(true)\n          }}\n          className=\"gap-2\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Nuovo Veicolo\n        </Button>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <div className=\"flex-1 relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n          <input\n            type=\"text\"\n            placeholder=\"Cerca veicoli...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n          />\n        </div>\n        <select\n          value={categoryFilter}\n          onChange={(e) => setCategoryFilter(e.target.value)}\n          className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n        >\n          <option value=\"\">Tutte le categorie</option>\n          {categories.map(cat => (\n            <option key={cat} value={cat}>{cat}</option>\n          ))}\n        </select>\n      </div>\n\n      <UnifiedAdminTable\n        data={filteredVehicles}\n        columns={columns}\n        actions={actions}\n        keyExtractor={(vehicle) => vehicle.id}\n        emptyMessage={\n          <div className=\"text-center\">\n            <Car className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium\">Nessun veicolo trovato</h3>\n            <p className=\"mt-1 text-sm text-muted-foreground\">\n              {searchTerm || categoryFilter\n                ? 'Prova a modificare i filtri di ricerca'\n                : 'Inizia creando un nuovo veicolo'}\n            </p>\n          </div>\n        }\n      />\n\n      {showModal && (\n        <VehicleModal\n          vehicle={selectedVehicle}\n          onClose={handleCloseModal}\n          onSave={handleSave}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":10006},"app/admin/instagram/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { Instagram, Plus, Trash2, Eye } from 'lucide-react'\nimport { db } from '@/lib/firebase'\nimport { collection, doc, setDoc, getDocs, Timestamp, query, orderBy } from 'firebase/firestore'\nimport { useNotifications } from '@/components/NotificationSystem'\n\ninterface InstagramVideo {\n  id: string\n  url: string\n  embedUrl: string\n  slot: number\n  active: boolean\n  order: number\n}\n\nexport default function AdminInstagramPage() {\n  const [videos, setVideos] = useState<InstagramVideo[]>([\n    { id: 'slot-1', url: '', embedUrl: '', slot: 1, active: false, order: 1 },\n    { id: 'slot-2', url: '', embedUrl: '', slot: 2, active: false, order: 2 },\n    { id: 'slot-3', url: '', embedUrl: '', slot: 3, active: false, order: 3 }\n  ])\n  const [editingIndex, setEditingIndex] = useState<number | null>(null)\n  const [inputUrl, setInputUrl] = useState('')\n  const [loading, setLoading] = useState(true)\n  const { showSuccess, showError } = useNotifications()\n\n  useEffect(() => {\n    fetchVideos()\n  }, [])\n\n  const fetchVideos = async () => {\n    try {\n      const videosRef = collection(db, 'instagram_videos')\n      const q = query(videosRef, orderBy('order', 'asc'))\n      const snapshot = await getDocs(q)\n      \n      if (!snapshot.empty) {\n        const fetchedVideos = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        })) as InstagramVideo[]\n        \n        setVideos(prev => prev.map((v, i) => {\n          const fetched = fetchedVideos.find(fv => fv.slot === i + 1)\n          return fetched || v\n        }))\n      }\n    } catch (error) {\n      console.error('Error fetching videos:', error)\n      showError('Errore', 'Impossibile caricare i video')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const convertToEmbedUrl = (url: string): string => {\n    // Support both /p/ (posts) and /reel/ (reels)\n    const reelMatch = url.match(/\\/reel\\/([^\\/\\?]+)/)\n    if (reelMatch) {\n      return `https://www.instagram.com/reel/${reelMatch[1]}/embed`\n    }\n    \n    const postMatch = url.match(/\\/p\\/([^\\/\\?]+)/)\n    if (postMatch) {\n      return `https://www.instagram.com/p/${postMatch[1]}/embed`\n    }\n    \n    return url\n  }\n\n  const handleSaveVideo = async (index: number) => {\n    if (!inputUrl) return\n    \n    const embedUrl = convertToEmbedUrl(inputUrl)\n    const video = videos[index]\n    \n    try {\n      const videoRef = doc(db, 'instagram_videos', video.id)\n      await setDoc(videoRef, {\n        slot: video.slot,\n        url: inputUrl,\n        embedUrl,\n        active: true,\n        order: video.order,\n        createdAt: Timestamp.now(),\n        updatedAt: Timestamp.now()\n      }, { merge: true })\n      \n      setVideos(prev => prev.map((v, i) => \n        i === index \n          ? { ...v, url: inputUrl, embedUrl, active: true }\n          : v\n      ))\n      \n      showSuccess('Salvato!', 'Video aggiunto con successo')\n      setEditingIndex(null)\n      setInputUrl('')\n    } catch (error) {\n      console.error('Error saving video:', error)\n      showError('Errore', 'Impossibile salvare il video')\n    }\n  }\n\n  const handleRemoveVideo = async (index: number) => {\n    const video = videos[index]\n    \n    try {\n      const videoRef = doc(db, 'instagram_videos', video.id)\n      await setDoc(videoRef, {\n        slot: video.slot,\n        url: '',\n        embedUrl: '',\n        active: false,\n        order: video.order,\n        updatedAt: Timestamp.now()\n      }, { merge: true })\n      \n      setVideos(prev => prev.map((v, i) => \n        i === index \n          ? { ...v, url: '', embedUrl: '', active: false }\n          : v\n      ))\n      \n      showSuccess('Rimosso!', 'Video eliminato con successo')\n    } catch (error) {\n      console.error('Error removing video:', error)\n      showError('Errore', 'Impossibile rimuovere il video')\n    }\n  }\n\n  const toggleActive = async (index: number) => {\n    const video = videos[index]\n    \n    try {\n      const videoRef = doc(db, 'instagram_videos', video.id)\n      await setDoc(videoRef, {\n        active: !video.active,\n        updatedAt: Timestamp.now()\n      }, { merge: true })\n      \n      setVideos(prev => prev.map((v, i) => \n        i === index \n          ? { ...v, active: !v.active }\n          : v\n      ))\n      \n      showSuccess('Aggiornato!', video.active ? 'Video disattivato' : 'Video attivato')\n    } catch (error) {\n      console.error('Error toggling video:', error)\n      showError('Errore', 'Impossibile aggiornare lo stato')\n    }\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-foreground\">Gestione Instagram Feed</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Gestisci i 3 video Instagram mostrati sul sito\n          </p>\n        </div>\n        <a\n          href=\"https://www.instagram.com/omarito_chill/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all flex items-center gap-2 shadow-lg\"\n        >\n          <Instagram className=\"w-5 h-5\" />\n          @omarito_chill\n        </a>\n      </div>\n\n      {/* Instructions */}\n      <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4\">\n        <h3 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-2\">\n          Come aggiungere un video:\n        </h3>\n        <ol className=\"list-decimal list-inside space-y-1 text-sm text-blue-800 dark:text-blue-200\">\n          <li>Vai su Instagram e apri il post desiderato</li>\n          <li>Copia l'URL completo del post (es: https://www.instagram.com/p/ABC123/)</li>\n          <li>Incolla l'URL in uno degli slot qui sotto</li>\n          <li>Clicca \"Salva\" per attivare il video</li>\n        </ol>\n      </div>\n\n      {/* Video Slots */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {videos.map((video, index) => (\n          <div\n            key={video.id}\n            className=\"bg-card border border-border rounded-xl overflow-hidden\"\n          >\n            <div className=\"bg-gradient-to-r from-orange-500 to-red-500 px-4 py-3\">\n              <h3 className=\"font-bold text-white\">Slot {index + 1}</h3>\n            </div>\n\n            <div className=\"p-4 space-y-4\">\n              {video.active && video.embedUrl ? (\n                <>\n                  {/* Preview */}\n                  <div className=\"aspect-square bg-muted rounded-lg overflow-hidden\">\n                    <iframe\n                      src={video.embedUrl}\n                      className=\"w-full h-full\"\n                      frameBorder=\"0\"\n                      allowFullScreen\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <p className=\"text-xs text-muted-foreground truncate\">\n                      {video.url}\n                    </p>\n                    \n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={() => toggleActive(index)}\n                        className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\n                          video.active\n                            ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300'\n                            : 'bg-gray-100 dark:bg-gray-800 text-gray-600'\n                        }`}\n                      >\n                        <Eye className=\"w-4 h-4 inline mr-1\" />\n                        {video.active ? 'Attivo' : 'Disattivo'}\n                      </button>\n                      \n                      <button\n                        onClick={() => handleRemoveVideo(index)}\n                        className=\"px-3 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <>\n                  {editingIndex === index ? (\n                    <div className=\"space-y-3\">\n                      <input\n                        type=\"url\"\n                        value={inputUrl}\n                        onChange={(e) => setInputUrl(e.target.value)}\n                        placeholder=\"https://www.instagram.com/p/...\"\n                        className=\"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm\"\n                        autoFocus\n                      />\n                      \n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => handleSaveVideo(index)}\n                          disabled={!inputUrl}\n                          className=\"flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium\"\n                        >\n                          Salva\n                        </button>\n                        <button\n                          onClick={() => {\n                            setEditingIndex(null)\n                            setInputUrl('')\n                          }}\n                          className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-sm font-medium\"\n                        >\n                          Annulla\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <button\n                      onClick={() => setEditingIndex(index)}\n                      className=\"w-full aspect-square flex flex-col items-center justify-center border-2 border-dashed border-border rounded-lg hover:border-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/10 transition-all group\"\n                    >\n                      <Plus className=\"w-12 h-12 text-muted-foreground group-hover:text-orange-500 transition-colors\" />\n                      <span className=\"mt-2 text-sm text-muted-foreground group-hover:text-orange-500 transition-colors\">\n                        Aggiungi Video\n                      </span>\n                    </button>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":10759},"components/admin/TravelModal.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { X, Save, Loader2 } from 'lucide-react'\nimport { useNotifications } from '../NotificationSystem'\nimport { validateUrl } from '@/lib/url-validation'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface Travel {\n  id?: string\n  title: string\n  category: string\n  duration: string\n  price: number\n  rating: number\n  published: boolean\n  featured: boolean\n  image?: string\n  description?: string\n}\n\ninterface TravelModalProps {\n  travel: Travel | null\n  onClose: () => void\n  onSave: () => void\n}\n\nexport default function TravelModal({ travel, onClose, onSave }: TravelModalProps) {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [formData, setFormData] = useState<Travel>({\n    title: '',\n    category: 'desert',\n    duration: '',\n    price: 0,\n    rating: 4.5,\n    published: false,\n    featured: false,\n    image: '',\n    description: ''\n  })\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState('')\n  const [urlError, setUrlError] = useState('')\n\n  useEffect(() => {\n    if (travel) {\n      setFormData(travel)\n    }\n  }, [travel])\n\n  const handleUrlChange = (url: string) => {\n    setFormData({ ...formData, image: url })\n    // Rimuovi errore onChange per campo opzionale - validazione solo al submit\n    setUrlError('')\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!user) {\n      showError('Non autorizzato', 'Devi effettuare il login')\n      return\n    }\n    \n    if (formData.image) {\n      const urlValidation = validateUrl(formData.image, false)\n      if (!urlValidation.valid) {\n        setUrlError(urlValidation.error || 'URL non valido')\n        showError('Errore Validazione', urlValidation.error || 'URL immagine non valido')\n        return\n      }\n    }\n    \n    setSaving(true)\n    setError('')\n    setUrlError('')\n\n    try {\n      const token = await user.getIdToken()\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n      \n      const method = travel?.id ? 'PUT' : 'POST'\n      const url = travel?.id ? `/api/travels/${travel.id}` : '/api/travels'\n      \n      const response = await fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(formData)\n      })\n\n      if (!response.ok) throw new Error('Failed to save travel')\n      \n      showSuccess('Viaggio Salvato', `\"${formData.title}\" √® stato salvato con successo.`)\n      onSave()\n      onClose()\n    } catch (err: any) {\n      const errorMessage = err.message || 'Errore durante il salvataggio'\n      setError(errorMessage)\n      showError('Errore Salvataggio', errorMessage)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card border border-border rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-card border-b border-border px-6 py-4 flex items-center justify-between\">\n          <h2 className=\"text-2xl font-bold text-foreground\">\n            {travel ? 'Modifica Viaggio' : 'Nuovo Viaggio'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-muted rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n          {error && (\n            <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Titolo *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              required\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Categoria *\n            </label>\n            <select\n              value={formData.category}\n              onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n              required\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            >\n              <option value=\"desert\">Desert</option>\n              <option value=\"city\">City</option>\n              <option value=\"coast\">Coast</option>\n              <option value=\"mountain\">Mountain</option>\n              <option value=\"group\">Group</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Durata *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.duration}\n              onChange={(e) => setFormData({ ...formData, duration: e.target.value })}\n              required\n              placeholder=\"es. 3 giorni, 1 settimana\"\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Prezzo (‚Ç¨) *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.price}\n                onChange={(e) => setFormData({ ...formData, price: parseFloat(e.target.value) })}\n                required\n                min=\"0\"\n                step=\"0.01\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Rating\n              </label>\n              <input\n                type=\"number\"\n                value={formData.rating}\n                onChange={(e) => setFormData({ ...formData, rating: parseFloat(e.target.value) })}\n                min=\"0\"\n                max=\"5\"\n                step=\"0.1\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              URL Immagine\n            </label>\n            <input\n              type=\"url\"\n              value={formData.image}\n              onChange={(e) => handleUrlChange(e.target.value)}\n              placeholder=\"https://...\"\n              className={`w-full px-4 py-2 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${\n                urlError ? 'border-red-500 dark:border-red-400' : 'border-border'\n              }`}\n            />\n            {urlError && (\n              <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\n                {urlError}\n              </p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Descrizione\n            </label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              rows={4}\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"published\"\n              checked={formData.published}\n              onChange={(e) => setFormData({ ...formData, published: e.target.checked })}\n              className=\"w-4 h-4 text-orange-500 rounded focus:ring-2 focus:ring-orange-500\"\n            />\n            <label htmlFor=\"published\" className=\"text-sm font-medium text-foreground\">\n              Pubblica immediatamente\n            </label>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"featured\"\n              checked={formData.featured}\n              onChange={(e) => setFormData({ ...formData, featured: e.target.checked })}\n              className=\"w-4 h-4 text-orange-500 rounded focus:ring-2 focus:ring-orange-500\"\n            />\n            <label htmlFor=\"featured\" className=\"text-sm font-medium text-foreground\">\n              Metti in evidenza\n            </label>\n          </div>\n\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-border\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={saving}\n              className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50\"\n            >\n              Annulla\n            </button>\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all flex items-center gap-2 disabled:opacity-50\"\n            >\n              {saving ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Salvataggio...\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  Salva\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n","size_bytes":10454},"components/admin/ExperienceModal.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { X, Save, Loader2 } from 'lucide-react'\nimport { doc, setDoc, addDoc, collection } from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\nimport { useNotifications } from '../NotificationSystem'\nimport { validateUrl } from '@/lib/url-validation'\n\ninterface Experience {\n  id?: string\n  title: string\n  category: string\n  price: number\n  rating: number\n  published: boolean\n  image?: string\n  description?: string\n}\n\ninterface ExperienceModalProps {\n  experience: Experience | null\n  onClose: () => void\n  onSave: () => void\n}\n\nexport default function ExperienceModal({ experience, onClose, onSave }: ExperienceModalProps) {\n  const { showSuccess, showError } = useNotifications()\n  const [formData, setFormData] = useState<Experience>({\n    title: '',\n    category: 'surf',\n    price: 0,\n    rating: 4.5,\n    published: false,\n    image: '',\n    description: ''\n  })\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState('')\n  const [urlError, setUrlError] = useState('')\n\n  useEffect(() => {\n    if (experience) {\n      setFormData(experience)\n    }\n  }, [experience])\n\n  const handleUrlChange = (url: string) => {\n    setFormData({ ...formData, image: url })\n    // Rimuovi errore onChange per campo opzionale - validazione solo al submit\n    setUrlError('')\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (formData.image && formData.image.trim()) {\n      const urlValidation = validateUrl(formData.image, false)\n      if (!urlValidation.valid) {\n        setUrlError(urlValidation.error || 'URL non valido')\n        showError('Errore Validazione', urlValidation.error || 'URL immagine non valido')\n        return\n      }\n    }\n    \n    setSaving(true)\n    setError('')\n    setUrlError('')\n\n    try {\n      if (experience?.id) {\n        // Update existing - use merge to preserve other fields\n        await setDoc(doc(db, 'experiences', experience.id), formData, { merge: true })\n      } else {\n        // Create new\n        await addDoc(collection(db, 'experiences'), formData)\n      }\n      showSuccess('Esperienza Salvata', `\"${formData.title}\" √® stata salvata con successo.`)\n      onSave()\n      onClose()\n    } catch (err: any) {\n      const errorMessage = err.message || 'Errore durante il salvataggio'\n      setError(errorMessage)\n      showError('Errore Salvataggio', errorMessage)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card border border-border rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-card border-b border-border px-6 py-4 flex items-center justify-between\">\n          <h2 className=\"text-2xl font-bold text-foreground\">\n            {experience ? 'Modifica Esperienza' : 'Nuova Esperienza'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-muted rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n          {error && (\n            <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Titolo *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              required\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Categoria *\n            </label>\n            <select\n              value={formData.category}\n              onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n              required\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            >\n              <option value=\"surf\">Surf</option>\n              <option value=\"cucina\">Cucina</option>\n              <option value=\"trekking\">Trekking</option>\n              <option value=\"quad-cammelli\">Quad & Cammelli</option>\n              <option value=\"artigianato\">Artigianato</option>\n            </select>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Prezzo (‚Ç¨) *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.price}\n                onChange={(e) => setFormData({ ...formData, price: parseFloat(e.target.value) })}\n                required\n                min=\"0\"\n                step=\"0.01\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Rating\n              </label>\n              <input\n                type=\"number\"\n                value={formData.rating}\n                onChange={(e) => setFormData({ ...formData, rating: parseFloat(e.target.value) })}\n                min=\"0\"\n                max=\"5\"\n                step=\"0.1\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              URL Immagine\n            </label>\n            <input\n              type=\"url\"\n              value={formData.image}\n              onChange={(e) => handleUrlChange(e.target.value)}\n              placeholder=\"https://...\"\n              className={`w-full px-4 py-2 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${\n                urlError ? 'border-red-500 dark:border-red-400' : 'border-border'\n              }`}\n            />\n            {urlError && (\n              <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\n                {urlError}\n              </p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Descrizione\n            </label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              rows={4}\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"published\"\n              checked={formData.published}\n              onChange={(e) => setFormData({ ...formData, published: e.target.checked })}\n              className=\"w-4 h-4 text-orange-500 rounded focus:ring-2 focus:ring-orange-500\"\n            />\n            <label htmlFor=\"published\" className=\"text-sm font-medium text-foreground\">\n              Pubblica immediatamente\n            </label>\n          </div>\n\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-border\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={saving}\n              className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50\"\n            >\n              Annulla\n            </button>\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all flex items-center gap-2 disabled:opacity-50\"\n            >\n              {saving ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Salvataggio...\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  Salva\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n","size_bytes":9086},"app/citta/[slug]/page.tsx":{"content":"\"use client\"\n\nimport { useParams } from 'next/navigation'\nimport { useState, useEffect } from 'react'\nimport { MapPin, Clock, Euro, Calendar, Plane, ArrowLeft, Loader2 } from 'lucide-react'\nimport Link from 'next/link'\nimport { notFound } from 'next/navigation'\n\nexport default function CityPage() {\n  const params = useParams()\n  const slug = params?.slug as string\n  const [city, setCity] = useState<any>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n\n  useEffect(() => {\n    const fetchCity = async () => {\n      try {\n        setLoading(true)\n        const response = await fetch(`/api/cities?slug=${slug}`, { cache: 'no-store' })\n        const data = await response.json()\n        \n        if (data.cities && data.cities.length > 0) {\n          setCity(data.cities[0])\n        } else {\n          setError(true)\n        }\n      } catch (err) {\n        console.error('Error loading city:', err)\n        setError(true)\n      } finally {\n        setLoading(false)\n      }\n    }\n    \n    if (slug) {\n      fetchCity()\n    }\n  }, [slug])\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-16 h-16 animate-spin text-orange-500 mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Caricamento citt√†...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !city) {\n    notFound()\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative h-[60vh] min-h-[500px] overflow-hidden\">\n        <img\n          src={city.heroImage}\n          alt={city.name}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent\" />\n        \n        <div className=\"absolute inset-0 flex items-end\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 w-full\">\n            <Link\n              href=\"/citta\"\n              className=\"inline-flex items-center gap-2 text-white/90 hover:text-white mb-6 transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n              Tutte le citt√†\n            </Link>\n            \n            <h1 className=\"text-5xl md:text-7xl font-bold text-white mb-4\">\n              {city.name}\n            </h1>\n            <p className=\"text-xl md:text-2xl text-white/90 max-w-3xl\">\n              {city.tagline}\n            </p>\n            \n            <div className=\"flex flex-wrap gap-3 mt-6\">\n              <div className=\"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white\">\n                <MapPin className=\"w-4 h-4\" />\n                <span>{city.location.distance}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Description */}\n      <div className=\"py-12 bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <p className=\"text-lg md:text-xl text-foreground leading-relaxed\">\n            {city.description}\n          </p>\n        </div>\n      </div>\n\n      {/* History */}\n      <div className=\"py-16 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-6\">\n            Storia\n          </h2>\n          <p className=\"text-lg text-muted-foreground leading-relaxed\">\n            {city.history}\n          </p>\n        </div>\n      </div>\n\n      {/* Attractions */}\n      <div className=\"py-16 bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-12 text-center\">\n            Attrazioni Principali\n          </h2>\n          \n          <div className=\"grid md:grid-cols-2 gap-8\">\n            {city.attractions.map((attraction, index) => (\n              <div\n                key={index}\n                className=\"bg-card rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 border border-border\"\n              >\n                <div className=\"relative h-64\">\n                  <img\n                    src={attraction.image}\n                    alt={attraction.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  {attraction.price && (\n                    <div className=\"absolute top-4 right-4 bg-orange-500 text-white px-3 py-1 rounded-full font-semibold\">\n                      {attraction.price}\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"p-6\">\n                  <h3 className=\"text-xl font-bold text-foreground mb-2\">\n                    {attraction.title}\n                  </h3>\n                  <p className=\"text-muted-foreground mb-4\">\n                    {attraction.description}\n                  </p>\n                  {attraction.duration && (\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                      <Clock className=\"w-4 h-4\" />\n                      <span>{attraction.duration}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Practical Info */}\n      <div className=\"py-16 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid md:grid-cols-2 gap-12\">\n            {/* When to Visit */}\n            <div>\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center\">\n                  <Calendar className=\"w-6 h-6 text-orange-600\" />\n                </div>\n                <h3 className=\"text-2xl font-bold text-foreground\">\n                  Quando Visitare\n                </h3>\n              </div>\n              <p className=\"text-muted-foreground leading-relaxed\">\n                {city.bestTime}\n              </p>\n            </div>\n\n            {/* How to Arrive */}\n            <div>\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center\">\n                  <Plane className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <h3 className=\"text-2xl font-bold text-foreground\">\n                  Come Arrivare\n                </h3>\n              </div>\n              <p className=\"text-muted-foreground leading-relaxed\">\n                {city.howToArrive}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tour Prices */}\n      <div className=\"py-16 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">\n              Prezzi Tour Indicativi\n            </h2>\n            <p className=\"text-lg text-muted-foreground\">\n              Scopri {city.name} con le nostre guide locali\n            </p>\n          </div>\n\n          <div className={`grid gap-6 max-w-4xl mx-auto ${city.tourPrices.multiDay ? 'md:grid-cols-3' : 'md:grid-cols-2'}`}>\n            <div className=\"bg-card rounded-2xl p-8 text-center shadow-lg border border-border\">\n              <div className=\"w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Clock className=\"w-8 h-8 text-orange-600\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-foreground mb-2\">Mezza Giornata</h3>\n              <p className=\"text-3xl font-bold text-orange-600 mb-2\">{city.tourPrices.halfDay}</p>\n              <p className=\"text-sm text-muted-foreground\">4 ore circa</p>\n            </div>\n\n            <div className=\"bg-card rounded-2xl p-8 text-center shadow-lg border border-border\">\n              <div className=\"w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Euro className=\"w-8 h-8 text-orange-600\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-foreground mb-2\">Giornata Intera</h3>\n              <p className=\"text-3xl font-bold text-orange-600 mb-2\">{city.tourPrices.fullDay}</p>\n              <p className=\"text-sm text-muted-foreground\">8 ore circa</p>\n            </div>\n\n            {city.tourPrices.multiDay && (\n              <div className=\"bg-card rounded-2xl p-8 text-center shadow-lg border border-border\">\n                <div className=\"w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Calendar className=\"w-8 h-8 text-orange-600\" />\n                </div>\n                <h3 className=\"text-xl font-bold text-foreground mb-2\">Tour Multi-Giorno</h3>\n                <p className=\"text-3xl font-bold text-orange-600 mb-2\">{city.tourPrices.multiDay}</p>\n                <p className=\"text-sm text-muted-foreground\">2-3 giorni</p>\n              </div>\n            )}\n          </div>\n\n          <div className=\"text-center mt-12\">\n            <Link\n              href=\"/contatti\"\n              className=\"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl hover:from-orange-600 hover:to-red-600 transition-all shadow-lg text-lg font-semibold\"\n            >\n              Richiedi un Tour Personalizzato\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      {/* Highlights */}\n      <div className=\"py-16 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-8 text-center\">\n            Da Non Perdere\n          </h2>\n          \n          <div className=\"grid md:grid-cols-3 gap-4\">\n            {city.highlights.map((highlight, index) => (\n              <div\n                key={index}\n                className=\"flex items-center gap-3 bg-muted/50 rounded-xl p-4 border border-border\"\n              >\n                <div className=\"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center flex-shrink-0\">\n                  ‚úì\n                </div>\n                <span className=\"text-foreground font-medium\">{highlight}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":10776},"scripts/populate-instagram-videos.ts":{"content":"import { db } from '../lib/firebase'\nimport { collection, doc, setDoc, Timestamp } from 'firebase/firestore'\n\ninterface InstagramVideoData {\n  slot: number\n  url: string\n  embedUrl: string\n  active: boolean\n  order: number\n}\n\nconst instagramVideos: InstagramVideoData[] = [\n  {\n    slot: 1,\n    url: 'https://www.instagram.com/reel/DPhC4GrjcxQ/',\n    embedUrl: 'https://www.instagram.com/reel/DPhC4GrjcxQ/embed',\n    active: true,\n    order: 1\n  },\n  {\n    slot: 2,\n    url: 'https://www.instagram.com/reel/DQuSWaHjZpi/',\n    embedUrl: 'https://www.instagram.com/reel/DQuSWaHjZpi/embed',\n    active: true,\n    order: 2\n  },\n  {\n    slot: 3,\n    url: 'https://www.instagram.com/reel/DNEMbjKtgY2/',\n    embedUrl: 'https://www.instagram.com/reel/DNEMbjKtgY2/embed',\n    active: true,\n    order: 3\n  }\n]\n\nasync function populateInstagramVideos() {\n  console.log('üé¨ Starting Instagram videos population...')\n  \n  const instagramRef = collection(db, 'instagram_videos')\n  \n  for (const video of instagramVideos) {\n    const videoId = `slot-${video.slot}`\n    const videoRef = doc(instagramRef, videoId)\n    \n    const videoData = {\n      ...video,\n      createdAt: Timestamp.now(),\n      updatedAt: Timestamp.now()\n    }\n    \n    await setDoc(videoRef, videoData, { merge: true })\n    console.log(`‚úÖ Saved video slot ${video.slot}: ${video.url}`)\n  }\n  \n  console.log('\\nüéâ All Instagram videos populated successfully!')\n  console.log('\\nVideos:')\n  instagramVideos.forEach(v => {\n    console.log(`  Slot ${v.slot}: ${v.url}`)\n  })\n}\n\npopulateInstagramVideos()\n  .then(() => {\n    console.log('\\n‚ú® Script completed')\n    process.exit(0)\n  })\n  .catch((error) => {\n    console.error('‚ùå Error populating Instagram videos:', error)\n    process.exit(1)\n  })\n","size_bytes":1759},"components/InstagramFeed.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from 'react'\nimport Script from 'next/script'\n\ninterface InstagramVideo {\n  id: string\n  url: string\n  embedUrl?: string\n  slot?: number\n  active: boolean\n  order?: number\n}\n\nexport default function InstagramFeed() {\n  const [videos, setVideos] = useState<InstagramVideo[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetchVideos()\n  }, [])\n\n  useEffect(() => {\n    if (videos.length > 0 && typeof window !== 'undefined' && (window as any).instgrm) {\n      (window as any).instgrm.Embeds.process()\n    }\n  }, [videos])\n\n  const fetchVideos = async () => {\n    try {\n      const response = await fetch('/api/instagram')\n      \n      if (response.ok) {\n        const data = await response.json()\n        const activeVideos = (data.videos || []).filter((v: InstagramVideo) => v.active)\n        setVideos(activeVideos)\n      }\n    } catch (error) {\n      console.error('Error fetching Instagram videos:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n        {[1, 2, 3].map((i) => (\n          <div\n            key={i}\n            className=\"bg-card rounded-2xl overflow-hidden shadow-lg h-96 animate-pulse\"\n          >\n            <div className=\"w-full h-full bg-muted\" />\n          </div>\n        ))}\n      </div>\n    )\n  }\n\n  if (videos.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-muted-foreground\">\n          Nessun video Instagram disponibile al momento\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n        {videos.map((video) => (\n          <div\n            key={video.id}\n            className=\"bg-white dark:bg-gray-800 rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300\"\n          >\n            <blockquote \n              className=\"instagram-media\" \n              data-instgrm-permalink={`${video.url}?utm_source=ig_embed&utm_campaign=loading`}\n              data-instgrm-version=\"14\"\n              style={{\n                background: '#FFF',\n                border: 0,\n                borderRadius: '3px',\n                boxShadow: '0 0 1px 0 rgba(0,0,0,0.5), 0 1px 10px 0 rgba(0,0,0,0.15)',\n                margin: '1px',\n                maxWidth: '540px',\n                minWidth: '326px',\n                padding: 0,\n                width: '99.375%'\n              }}\n            >\n              <div style={{ padding: '16px' }}>\n                <a \n                  href={`${video.url}?utm_source=ig_embed&utm_campaign=loading`}\n                  style={{\n                    background: '#FFFFFF',\n                    lineHeight: 0,\n                    padding: '0 0',\n                    textAlign: 'center',\n                    textDecoration: 'none',\n                    width: '100%'\n                  }}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Visualizza post su Instagram\n                </a>\n              </div>\n            </blockquote>\n          </div>\n        ))}\n      </div>\n\n      {/* Instagram Embed Script */}\n      <Script\n        async\n        src=\"//www.instagram.com/embed.js\"\n        strategy=\"lazyOnload\"\n        onLoad={() => {\n          if (typeof window !== 'undefined' && (window as any).instgrm) {\n            (window as any).instgrm.Embeds.process()\n          }\n        }}\n      />\n    </>\n  )\n}\n","size_bytes":3554},"app/citta/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { MapPin, ArrowRight, Loader2 } from 'lucide-react'\n\nexport default function CitiesIndexPage() {\n  const [cities, setCities] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const fetchCities = async () => {\n      try {\n        setLoading(true)\n        const response = await fetch('/api/cities', { cache: 'no-store' })\n        const data = await response.json()\n        setCities(data.cities || [])\n      } catch (error) {\n        console.error('Error loading cities:', error)\n      } finally {\n        setLoading(false)\n      }\n    }\n    \n    fetchCities()\n  }, [])\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-16 h-16 animate-spin text-orange-500 mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Caricamento citt√†...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative py-24 md:py-32 bg-gradient-to-r from-orange-600 via-red-500 to-amber-600 dark:from-orange-900 dark:via-red-900 dark:to-amber-900\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\n          <h1 className=\"text-4xl md:text-6xl lg:text-7xl font-bold mb-6\">\n            Citt√† Imperiali\n            <span className=\"block bg-gradient-to-r from-yellow-300 to-orange-200 bg-clip-text text-transparent\">\n              del Marocco\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl lg:text-2xl max-w-3xl mx-auto\">\n            Scopri le meraviglie storiche e culturali delle citt√† marocchine\n          </p>\n        </div>\n      </div>\n\n      {/* Cities Grid */}\n      <div className=\"py-20 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {cities.map((city) => (\n              <Link\n                key={city.id}\n                href={`/citta/${city.slug}`}\n                className=\"group bg-card rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-border\"\n              >\n                {/* Image */}\n                <div className=\"relative h-64 overflow-hidden\">\n                  <img\n                    src={city.heroImage}\n                    alt={city.name}\n                    className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent\" />\n                  \n                  {/* Title Overlay */}\n                  <div className=\"absolute bottom-4 left-4 right-4\">\n                    <h2 className=\"text-3xl font-bold text-white mb-1\">\n                      {city.name}\n                    </h2>\n                    <p className=\"text-white/90 text-sm\">\n                      {city.tagline}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"p-6 space-y-4\">\n                  <p className=\"text-muted-foreground line-clamp-3\">\n                    {city.description}\n                  </p>\n\n                  {/* Info */}\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <MapPin className=\"w-4 h-4\" />\n                      <span>{city.location.distance}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2 text-orange-600 dark:text-orange-400 font-semibold\">\n                      Scopri di pi√π\n                      <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n                    </div>\n                  </div>\n\n                  {/* Highlights Pills */}\n                  <div className=\"flex flex-wrap gap-2 pt-2\">\n                    {city.highlights.slice(0, 3).map((highlight, i) => (\n                      <span\n                        key={i}\n                        className=\"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-xs font-medium\"\n                      >\n                        {highlight}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-20 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-6\">\n            Crea il Tuo Viaggio su Misura\n          </h2>\n          <p className=\"text-lg text-muted-foreground mb-8\">\n            Vuoi visitare pi√π citt√†? Organizziamo tour personalizzati combinando le destinazioni che preferisci\n          </p>\n          <Link\n            href=\"/viaggi-su-misura\"\n            className=\"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl hover:from-orange-600 hover:to-red-600 transition-all shadow-lg text-lg font-semibold\"\n          >\n            Richiedi un Preventivo Gratuito\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":5687},"components/admin/VehicleModal.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { X, Save, Loader2, Plus, Trash2 } from 'lucide-react'\nimport { useNotifications } from '../NotificationSystem'\nimport { validateUrl } from '@/lib/url-validation'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface PricingPeriod {\n  name: string\n  startDate: string\n  endDate: string\n  prices: {\n    short: number\n    medium: number\n    long: number\n  }\n}\n\ninterface Vehicle {\n  id?: string\n  name: string\n  slug: string\n  category: string\n  transmission: string\n  fuelType: string\n  seats: number\n  doors: number\n  luggage: number\n  image?: string\n  features?: string[]\n  pricingPeriods?: PricingPeriod[]\n  published: boolean\n  featured: boolean\n  available: boolean\n}\n\ninterface VehicleModalProps {\n  vehicle: Vehicle | null\n  onClose: () => void\n  onSave: () => void\n}\n\nexport default function VehicleModal({ vehicle, onClose, onSave }: VehicleModalProps) {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [formData, setFormData] = useState<Vehicle>({\n    name: '',\n    slug: '',\n    category: 'economica',\n    transmission: 'manuale',\n    fuelType: 'benzina',\n    seats: 5,\n    doors: 4,\n    luggage: 2,\n    image: '',\n    features: [],\n    pricingPeriods: [\n      {\n        name: 'Bassa Stagione',\n        startDate: '2025-01-01',\n        endDate: '2025-06-30',\n        prices: { short: 40, medium: 38, long: 35 }\n      }\n    ],\n    published: true,\n    featured: false,\n    available: true\n  })\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState('')\n  const [urlError, setUrlError] = useState('')\n\n  useEffect(() => {\n    if (vehicle) {\n      setFormData({\n        ...vehicle,\n        features: vehicle.features || [],\n        pricingPeriods: vehicle.pricingPeriods || [\n          {\n            name: 'Bassa Stagione',\n            startDate: '2025-01-01',\n            endDate: '2025-06-30',\n            prices: { short: 40, medium: 38, long: 35 }\n          }\n        ]\n      })\n    }\n  }, [vehicle])\n\n  const handleUrlChange = (url: string) => {\n    setFormData({ ...formData, image: url })\n    // Rimuovi errore onChange per campo opzionale - validazione solo al submit\n    setUrlError('')\n  }\n\n  const generateSlug = (name: string) => {\n    return name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/(^-|-$)/g, '')\n  }\n\n  const handleNameChange = (name: string) => {\n    setFormData({\n      ...formData,\n      name,\n      slug: vehicle?.id ? formData.slug : generateSlug(name)\n    })\n  }\n\n  const addFeature = () => {\n    setFormData({\n      ...formData,\n      features: [...(formData.features || []), '']\n    })\n  }\n\n  const updateFeature = (index: number, value: string) => {\n    const newFeatures = [...(formData.features || [])]\n    newFeatures[index] = value\n    setFormData({ ...formData, features: newFeatures })\n  }\n\n  const removeFeature = (index: number) => {\n    setFormData({\n      ...formData,\n      features: (formData.features || []).filter((_, i) => i !== index)\n    })\n  }\n\n  const addPricingPeriod = () => {\n    setFormData({\n      ...formData,\n      pricingPeriods: [\n        ...(formData.pricingPeriods || []),\n        {\n          name: '',\n          startDate: '',\n          endDate: '',\n          prices: { short: 40, medium: 38, long: 35 }\n        }\n      ]\n    })\n  }\n\n  const updatePricingPeriod = (index: number, field: string, value: any) => {\n    const newPeriods = [...(formData.pricingPeriods || [])]\n    if (field.startsWith('prices.')) {\n      const priceType = field.split('.')[1]\n      newPeriods[index] = {\n        ...newPeriods[index],\n        prices: {\n          ...newPeriods[index].prices,\n          [priceType]: parseFloat(value) || 0\n        }\n      }\n    } else {\n      newPeriods[index] = {\n        ...newPeriods[index],\n        [field]: value\n      }\n    }\n    setFormData({ ...formData, pricingPeriods: newPeriods })\n  }\n\n  const removePricingPeriod = (index: number) => {\n    setFormData({\n      ...formData,\n      pricingPeriods: (formData.pricingPeriods || []).filter((_, i) => i !== index)\n    })\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!user) {\n      showError('Non autorizzato', 'Devi effettuare il login')\n      return\n    }\n    \n    if (formData.image && formData.image.trim()) {\n      const urlValidation = validateUrl(formData.image, false)\n      if (!urlValidation.valid) {\n        setUrlError(urlValidation.error || 'URL non valido')\n        showError('Errore Validazione', urlValidation.error || 'URL immagine non valido')\n        return\n      }\n    }\n    \n    setSaving(true)\n    setError('')\n    setUrlError('')\n\n    try {\n      const token = await user.getIdToken()\n      const dataToSave = {\n        name: formData.name,\n        slug: formData.slug,\n        category: formData.category,\n        transmission: formData.transmission,\n        fuelType: formData.fuelType,\n        seats: parseInt(formData.seats as any) || 5,\n        doors: parseInt(formData.doors as any) || 4,\n        luggage: parseInt(formData.luggage as any) || 2,\n        image: formData.image || null,\n        features: (formData.features || []).filter(f => f.trim() !== ''),\n        pricingPeriods: formData.pricingPeriods,\n        published: formData.published,\n        featured: formData.featured,\n        available: formData.available\n      }\n\n      const url = vehicle?.id ? `/api/vehicles/${vehicle.id}` : '/api/vehicles'\n      const method = vehicle?.id ? 'PUT' : 'POST'\n\n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(dataToSave)\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to save vehicle')\n      }\n\n      showSuccess('Veicolo Salvato', `\"${formData.name}\" √® stato salvato con successo.`)\n      onSave()\n      onClose()\n    } catch (err: any) {\n      const errorMessage = err.message || 'Errore durante il salvataggio'\n      setError(errorMessage)\n      showError('Errore Salvataggio', errorMessage)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between\">\n          <h2 className=\"text-2xl font-bold\">\n            {vehicle ? 'Modifica Veicolo' : 'Nuovo Veicolo'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Nome Veicolo *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => handleNameChange(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Slug *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.slug}\n                onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Categoria *\n              </label>\n              <select\n                value={formData.category}\n                onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"economica\">Economica</option>\n                <option value=\"suv\">SUV</option>\n                <option value=\"Premium\">Premium</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Trasmissione *\n              </label>\n              <select\n                value={formData.transmission}\n                onChange={(e) => setFormData({ ...formData, transmission: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"manuale\">Manuale</option>\n                <option value=\"automatica\">Automatica</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Carburante *\n              </label>\n              <select\n                value={formData.fuelType}\n                onChange={(e) => setFormData({ ...formData, fuelType: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"benzina\">Benzina</option>\n                <option value=\"diesel\">Diesel</option>\n                <option value=\"ibrida\">Ibrida</option>\n                <option value=\"elettrica\">Elettrica</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Posti *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.seats}\n                onChange={(e) => setFormData({ ...formData, seats: parseInt(e.target.value) || 5 })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                min=\"2\"\n                max=\"9\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Porte *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.doors}\n                onChange={(e) => setFormData({ ...formData, doors: parseInt(e.target.value) || 4 })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                min=\"2\"\n                max=\"5\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Bagagli *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.luggage}\n                onChange={(e) => setFormData({ ...formData, luggage: parseInt(e.target.value) || 2 })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                min=\"1\"\n                max=\"10\"\n                required\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              URL Immagine (opzionale)\n            </label>\n            <input\n              type=\"text\"\n              value={formData.image || ''}\n              onChange={(e) => handleUrlChange(e.target.value)}\n              className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${\n                urlError ? 'border-red-500' : 'border-gray-300'\n              }`}\n              placeholder=\"https://example.com/vehicle.jpg\"\n            />\n            {urlError && (\n              <p className=\"text-red-600 text-sm mt-1\">{urlError}</p>\n            )}\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between mb-2\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Caratteristiche\n              </label>\n              <button\n                type=\"button\"\n                onClick={addFeature}\n                className=\"text-sm text-orange-600 hover:text-orange-700 flex items-center gap-1\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                Aggiungi\n              </button>\n            </div>\n            {(formData.features || []).map((feature, index) => (\n              <div key={index} className=\"flex gap-2 mb-2\">\n                <input\n                  type=\"text\"\n                  value={feature}\n                  onChange={(e) => updateFeature(index, e.target.value)}\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                  placeholder=\"Es: Aria condizionata\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => removeFeature(index)}\n                  className=\"text-red-600 hover:text-red-700\"\n                >\n                  <Trash2 className=\"w-5 h-5\" />\n                </button>\n              </div>\n            ))}\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between mb-2\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Periodi di Prezzo\n              </label>\n              <button\n                type=\"button\"\n                onClick={addPricingPeriod}\n                className=\"text-sm text-orange-600 hover:text-orange-700 flex items-center gap-1\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                Aggiungi Periodo\n              </button>\n            </div>\n            {(formData.pricingPeriods || []).map((period, index) => (\n              <div key={index} className=\"border border-gray-200 rounded-lg p-4 mb-4\">\n                <div className=\"flex justify-between items-start mb-3\">\n                  <h4 className=\"font-medium text-gray-900\">Periodo {index + 1}</h4>\n                  {(formData.pricingPeriods || []).length > 1 && (\n                    <button\n                      type=\"button\"\n                      onClick={() => removePricingPeriod(index)}\n                      className=\"text-red-600 hover:text-red-700\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  )}\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      Nome\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={period.name}\n                      onChange={(e) => updatePricingPeriod(index, 'name', e.target.value)}\n                      className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500\"\n                      placeholder=\"Es: Alta Stagione\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      Data Inizio\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={period.startDate}\n                      onChange={(e) => updatePricingPeriod(index, 'startDate', e.target.value)}\n                      className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      Data Fine\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={period.endDate}\n                      onChange={(e) => updatePricingPeriod(index, 'endDate', e.target.value)}\n                      className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500\"\n                    />\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-3 gap-3 mt-3\">\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      1-3 giorni (‚Ç¨)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={period.prices.short}\n                      onChange={(e) => updatePricingPeriod(index, 'prices.short', e.target.value)}\n                      className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500\"\n                      min=\"0\"\n                      step=\"0.01\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      4-7 giorni (‚Ç¨)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={period.prices.medium}\n                      onChange={(e) => updatePricingPeriod(index, 'prices.medium', e.target.value)}\n                      className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500\"\n                      min=\"0\"\n                      step=\"0.01\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      8+ giorni (‚Ç¨)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={period.prices.long}\n                      onChange={(e) => updatePricingPeriod(index, 'prices.long', e.target.value)}\n                      className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-orange-500\"\n                      min=\"0\"\n                      step=\"0.01\"\n                    />\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"flex gap-4\">\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                checked={formData.published}\n                onChange={(e) => setFormData({ ...formData, published: e.target.checked })}\n                className=\"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500\"\n              />\n              <span className=\"text-sm font-medium text-gray-700\">Pubblicato</span>\n            </label>\n\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                checked={formData.featured}\n                onChange={(e) => setFormData({ ...formData, featured: e.target.checked })}\n                className=\"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500\"\n              />\n              <span className=\"text-sm font-medium text-gray-700\">In Evidenza</span>\n            </label>\n\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                checked={formData.available}\n                onChange={(e) => setFormData({ ...formData, available: e.target.checked })}\n                className=\"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500\"\n              />\n              <span className=\"text-sm font-medium text-gray-700\">Disponibile</span>\n            </label>\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:bg-gray-300\"\n            >\n              {saving ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  Salvataggio...\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-5 h-5\" />\n                  Salva Veicolo\n                </>\n              )}\n            </button>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Annulla\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n","size_bytes":21646},"app/admin/blog/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { collection, getDocs, doc, updateDoc, deleteDoc } from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\nimport { Search, Edit, Trash2, Plus, Eye, EyeOff, Star, Calendar } from 'lucide-react'\nimport BlogModal from '@/components/admin/BlogModal'\n\ninterface BlogPost {\n  id: string\n  slug: string\n  title: string\n  excerpt: string\n  cover: string\n  author: string\n  date: string\n  readingMinutes: number\n  tags: string[]\n  sections: {\n    heading: string\n    body: string\n    image?: string\n  }[]\n  published: boolean\n  featured: boolean\n}\n\nexport default function AdminBlogPage() {\n  const [blogPosts, setBlogPosts] = useState<BlogPost[]>([])\n  const [filteredPosts, setFilteredPosts] = useState<BlogPost[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [tagFilter, setTagFilter] = useState('')\n  const [selectedPost, setSelectedPost] = useState<BlogPost | null>(null)\n  const [showModal, setShowModal] = useState(false)\n\n  const allTags = ['Gastronomia', 'Benessere', 'Viaggi', 'Cultura', 'Storia', 'Natura']\n\n  useEffect(() => {\n    fetchBlogPosts()\n  }, [])\n\n  useEffect(() => {\n    let filtered = blogPosts\n\n    if (searchTerm) {\n      filtered = filtered.filter(post => \n        post.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        post.excerpt.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        post.author.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    }\n\n    if (tagFilter) {\n      filtered = filtered.filter(post => post.tags?.includes(tagFilter) || false)\n    }\n\n    setFilteredPosts(filtered)\n  }, [searchTerm, tagFilter, blogPosts])\n\n  const fetchBlogPosts = async () => {\n    try {\n      setLoading(true)\n      const querySnapshot = await getDocs(collection(db, 'blog'))\n      const posts: BlogPost[] = []\n      \n      querySnapshot.forEach((doc) => {\n        posts.push({ id: doc.id, slug: doc.id, ...doc.data() } as BlogPost)\n      })\n      \n      setBlogPosts(posts)\n      setFilteredPosts(posts)\n    } catch (error) {\n      console.error('Error fetching blog posts:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const togglePublished = async (post: BlogPost) => {\n    try {\n      const postRef = doc(db, 'blog', post.id)\n      await updateDoc(postRef, { published: !post.published })\n      \n      setBlogPosts(prev => prev.map(p => \n        p.id === post.id ? { ...p, published: !p.published } : p\n      ))\n    } catch (error) {\n      console.error('Error toggling published:', error)\n    }\n  }\n\n  const toggleFeatured = async (post: BlogPost) => {\n    try {\n      const postRef = doc(db, 'blog', post.id)\n      await updateDoc(postRef, { featured: !post.featured })\n      \n      setBlogPosts(prev => prev.map(p => \n        p.id === post.id ? { ...p, featured: !p.featured } : p\n      ))\n    } catch (error) {\n      console.error('Error toggling featured:', error)\n    }\n  }\n\n  const deletePost = async (post: BlogPost) => {\n    if (!confirm(`Sei sicuro di voler eliminare \"${post.title}\"?`)) return\n\n    try {\n      await deleteDoc(doc(db, 'blog', post.id))\n      setBlogPosts(prev => prev.filter(p => p.id !== post.id))\n    } catch (error) {\n      console.error('Error deleting post:', error)\n      alert('Errore durante l\\'eliminazione')\n    }\n  }\n\n  const handleEdit = (post: BlogPost) => {\n    setSelectedPost(post)\n    setShowModal(true)\n  }\n\n  const handleCloseModal = () => {\n    setShowModal(false)\n    setSelectedPost(null)\n  }\n\n  const handleSaveSuccess = () => {\n    fetchBlogPosts()\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[50vh]\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Caricamento articoli blog...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-foreground\">Gestione Blog</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {blogPosts.length} articoli totali, {blogPosts.filter(p => p.published).length} pubblicati\n          </p>\n        </div>\n        <button\n          onClick={() => {\n            setSelectedPost(null)\n            setShowModal(true)\n          }}\n          className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all flex items-center gap-2 shadow-lg\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Nuovo Articolo\n        </button>\n      </div>\n\n      <div className=\"bg-card border border-border rounded-xl p-4 space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n            <input\n              type=\"text\"\n              placeholder=\"Cerca per titolo, excerpt o autore...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n          \n          <select\n            value={tagFilter}\n            onChange={(e) => setTagFilter(e.target.value)}\n            className=\"px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n          >\n            <option value=\"\">Tutti i tag</option>\n            {allTags.map(tag => (\n              <option key={tag} value={tag}>{tag}</option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"bg-card border border-border rounded-xl overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-muted\">\n              <tr>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Articolo</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Autore</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Tag</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Data</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold text-foreground\">Stato</th>\n                <th className=\"px-6 py-4 text-right text-sm font-semibold text-foreground\">Azioni</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-border\">\n              {filteredPosts.length === 0 ? (\n                <tr>\n                  <td colSpan={6} className=\"px-6 py-12 text-center text-muted-foreground\">\n                    Nessun articolo trovato\n                  </td>\n                </tr>\n              ) : (\n                filteredPosts.map((post) => (\n                  <tr key={post.id} className=\"hover:bg-muted/50 transition-colors\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-3\">\n                        {post.cover && (\n                          <img\n                            src={post.cover}\n                            alt={post.title}\n                            className=\"w-16 h-16 rounded-lg object-cover\"\n                          />\n                        )}\n                        <div className=\"max-w-md\">\n                          <p className=\"font-medium text-foreground line-clamp-1\">{post.title}</p>\n                          <p className=\"text-sm text-muted-foreground line-clamp-1 mt-1\">\n                            {post.excerpt}\n                          </p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-sm text-foreground\">{post.author}</p>\n                      <p className=\"text-xs text-muted-foreground\">{post.readingMinutes} min lettura</p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex flex-wrap gap-1\">\n                        {(post.tags || []).slice(0, 2).map((tag, idx) => (\n                          <span key={idx} className=\"px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded text-xs\">\n                            {tag}\n                          </span>\n                        ))}\n                        {(post.tags || []).length > 2 && (\n                          <span className=\"px-2 py-1 bg-muted text-muted-foreground rounded text-xs\">\n                            +{(post.tags || []).length - 2}\n                          </span>\n                        )}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                        <Calendar className=\"w-4 h-4\" />\n                        {new Date(post.date).toLocaleDateString('it-IT')}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex flex-col gap-2\">\n                        <button\n                          onClick={() => togglePublished(post)}\n                          className={`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${\n                            post.published\n                              ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300'\n                              : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400'\n                          }`}\n                        >\n                          {post.published ? 'Pubblicato' : 'Bozza'}\n                        </button>\n                        <button\n                          onClick={() => toggleFeatured(post)}\n                          className={`flex items-center justify-center gap-1 px-3 py-1 rounded-lg text-xs font-medium transition-colors ${\n                            post.featured\n                              ? 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300'\n                              : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400'\n                          }`}\n                        >\n                          <Star className=\"w-3 h-3\" />\n                          {post.featured ? 'In evidenza' : 'Normale'}\n                        </button>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <button\n                          onClick={() => handleEdit(post)}\n                          className=\"p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors group\"\n                          title=\"Modifica\"\n                        >\n                          <Edit className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\n                        </button>\n                        <button\n                          onClick={() => deletePost(post)}\n                          className=\"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors group\"\n                          title=\"Elimina\"\n                        >\n                          <Trash2 className=\"w-4 h-4 text-red-600 dark:text-red-400\" />\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <BlogModal\n        isOpen={showModal}\n        onClose={handleCloseModal}\n        post={selectedPost}\n        onSaveSuccess={handleSaveSuccess}\n      />\n    </div>\n  )\n}\n","size_bytes":12199},"components/admin/CityModal.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { X, Save, Loader2 } from 'lucide-react'\nimport { useNotifications } from '../NotificationSystem'\nimport { validateUrl } from '@/lib/url-validation'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface City {\n  id?: string\n  name: string\n  title: string\n  category: string\n  image: string\n  rating: number\n  reviews: number\n  description: string\n}\n\ninterface CityModalProps {\n  city: City | null\n  isOpen: boolean\n  onClose: () => void\n  onSaveSuccess: () => void\n}\n\nexport default function CityModal({ city, isOpen, onClose, onSaveSuccess }: CityModalProps) {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [formData, setFormData] = useState<City>({\n    name: '',\n    title: '',\n    category: 'imperial',\n    image: '',\n    rating: 4.5,\n    reviews: 0,\n    description: ''\n  })\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState('')\n  const [urlError, setUrlError] = useState('')\n\n  useEffect(() => {\n    if (city) {\n      setFormData(city)\n    } else {\n      setFormData({\n        name: '',\n        title: '',\n        category: 'imperial',\n        image: '',\n        rating: 4.5,\n        reviews: 0,\n        description: ''\n      })\n    }\n  }, [city])\n\n  const generateSlug = (name: string) => {\n    return name\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-+|-+$/g, '')\n  }\n\n  const handleUrlChange = (url: string) => {\n    setFormData({ ...formData, image: url })\n    // Rimuovi errore onChange per campo opzionale - validazione solo al submit\n    setUrlError('')\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!user) {\n      showError('Non autorizzato', 'Devi effettuare il login')\n      return\n    }\n    \n    if (formData.image && formData.image.trim()) {\n      const urlValidation = validateUrl(formData.image, true)\n      if (!urlValidation.valid) {\n        setUrlError(urlValidation.error || 'URL non valido')\n        showError('Errore Validazione', urlValidation.error || 'URL immagine non valido')\n        return\n      }\n    }\n    \n    setSaving(true)\n    setError('')\n    setUrlError('')\n\n    try {\n      const token = await user.getIdToken()\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n      \n      const method = city?.id ? 'PUT' : 'POST'\n      const url = city?.id ? `/api/cities/${city.id}` : '/api/cities'\n      \n      const response = await fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(formData)\n      })\n\n      if (!response.ok) throw new Error('Failed to save city')\n      \n      showSuccess('Citt√† Salvata', `\"${formData.name}\" √® stata salvata con successo.`)\n      onSaveSuccess()\n      onClose()\n    } catch (err: any) {\n      const errorMessage = err.message || 'Errore durante il salvataggio'\n      setError(errorMessage)\n      showError('Errore Salvataggio', errorMessage)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card border border-border rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-card border-b border-border px-6 py-4 flex items-center justify-between z-10\">\n          <h2 className=\"text-2xl font-bold text-foreground\">\n            {city ? 'Modifica Citt√†' : 'Nuova Citt√†'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-muted rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n          {error && (\n            <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Nome Citt√† *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                required\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Categoria *\n              </label>\n              <select\n                value={formData.category}\n                onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n                required\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              >\n                <option value=\"imperial\">Imperial</option>\n                <option value=\"coastal\">Coastal</option>\n                <option value=\"desert\">Desert</option>\n                <option value=\"mountain\">Mountain</option>\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Titolo *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              required\n              placeholder=\"Es: La Perla del Nord\"\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              URL Immagine (opzionale)\n            </label>\n            <input\n              type=\"url\"\n              value={formData.image}\n              onChange={(e) => handleUrlChange(e.target.value)}\n              placeholder=\"https://esempio.com/immagine.jpg\"\n              className={`w-full px-4 py-2 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${\n                urlError ? 'border-red-500 dark:border-red-400' : 'border-border'\n              }`}\n            />\n            {urlError && (\n              <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\n                {urlError}\n              </p>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Rating *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.rating}\n                onChange={(e) => setFormData({ ...formData, rating: parseFloat(e.target.value) })}\n                required\n                min=\"0\"\n                max=\"5\"\n                step=\"0.1\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Recensioni *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.reviews}\n                onChange={(e) => setFormData({ ...formData, reviews: parseInt(e.target.value) })}\n                required\n                min=\"0\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Descrizione\n            </label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              rows={4}\n              placeholder=\"Descrizione della citt√†...\"\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div className=\"flex items-center gap-3 pt-4 border-t border-border\">\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {saving ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  Salvataggio...\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-5 h-5\" />\n                  Salva Citt√†\n                </>\n              )}\n            </button>\n            \n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={saving}\n              className=\"px-6 py-3 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Annulla\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n","size_bytes":10035},"app/admin/services/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { Search, Edit, Trash2, Plus, DollarSign } from 'lucide-react'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface Service {\n  id: string\n  name: string\n  category: string\n  price?: number\n  published: boolean\n  description?: string\n}\n\nexport default function AdminServicesPage() {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [services, setServices] = useState<Service[]>([])\n  const [filteredServices, setFilteredServices] = useState<Service[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [categoryFilter, setCategoryFilter] = useState('')\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [formData, setFormData] = useState({ name: '', category: '', price: 0, description: '', published: true })\n\n  const categories = ['transport', 'guide', 'experience', 'accommodation']\n\n  useEffect(() => {\n    fetchServices()\n  }, [])\n\n  useEffect(() => {\n    let filtered = services\n    if (searchTerm) {\n      filtered = filtered.filter(s => s.name.toLowerCase().includes(searchTerm.toLowerCase()))\n    }\n    if (categoryFilter) {\n      filtered = filtered.filter(s => s.category === categoryFilter)\n    }\n    setFilteredServices(filtered)\n  }, [searchTerm, categoryFilter, services])\n\n  const fetchServices = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch('/api/services', { cache: 'no-store' })\n      if (!response.ok) throw new Error('Failed to fetch')\n      const data = await response.json()\n      setServices(data.services || [])\n      setFilteredServices(data.services || [])\n    } catch (error) {\n      console.error('Error:', error)\n      showError('Errore', 'Nel caricamento servizi')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSave = async () => {\n    if (!formData.name || !formData.category) {\n      showError('Errore', 'Riempire i campi obbligatori')\n      return\n    }\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const method = editingId ? 'PUT' : 'POST'\n      const url = editingId ? `/api/services/${editingId}` : '/api/services'\n      const response = await fetch(url, { \n        method, \n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }, \n        body: JSON.stringify(formData) \n      })\n      if (!response.ok) throw new Error('Failed to save')\n      showSuccess('Successo', editingId ? 'Servizio aggiornato' : 'Servizio creato')\n      setFormData({ name: '', category: '', price: 0, description: '', published: true })\n      setEditingId(null)\n      fetchServices()\n    } catch (error) {\n      showError('Errore', 'Nel salvataggio')\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Eliminare questo servizio?')) return\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/services/${id}`, { \n        method: 'DELETE', \n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n      if (!response.ok) throw new Error('Failed to delete')\n      showSuccess('Successo', 'Servizio eliminato')\n      fetchServices()\n    } catch (error) {\n      showError('Errore', 'Nell\\'eliminazione')\n    }\n  }\n\n  if (loading) return <div className=\"text-center py-8\">Caricamento...</div>\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold\">Servizi ({services.length})</h1>\n      </div>\n\n      <div className=\"bg-white p-6 rounded-lg border\">\n        <h2 className=\"font-semibold mb-4\">{editingId ? 'Modifica' : 'Nuovo'} Servizio</h2>\n        <div className=\"space-y-4\">\n          <input type=\"text\" placeholder=\"Nome\" value={formData.name} onChange={(e) => setFormData({ ...formData, name: e.target.value })} className=\"w-full px-3 py-2 border rounded-lg\" />\n          <select value={formData.category} onChange={(e) => setFormData({ ...formData, category: e.target.value })} className=\"w-full px-3 py-2 border rounded-lg\">\n            <option value=\"\">Seleziona categoria</option>\n            {categories.map(cat => (<option key={cat} value={cat}>{cat}</option>))}\n          </select>\n          <input type=\"number\" placeholder=\"Prezzo\" value={formData.price} onChange={(e) => setFormData({ ...formData, price: parseFloat(e.target.value) })} className=\"w-full px-3 py-2 border rounded-lg\" />\n          <textarea placeholder=\"Descrizione\" value={formData.description} onChange={(e) => setFormData({ ...formData, description: e.target.value })} rows={3} className=\"w-full px-3 py-2 border rounded-lg\" />\n          <button onClick={handleSave} className=\"w-full bg-primary text-primary-foreground py-2 rounded-lg\">Salva</button>\n          {editingId && <button onClick={() => { setEditingId(null); setFormData({ name: '', category: '', price: 0, description: '', published: true }); }} className=\"w-full bg-gray-200 py-2 rounded-lg\">Annulla</button>}\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <input type=\"text\" placeholder=\"Cerca...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className=\"flex-1 px-4 py-2 border rounded-lg\" />\n        <select value={categoryFilter} onChange={(e) => setCategoryFilter(e.target.value)} className=\"px-4 py-2 border rounded-lg\">\n          <option value=\"\">Tutte le categorie</option>\n          {categories.map(cat => (<option key={cat} value={cat}>{cat}</option>))}\n        </select>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {filteredServices.map((service) => (\n          <div key={service.id} className=\"border rounded-lg p-4 flex items-center justify-between\">\n            <div><h3 className=\"font-semibold\">{service.name}</h3><p className=\"text-sm text-muted-foreground\">{service.category}</p></div>\n            <div className=\"flex gap-2\">\n              <button onClick={() => { setFormData({ name: service.name, category: service.category, price: service.price || 0, description: service.description || '', published: service.published }); setEditingId(service.id); }} className=\"p-2 hover:bg-gray-100 rounded\"><Edit className=\"w-4 h-4\" /></button>\n              <button onClick={() => handleDelete(service.id)} className=\"p-2 hover:bg-red-100 rounded text-red-600\"><Trash2 className=\"w-4 h-4\" /></button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":6688},"app/admin/cities/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { Search, Edit, Trash2, Plus } from 'lucide-react'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { useAuth } from '@/context/AuthContext'\n\ninterface City {\n  id: string\n  name: string\n  type: string\n  published: boolean\n  description?: string\n}\n\nexport default function AdminCitiesPage() {\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n  const [cities, setCities] = useState<City[]>([])\n  const [filteredCities, setFilteredCities] = useState<City[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [categoryFilter, setCategoryFilter] = useState('')\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [formData, setFormData] = useState({ name: '', type: 'imperial', published: true })\n\n  const categories = ['imperial', 'coastal', 'desert', 'mountain']\n\n  useEffect(() => {\n    fetchCities()\n  }, [])\n\n  useEffect(() => {\n    let filtered = cities\n    if (searchTerm) {\n      filtered = filtered.filter(c => c.name.toLowerCase().includes(searchTerm.toLowerCase()))\n    }\n    if (categoryFilter) {\n      filtered = filtered.filter(c => c.type === categoryFilter)\n    }\n    setFilteredCities(filtered)\n  }, [searchTerm, categoryFilter, cities])\n\n  const fetchCities = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch('/api/cities', { cache: 'no-store' })\n      if (!response.ok) throw new Error('Failed to fetch')\n      const data = await response.json()\n      setCities(data.cities || [])\n      setFilteredCities(data.cities || [])\n    } catch (error) {\n      console.error('Error:', error)\n      showError('Errore', 'Nel caricamento citt√†')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSave = async () => {\n    if (!formData.name || !formData.type) {\n      showError('Errore', 'Riempire i campi obbligatori')\n      return\n    }\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const method = editingId ? 'PUT' : 'POST'\n      const url = editingId ? `/api/cities/${editingId}` : '/api/cities'\n      const response = await fetch(url, { \n        method, \n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }, \n        body: JSON.stringify(formData) \n      })\n      if (!response.ok) throw new Error('Failed to save')\n      showSuccess('Successo', editingId ? 'Citt√† aggiornata' : 'Citt√† creata')\n      setFormData({ name: '', type: 'imperial', published: true })\n      setEditingId(null)\n      fetchCities()\n    } catch (error) {\n      showError('Errore', 'Nel salvataggio')\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Eliminare questa citt√†?')) return\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const response = await fetch(`/api/cities/${id}`, { \n        method: 'DELETE', \n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n      if (!response.ok) throw new Error('Failed to delete')\n      showSuccess('Successo', 'Citt√† eliminata')\n      fetchCities()\n    } catch (error) {\n      showError('Errore', 'nell\\'eliminazione')\n    }\n  }\n\n  if (loading) return <div className=\"text-center py-8\">Caricamento...</div>\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <h1 className=\"text-3xl font-bold\">Citt√† ({cities.length})</h1>\n      <div className=\"flex gap-4\">\n        <input type=\"text\" placeholder=\"Cerca...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className=\"flex-1 px-4 py-2 border rounded-lg\" />\n        <select value={categoryFilter} onChange={(e) => setCategoryFilter(e.target.value)} className=\"px-4 py-2 border rounded-lg\">\n          <option value=\"\">Tutte le categorie</option>\n          {categories.map(cat => (<option key={cat} value={cat}>{cat}</option>))}\n        </select>\n      </div>\n      <div className=\"grid gap-4\">\n        {filteredCities.map((city) => (\n          <div key={city.id} className=\"border rounded-lg p-4 flex items-center justify-between\">\n            <div><h3 className=\"font-semibold\">{city.name}</h3><p className=\"text-sm text-muted-foreground\">{city.type}</p></div>\n            <div className=\"flex gap-2\">\n              <button onClick={() => { setFormData(city); setEditingId(city.id); }} className=\"p-2 hover:bg-gray-100 rounded\"><Edit className=\"w-4 h-4\" /></button>\n              <button onClick={() => handleDelete(city.id)} className=\"p-2 hover:bg-red-100 rounded text-red-600\"><Trash2 className=\"w-4 h-4\" /></button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":4799},"components/admin/BlogModal.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { X, Save, Loader2, Plus, Trash2 } from 'lucide-react'\nimport { doc, setDoc, Timestamp } from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\nimport { useNotifications } from '../NotificationSystem'\nimport { validateUrl } from '@/lib/url-validation'\n\ninterface BlogPost {\n  id?: string\n  slug?: string\n  title: string\n  excerpt: string\n  cover: string\n  author: string\n  date: string\n  readingMinutes: number\n  tags: string[]\n  sections: {\n    heading: string\n    body: string\n    image?: string\n  }[]\n  published: boolean\n  featured: boolean\n  createdAt?: any\n  updatedAt?: any\n}\n\ninterface BlogModalProps {\n  post: BlogPost | null\n  isOpen: boolean\n  onClose: () => void\n  onSaveSuccess: () => void\n}\n\nexport default function BlogModal({ post, isOpen, onClose, onSaveSuccess }: BlogModalProps) {\n  const { showSuccess, showError } = useNotifications()\n  const [formData, setFormData] = useState<BlogPost>({\n    title: '',\n    excerpt: '',\n    cover: '',\n    author: 'Morocco Dreams Team',\n    date: new Date().toISOString().split('T')[0],\n    readingMinutes: 5,\n    tags: [],\n    sections: [],\n    published: false,\n    featured: false\n  })\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState('')\n  const [newTag, setNewTag] = useState('')\n  const [coverUrlError, setCoverUrlError] = useState('')\n  const [sectionUrlErrors, setSectionUrlErrors] = useState<{[key: number]: string}>({})\n\n  useEffect(() => {\n    if (post) {\n      setFormData(post)\n    } else {\n      setFormData({\n        title: '',\n        excerpt: '',\n        cover: '',\n        author: 'Morocco Dreams Team',\n        date: new Date().toISOString().split('T')[0],\n        readingMinutes: 5,\n        tags: [],\n        sections: [],\n        published: false,\n        featured: false\n      })\n    }\n  }, [post])\n\n  const handleAddSection = () => {\n    setFormData({\n      ...formData,\n      sections: [\n        ...formData.sections,\n        { heading: '', body: '', image: '' }\n      ]\n    })\n  }\n\n  const handleRemoveSection = (index: number) => {\n    setFormData({\n      ...formData,\n      sections: formData.sections.filter((_, i) => i !== index)\n    })\n  }\n\n  const handleSectionChange = (index: number, field: string, value: string) => {\n    const newSections = [...formData.sections]\n    newSections[index] = { ...newSections[index], [field]: value }\n    setFormData({ ...formData, sections: newSections })\n  }\n\n  const handleAddTag = () => {\n    if (newTag.trim() && !formData.tags.includes(newTag.trim())) {\n      setFormData({\n        ...formData,\n        tags: [...formData.tags, newTag.trim()]\n      })\n      setNewTag('')\n    }\n  }\n\n  const handleRemoveTag = (tag: string) => {\n    setFormData({\n      ...formData,\n      tags: formData.tags.filter(t => t !== tag)\n    })\n  }\n\n  const generateSlug = (title: string) => {\n    return title\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-+|-+$/g, '')\n  }\n\n  const handleCoverUrlChange = (url: string) => {\n    setFormData({ ...formData, cover: url })\n    // Rimuovi errore onChange per campo opzionale - validazione solo al submit\n    setCoverUrlError('')\n  }\n\n  const handleSectionUrlChange = (index: number, url: string) => {\n    const newSections = [...formData.sections]\n    newSections[index] = { ...newSections[index], image: url }\n    setFormData({ ...formData, sections: newSections })\n    \n    // Rimuovi errore onChange per campo opzionale - validazione solo al submit\n    const newErrors = { ...sectionUrlErrors }\n    delete newErrors[index]\n    setSectionUrlErrors(newErrors)\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (formData.cover && formData.cover.trim()) {\n      const coverValidation = validateUrl(formData.cover, true)\n      if (!coverValidation.valid) {\n        setCoverUrlError(coverValidation.error || 'URL non valido')\n        showError('Errore Validazione', coverValidation.error || 'URL copertina non valido')\n        return\n      }\n    }\n    \n    const newSectionErrors: {[key: number]: string} = {}\n    for (let i = 0; i < formData.sections.length; i++) {\n      const section = formData.sections[i]\n      if (section.image && section.image.trim()) {\n        const validation = validateUrl(section.image, false)\n        if (!validation.valid) {\n          newSectionErrors[i] = validation.error || 'URL non valido'\n        }\n      }\n    }\n    \n    if (Object.keys(newSectionErrors).length > 0) {\n      setSectionUrlErrors(newSectionErrors)\n      showError('Errore Validazione', 'Alcuni URL delle sezioni non sono validi')\n      return\n    }\n    \n    setSaving(true)\n    setError('')\n    setCoverUrlError('')\n    setSectionUrlErrors({})\n\n    try {\n      const slug = post?.slug || generateSlug(formData.title)\n      const now = Timestamp.now()\n      \n      const dataToSave = {\n        ...formData,\n        slug,\n        updatedAt: now,\n        ...(!post && { createdAt: now })\n      }\n\n      await setDoc(doc(db, 'blog', slug), dataToSave, { merge: true })\n      \n      showSuccess('Post Salvato', `\"${formData.title}\" √® stato salvato con successo.`)\n      onSaveSuccess()\n      onClose()\n    } catch (err: any) {\n      const errorMessage = err.message || 'Errore durante il salvataggio'\n      setError(errorMessage)\n      showError('Errore Salvataggio', errorMessage)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card border border-border rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-card border-b border-border px-6 py-4 flex items-center justify-between z-10\">\n          <h2 className=\"text-2xl font-bold text-foreground\">\n            {post ? 'Modifica Articolo' : 'Nuovo Articolo'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-muted rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {error && (\n            <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Titolo *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                required\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Autore *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.author}\n                onChange={(e) => setFormData({ ...formData, author: e.target.value })}\n                required\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Excerpt *\n            </label>\n            <textarea\n              value={formData.excerpt}\n              onChange={(e) => setFormData({ ...formData, excerpt: e.target.value })}\n              required\n              rows={2}\n              placeholder=\"Breve descrizione dell'articolo...\"\n              className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                URL Immagine Copertina (opzionale)\n              </label>\n              <input\n                type=\"url\"\n                value={formData.cover}\n                onChange={(e) => handleCoverUrlChange(e.target.value)}\n                placeholder=\"https://...\"\n                className={`w-full px-4 py-2 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${\n                  coverUrlError ? 'border-red-500 dark:border-red-400' : 'border-border'\n                }`}\n              />\n              {coverUrlError && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\n                  {coverUrlError}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Data Pubblicazione *\n              </label>\n              <input\n                type=\"date\"\n                value={formData.date}\n                onChange={(e) => setFormData({ ...formData, date: e.target.value })}\n                required\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\n                Tempo di Lettura (min) *\n              </label>\n              <input\n                type=\"number\"\n                value={formData.readingMinutes}\n                onChange={(e) => setFormData({ ...formData, readingMinutes: parseInt(e.target.value) })}\n                required\n                min=\"1\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Tags\n            </label>\n            <div className=\"flex gap-2 mb-2\">\n              <input\n                type=\"text\"\n                value={newTag}\n                onChange={(e) => setNewTag(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\n                placeholder=\"Aggiungi un tag...\"\n                className=\"flex-1 px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n              <button\n                type=\"button\"\n                onClick={handleAddTag}\n                className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\n              >\n                <Plus className=\"w-5 h-5\" />\n              </button>\n            </div>\n            <div className=\"flex flex-wrap gap-2\">\n              {formData.tags.map((tag, idx) => (\n                <span\n                  key={idx}\n                  className=\"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-sm flex items-center gap-2\"\n                >\n                  {tag}\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveTag(tag)}\n                    className=\"hover:text-orange-900 dark:hover:text-orange-100\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </button>\n                </span>\n              ))}\n            </div>\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between mb-3\">\n              <label className=\"block text-sm font-medium text-foreground\">\n                Sezioni Articolo\n              </label>\n              <button\n                type=\"button\"\n                onClick={handleAddSection}\n                className=\"px-3 py-1 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center gap-1 text-sm\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                Aggiungi Sezione\n              </button>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {formData.sections.map((section, idx) => (\n                <div key={idx} className=\"p-4 border border-border rounded-lg bg-muted/30 space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-muted-foreground\">Sezione {idx + 1}</span>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleRemoveSection(idx)}\n                      className=\"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors\"\n                    >\n                      <Trash2 className=\"w-4 h-4 text-red-600 dark:text-red-400\" />\n                    </button>\n                  </div>\n                  \n                  <input\n                    type=\"text\"\n                    value={section.heading}\n                    onChange={(e) => handleSectionChange(idx, 'heading', e.target.value)}\n                    placeholder=\"Titolo della sezione...\"\n                    className=\"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                  />\n                  \n                  <textarea\n                    value={section.body}\n                    onChange={(e) => handleSectionChange(idx, 'body', e.target.value)}\n                    placeholder=\"Contenuto della sezione...\"\n                    rows={4}\n                    className=\"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                  />\n                  \n                  <div>\n                    <input\n                      type=\"url\"\n                      value={section.image || ''}\n                      onChange={(e) => handleSectionUrlChange(idx, e.target.value)}\n                      placeholder=\"URL Immagine (opzionale)...\"\n                      className={`w-full px-3 py-2 border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${\n                        sectionUrlErrors[idx] ? 'border-red-500 dark:border-red-400' : 'border-border'\n                      }`}\n                    />\n                    {sectionUrlErrors[idx] && (\n                      <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\n                        {sectionUrlErrors[idx]}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-6\">\n            <label className=\"flex items-center gap-2 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={formData.published}\n                onChange={(e) => setFormData({ ...formData, published: e.target.checked })}\n                className=\"w-4 h-4 text-orange-600 rounded focus:ring-2 focus:ring-orange-500\"\n              />\n              <span className=\"text-sm font-medium text-foreground\">Pubblicato</span>\n            </label>\n            \n            <label className=\"flex items-center gap-2 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={formData.featured}\n                onChange={(e) => setFormData({ ...formData, featured: e.target.checked })}\n                className=\"w-4 h-4 text-orange-600 rounded focus:ring-2 focus:ring-orange-500\"\n              />\n              <span className=\"text-sm font-medium text-foreground\">In Evidenza</span>\n            </label>\n          </div>\n\n          <div className=\"flex items-center gap-3 pt-4 border-t border-border\">\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {saving ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  Salvataggio...\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-5 h-5\" />\n                  Salva Articolo\n                </>\n              )}\n            </button>\n            \n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={saving}\n              className=\"px-6 py-3 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Annulla\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n","size_bytes":17584},"lib/url-validation.ts":{"content":"export interface UrlValidationResult {\n  valid: boolean\n  error?: string\n}\n\n/**\n * Valida un URL e ritorna un risultato strutturato con feedback user-friendly\n * \n * @param url - L'URL da validare\n * @param required - Se l'URL √® richiesto (default: true)\n * @returns UrlValidationResult con valid e opzionale messaggio di errore\n */\nexport function validateUrl(url: string, required: boolean = true): UrlValidationResult {\n  if (!url || url.trim() === '') {\n    if (required) {\n      return { valid: false, error: 'L\\'URL √® richiesto' }\n    }\n    return { valid: true }\n  }\n\n  const trimmedUrl = url.trim()\n\n  if (!trimmedUrl.startsWith('http://') && !trimmedUrl.startsWith('https://')) {\n    return { \n      valid: false, \n      error: 'L\\'URL deve iniziare con http:// o https://' \n    }\n  }\n\n  try {\n    const urlObj = new URL(trimmedUrl)\n    \n    if (!urlObj.protocol || (urlObj.protocol !== 'http:' && urlObj.protocol !== 'https:')) {\n      return {\n        valid: false,\n        error: 'Protocollo non valido. Usa http:// o https://'\n      }\n    }\n\n    if (!urlObj.hostname || urlObj.hostname === '') {\n      return {\n        valid: false,\n        error: 'L\\'URL non contiene un dominio valido'\n      }\n    }\n\n    const hostnameParts = urlObj.hostname.split('.')\n    if (hostnameParts.length < 2 || hostnameParts.some(part => part === '')) {\n      return {\n        valid: false,\n        error: 'Il dominio dell\\'URL non √® valido (es: esempio.com)'\n      }\n    }\n\n    return { valid: true }\n  } catch (error) {\n    return {\n      valid: false,\n      error: 'URL malformato. Esempio valido: https://esempio.com/percorso'\n    }\n  }\n}\n\n/**\n * Hook per usare la validazione URL in tempo reale nei form\n */\nexport function useUrlValidation() {\n  const validateField = (url: string, required: boolean = true) => {\n    return validateUrl(url, required)\n  }\n\n  const getFieldProps = (url: string, required: boolean = true) => {\n    const validation = validateUrl(url, required)\n    return {\n      isValid: validation.valid,\n      error: validation.error,\n      className: validation.valid \n        ? 'border-border' \n        : 'border-red-500 dark:border-red-400'\n    }\n  }\n\n  return { validateField, getFieldProps }\n}\n","size_bytes":2219},"components/admin/FirestoreRulesBanner.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { AlertTriangle, X, ExternalLink, CheckCircle } from 'lucide-react'\nimport { collection, getDocs, limit, query } from 'firebase/firestore'\nimport { db } from '@/lib/firebase'\n\nexport default function FirestoreRulesBanner() {\n  const [isRulesDeployed, setIsRulesDeployed] = useState<boolean | null>(null)\n  const [isDismissed, setIsDismissed] = useState(false)\n  const [isChecking, setIsChecking] = useState(true)\n\n  useEffect(() => {\n    checkFirestoreRules()\n  }, [])\n\n  const checkFirestoreRules = async () => {\n    try {\n      const testCollections = ['cities', 'travels', 'experiences', 'vehicles', 'blog']\n      let canReadPublic = true\n\n      for (const collectionName of testCollections) {\n        try {\n          const q = query(collection(db, collectionName), limit(1))\n          await getDocs(q)\n        } catch (error: any) {\n          if (error.code === 'permission-denied') {\n            canReadPublic = false\n            break\n          }\n        }\n      }\n\n      setIsRulesDeployed(canReadPublic)\n    } catch (error) {\n      console.error('Error checking Firestore rules:', error)\n      setIsRulesDeployed(false)\n    } finally {\n      setIsChecking(false)\n    }\n  }\n\n  if (isChecking) {\n    return (\n      <div className=\"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4\">\n        <div className=\"flex items-center\">\n          <div className=\"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mr-3\" />\n          <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n            Verifica configurazione Firestore in corso...\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  if (isRulesDeployed === true) {\n    return (\n      <div className=\"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4\">\n        <div className=\"flex items-start\">\n          <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n          <div className=\"ml-3 flex-1\">\n            <h3 className=\"text-sm font-semibold text-green-800 dark:text-green-200\">\n              Firestore Configurato Correttamente\n            </h3>\n            <p className=\"text-sm text-green-700 dark:text-green-300 mt-1\">\n              Le regole di sicurezza sono attive. Le modifiche salvate qui appariranno automaticamente sul sito pubblico.\n            </p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (isDismissed) return null\n\n  return (\n    <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4\">\n      <div className=\"flex items-start\">\n        <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0\" />\n        <div className=\"ml-3 flex-1\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <h3 className=\"text-sm font-semibold text-red-800 dark:text-red-200\">\n                ‚ö†Ô∏è AZIONE RICHIESTA: Deploy Regole Firestore\n              </h3>\n              <p className=\"text-sm text-red-700 dark:text-red-300 mt-2\">\n                <strong>Le modifiche salvate qui NON appariranno sul sito pubblico</strong> finch√© non deploi le regole di sicurezza Firestore.\n              </p>\n              \n              <div className=\"mt-3 bg-white dark:bg-gray-800 rounded-lg p-3 border border-red-200 dark:border-red-800\">\n                <p className=\"text-sm font-medium text-red-900 dark:text-red-100 mb-2\">\n                  Passi per risolvere:\n                </p>\n                <ol className=\"text-sm text-red-800 dark:text-red-200 space-y-2 list-decimal list-inside\">\n                  <li>Vai su <a href=\"https://console.firebase.google.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline hover:text-red-600 dark:hover:text-red-300 inline-flex items-center\">Firebase Console <ExternalLink className=\"w-3 h-3 ml-1\" /></a></li>\n                  <li>Seleziona il tuo progetto</li>\n                  <li>Nel menu laterale, clicca <strong>Firestore Database</strong> ‚Üí <strong>Rules</strong></li>\n                  <li>Copia il contenuto del file <code className=\"bg-red-100 dark:bg-red-900 px-1 py-0.5 rounded\">firestore.rules</code> dalla root del progetto</li>\n                  <li>Incollalo nell'editor e clicca <strong>Publish</strong></li>\n                  <li>Ricarica questa pagina per verificare</li>\n                </ol>\n              </div>\n\n              <p className=\"text-xs text-red-600 dark:text-red-400 mt-3 italic\">\n                Senza questo deploy, il sito pubblico non pu√≤ leggere i dati da Firestore e le tue modifiche rimarranno invisibili.\n              </p>\n            </div>\n            <button\n              onClick={() => setIsDismissed(true)}\n              className=\"ml-4 p-1 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors\"\n              aria-label=\"Chiudi avviso\"\n            >\n              <X className=\"w-4 h-4 text-red-600 dark:text-red-400\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":5082},"app/conditional-layout.tsx":{"content":"\"use client\"\n\nimport { usePathname } from \"next/navigation\"\nimport ClientLayout from \"./client-layout\"\n\nexport default function ConditionalLayout({ children }: { children: React.ReactNode }) {\n  const pathname = usePathname()\n  \n  const isAdminRoute = pathname?.startsWith('/admin')\n  \n  if (isAdminRoute) {\n    return <>{children}</>\n  }\n  \n  return <ClientLayout>{children}</ClientLayout>\n}\n","size_bytes":393},"app/api/migrate-vehicles/route.ts":{"content":"import { NextResponse } from 'next/server';\nimport { adminDb } from '@/lib/firebase-admin';\n\nexport async function POST() {\n  try {\n    const vehiclesRef = adminDb.collection('vehicles');\n    const snapshot = await vehiclesRef.get();\n    \n    if (snapshot.empty) {\n      return NextResponse.json({ \n        success: false, \n        message: 'No vehicles found in Firestore' \n      });\n    }\n\n    const batch = adminDb.batch();\n    let updateCount = 0;\n\n    snapshot.docs.forEach((doc) => {\n      const data = doc.data();\n      \n      if (data.published === undefined || data.featured === undefined) {\n        batch.update(doc.ref, {\n          published: true,\n          featured: false,\n          updatedAt: new Date()\n        });\n        updateCount++;\n      }\n    });\n\n    if (updateCount > 0) {\n      await batch.commit();\n    }\n\n    return NextResponse.json({ \n      success: true, \n      message: `Updated ${updateCount} vehicles with published and featured flags`,\n      totalVehicles: snapshot.size\n    });\n\n  } catch (error) {\n    console.error('Vehicle migration error:', error);\n    return NextResponse.json({ \n      success: false, \n      error: error instanceof Error ? error.message : 'Unknown error' \n    }, { status: 500 });\n  }\n}\n","size_bytes":1246},"app/api/site-settings/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET() {\n  try {\n    let settings = await db.siteSettings.findUnique({\n      where: { id: \"site_settings\" }\n    })\n\n    if (!settings) {\n      settings = await db.siteSettings.create({\n        data: {\n          id: \"site_settings\",\n          hero: {},\n          contact: {},\n          social: {},\n          footer: {},\n          seo: {},\n          theme: {}\n        }\n      })\n    }\n\n    return Response.json(settings, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching site settings:\", error)\n    return Response.json({ error: \"Failed to fetch site settings\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function PUT(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    \n    const settings = await db.siteSettings.upsert({\n      where: { id: \"site_settings\" },\n      update: body,\n      create: {\n        id: \"site_settings\",\n        ...body\n      }\n    })\n\n    revalidateTag(\"site-settings\")\n    return Response.json(settings)\n  } catch (error) {\n    console.error(\"Error updating site settings:\", error)\n    return Response.json({ error: \"Failed to update site settings\" }, { status: 500 })\n  }\n}\n","size_bytes":1666},"app/api/blog/[id]/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\nimport { isAdmin } from \"@/lib/auth-helpers\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const post = await db.blogPost.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!post) {\n      return Response.json({ error: \"Blog post not found\" }, { status: 404 })\n    }\n\n    return Response.json(post, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching blog post:\", error)\n    return Response.json({ error: \"Failed to fetch blog post\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  if (!isAdminUser) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const post = await db.blogPost.update({\n      where: { id: params.id },\n      data: body\n    })\n\n    revalidateTag(\"blog\")\n    revalidateTag(`blog-${params.id}`)\n    return Response.json(post)\n  } catch (error) {\n    console.error(\"Error updating blog post:\", error)\n    return Response.json({ error: \"Failed to update blog post\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  if (!isAdminUser) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.blogPost.delete({\n      where: { id: params.id }\n    })\n\n    revalidateTag(\"blog\")\n    revalidateTag(`blog-${params.id}`)\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting blog post:\", error)\n    return Response.json({ error: \"Failed to delete blog post\" }, { status: 500 })\n  }\n}\n","size_bytes":2015},"app/api/travels/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const searchParams = request.nextUrl.searchParams\n    const featured = searchParams.get('featured')\n    const category = searchParams.get('category')\n    const limit = searchParams.get('limit')\n    const offset = searchParams.get('offset')\n\n    const where: any = {\n      type: 'travel',\n      published: true\n    }\n\n    if (featured === 'true') {\n      where.featured = true\n    }\n\n    if (category) {\n      where.category = category\n    }\n\n    const items = await db.contentItem.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n      take: limit ? parseInt(limit) : undefined,\n      skip: offset ? parseInt(offset) : undefined\n    })\n    \n    const travels = items.map(item => ({\n      id: item.id,\n      title: item.title,\n      slug: item.slug,\n      description: item.description,\n      image: item.image,\n      category: item.category || 'tour',\n      duration: item.duration,\n      cities: item.metadata?.cities,\n      itinerary: item.metadata?.itinerary,\n      highlights: item.metadata?.highlights,\n      included: item.metadata?.included,\n      notIncluded: item.metadata?.notIncluded,\n      price: item.price,\n      priceNote: item.priceNote,\n      published: item.published,\n      featured: item.featured,\n      createdAt: item.createdAt,\n      updatedAt: item.updatedAt\n    }))\n    \n    return Response.json({ travels }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching travels:\", error)\n    return Response.json({ error: \"Failed to fetch travels\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const {\n      title,\n      slug,\n      description,\n      image,\n      category = \"tour\",\n      duration,\n      cities,\n      itinerary,\n      highlights,\n      included,\n      notIncluded,\n      price,\n      priceNote,\n      published = true,\n      featured = false\n    } = body\n\n    const contentItem = await db.contentItem.create({\n      data: {\n        type: 'travel',\n        title,\n        slug,\n        description,\n        image,\n        category,\n        duration,\n        price,\n        priceNote,\n        published,\n        featured,\n        metadata: {\n          cities,\n          itinerary,\n          highlights,\n          included,\n          notIncluded\n        }\n      }\n    })\n\n    const travel = {\n      id: contentItem.id,\n      title: contentItem.title,\n      slug: contentItem.slug,\n      description: contentItem.description,\n      image: contentItem.image,\n      category: contentItem.category,\n      duration: contentItem.duration,\n      cities: contentItem.metadata?.cities,\n      itinerary: contentItem.metadata?.itinerary,\n      highlights: contentItem.metadata?.highlights,\n      included: contentItem.metadata?.included,\n      notIncluded: contentItem.metadata?.notIncluded,\n      price: contentItem.price,\n      priceNote: contentItem.priceNote,\n      published: contentItem.published,\n      featured: contentItem.featured,\n      createdAt: contentItem.createdAt,\n      updatedAt: contentItem.updatedAt\n    }\n\n    revalidateTag(\"travels\")\n    return Response.json(travel, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating travel:\", error)\n    return Response.json({ error: \"Failed to create travel\" }, { status: 500 })\n  }\n}\n","size_bytes":3870},"app/api/vehicles/[id]/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function GET(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const vehicle = await db.vehicle.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!vehicle) {\n      return Response.json({ error: \"Vehicle not found\" }, { status: 404 })\n    }\n\n    return Response.json(vehicle, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching vehicle:\", error)\n    return Response.json({ error: \"Failed to fetch vehicle\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const vehicle = await db.vehicle.update({\n      where: { id: params.id },\n      data: body\n    })\n\n    revalidateTag(\"vehicles\")\n    revalidateTag(`vehicle-${params.id}`)\n    return Response.json(vehicle)\n  } catch (error) {\n    console.error(\"Error updating vehicle:\", error)\n    return Response.json({ error: \"Failed to update vehicle\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.vehicle.delete({\n      where: { id: params.id }\n    })\n\n    revalidateTag(\"vehicles\")\n    revalidateTag(`vehicle-${params.id}`)\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting vehicle:\", error)\n    return Response.json({ error: \"Failed to delete vehicle\" }, { status: 500 })\n  }\n}\n","size_bytes":2074},"app/api/instagram/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET() {\n  try {\n    const videos = await db.instagramVideo.findMany({\n      where: { active: true },\n      orderBy: { slot: \"asc\" }\n    })\n    return Response.json({ videos }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching Instagram videos:\", error)\n    return Response.json({ error: \"Failed to fetch Instagram videos\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function PUT(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const { slot, videoUrl, active = true } = body\n\n    if (!slot || !videoUrl) {\n      return Response.json(\n        { error: \"Slot and videoUrl are required\" },\n        { status: 400 }\n      )\n    }\n\n    const video = await db.instagramVideo.upsert({\n      where: { slot },\n      update: { videoUrl, active },\n      create: { slot, videoUrl, active }\n    })\n\n    revalidateTag(\"instagram\")\n    return Response.json(video)\n  } catch (error) {\n    console.error(\"Error updating Instagram video:\", error)\n    return Response.json({ error: \"Failed to update Instagram video\" }, { status: 500 })\n  }\n}\n","size_bytes":1596},"app/admin/settings/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { doc, getDoc, setDoc } from 'firebase/firestore'\nimport { db, auth } from '@/lib/firebase'\nimport { Save, Loader2, Globe, Mail, Palette, FileText } from 'lucide-react'\nimport { useNotifications } from '@/components/NotificationSystem'\nimport { SiteSettings, DEFAULT_SITE_SETTINGS } from '@/lib/site-settings-schema'\n\nexport default function AdminSettingsPage() {\n  const { showSuccess, showError } = useNotifications()\n  const [settings, setSettings] = useState<SiteSettings>(DEFAULT_SITE_SETTINGS)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [activeTab, setActiveTab] = useState<'hero' | 'contact' | 'social' | 'footer' | 'seo' | 'theme'>('hero')\n\n  useEffect(() => {\n    loadSettings()\n  }, [])\n\n  const loadSettings = async () => {\n    try {\n      const docRef = doc(db, 'site_settings', 'site_settings')\n      const docSnap = await getDoc(docRef)\n      \n      if (docSnap.exists()) {\n        setSettings(docSnap.data() as SiteSettings)\n      } else {\n        await setDoc(docRef, DEFAULT_SITE_SETTINGS)\n        setSettings(DEFAULT_SITE_SETTINGS)\n      }\n    } catch (error) {\n      console.error('Error loading settings:', error)\n      showError('Errore Caricamento', 'Impossibile caricare le impostazioni del sito')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSave = async () => {\n    const currentUser = auth.currentUser\n    if (!currentUser) {\n      showError('Errore', 'Devi essere autenticato per salvare le impostazioni')\n      return\n    }\n\n    setSaving(true)\n    try {\n      const dataToSave = {\n        ...settings,\n        updatedAt: new Date().toISOString(),\n        updatedBy: currentUser.uid\n      }\n\n      await setDoc(doc(db, 'site_settings', 'site_settings'), dataToSave)\n      showSuccess('Salvato', 'Impostazioni del sito aggiornate con successo')\n      setSettings(dataToSave)\n    } catch (error) {\n      console.error('Error saving settings:', error)\n      showError('Errore Salvataggio', 'Impossibile salvare le impostazioni')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-orange-500\" />\n      </div>\n    )\n  }\n\n  const tabs = [\n    { id: 'hero', label: 'Hero Homepage', icon: Globe },\n    { id: 'contact', label: 'Contatti', icon: Mail },\n    { id: 'social', label: 'Social Media', icon: Globe },\n    { id: 'footer', label: 'Footer', icon: FileText },\n    { id: 'seo', label: 'SEO', icon: FileText },\n    { id: 'theme', label: 'Theme', icon: Palette }\n  ] as const\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-foreground\">Impostazioni Sito</h1>\n          <p className=\"text-muted-foreground mt-2\">Modifica tutti i parametri del sito web</p>\n        </div>\n        \n        <button\n          onClick={handleSave}\n          disabled={saving}\n          className=\"flex items-center gap-2 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors disabled:opacity-50\"\n        >\n          {saving ? (\n            <>\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n              Salvataggio...\n            </>\n          ) : (\n            <>\n              <Save className=\"w-4 h-4\" />\n              Salva Modifiche\n            </>\n          )}\n        </button>\n      </div>\n\n      <div className=\"border-b border-border\">\n        <nav className=\"-mb-px flex space-x-4\">\n          {tabs.map(tab => {\n            const Icon = tab.icon\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center gap-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors ${\n                  activeTab === tab.id\n                    ? 'border-orange-500 text-orange-500'\n                    : 'border-transparent text-muted-foreground hover:text-foreground hover:border-border'\n                }`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                {tab.label}\n              </button>\n            )\n          })}\n        </nav>\n      </div>\n\n      <div className=\"bg-card border border-border rounded-lg p-6\">\n        {activeTab === 'hero' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-semibold text-foreground mb-4\">Hero Homepage</h2>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Titolo</label>\n              <input\n                type=\"text\"\n                value={settings.hero.title}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  hero: { ...settings.hero, title: e.target.value }\n                })}\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Sottotitolo</label>\n              <input\n                type=\"text\"\n                value={settings.hero.subtitle}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  hero: { ...settings.hero, subtitle: e.target.value }\n                })}\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Testo Pulsante CTA</label>\n                <input\n                  type=\"text\"\n                  value={settings.hero.ctaText}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    hero: { ...settings.hero, ctaText: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Link Pulsante CTA</label>\n                <input\n                  type=\"text\"\n                  value={settings.hero.ctaLink}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    hero: { ...settings.hero, ctaLink: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Immagine di Sfondo (opzionale)</label>\n              <input\n                type=\"url\"\n                value={settings.hero.backgroundImage || ''}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  hero: { ...settings.hero, backgroundImage: e.target.value }\n                })}\n                placeholder=\"https://...\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <input\n                type=\"checkbox\"\n                id=\"showVideoButton\"\n                checked={settings.hero.showVideoButton}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  hero: { ...settings.hero, showVideoButton: e.target.checked }\n                })}\n                className=\"w-4 h-4\"\n              />\n              <label htmlFor=\"showVideoButton\" className=\"text-sm font-medium text-foreground\">\n                Mostra pulsante video\n              </label>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'contact' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-semibold text-foreground mb-4\">Informazioni di Contatto</h2>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Email</label>\n                <input\n                  type=\"email\"\n                  value={settings.contact.email}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    contact: { ...settings.contact, email: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Telefono</label>\n                <input\n                  type=\"tel\"\n                  value={settings.contact.phone}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    contact: { ...settings.contact, phone: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">WhatsApp</label>\n                <input\n                  type=\"tel\"\n                  value={settings.contact.whatsapp}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    contact: { ...settings.contact, whatsapp: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Indirizzo</label>\n                <input\n                  type=\"text\"\n                  value={settings.contact.address}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    contact: { ...settings.contact, address: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Citt√†</label>\n                <input\n                  type=\"text\"\n                  value={settings.contact.city}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    contact: { ...settings.contact, city: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Paese</label>\n                <input\n                  type=\"text\"\n                  value={settings.contact.country}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    contact: { ...settings.contact, country: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'social' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-semibold text-foreground mb-4\">Social Media</h2>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Facebook (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.social.facebook || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    social: { ...settings.social, facebook: e.target.value }\n                  })}\n                  placeholder=\"https://facebook.com/...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Instagram (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.social.instagram || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    social: { ...settings.social, instagram: e.target.value }\n                  })}\n                  placeholder=\"https://instagram.com/...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">YouTube (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.social.youtube || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    social: { ...settings.social, youtube: e.target.value }\n                  })}\n                  placeholder=\"https://youtube.com/@...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Twitter (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.social.twitter || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    social: { ...settings.social, twitter: e.target.value }\n                  })}\n                  placeholder=\"https://twitter.com/...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">LinkedIn (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.social.linkedin || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    social: { ...settings.social, linkedin: e.target.value }\n                  })}\n                  placeholder=\"https://linkedin.com/...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">TikTok (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.social.tiktok || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    social: { ...settings.social, tiktok: e.target.value }\n                  })}\n                  placeholder=\"https://tiktok.com/@...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'footer' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-semibold text-foreground mb-4\">Footer</h2>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Testo About</label>\n              <textarea\n                value={settings.footer.aboutText}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  footer: { ...settings.footer, aboutText: e.target.value }\n                })}\n                rows={4}\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Copyright</label>\n              <input\n                type=\"text\"\n                value={settings.footer.copyrightText}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  footer: { ...settings.footer, copyrightText: e.target.value }\n                })}\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <input\n                type=\"checkbox\"\n                id=\"showNewsletter\"\n                checked={settings.footer.showNewsletter}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  footer: { ...settings.footer, showNewsletter: e.target.checked }\n                })}\n                className=\"w-4 h-4\"\n              />\n              <label htmlFor=\"showNewsletter\" className=\"text-sm font-medium text-foreground\">\n                Mostra sezione newsletter\n              </label>\n            </div>\n\n            {settings.footer.showNewsletter && (\n              <>\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Titolo Newsletter</label>\n                  <input\n                    type=\"text\"\n                    value={settings.footer.newsletterTitle}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      footer: { ...settings.footer, newsletterTitle: e.target.value }\n                    })}\n                    className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">Descrizione Newsletter</label>\n                  <input\n                    type=\"text\"\n                    value={settings.footer.newsletterDescription}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      footer: { ...settings.footer, newsletterDescription: e.target.value }\n                    })}\n                    className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                  />\n                </div>\n              </>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'seo' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-semibold text-foreground mb-4\">SEO</h2>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Titolo Default</label>\n              <input\n                type=\"text\"\n                value={settings.seo.defaultTitle}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  seo: { ...settings.seo, defaultTitle: e.target.value }\n                })}\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Descrizione Default</label>\n              <textarea\n                value={settings.seo.defaultDescription}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  seo: { ...settings.seo, defaultDescription: e.target.value }\n                })}\n                rows={3}\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Keywords (separate con virgola)</label>\n              <input\n                type=\"text\"\n                value={settings.seo.defaultKeywords.join(', ')}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  seo: { \n                    ...settings.seo, \n                    defaultKeywords: e.target.value.split(',').map(k => k.trim()).filter(Boolean)\n                  }\n                })}\n                placeholder=\"marocco, viaggi, tour...\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Nome Sito</label>\n                <input\n                  type=\"text\"\n                  value={settings.seo.siteName}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    seo: { ...settings.seo, siteName: e.target.value }\n                  })}\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Twitter Handle (opzionale)</label>\n                <input\n                  type=\"text\"\n                  value={settings.seo.twitterHandle || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    seo: { ...settings.seo, twitterHandle: e.target.value }\n                  })}\n                  placeholder=\"@moroccodreams\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-foreground mb-2\">OG Image (opzionale)</label>\n              <input\n                type=\"url\"\n                value={settings.seo.ogImage || ''}\n                onChange={(e) => setSettings({\n                  ...settings,\n                  seo: { ...settings.seo, ogImage: e.target.value }\n                })}\n                placeholder=\"https://...\"\n                className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n              />\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'theme' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-semibold text-foreground mb-4\">Theme</h2>\n            \n            <div className=\"grid grid-cols-3 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Colore Primario</label>\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"color\"\n                    value={settings.theme.primaryColor}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      theme: { ...settings.theme, primaryColor: e.target.value }\n                    })}\n                    className=\"w-12 h-10 border border-border rounded cursor-pointer\"\n                  />\n                  <input\n                    type=\"text\"\n                    value={settings.theme.primaryColor}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      theme: { ...settings.theme, primaryColor: e.target.value }\n                    })}\n                    className=\"flex-1 px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Colore Secondario</label>\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"color\"\n                    value={settings.theme.secondaryColor}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      theme: { ...settings.theme, secondaryColor: e.target.value }\n                    })}\n                    className=\"w-12 h-10 border border-border rounded cursor-pointer\"\n                  />\n                  <input\n                    type=\"text\"\n                    value={settings.theme.secondaryColor}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      theme: { ...settings.theme, secondaryColor: e.target.value }\n                    })}\n                    className=\"flex-1 px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Colore Accent</label>\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"color\"\n                    value={settings.theme.accentColor}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      theme: { ...settings.theme, accentColor: e.target.value }\n                    })}\n                    className=\"w-12 h-10 border border-border rounded cursor-pointer\"\n                  />\n                  <input\n                    type=\"text\"\n                    value={settings.theme.accentColor}\n                    onChange={(e) => setSettings({\n                      ...settings,\n                      theme: { ...settings.theme, accentColor: e.target.value }\n                    })}\n                    className=\"flex-1 px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Logo URL (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.theme.logoUrl || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    theme: { ...settings.theme, logoUrl: e.target.value }\n                  })}\n                  placeholder=\"https://...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Favicon URL (opzionale)</label>\n                <input\n                  type=\"url\"\n                  value={settings.theme.faviconUrl || ''}\n                  onChange={(e) => setSettings({\n                    ...settings,\n                    theme: { ...settings.theme, faviconUrl: e.target.value }\n                  })}\n                  placeholder=\"https://...\"\n                  className=\"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","size_bytes":28653},"app/api/travels/[id]/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\nimport { isAdmin } from \"@/lib/auth-helpers\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const travel = await db.travel.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!travel) {\n      return Response.json({ error: \"Travel not found\" }, { status: 404 })\n    }\n\n    return Response.json(travel, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching travel:\", error)\n    return Response.json({ error: \"Failed to fetch travel\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  if (!isAdminUser) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const travel = await db.travel.update({\n      where: { id: params.id },\n      data: body\n    })\n\n    revalidateTag(\"travels\")\n    revalidateTag(`travel-${params.id}`)\n    return Response.json(travel)\n  } catch (error) {\n    console.error(\"Error updating travel:\", error)\n    return Response.json({ error: \"Failed to update travel\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  if (!isAdminUser) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.travel.delete({\n      where: { id: params.id }\n    })\n\n    revalidateTag(\"travels\")\n    revalidateTag(`travel-${params.id}`)\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting travel:\", error)\n    return Response.json({ error: \"Failed to delete travel\" }, { status: 500 })\n  }\n}\n","size_bytes":2008},"app/api/experiences/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const searchParams = request.nextUrl.searchParams\n    const featured = searchParams.get('featured')\n    const category = searchParams.get('category')\n    const limit = searchParams.get('limit')\n    const offset = searchParams.get('offset')\n\n    const where: any = {\n      type: 'experience',\n      published: true\n    }\n\n    if (featured === 'true') {\n      where.featured = true\n    }\n\n    if (category) {\n      where.category = category\n    }\n\n    const items = await db.contentItem.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n      take: limit ? parseInt(limit) : undefined,\n      skip: offset ? parseInt(offset) : undefined\n    })\n    \n    const experiences = items.map(item => ({\n      id: item.id,\n      title: item.title,\n      slug: item.slug,\n      shortDesc: item.metadata?.shortDesc,\n      description: item.description,\n      image: item.image,\n      category: item.category || 'adventure',\n      duration: item.duration,\n      difficulty: item.metadata?.difficulty || 'moderate',\n      groupSize: item.metadata?.groupSize,\n      itinerary: item.metadata?.itinerary,\n      highlights: item.metadata?.highlights,\n      included: item.metadata?.included,\n      notIncluded: item.metadata?.notIncluded,\n      price: item.price,\n      priceNote: item.priceNote,\n      published: item.published,\n      featured: item.featured,\n      createdAt: item.createdAt,\n      updatedAt: item.updatedAt\n    }))\n    \n    return Response.json({ experiences }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching experiences:\", error)\n    return Response.json({ error: \"Failed to fetch experiences\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const {\n      title,\n      slug,\n      shortDesc,\n      description,\n      image,\n      category = \"adventure\",\n      duration,\n      difficulty = \"moderate\",\n      groupSize,\n      itinerary,\n      highlights,\n      included,\n      notIncluded,\n      price,\n      priceNote,\n      published = true,\n      featured = false\n    } = body\n\n    if (!title || !slug) {\n      return Response.json(\n        { error: \"Title and slug are required\" },\n        { status: 400 }\n      )\n    }\n\n    const contentItem = await db.contentItem.create({\n      data: {\n        type: 'experience',\n        title,\n        slug,\n        description,\n        image,\n        category,\n        duration,\n        price,\n        priceNote,\n        published,\n        featured,\n        metadata: {\n          shortDesc,\n          difficulty,\n          groupSize,\n          itinerary,\n          highlights,\n          included,\n          notIncluded\n        }\n      }\n    })\n\n    const experience = {\n      id: contentItem.id,\n      title: contentItem.title,\n      slug: contentItem.slug,\n      shortDesc: contentItem.metadata?.shortDesc,\n      description: contentItem.description,\n      image: contentItem.image,\n      category: contentItem.category,\n      duration: contentItem.duration,\n      difficulty: contentItem.metadata?.difficulty,\n      groupSize: contentItem.metadata?.groupSize,\n      itinerary: contentItem.metadata?.itinerary,\n      highlights: contentItem.metadata?.highlights,\n      included: contentItem.metadata?.included,\n      notIncluded: contentItem.metadata?.notIncluded,\n      price: contentItem.price,\n      priceNote: contentItem.priceNote,\n      published: contentItem.published,\n      featured: contentItem.featured,\n      createdAt: contentItem.createdAt,\n      updatedAt: contentItem.updatedAt\n    }\n\n    revalidateTag(\"experiences\")\n    return Response.json(experience, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating experience:\", error)\n    return Response.json({ error: \"Failed to create experience\" }, { status: 500 })\n  }\n}\n","size_bytes":4381},"app/api/vehicles/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET() {\n  try {\n    const vehicles = await db.vehicle.findMany({\n      where: { published: true },\n      orderBy: { updatedAt: \"desc\" }\n    })\n    \n    const transformedVehicles = vehicles.map(vehicle => {\n      const pricingPeriods = vehicle.pricingPeriods as any[] || []\n      \n      const pricing = {\n        period1: pricingPeriods[0] ? { \n          short: pricingPeriods[0].shortTerm, \n          medium: pricingPeriods[0].mediumTerm, \n          long: pricingPeriods[0].longTerm \n        } : { short: 0, medium: 0, long: 0 },\n        period2: pricingPeriods[1] ? { \n          short: pricingPeriods[1].shortTerm, \n          medium: pricingPeriods[1].mediumTerm, \n          long: pricingPeriods[1].longTerm \n        } : { short: 0, medium: 0, long: 0 },\n        period3: pricingPeriods[2] ? { \n          short: pricingPeriods[2].shortTerm, \n          medium: pricingPeriods[2].mediumTerm, \n          long: pricingPeriods[2].longTerm \n        } : { short: 0, medium: 0, long: 0 },\n        period4: pricingPeriods[3] ? { \n          short: pricingPeriods[3].shortTerm, \n          medium: pricingPeriods[3].mediumTerm, \n          long: pricingPeriods[3].longTerm \n        } : { short: 0, medium: 0, long: 0 }\n      }\n      \n      const dailyDeductible = \n        vehicle.category === 'economica' ? 6 :\n        vehicle.category === 'suv' ? 8 :\n        vehicle.category === 'Premium' ? 10 : 6\n      \n      return {\n        id: vehicle.id,\n        name: vehicle.name,\n        category: vehicle.category,\n        transmission: vehicle.transmission,\n        fuel: vehicle.fuelType || 'benzina',\n        hasAC: true,\n        doors: vehicle.doors,\n        seats: vehicle.seats,\n        dailyDeductible,\n        image: vehicle.image || '',\n        pricing,\n        pricingPeriods: vehicle.pricingPeriods,\n        features: vehicle.features,\n        luggage: vehicle.luggage,\n        published: vehicle.published,\n        featured: vehicle.featured\n      }\n    })\n    \n    return Response.json({ vehicles: transformedVehicles }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching vehicles:\", error)\n    return Response.json({ error: \"Failed to fetch vehicles\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const vehicle = await db.vehicle.create({\n      data: body\n    })\n\n    revalidateTag(\"vehicles\")\n    return Response.json(vehicle, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating vehicle:\", error)\n    return Response.json({ error: \"Failed to create vehicle\" }, { status: 500 })\n  }\n}\n","size_bytes":3135},"app/api/cities/[id]/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function GET(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const city = await db.city.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!city) {\n      return Response.json({ error: \"City not found\" }, { status: 404 })\n    }\n\n    return Response.json(city, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching city:\", error)\n    return Response.json({ error: \"Failed to fetch city\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const city = await db.city.update({\n      where: { id: params.id },\n      data: body\n    })\n\n    revalidateTag(\"cities\")\n    revalidateTag(`city-${params.id}`)\n    return Response.json(city)\n  } catch (error) {\n    console.error(\"Error updating city:\", error)\n    return Response.json({ error: \"Failed to update city\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.city.delete({\n      where: { id: params.id }\n    })\n\n    revalidateTag(\"cities\")\n    revalidateTag(`city-${params.id}`)\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting city:\", error)\n    return Response.json({ error: \"Failed to delete city\" }, { status: 500 })\n  }\n}\n","size_bytes":2019},"app/api/blog/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const searchParams = request.nextUrl.searchParams\n    const featured = searchParams.get('featured')\n    const category = searchParams.get('category')\n    const limit = searchParams.get('limit')\n    const offset = searchParams.get('offset')\n\n    const where: any = {\n      type: 'blog',\n      published: true\n    }\n\n    if (featured === 'true') {\n      where.featured = true\n    }\n\n    if (category) {\n      where.category = category\n    }\n\n    const items = await db.contentItem.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n      take: limit ? parseInt(limit) : undefined,\n      skip: offset ? parseInt(offset) : undefined\n    })\n    \n    const posts = items.map(item => ({\n      id: item.id,\n      title: item.title,\n      slug: item.slug,\n      excerpt: item.metadata?.excerpt || item.description,\n      coverImage: item.metadata?.coverImage || item.image,\n      sections: item.metadata?.sections,\n      tags: item.metadata?.tags,\n      author: item.metadata?.author,\n      readTime: item.metadata?.readTime,\n      published: item.published,\n      featured: item.featured,\n      publishedAt: item.publishedAt,\n      createdAt: item.createdAt,\n      updatedAt: item.updatedAt\n    }))\n    \n    return Response.json({ posts }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching blog posts:\", error)\n    return Response.json({ error: \"Failed to fetch blog posts\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const {\n      title,\n      slug,\n      excerpt,\n      coverImage,\n      sections,\n      tags,\n      author,\n      readTime,\n      published = true,\n      featured = false,\n      publishedAt\n    } = body\n\n    const contentItem = await db.contentItem.create({\n      data: {\n        type: 'blog',\n        title,\n        slug,\n        description: excerpt,\n        image: coverImage,\n        published,\n        featured,\n        publishedAt,\n        metadata: {\n          excerpt,\n          coverImage,\n          sections,\n          tags,\n          author,\n          readTime\n        }\n      }\n    })\n\n    const post = {\n      id: contentItem.id,\n      title: contentItem.title,\n      slug: contentItem.slug,\n      excerpt: contentItem.metadata?.excerpt,\n      coverImage: contentItem.metadata?.coverImage,\n      sections: contentItem.metadata?.sections,\n      tags: contentItem.metadata?.tags,\n      author: contentItem.metadata?.author,\n      readTime: contentItem.metadata?.readTime,\n      published: contentItem.published,\n      featured: contentItem.featured,\n      publishedAt: contentItem.publishedAt,\n      createdAt: contentItem.createdAt,\n      updatedAt: contentItem.updatedAt\n    }\n\n    revalidateTag(\"blog\")\n    return Response.json(post, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating blog post:\", error)\n    return Response.json({ error: \"Failed to create blog post\" }, { status: 500 })\n  }\n}\n","size_bytes":3525},"app/api/services/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET() {\n  try {\n    const services = await db.service.findMany({\n      where: { published: true },\n      orderBy: { name: \"asc\" }\n    })\n    return Response.json({ services }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching services:\", error)\n    return Response.json({ error: \"Failed to fetch services\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const service = await db.service.create({\n      data: body\n    })\n\n    revalidateTag(\"services\")\n    return Response.json(service, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating service:\", error)\n    return Response.json({ error: \"Failed to create service\" }, { status: 500 })\n  }\n}\n","size_bytes":1293},"app/api/experiences/[id]/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\nimport { isAdmin } from \"@/lib/auth-helpers\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const experience = await db.experience.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!experience) {\n      return Response.json({ error: \"Experience not found\" }, { status: 404 })\n    }\n\n    return Response.json(experience, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching experience:\", error)\n    return Response.json({ error: \"Failed to fetch experience\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  if (!isAdminUser) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const experience = await db.experience.update({\n      where: { id: params.id },\n      data: body\n    })\n\n    revalidateTag(\"experiences\")\n    revalidateTag(`experience-${params.id}`)\n    return Response.json(experience)\n  } catch (error) {\n    console.error(\"Error updating experience:\", error)\n    return Response.json({ error: \"Failed to update experience\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  if (!isAdminUser) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.experience.delete({\n      where: { id: params.id }\n    })\n\n    revalidateTag(\"experiences\")\n    revalidateTag(`experience-${params.id}`)\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting experience:\", error)\n    return Response.json({ error: \"Failed to delete experience\" }, { status: 500 })\n  }\n}\n","size_bytes":2084},"lib/db.ts":{"content":"import { PrismaClient } from \"@prisma/client\"\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient | undefined }\n\nexport const db = globalForPrisma.prisma ?? new PrismaClient({\n  log: process.env.NODE_ENV === \"development\" ? [\"error\", \"warn\"] : [\"error\"],\n})\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db\n","size_bytes":347},"app/api/cities/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET() {\n  try {\n    const cities = await db.city.findMany({\n      where: { published: true },\n      orderBy: { name: \"asc\" }\n    })\n    return Response.json({ cities }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching cities:\", error)\n    return Response.json({ error: \"Failed to fetch cities\" }, { status: 500 })\n  }\n}\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const city = await db.city.create({\n      data: body\n    })\n\n    revalidateTag(\"cities\")\n    return Response.json(city, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating city:\", error)\n    return Response.json({ error: \"Failed to create city\" }, { status: 500 })\n  }\n}\n","size_bytes":1265},"scripts/migrate-from-firestore.js":{"content":"const { PrismaClient } = require(\"@prisma/client\")\nconst admin = require(\"firebase-admin\")\nconst fs = require(\"fs\")\nconst path = require(\"path\")\n\nconst prisma = new PrismaClient()\n\nfunction formatPrivateKey(key) {\n  if (!key) return \"\"\n  \n  const header = \"-----BEGIN PRIVATE KEY-----\"\n  const footer = \"-----END PRIVATE KEY-----\"\n  \n  if (key.startsWith(header) && key.endsWith(footer + \"\\n\")) {\n    return key\n  }\n  \n  let cleanKey = key.replace(/\\\\n/g, \"\\n\")\n  \n  if (cleanKey.includes(header) && cleanKey.includes(footer)) {\n    return cleanKey\n  }\n  \n  cleanKey = cleanKey\n    .replace(header, \"\")\n    .replace(footer, \"\")\n    .replace(/\\s/g, \"\")\n  \n  const formatted = cleanKey.match(/.{1,64}/g)?.join(\"\\n\") || cleanKey\n  \n  return `${header}\\n${formatted}\\n${footer}`\n}\n\nconst serviceAccount = {\n  type: \"service_account\",\n  project_id: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  private_key: formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY),\n  client_email: process.env.FIREBASE_ADMIN_CLIENT_EMAIL,\n}\n\nif (!admin.apps.length) {\n  admin.initializeApp({\n    credential: admin.credential.cert(serviceAccount)\n  })\n}\n\nconst db = admin.firestore()\n\nfunction parseDate(value) {\n  if (!value) return new Date()\n  if (value.toDate && typeof value.toDate === 'function') return value.toDate()\n  if (typeof value === 'string') return new Date(value)\n  return new Date()\n}\n\nasync function migrateExperiences() {\n  console.log(\"üì¶ Migrating Experiences...\")\n  const snapshot = await db.collection(\"experiences\").get()\n  let created = 0, updated = 0\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data()\n    const payload = {\n      id: doc.id,\n      title: data.title || \"Untitled\",\n      slug: data.slug || doc.id,\n      shortDesc: data.shortDesc || null,\n      description: data.description || null,\n      image: data.image || null,\n      category: data.category || \"adventure\",\n      duration: data.duration || null,\n      difficulty: data.difficulty || \"moderate\",\n      groupSize: data.groupSize || null,\n      itinerary: data.itinerary || null,\n      highlights: data.highlights || null,\n      included: data.included || null,\n      notIncluded: data.notIncluded || null,\n      price: data.price ? parseFloat(data.price) : null,\n      priceNote: data.priceNote || null,\n      published: data.published !== false,\n      featured: data.featured === true,\n      createdAt: parseDate(data.createdAt),\n      updatedAt: parseDate(data.updatedAt)\n    }\n\n    try {\n      const exists = await prisma.experience.findUnique({ where: { id: doc.id } })\n      if (exists) {\n        await prisma.experience.update({ where: { id: doc.id }, data: payload })\n        updated++\n      } else {\n        await prisma.experience.create({ data: payload })\n        created++\n      }\n    } catch (err) {\n      console.error(`  ‚ùå Error migrating experience ${doc.id}:`, err.message)\n    }\n  }\n\n  console.log(`  ‚úÖ Experiences: ${created} created, ${updated} updated\\n`)\n}\n\nasync function migrateTravels() {\n  console.log(\"üì¶ Migrating Travels...\")\n  const snapshot = await db.collection(\"travels\").get()\n  let created = 0, updated = 0\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data()\n    const payload = {\n      id: doc.id,\n      title: data.title || \"Untitled\",\n      slug: data.slug || doc.id,\n      description: data.description || null,\n      image: data.image || null,\n      category: data.category || \"tour\",\n      duration: data.duration || null,\n      cities: data.cities || null,\n      itinerary: data.itinerary || null,\n      highlights: data.highlights || null,\n      included: data.included || null,\n      notIncluded: data.notIncluded || null,\n      price: data.price ? parseFloat(data.price) : null,\n      priceNote: data.priceNote || null,\n      published: data.published !== false,\n      featured: data.featured === true,\n      createdAt: parseDate(data.createdAt),\n      updatedAt: parseDate(data.updatedAt)\n    }\n\n    try {\n      const exists = await prisma.travel.findUnique({ where: { id: doc.id } })\n      if (exists) {\n        await prisma.travel.update({ where: { id: doc.id }, data: payload })\n        updated++\n      } else {\n        await prisma.travel.create({ data: payload })\n        created++\n      }\n    } catch (err) {\n      console.error(`  ‚ùå Error migrating travel ${doc.id}:`, err.message)\n    }\n  }\n\n  console.log(`  ‚úÖ Travels: ${created} created, ${updated} updated\\n`)\n}\n\nasync function migrateVehicles() {\n  console.log(\"üì¶ Migrating Vehicles...\")\n  const snapshot = await db.collection(\"vehicles\").get()\n  let created = 0, updated = 0\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data()\n    const payload = {\n      id: doc.id,\n      name: data.name || \"Unknown Vehicle\",\n      slug: data.slug || doc.id,\n      category: data.category || \"economy\",\n      transmission: data.transmission || \"manual\",\n      fuelType: data.fuelType || \"petrol\",\n      seats: data.seats || 5,\n      doors: data.doors || 4,\n      luggage: data.luggage || 2,\n      image: data.image || null,\n      features: data.features || null,\n      pricingPeriods: data.pricingPeriods || null,\n      published: data.published !== false,\n      featured: data.featured === true,\n      available: data.available !== false,\n      createdAt: parseDate(data.createdAt),\n      updatedAt: parseDate(data.updatedAt)\n    }\n\n    try {\n      const exists = await prisma.vehicle.findUnique({ where: { id: doc.id } })\n      if (exists) {\n        await prisma.vehicle.update({ where: { id: doc.id }, data: payload })\n        updated++\n      } else {\n        await prisma.vehicle.create({ data: payload })\n        created++\n      }\n    } catch (err) {\n      console.error(`  ‚ùå Error migrating vehicle ${doc.id}:`, err.message)\n    }\n  }\n\n  console.log(`  ‚úÖ Vehicles: ${created} created, ${updated} updated\\n`)\n}\n\nasync function migrateBlog() {\n  console.log(\"üì¶ Migrating Blog Posts...\")\n  const snapshot = await db.collection(\"blog\").get()\n  let created = 0, updated = 0\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data()\n    const payload = {\n      id: doc.id,\n      title: data.title || \"Untitled\",\n      slug: data.slug || doc.id,\n      excerpt: data.excerpt || null,\n      coverImage: data.coverImage || null,\n      sections: data.sections || null,\n      tags: data.tags || null,\n      author: data.author || null,\n      readTime: data.readTime || null,\n      published: data.published !== false,\n      featured: data.featured === true,\n      publishedAt: data.publishedAt ? parseDate(data.publishedAt) : null,\n      createdAt: parseDate(data.createdAt),\n      updatedAt: parseDate(data.updatedAt)\n    }\n\n    try {\n      const exists = await prisma.blogPost.findUnique({ where: { id: doc.id } })\n      if (exists) {\n        await prisma.blogPost.update({ where: { id: doc.id }, data: payload })\n        updated++\n      } else {\n        await prisma.blogPost.create({ data: payload })\n        created++\n      }\n    } catch (err) {\n      console.error(`  ‚ùå Error migrating blog post ${doc.id}:`, err.message)\n    }\n  }\n\n  console.log(`  ‚úÖ Blog Posts: ${created} created, ${updated} updated\\n`)\n}\n\nasync function migrateCities() {\n  console.log(\"üì¶ Migrating Cities...\")\n  const snapshot = await db.collection(\"cities\").get()\n  let created = 0, updated = 0\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data()\n    const payload = {\n      id: doc.id,\n      name: data.name || \"Unknown City\",\n      slug: data.slug || doc.id,\n      type: data.type || \"imperial\",\n      region: data.region || null,\n      description: data.description || null,\n      image: data.image || null,\n      history: data.history || null,\n      attractions: data.attractions || null,\n      tourPrice: data.tourPrice ? parseFloat(data.tourPrice) : null,\n      tourDuration: data.tourDuration || null,\n      coordinates: data.coordinates || null,\n      published: data.published !== false,\n      featured: data.featured === true,\n      createdAt: parseDate(data.createdAt),\n      updatedAt: parseDate(data.updatedAt)\n    }\n\n    try {\n      const exists = await prisma.city.findUnique({ where: { id: doc.id } })\n      if (exists) {\n        await prisma.city.update({ where: { id: doc.id }, data: payload })\n        updated++\n      } else {\n        await prisma.city.create({ data: payload })\n        created++\n      }\n    } catch (err) {\n      console.error(`  ‚ùå Error migrating city ${doc.id}:`, err.message)\n    }\n  }\n\n  console.log(`  ‚úÖ Cities: ${created} created, ${updated} updated\\n`)\n}\n\nasync function migrateServices() {\n  console.log(\"üì¶ Migrating Services...\")\n  const snapshot = await db.collection(\"services\").get()\n  let created = 0, updated = 0\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data()\n    const payload = {\n      id: doc.id,\n      name: data.name || \"Unknown Service\",\n      slug: data.slug || doc.id,\n      category: data.category || \"transport\",\n      description: data.description || null,\n      icon: data.icon || null,\n      features: data.features || null,\n      pricing: data.pricing || null,\n      published: data.published !== false,\n      featured: data.featured === true,\n      createdAt: parseDate(data.createdAt),\n      updatedAt: parseDate(data.updatedAt)\n    }\n\n    try {\n      const exists = await prisma.service.findUnique({ where: { id: doc.id } })\n      if (exists) {\n        await prisma.service.update({ where: { id: doc.id }, data: payload })\n        updated++\n      } else {\n        await prisma.service.create({ data: payload })\n        created++\n      }\n    } catch (err) {\n      console.error(`  ‚ùå Error migrating service ${doc.id}:`, err.message)\n    }\n  }\n\n  console.log(`  ‚úÖ Services: ${created} created, ${updated} updated\\n`)\n}\n\nasync function migrateInstagram() {\n  console.log(\"üì¶ Migrating Instagram Videos...\")\n  const snapshot = await db.collection(\"instagram_videos\").get()\n  let created = 0, updated = 0\n\n  for (const doc of snapshot.docs) {\n    const data = doc.data()\n    const payload = {\n      id: doc.id,\n      slot: data.slot || 1,\n      videoUrl: data.videoUrl || \"\",\n      active: data.active !== false,\n      createdAt: parseDate(data.createdAt),\n      updatedAt: parseDate(data.updatedAt)\n    }\n\n    try {\n      const exists = await prisma.instagramVideo.findUnique({ where: { slot: payload.slot } })\n      if (exists) {\n        await prisma.instagramVideo.update({ where: { slot: payload.slot }, data: payload })\n        updated++\n      } else {\n        await prisma.instagramVideo.create({ data: payload })\n        created++\n      }\n    } catch (err) {\n      console.error(`  ‚ùå Error migrating Instagram video ${doc.id}:`, err.message)\n    }\n  }\n\n  console.log(`  ‚úÖ Instagram Videos: ${created} created, ${updated} updated\\n`)\n}\n\nasync function migrateSiteSettings() {\n  console.log(\"üì¶ Migrating Site Settings...\")\n  \n  try {\n    const doc = await db.collection(\"site_settings\").doc(\"site_settings\").get()\n    \n    if (!doc.exists) {\n      console.log(\"  ‚ö†Ô∏è  No site settings found in Firestore\\n\")\n      return\n    }\n\n    const data = doc.data()\n    const payload = {\n      id: \"site_settings\",\n      hero: data.hero || {},\n      contact: data.contact || {},\n      social: data.social || {},\n      footer: data.footer || {},\n      seo: data.seo || {},\n      theme: data.theme || {},\n      updatedAt: parseDate(data.updatedAt),\n      updatedBy: data.updatedBy || null\n    }\n\n    await prisma.siteSettings.upsert({\n      where: { id: \"site_settings\" },\n      update: payload,\n      create: payload\n    })\n\n    console.log(\"  ‚úÖ Site Settings migrated\\n\")\n  } catch (err) {\n    console.error(\"  ‚ùå Error migrating site settings:\", err.message, \"\\n\")\n  }\n}\n\nasync function main() {\n  console.log(\"\\nüöÄ Starting migration from Firestore to Postgres...\\n\")\n\n  try {\n    await migrateExperiences()\n    await migrateTravels()\n    await migrateVehicles()\n    await migrateBlog()\n    await migrateCities()\n    await migrateServices()\n    await migrateInstagram()\n    await migrateSiteSettings()\n\n    console.log(\"‚ú® Migration completed successfully!\\n\")\n  } catch (error) {\n    console.error(\"‚ùå Migration failed:\", error)\n    process.exit(1)\n  }\n}\n\nmain()\n  .catch((e) => {\n    console.error(e)\n    process.exit(1)\n  })\n  .finally(async () => {\n    await prisma.$disconnect()\n  })\n","size_bytes":12334},"lib/site-settings-schema.ts":{"content":"export interface HeroSettings {\n  title: string;\n  subtitle: string;\n  ctaText: string;\n  ctaLink: string;\n  backgroundImage?: string;\n  showVideoButton: boolean;\n}\n\nexport interface ContactInfo {\n  email: string;\n  phone: string;\n  whatsapp: string;\n  address: string;\n  city: string;\n  country: string;\n}\n\nexport interface SocialLinks {\n  facebook?: string;\n  instagram?: string;\n  twitter?: string;\n  youtube?: string;\n  linkedin?: string;\n  tiktok?: string;\n}\n\nexport interface FooterSettings {\n  aboutText: string;\n  copyrightText: string;\n  showNewsletter: boolean;\n  newsletterTitle: string;\n  newsletterDescription: string;\n}\n\nexport interface SEOSettings {\n  defaultTitle: string;\n  defaultDescription: string;\n  defaultKeywords: string[];\n  ogImage?: string;\n  siteName: string;\n  twitterHandle?: string;\n}\n\nexport interface ThemeSettings {\n  primaryColor: string;\n  secondaryColor: string;\n  accentColor: string;\n  logoUrl?: string;\n  faviconUrl?: string;\n}\n\nexport interface SiteSettings {\n  id: string;\n  hero: HeroSettings;\n  contact: ContactInfo;\n  social: SocialLinks;\n  footer: FooterSettings;\n  seo: SEOSettings;\n  theme: ThemeSettings;\n  updatedAt: string;\n  updatedBy?: string;\n}\n\nexport const DEFAULT_SITE_SETTINGS: SiteSettings = {\n  id: 'site_settings',\n  hero: {\n    title: 'Scopri il Marocco Autentico',\n    subtitle: 'Viaggi personalizzati tra deserto, citt√† imperiali e costa atlantica',\n    ctaText: 'Pianifica il Tuo Viaggio',\n    ctaLink: '/pianifica-viaggio',\n    showVideoButton: true\n  },\n  contact: {\n    email: 'info@moroccodreams.com',\n    phone: '+212 123 456 789',\n    whatsapp: '+212 123 456 789',\n    address: 'Via Example, 123',\n    city: 'Marrakech',\n    country: 'Morocco'\n  },\n  social: {\n    facebook: 'https://facebook.com/moroccodreams',\n    instagram: 'https://instagram.com/moroccodreams',\n    youtube: 'https://youtube.com/@moroccodreams'\n  },\n  footer: {\n    aboutText: 'Morocco Dreams √® la tua porta d\\'accesso al Marocco autentico. Offriamo esperienze di viaggio personalizzate che combinano avventura, cultura e relax.',\n    copyrightText: 'Morocco Dreams. Tutti i diritti riservati.',\n    showNewsletter: true,\n    newsletterTitle: 'Rimani Aggiornato',\n    newsletterDescription: 'Ricevi offerte esclusive e consigli di viaggio direttamente nella tua casella di posta.'\n  },\n  seo: {\n    defaultTitle: 'Morocco Dreams - Viaggi Autentici in Marocco',\n    defaultDescription: 'Scopri il Marocco con Morocco Dreams: tour personalizzati, esperienze autentiche nel deserto, citt√† imperiali e costa atlantica. Prenota il tuo viaggio da sogno.',\n    defaultKeywords: ['marocco', 'viaggi marocco', 'tour marocco', 'deserto sahara', 'citt√† imperiali', 'marrakech', 'fes'],\n    siteName: 'Morocco Dreams',\n  },\n  theme: {\n    primaryColor: '#FF6B35',\n    secondaryColor: '#1A1A1A',\n    accentColor: '#F7931E'\n  },\n  updatedAt: new Date().toISOString()\n};\n","size_bytes":2904},"app/api/services/[id]/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\n\nexport const dynamic = \"force-dynamic\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function GET(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const service = await db.service.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!service) {\n      return Response.json({ error: \"Service not found\" }, { status: 404 })\n    }\n\n    return Response.json(service, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching service:\", error)\n    return Response.json({ error: \"Failed to fetch service\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const service = await db.service.update({\n      where: { id: params.id },\n      data: body\n    })\n\n    revalidateTag(\"services\")\n    revalidateTag(`service-${params.id}`)\n    return Response.json(service)\n  } catch (error) {\n    console.error(\"Error updating service:\", error)\n    return Response.json({ error: \"Failed to update service\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.service.delete({\n      where: { id: params.id }\n    })\n\n    revalidateTag(\"services\")\n    revalidateTag(`service-${params.id}`)\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting service:\", error)\n    return Response.json({ error: \"Failed to delete service\" }, { status: 500 })\n  }\n}\n","size_bytes":2074},"lib/store.ts":{"content":"import { configureStore, createSlice, PayloadAction } from '@reduxjs/toolkit'\n\ninterface ContentState {\n  vehicles: any[]\n  experiences: any[]\n  travels: any[]\n  cities: any[]\n  services: any[]\n  testimonials: any[]\n  faqs: any[]\n  loading: boolean\n  error: string | null\n}\n\nconst initialState: ContentState = {\n  vehicles: [],\n  experiences: [],\n  travels: [],\n  cities: [],\n  services: [],\n  testimonials: [],\n  faqs: [],\n  loading: false,\n  error: null,\n}\n\nconst contentSlice = createSlice({\n  name: 'content',\n  initialState,\n  reducers: {\n    setLoading: (state, action: PayloadAction<boolean>) => {\n      state.loading = action.payload\n    },\n    setError: (state, action: PayloadAction<string | null>) => {\n      state.error = action.payload\n    },\n    setVehicles: (state, action: PayloadAction<any[]>) => {\n      state.vehicles = action.payload\n    },\n    setExperiences: (state, action: PayloadAction<any[]>) => {\n      state.experiences = action.payload\n    },\n    setTravels: (state, action: PayloadAction<any[]>) => {\n      state.travels = action.payload\n    },\n    setCities: (state, action: PayloadAction<any[]>) => {\n      state.cities = action.payload\n    },\n    setServices: (state, action: PayloadAction<any[]>) => {\n      state.services = action.payload\n    },\n    setTestimonials: (state, action: PayloadAction<any[]>) => {\n      state.testimonials = action.payload\n    },\n    setFAQs: (state, action: PayloadAction<any[]>) => {\n      state.faqs = action.payload\n    },\n  },\n})\n\nexport const {\n  setLoading,\n  setError,\n  setVehicles,\n  setExperiences,\n  setTravels,\n  setCities,\n  setServices,\n  setTestimonials,\n  setFAQs,\n} = contentSlice.actions\n\nexport const store = configureStore({\n  reducer: {\n    content: contentSlice.reducer,\n  },\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch\n","size_bytes":1873},"app/api/faq/[id]/route.ts":{"content":"import { NextRequest } from \"next/server\"\nimport { db } from \"@/lib/db\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const faq = await db.fAQ.update({\n      where: { id: params.id },\n      data: body\n    })\n    return Response.json(faq)\n  } catch (error) {\n    console.error(\"Error updating FAQ:\", error)\n    return Response.json({ error: \"Failed to update FAQ\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.fAQ.delete({ where: { id: params.id } })\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting FAQ:\", error)\n    return Response.json({ error: \"Failed to delete FAQ\" }, { status: 500 })\n  }\n}\n","size_bytes":1262},"app/api/menu/route.ts":{"content":"import { NextRequest } from \"next/server\"\nimport { db } from \"@/lib/db\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function GET() {\n  try {\n    const items = await db.menuItem.findMany({\n      where: { active: true },\n      orderBy: [{ order: \"asc\" }, { createdAt: \"asc\" }]\n    })\n    \n    return Response.json({ items }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching menu:\", error)\n    return Response.json({ error: \"Failed to fetch menu\" }, { status: 500 })\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const item = await db.menuItem.create({ data: body })\n    return Response.json(item, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating menu item:\", error)\n    return Response.json({ error: \"Failed to create menu item\" }, { status: 500 })\n  }\n}\n","size_bytes":1182},"app/admin/menu/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNotifications } from \"@/components/NotificationSystem\"\nimport { useAuth } from \"@/context/AuthContext\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Plus, Edit, Trash2 } from \"lucide-react\"\n\nexport default function MenuManagement() {\n  const [items, setItems] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [showModal, setShowModal] = useState(false)\n  const [formData, setFormData] = useState({ label: \"\", href: \"\", description: \"\", order: 0 })\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n\n  useEffect(() => {\n    loadItems()\n  }, [])\n\n  const loadItems = async () => {\n    try {\n      const res = await fetch(\"/api/menu\")\n      const data = await res.json()\n      setItems(data.items || [])\n    } catch (error) {\n      showError(\"Errore\", \"Errore nel caricamento menu\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSave = async () => {\n    if (!formData.label || !formData.href) {\n      showError(\"Validazione\", \"Riempire i campi obbligatori\")\n      return\n    }\n\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const method = editingId ? \"PUT\" : \"POST\"\n      const url = editingId ? `/api/menu/${editingId}` : \"/api/menu\"\n\n      const res = await fetch(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(formData),\n      })\n\n      if (!res.ok) throw new Error(\"Failed to save\")\n\n      showSuccess(editingId ? \"Aggiornata\" : \"Creata\", editingId ? \"Voce aggiornata con successo\" : \"Voce creata con successo\")\n      setFormData({ label: \"\", href: \"\", description: \"\", order: 0 })\n      setEditingId(null)\n      setShowModal(false)\n      loadItems()\n    } catch (error) {\n      showError(\"Errore\", \"Errore nel salvataggio della voce\")\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm(\"Eliminare questa voce?\")) return\n\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const res = await fetch(`/api/menu/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (!res.ok) throw new Error(\"Failed to delete\")\n\n      showSuccess(\"Eliminata\", \"Voce eliminata con successo\")\n      loadItems()\n    } catch (error) {\n      showError(\"Errore\", \"Errore nell'eliminazione della voce\")\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({ label: \"\", href: \"\", description: \"\", order: 0 })\n    setEditingId(null)\n  }\n\n  if (loading) {\n    return <div className=\"text-center py-8\">Caricamento...</div>\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold\">Gestione Menu</h1>\n        <Button onClick={() => { resetForm(); setShowModal(true) }}>\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Nuova Voce\n        </Button>\n      </div>\n\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-card border border-border rounded-lg w-full max-w-2xl p-6\">\n            <h2 className=\"text-2xl font-bold mb-4\">{editingId ? \"Modifica Voce\" : \"Nuova Voce\"}</h2>\n            <div className=\"space-y-4 max-h-[60vh] overflow-y-auto\">\n              <Input\n                placeholder=\"Etichetta\"\n                value={formData.label}\n                onChange={(e) => setFormData({ ...formData, label: e.target.value })}\n              />\n              <Input\n                placeholder=\"URL (es: /chi-siamo)\"\n                value={formData.href}\n                onChange={(e) => setFormData({ ...formData, href: e.target.value })}\n              />\n              <Input\n                placeholder=\"Descrizione (opzionale)\"\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              />\n              <Input\n                type=\"number\"\n                placeholder=\"Ordine\"\n                value={formData.order}\n                onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) })}\n              />\n              <div className=\"flex gap-3 justify-end pt-4 border-t\">\n                <Button variant=\"outline\" onClick={() => { setShowModal(false); resetForm() }}>Annulla</Button>\n                <Button onClick={handleSave}>Salva</Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid gap-4\">\n        {items.map((item) => (\n          <Card key={item.id}>\n            <CardContent className=\"p-6 flex items-center justify-between\">\n              <div>\n                <h3 className=\"font-semibold\">{item.label}</h3>\n                <p className=\"text-sm text-muted-foreground\">{item.href}</p>\n              </div>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setFormData(item)\n                    setEditingId(item.id)\n                  }}\n                >\n                  <Edit className=\"w-4 h-4\" />\n                </Button>\n                <Button\n                  variant=\"destructive\"\n                  size=\"sm\"\n                  onClick={() => handleDelete(item.id)}\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":5901},"components/ui/textarea.tsx":{"content":"import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => (\n    <textarea\n      ref={ref}\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":734},"app/api/menu/[id]/route.ts":{"content":"\"use client\"\nimport { NextRequest } from \"next/server\"\nimport { db } from \"@/lib/db\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const item = await db.menuItem.update({\n      where: { id: params.id },\n      data: body\n    })\n    return Response.json(item)\n  } catch (error) {\n    console.error(\"Error updating menu item:\", error)\n    return Response.json({ error: \"Failed to update menu item\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.menuItem.delete({ where: { id: params.id } })\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting menu item:\", error)\n    return Response.json({ error: \"Failed to delete menu item\" }, { status: 500 })\n  }\n}\n","size_bytes":1311},"app/api/faq/route.ts":{"content":"import { NextRequest } from \"next/server\"\nimport { db } from \"@/lib/db\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function GET(req: NextRequest) {\n  try {\n    const category = new URL(req.url).searchParams.get(\"category\")\n    \n    const faqs = await db.fAQ.findMany({\n      where: { \n        published: true,\n        ...(category && { category })\n      },\n      orderBy: [{ order: \"asc\" }, { createdAt: \"desc\" }]\n    })\n    \n    return Response.json({ faqs }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching FAQs:\", error)\n    return Response.json({ error: \"Failed to fetch FAQs\" }, { status: 500 })\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const faq = await db.fAQ.create({ data: body })\n    return Response.json(faq, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating FAQ:\", error)\n    return Response.json({ error: \"Failed to create FAQ\" }, { status: 500 })\n  }\n}\n","size_bytes":1302},"app/api/testimonials/route.ts":{"content":"import { NextRequest } from \"next/server\"\nimport { db } from \"@/lib/db\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function GET() {\n  try {\n    const testimonials = await db.testimonial.findMany({\n      where: { published: true },\n      orderBy: [{ order: \"asc\" }, { createdAt: \"desc\" }]\n    })\n    \n    return Response.json({ testimonials }, {\n      headers: { \"Cache-Control\": \"no-store\" }\n    })\n  } catch (error) {\n    console.error(\"Error fetching testimonials:\", error)\n    return Response.json({ error: \"Failed to fetch testimonials\" }, { status: 500 })\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const testimonial = await db.testimonial.create({ data: body })\n    return Response.json(testimonial, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating testimonial:\", error)\n    return Response.json({ error: \"Failed to create testimonial\" }, { status: 500 })\n  }\n}\n","size_bytes":1240},"app/api/testimonials/[id]/route.ts":{"content":"\"use client\"\nimport { NextRequest } from \"next/server\"\nimport { db } from \"@/lib/db\"\n\nfunction isAuthorized(req: NextRequest) {\n  const auth = req.headers.get(\"authorization\") || \"\"\n  const token = auth.replace(\"Bearer \", \"\").trim()\n  return process.env.ADMIN_TOKEN && token === process.env.ADMIN_TOKEN\n}\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const testimonial = await db.testimonial.update({\n      where: { id: params.id },\n      data: body\n    })\n    return Response.json(testimonial)\n  } catch (error) {\n    console.error(\"Error updating testimonial:\", error)\n    return Response.json({ error: \"Failed to update testimonial\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  if (!isAuthorized(req)) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    await db.testimonial.delete({ where: { id: params.id } })\n    return new Response(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Error deleting testimonial:\", error)\n    return Response.json({ error: \"Failed to delete testimonial\" }, { status: 500 })\n  }\n}\n","size_bytes":1339},"hooks/useRedux.ts":{"content":"import { useDispatch, useSelector, TypedUseSelectorHook } from 'react-redux'\nimport type { RootState, AppDispatch } from '@/lib/store'\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\n","size_bytes":274},"app/layout-with-provider.tsx":{"content":"'use client'\n\nimport { ReactNode } from 'react'\nimport { Provider } from 'react-redux'\nimport { store } from '@/lib/store'\n\nexport function LayoutProvider({ children }: { children: ReactNode }) {\n  return (\n    <Provider store={store}>\n      {children}\n    </Provider>\n  )\n}\n","size_bytes":275},"app/admin/testimonials/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNotifications } from \"@/components/NotificationSystem\"\nimport { useAuth } from \"@/context/AuthContext\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Plus, Edit, Trash2 } from \"lucide-react\"\n\nexport default function TestimonialsManagement() {\n  const [testimonials, setTestimonials] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [formData, setFormData] = useState({\n    name: \"\",\n    location: \"\",\n    service: \"\",\n    rating: 5,\n    comment: \"\",\n    published: true,\n    order: 0,\n  })\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n\n  useEffect(() => {\n    loadTestimonials()\n  }, [])\n\n  const loadTestimonials = async () => {\n    try {\n      const res = await fetch(\"/api/testimonials\")\n      const data = await res.json()\n      setTestimonials(data.testimonials || [])\n    } catch (error) {\n      showError(\"Errore\", \"Errore nel caricamento delle testimonianze\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSave = async () => {\n    if (!formData.name || !formData.comment) {\n      showError(\"Campi mancanti\", \"Riempire i campi obbligatori\")\n      return\n    }\n\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const method = editingId ? \"PUT\" : \"POST\"\n      const url = editingId ? `/api/testimonials/${editingId}` : \"/api/testimonials\"\n\n      const res = await fetch(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(formData),\n      })\n\n      if (!res.ok) throw new Error(\"Failed to save\")\n\n      showSuccess(editingId ? \"Aggiornata\" : \"Creata\", editingId ? \"Testimonianza aggiornata con successo\" : \"Testimonianza creata con successo\")\n      resetForm()\n      loadTestimonials()\n    } catch (error) {\n      showError(\"Errore\", \"Errore nel salvataggio della testimonianza\")\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm(\"Eliminare questa testimonianza?\")) return\n\n    try {\n      if (!user) return\n      const token = await user.getIdToken()\n      const res = await fetch(`/api/testimonials/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (!res.ok) throw new Error(\"Failed to delete\")\n\n      showSuccess(\"Eliminata\", \"Testimonianza eliminata con successo\")\n      loadTestimonials()\n    } catch (error) {\n      showError(\"Errore\", \"Errore nell'eliminazione della testimonianza\")\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      name: \"\",\n      location: \"\",\n      service: \"\",\n      rating: 5,\n      comment: \"\",\n      published: true,\n      order: 0,\n    })\n    setEditingId(null)\n  }\n\n  const [showModal, setShowModal] = useState(false)\n\n  if (loading) return <div className=\"text-center py-8\">Caricamento...</div>\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold\">Testimonianze</h1>\n        <Button onClick={() => { resetForm(); setShowModal(true) }}>\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Nuova Testimonianza\n        </Button>\n      </div>\n\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-card border border-border rounded-lg w-full max-w-2xl p-6\">\n            <h2 className=\"text-2xl font-bold mb-4\">{editingId ? \"Modifica\" : \"Nuova\"} Testimonianza</h2>\n            <div className=\"space-y-4 max-h-[60vh] overflow-y-auto\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input\n                  placeholder=\"Nome\"\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                />\n                <Input\n                  placeholder=\"Luogo\"\n                  value={formData.location}\n                  onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                />\n              </div>\n              <Input\n                placeholder=\"Servizio/Viaggio\"\n                value={formData.service}\n                onChange={(e) => setFormData({ ...formData, service: e.target.value })}\n              />\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"5\"\n                  placeholder=\"Valutazione\"\n                  value={formData.rating}\n                  onChange={(e) => setFormData({ ...formData, rating: parseInt(e.target.value) })}\n                />\n                <Input\n                  type=\"number\"\n                  placeholder=\"Ordine\"\n                  value={formData.order}\n                  onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) })}\n                />\n              </div>\n              <Textarea\n                placeholder=\"Commento\"\n                value={formData.comment}\n                onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => setFormData({ ...formData, comment: e.target.value })}\n                rows={4}\n              />\n              <div className=\"flex gap-3 justify-end pt-4 border-t\">\n                <Button variant=\"outline\" onClick={() => { setShowModal(false); resetForm() }}>Annulla</Button>\n                <Button onClick={() => { handleSave(); setShowModal(false) }}>Salva</Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid gap-4\">\n        {testimonials.map((t) => (\n          <Card key={t.id}>\n            <CardContent className=\"p-6 flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold\">{t.name}</h3>\n                <p className=\"text-sm text-muted-foreground\">{t.location}</p>\n                <p className=\"text-sm mt-2 line-clamp-2\">{t.comment}</p>\n              </div>\n              <div className=\"flex gap-2 ml-4\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setFormData(t)\n                    setEditingId(t.id)\n                  }}\n                >\n                  <Edit className=\"w-4 h-4\" />\n                </Button>\n                <Button\n                  variant=\"destructive\"\n                  size=\"sm\"\n                  onClick={() => handleDelete(t.id)}\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":7041},"components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/50  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3863},"app/admin/faq/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNotifications } from \"@/components/NotificationSystem\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Plus, Edit, Trash2 } from \"lucide-react\"\nimport { useAuth } from \"@/context/AuthContext\"\n\nconst CATEGORIES = [\n  { value: \"general\", label: \"Generale\" },\n  { value: \"booking\", label: \"Prenotazioni\" },\n  { value: \"travel\", label: \"Viaggi\" },\n  { value: \"payment\", label: \"Pagamenti\" },\n]\n\nexport default function FAQManagement() {\n  const [faqs, setFaqs] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [formData, setFormData] = useState({\n    category: \"general\",\n    question: \"\",\n    answer: \"\",\n    published: true,\n    order: 0,\n  })\n  const { showSuccess, showError } = useNotifications()\n  const { user } = useAuth()\n\n  useEffect(() => {\n    loadFAQs()\n  }, [])\n\n  const loadFAQs = async () => {\n    try {\n      const res = await fetch(\"/api/faq\")\n      const data = await res.json()\n      setFaqs(data.faqs || [])\n    } catch (error) {\n      showError(\"Errore\", \"Errore nel caricamento delle domande\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSave = async () => {\n    if (!formData.question || !formData.answer) {\n      showError(\"Campi mancanti\", \"Riempire i campi obbligatori\")\n      return\n    }\n    \n    if (!user) {\n      showError(\"Non autorizzato\", \"Devi effettuare il login\")\n      return\n    }\n\n    try {\n      const token = await user.getIdToken()\n      const method = editingId ? \"PUT\" : \"POST\"\n      const url = editingId ? `/api/faq/${editingId}` : \"/api/faq\"\n\n      const res = await fetch(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(formData),\n      })\n\n      if (!res.ok) throw new Error(\"Failed to save\")\n\n      showSuccess(editingId ? \"Aggiornata\" : \"Creata\", editingId ? \"Domanda aggiornata con successo\" : \"Domanda creata con successo\")\n      resetForm()\n      loadFAQs()\n    } catch (error) {\n      showError(\"Errore\", \"Errore nel salvataggio della domanda\")\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm(\"Eliminare questa domanda?\")) return\n    \n    if (!user) {\n      showError(\"Non autorizzato\", \"Devi effettuare il login\")\n      return\n    }\n\n    try {\n      const token = await user.getIdToken()\n      const res = await fetch(`/api/faq/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (!res.ok) throw new Error(\"Failed to delete\")\n\n      showSuccess(\"Eliminata\", \"Domanda eliminata con successo\")\n      loadFAQs()\n    } catch (error) {\n      showError(\"Errore\", \"Errore nell'eliminazione della domanda\")\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      category: \"general\",\n      question: \"\",\n      answer: \"\",\n      published: true,\n      order: 0,\n    })\n    setEditingId(null)\n  }\n\n  const [showModal, setShowModal] = useState(false)\n\n  if (loading) return <div className=\"text-center py-8\">Caricamento...</div>\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold\">Domande Frequenti</h1>\n        <Dialog>\n          <DialogTrigger asChild>\n            <Button onClick={resetForm}>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Nuova Domanda\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>{editingId ? \"Modifica\" : \"Nuova\"} Domanda</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Select value={formData.category} onValueChange={(value) => setFormData({ ...formData, category: value })}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {CATEGORIES.map((cat) => (\n                    <SelectItem key={cat.value} value={cat.value}>\n                      {cat.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <Textarea\n                placeholder=\"Domanda\"\n                value={formData.question}\n                onChange={(e) => setFormData({ ...formData, question: e.target.value })}\n              />\n              <Textarea\n                placeholder=\"Risposta\"\n                value={formData.answer}\n                onChange={(e) => setFormData({ ...formData, answer: e.target.value })}\n                rows={5}\n              />\n              <Input\n                type=\"number\"\n                placeholder=\"Ordine\"\n                value={formData.order}\n                onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) })}\n              />\n              <Button onClick={handleSave} className=\"w-full\">\n                Salva\n              </Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {faqs.map((faq) => (\n          <Card key={faq.id}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start justify-between mb-2\">\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold\">{faq.question}</h3>\n                  <p className=\"text-xs text-muted-foreground mt-1 mb-2\">\n                    {CATEGORIES.find((c) => c.value === faq.category)?.label}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground line-clamp-2\">{faq.answer}</p>\n                </div>\n                <div className=\"flex gap-2 ml-4\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      setFormData(faq)\n                      setEditingId(faq.id)\n                    }}\n                  >\n                    <Edit className=\"w-4 h-4\" />\n                  </Button>\n                  <Button\n                    variant=\"destructive\"\n                    size=\"sm\"\n                    onClick={() => handleDelete(faq.id)}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n","size_bytes":6931},"scripts/seed-menu.js":{"content":"const { PrismaClient } = require('@prisma/client');\nconst prisma = new PrismaClient();\n\nasync function seedMenu() {\n  try {\n    // Main menu items\n    const menuItems = [\n      { label: \"Chi Siamo\", href: \"/about\", order: 1 },\n      { label: \"Viaggi\", href: \"/viaggi\", order: 2, description: \"Scopri i nostri tour\" },\n      { label: \"Esperienze\", href: \"/esperienze\", order: 3, description: \"Vivi esperienze autentiche\" },\n      { label: \"Servizi\", href: \"/servizi\", order: 4, description: \"Servizi professionali\" },\n      { label: \"Blog\", href: \"/blog\", order: 5 },\n      { label: \"Contatti\", href: \"/contatti\", order: 6 },\n    ];\n\n    for (const item of menuItems) {\n      const existing = await prisma.menuItem.findFirst({\n        where: { label: item.label }\n      });\n      \n      if (!existing) {\n        await prisma.menuItem.create({ data: item });\n        console.log(`‚úÖ Created menu item: ${item.label}`);\n      }\n    }\n\n    // Sample testimonials\n    const testimonials = [\n      {\n        name: \"Marco & Giulia\",\n        location: \"Milano, Italia\",\n        service: \"Tour Imperiali + Deserto\",\n        rating: 5,\n        comment: \"Un viaggio incredibile! Le guide locali ci hanno fatto scoprire il vero Marocco, lontano dai percorsi turistici. Il deserto √® stato magico.\",\n        order: 1,\n      },\n      {\n        name: \"Sarah Johnson\",\n        location: \"London, UK\",\n        service: \"Viaggio su Misura\",\n        rating: 5,\n        comment: \"Morocco Dreams ha organizzato tutto perfettamente. Dall'hammam tradizionale alle notti nel deserto, ogni momento √® stato autentico.\",\n        order: 2,\n      },\n      {\n        name: \"Pierre & Marie\",\n        location: \"Paris, France\",\n        service: \"Tour Gastronomico\",\n        rating: 5,\n        comment: \"L'esperienza culinaria √® stata fantastica! Abbiamo imparato a cucinare il tagine e il couscous con una famiglia berbera.\",\n        order: 3,\n      },\n    ];\n\n    for (const testimonial of testimonials) {\n      const existing = await prisma.testimonial.findFirst({\n        where: { name: testimonial.name }\n      });\n      \n      if (!existing) {\n        await prisma.testimonial.create({ data: testimonial });\n        console.log(`‚úÖ Created testimonial: ${testimonial.name}`);\n      }\n    }\n\n    // Sample FAQs\n    const faqs = [\n      {\n        category: \"general\",\n        question: \"Ho bisogno di un visto per visitare il Marocco?\",\n        answer: \"I cittadini italiani non hanno bisogno di visto per soggiorni turistici fino a 90 giorni. √à sufficiente un passaporto valido con almeno 6 mesi di validit√† residua.\",\n        order: 1,\n      },\n      {\n        category: \"general\",\n        question: \"Il Marocco √® sicuro per i turisti?\",\n        answer: \"S√¨, il Marocco √® generalmente molto sicuro per i turisti. Le nostre guide locali ti accompagneranno sempre e forniamo assistenza 24/7 durante tutto il viaggio.\",\n        order: 2,\n      },\n      {\n        category: \"general\",\n        question: \"Che tipo di alloggi offrite?\",\n        answer: \"Offriamo una vasta gamma di alloggi: dai riad tradizionali nella medina agli hotel di lusso, dai campi nel deserto alle guesthouse berbere in montagna.\",\n        order: 3,\n      },\n      {\n        category: \"general\",\n        question: \"Posso personalizzare il mio viaggio?\",\n        answer: \"Assolutamente! Tutti i nostri viaggi sono completamente personalizzabili. Puoi modificare l'itinerario, la durata, gli alloggi e le attivit√† secondo le tue preferenze.\",\n        order: 4,\n      },\n      {\n        category: \"general\",\n        question: \"Qual √® il periodo migliore per visitare il Marocco?\",\n        answer: \"Il Marocco si pu√≤ visitare tutto l'anno. Primavera (marzo-maggio) e autunno (settembre-novembre) sono ideali per il clima mite. L'inverno √® perfetto per il deserto, l'estate per la costa.\",\n        order: 5,\n      },\n      {\n        category: \"general\",\n        question: \"Cosa include il prezzo del viaggio?\",\n        answer: \"I nostri prezzi includono alloggi, trasporti privati, guide locali, alcune attivit√† e assistenza 24/7. Voli internazionali, pasti non specificati e spese personali sono esclusi.\",\n        order: 6,\n      },\n    ];\n\n    for (const faq of faqs) {\n      const existing = await prisma.fAQ.findFirst({\n        where: { question: faq.question }\n      });\n      \n      if (!existing) {\n        await prisma.fAQ.create({ data: faq });\n        console.log(`‚úÖ Created FAQ: ${faq.question.substring(0, 40)}...`);\n      }\n    }\n\n    console.log(\"\\nüéâ Seeding completed!\");\n    process.exit(0);\n  } catch (e) {\n    console.error(e);\n    process.exit(1);\n  }\n}\n\nseedMenu();\n","size_bytes":4644},"app/api/wishlist/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\n// Helper to verify user authentication\nasync function verifyAuth(request: NextRequest): Promise<{ uid: string } | null> {\n  try {\n    const authHeader = request.headers.get('authorization')\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      console.log('[WISHLIST AUTH] No auth header or invalid format')\n      return null\n    }\n\n    const idToken = authHeader.replace('Bearer ', '')\n    console.log('[WISHLIST AUTH] Verifying token...')\n    const verification = await verifyFirebaseToken(idToken)\n    \n    if (!verification) {\n      console.error('[WISHLIST AUTH] Token verification returned null')\n    } else {\n      console.log('[WISHLIST AUTH] Token verified for user:', verification.uid)\n    }\n    \n    return verification\n  } catch (error) {\n    console.error('[WISHLIST AUTH] Auth verification error:', error)\n    return null\n  }\n}\n\n// GET - Get user's wishlist items (authenticated)\nexport async function GET(request: NextRequest) {\n  try {\n    const authUser = await verifyAuth(request)\n    if (!authUser) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const wishlistItems = await db.wishlist.findMany({\n      where: { userId: authUser.uid },\n      orderBy: { createdAt: 'desc' }\n    })\n\n    return NextResponse.json({ wishlist: wishlistItems }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching wishlist:', error)\n    return NextResponse.json({ error: 'Failed to fetch wishlist' }, { status: 500 })\n  }\n}\n\n// POST - Add item to wishlist (authenticated)\nexport async function POST(request: NextRequest) {\n  try {\n    const authUser = await verifyAuth(request)\n    if (!authUser) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { itemType, itemId, itemData } = body\n\n    if (!itemType || !itemId) {\n      return NextResponse.json(\n        { error: 'itemType and itemId are required' },\n        { status: 400 }\n      )\n    }\n\n    // Check if item already in wishlist\n    const existing = await db.wishlist.findUnique({\n      where: {\n        userId_itemType_itemId: {\n          userId: authUser.uid,\n          itemType,\n          itemId\n        }\n      }\n    })\n\n    if (existing) {\n      return NextResponse.json(\n        { message: 'Item already in wishlist', wishlistItem: existing },\n        { status: 200 }\n      )\n    }\n\n    // Add to wishlist\n    const wishlistItem = await db.wishlist.create({\n      data: {\n        userId: authUser.uid,\n        itemType,\n        itemId,\n        itemData: itemData || {}\n      }\n    })\n\n    return NextResponse.json({ wishlistItem }, { status: 201 })\n  } catch (error) {\n    console.error('Error adding to wishlist:', error)\n    return NextResponse.json({ error: 'Failed to add to wishlist' }, { status: 500 })\n  }\n}\n\n// DELETE - Remove item from wishlist (authenticated)\nexport async function DELETE(request: NextRequest) {\n  try {\n    const authUser = await verifyAuth(request)\n    if (!authUser) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const itemType = searchParams.get('itemType')\n    const itemId = searchParams.get('itemId')\n\n    if (!itemType || !itemId) {\n      return NextResponse.json(\n        { error: 'itemType and itemId are required' },\n        { status: 400 }\n      )\n    }\n\n    await db.wishlist.delete({\n      where: {\n        userId_itemType_itemId: {\n          userId: authUser.uid,\n          itemType,\n          itemId\n        }\n      }\n    })\n\n    return NextResponse.json({ message: 'Item removed from wishlist' }, { status: 200 })\n  } catch (error) {\n    console.error('Error removing from wishlist:', error)\n    return NextResponse.json({ error: 'Failed to remove from wishlist' }, { status: 500 })\n  }\n}\n","size_bytes":4026},"lib/user-auth-server.ts":{"content":"// Server-side user authentication helper\n// Validates Firebase ID tokens without requiring admin privileges\n\nimport { getAuth } from 'firebase-admin/auth'\nimport { initializeApp, cert, getApps, App } from 'firebase-admin/app'\nimport { formatPrivateKey } from './firebase-admin'\n\nlet adminApp: App | null = null\n\nexport function getFirebaseAdminApp(): App | null {\n  if (adminApp) return adminApp\n  \n  if (getApps().length > 0) {\n    adminApp = getApps()[0]\n    return adminApp\n  }\n  \n  try {\n    const privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY)\n    const clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL\n    const projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID\n    \n    if (!privateKey || !clientEmail || !projectId) {\n      console.error('Firebase Admin credentials missing for user auth')\n      return null\n    }\n    \n    adminApp = initializeApp({\n      credential: cert({\n        projectId,\n        clientEmail,\n        privateKey,\n      })\n    })\n    \n    return adminApp\n  } catch (error) {\n    console.error('Failed to initialize Firebase Admin for user auth:', error)\n    return null\n  }\n}\n\n/**\n * Verify Firebase ID token and extract user ID\n * Returns null if verification fails\n */\nexport async function verifyFirebaseToken(idToken: string): Promise<{ uid: string } | null> {\n  try {\n    console.log('[USER_AUTH] Getting Firebase Admin app...')\n    const app = getFirebaseAdminApp()\n    if (!app) {\n      console.error('[USER_AUTH] Firebase Admin not initialized - check credentials')\n      return null\n    }\n    \n    console.log('[USER_AUTH] Firebase Admin app OK, getting auth...')\n    const auth = getAuth(app)\n    console.log('[USER_AUTH] Verifying ID token...')\n    const decodedToken = await auth.verifyIdToken(idToken)\n    console.log('[USER_AUTH] Token verified successfully for UID:', decodedToken.uid)\n    \n    return { uid: decodedToken.uid }\n  } catch (error) {\n    console.error('[USER_AUTH] Token verification failed:', error)\n    return null\n  }\n}\n","size_bytes":2016},"app/api/stats/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const [\n      experiencesTotal,\n      experiencesPublished,\n      travelsTotal,\n      travelsPublished,\n      vehiclesTotal,\n      vehiclesPublished,\n      usersTotal\n    ] = await Promise.all([\n      db.experience.count(),\n      db.experience.count({ where: { published: true } }),\n      db.travel.count(),\n      db.travel.count({ where: { published: true } }),\n      db.vehicle.count(),\n      db.vehicle.count({ where: { published: true } }),\n      db.user.count()\n    ])\n\n    const stats = {\n      experiences: {\n        total: experiencesTotal,\n        published: experiencesPublished\n      },\n      travels: {\n        total: travelsTotal,\n        published: travelsPublished\n      },\n      vehicles: {\n        total: vehiclesTotal,\n        published: vehiclesPublished\n      },\n      users: {\n        total: usersTotal\n      }\n    }\n\n    return NextResponse.json({ stats }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching stats:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch statistics' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1266},"app/api/bookings/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\nimport { isAdmin } from '@/lib/auth-helpers'\n\nexport const dynamic = 'force-dynamic'\n\n// Helper to verify user authentication\nasync function verifyAuth(request: NextRequest): Promise<{ uid: string } | null> {\n  try {\n    const authHeader = request.headers.get('authorization')\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      console.log('[BOOKINGS AUTH] No auth header or invalid format')\n      return null\n    }\n\n    const idToken = authHeader.replace('Bearer ', '')\n    console.log('[BOOKINGS AUTH] Verifying token...')\n    const verification = await verifyFirebaseToken(idToken)\n    \n    if (!verification) {\n      console.error('[BOOKINGS AUTH] Token verification returned null')\n    } else {\n      console.log('[BOOKINGS AUTH] Token verified for user:', verification.uid)\n    }\n    \n    return verification\n  } catch (error) {\n    console.error('[BOOKINGS AUTH] Auth verification error:', error)\n    return null\n  }\n}\n\n// GET - Get user's bookings list (authenticated)\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const adminAccess = await isAdmin(request.headers.get('authorization'))\n\n    if (!adminAccess) {\n      const authUser = await verifyAuth(request)\n      if (!authUser) {\n        return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n      }\n\n      const status = searchParams.get('status')\n      const limit = searchParams.get('limit')\n      const offset = searchParams.get('offset')\n\n      // Build where clause - CRITICAL: Use userId from verified token\n      const where: any = { userId: authUser.uid }\n      if (status) {\n        where.status = status\n      }\n\n      // Get total count\n      const total = await db.booking.count({ where })\n\n      // Get bookings with pagination\n      const bookings = await db.booking.findMany({\n        where,\n        orderBy: { createdAt: 'desc' },\n        take: limit ? parseInt(limit) : undefined,\n        skip: offset ? parseInt(offset) : undefined\n      })\n\n      return NextResponse.json({ bookings, total }, { status: 200 })\n    }\n\n    // Admin access - get all bookings\n    const status = searchParams.get('status')\n    const limit = searchParams.get('limit')\n    const offset = searchParams.get('offset')\n\n    const where: any = {}\n    if (status) {\n      where.status = status\n    }\n\n    const total = await db.booking.count({ where })\n\n    const bookings = await db.booking.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n      take: limit ? parseInt(limit) : undefined,\n      skip: offset ? parseInt(offset) : undefined\n    })\n\n    return NextResponse.json({ bookings, total }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching bookings:', error)\n    return NextResponse.json({ error: 'Failed to fetch bookings' }, { status: 500 })\n  }\n}\n\n// POST - Create new booking (authenticated)\nexport async function POST(request: NextRequest) {\n  try {\n    const authUser = await verifyAuth(request)\n    if (!authUser) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const {\n      bookingType,\n      itemId,\n      startDate,\n      endDate,\n      travelers,\n      totalPrice,\n      currency,\n      customerInfo,\n      notes\n    } = body\n\n    // Validate required fields\n    if (!bookingType || !itemId) {\n      return NextResponse.json(\n        { error: 'bookingType and itemId are required' },\n        { status: 400 }\n      )\n    }\n\n    // Validate bookingType\n    const validTypes = ['experience', 'travel', 'vehicle']\n    if (!validTypes.includes(bookingType)) {\n      return NextResponse.json(\n        { error: `bookingType must be one of: ${validTypes.join(', ')}` },\n        { status: 400 }\n      )\n    }\n\n    // Validate itemId exists in ContentItem with matching type\n    const contentItem = await db.contentItem.findUnique({\n      where: { id: itemId }\n    })\n\n    if (!contentItem) {\n      return NextResponse.json(\n        { error: 'Item not found' },\n        { status: 404 }\n      )\n    }\n\n    // Verify content type matches booking type\n    if (contentItem.type !== bookingType) {\n      return NextResponse.json(\n        { error: `Item type (${contentItem.type}) does not match booking type (${bookingType})` },\n        { status: 400 }\n      )\n    }\n\n    // Check if item is bookable\n    if (!contentItem.bookable) {\n      return NextResponse.json(\n        { error: 'This item is not available for booking' },\n        { status: 400 }\n      )\n    }\n\n    // Create booking\n    const booking = await db.booking.create({\n      data: {\n        userId: authUser.uid,\n        bookingType,\n        itemId,\n        itemData: {\n          title: contentItem.title,\n          slug: contentItem.slug,\n          image: contentItem.image,\n          price: contentItem.price\n        },\n        startDate: startDate ? new Date(startDate) : null,\n        endDate: endDate ? new Date(endDate) : null,\n        travelers: travelers || null,\n        totalPrice: totalPrice || contentItem.price || null,\n        currency: currency || 'EUR',\n        customerInfo: customerInfo || {},\n        status: 'pending',\n        paymentStatus: 'pending',\n        notes: notes || null\n      }\n    })\n\n    return NextResponse.json({ booking }, { status: 201 })\n  } catch (error) {\n    console.error('Error creating booking:', error)\n    return NextResponse.json({ error: 'Failed to create booking' }, { status: 500 })\n  }\n}\n","size_bytes":5618},"components/ui/error-message.tsx":{"content":"interface ErrorMessageProps {\n  error: Error\n  retry?: () => void\n}\n\nexport function ErrorMessage({ error, retry }: ErrorMessageProps) {\n  return (\n    <div className=\"text-center py-12\">\n      <div className=\"mb-4\">\n        <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/20 mb-4\">\n          <svg\n            className=\"w-8 h-8 text-red-600 dark:text-red-400\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          </svg>\n        </div>\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n          Si √® verificato un errore\n        </h3>\n        <p className=\"text-red-600 dark:text-red-400 mb-4\">{error.message}</p>\n      </div>\n      {retry && (\n        <button\n          onClick={retry}\n          className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold\"\n        >\n          Riprova\n        </button>\n      )}\n    </div>\n  )\n}\n","size_bytes":1293},"app/api/content/[id]/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\nimport { isValidContentType, VALID_CONTENT_TYPES } from \"@/lib/validators/content\"\nimport { isAdmin } from \"@/lib/auth-helpers\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function PUT(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  console.log('[PUT-CONTENT-ID] Request received for ID:', params.id)\n  console.log('[PUT-CONTENT-ID] Auth header:', req.headers.get(\"authorization\") ? \"Present\" : \"Missing\")\n  \n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  \n  console.log('[PUT-CONTENT-ID] isAdmin result:', isAdminUser)\n  \n  if (!isAdminUser) {\n    console.error('[PUT-CONTENT-ID] Admin check failed, returning 403')\n    return Response.json({ error: \"Missing or insufficient permissions.\" }, { status: 403 })\n  }\n\n  try {\n    const { id } = params\n    const body = await req.json()\n    const { slug, ...rest } = body\n\n    if (body.type && !isValidContentType(body.type)) {\n      return Response.json(\n        { error: `Invalid type. Must be one of: ${VALID_CONTENT_TYPES.join(\", \")}` },\n        { status: 400 }\n      )\n    }\n\n    const existingItem = await db.contentItem.findUnique({\n      where: { id }\n    })\n\n    if (!existingItem) {\n      return Response.json(\n        { error: \"Content item not found\" },\n        { status: 404 }\n      )\n    }\n\n    if (slug && slug !== existingItem.slug) {\n      const slugExists = await db.contentItem.findUnique({\n        where: { slug }\n      })\n\n      if (slugExists) {\n        return Response.json(\n          { error: \"A content item with this slug already exists\" },\n          { status: 400 }\n        )\n      }\n    }\n\n    const updateData: any = { ...rest }\n    if (slug) {\n      updateData.slug = slug\n    }\n\n    const updatedItem = await db.contentItem.update({\n      where: { id },\n      data: updateData\n    })\n\n    revalidateTag(\"content\")\n    revalidateTag(`content-${updatedItem.type}`)\n\n    return Response.json(updatedItem)\n  } catch (error) {\n    console.error(\"Error updating content:\", error)\n    return Response.json(\n      { error: \"Failed to update content\" },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  console.log('[DELETE-CONTENT-ID] Request received for ID:', params.id)\n  \n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  \n  console.log('[DELETE-CONTENT-ID] isAdmin result:', isAdminUser)\n  \n  if (!isAdminUser) {\n    console.error('[DELETE-CONTENT-ID] Admin check failed, returning 403')\n    return Response.json({ error: \"Missing or insufficient permissions.\" }, { status: 403 })\n  }\n\n  try {\n    const { id } = params\n\n    const existingItem = await db.contentItem.findUnique({\n      where: { id }\n    })\n\n    if (!existingItem) {\n      return Response.json(\n        { error: \"Content item not found\" },\n        { status: 404 }\n      )\n    }\n\n    await db.contentItem.update({\n      where: { id },\n      data: { published: false }\n    })\n\n    revalidateTag(\"content\")\n    revalidateTag(`content-${existingItem.type}`)\n\n    return Response.json({ success: true, id })\n  } catch (error) {\n    console.error(\"Error deleting content:\", error)\n    return Response.json(\n      { error: \"Failed to delete content\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":3395},"components/dashboard/SharedCollections.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Share2, Loader2, ChevronDown } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotifications } from '@/components/NotificationSystem';\nimport { TravelCard } from '@/components/cards/TravelCard';\nimport { ExperienceCard } from '@/components/cards/ExperienceCard';\nimport { VehicleCard } from '@/components/cards/VehicleCard';\n\ninterface Friend {\n  friendId: string;\n  friendName: string;\n  friendEmail: string;\n}\n\ninterface WishlistItem {\n  id: string;\n  itemType: 'travel' | 'experience' | 'vehicle' | 'city' | 'activity' | 'service';\n  itemId: string;\n  itemData: any;\n  addedAt: string;\n}\n\nexport default function SharedCollections() {\n  const { user } = useAuth();\n  const { showError } = useNotifications();\n  const [friends, setFriends] = useState<Friend[]>([]);\n  const [selectedFriendId, setSelectedFriendId] = useState<string>('');\n  const [wishlistItems, setWishlistItems] = useState<WishlistItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingWishlist, setLoadingWishlist] = useState(false);\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n\n  useEffect(() => {\n    if (user) {\n      fetchFriends();\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (selectedFriendId) {\n      fetchFriendWishlist(selectedFriendId);\n    } else {\n      setWishlistItems([]);\n    }\n  }, [selectedFriendId]);\n\n  const getAuthHeaders = async (): Promise<HeadersInit> => {\n    const headers = new Headers();\n    headers.set('Content-Type', 'application/json');\n    \n    if (!user) return headers;\n    \n    try {\n      const token = await (user as any).getIdToken();\n      headers.set('Authorization', `Bearer ${token}`);\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n    }\n    \n    return headers;\n  };\n\n  const fetchFriends = async () => {\n    setLoading(true);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch('/api/friends', { headers });\n      \n      if (response.ok) {\n        const data = await response.json();\n        const friendsList = data.friends || [];\n        setFriends(friendsList);\n        \n        if (friendsList.length > 0 && !selectedFriendId) {\n          setSelectedFriendId(friendsList[0].friendId);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching friends:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFriendWishlist = async (friendId: string) => {\n    setLoadingWishlist(true);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`/api/friends/shared/wishlist/${friendId}`, { headers });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setWishlistItems(data.wishlist || []);\n      } else {\n        setWishlistItems([]);\n      }\n    } catch (error) {\n      console.error('Error fetching friend wishlist:', error);\n      showError(\n        'Errore',\n        'Impossibile caricare la wishlist dell\\'amico.'\n      );\n      setWishlistItems([]);\n    } finally {\n      setLoadingWishlist(false);\n    }\n  };\n\n  const selectedFriend = friends.find(f => f.friendId === selectedFriendId);\n\n  const renderWishlistItem = (item: WishlistItem) => {\n    const itemData = item.itemData || {};\n    \n    switch (item.itemType) {\n      case 'travel':\n        return (\n          <div key={item.id} className=\"relative\">\n            <div className=\"absolute top-4 left-4 z-10 bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-semibold\">\n              Read-only\n            </div>\n            <TravelCard\n              id={item.itemId}\n              image={itemData.image || itemData.images?.[0] || '/placeholder.svg'}\n              title={itemData.title || 'Titolo non disponibile'}\n              description={itemData.description}\n              price={itemData.price}\n              duration={itemData.duration}\n              rating={itemData.rating}\n              location={itemData.location}\n              ctas={[]}\n            />\n          </div>\n        );\n      \n      case 'experience':\n        return (\n          <div key={item.id} className=\"relative\">\n            <div className=\"absolute top-4 left-4 z-10 bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-semibold\">\n              Read-only\n            </div>\n            <ExperienceCard\n              id={item.itemId}\n              image={itemData.image || itemData.images?.[0] || '/placeholder.svg'}\n              title={itemData.title || 'Titolo non disponibile'}\n              description={itemData.description}\n              price={itemData.price}\n              duration={itemData.duration}\n              difficulty={itemData.difficulty}\n              ctas={[]}\n            />\n          </div>\n        );\n      \n      case 'vehicle':\n        return (\n          <div key={item.id} className=\"relative\">\n            <div className=\"absolute top-4 left-4 z-10 bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-semibold\">\n              Read-only\n            </div>\n            <VehicleCard\n              id={item.itemId}\n              image={itemData.image || itemData.images?.[0] || '/placeholder.svg'}\n              title={itemData.title || 'Titolo non disponibile'}\n              description={itemData.description}\n              pricePerDay={itemData.price || itemData.pricePerDay}\n              seats={itemData.seats}\n              transmission={itemData.transmission}\n              ctas={[]}\n            />\n          </div>\n        );\n      \n      default:\n        return (\n          <div key={item.id} className=\"p-6 bg-card border-2 border-border rounded-2xl\">\n            <div className=\"mb-2 bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-semibold inline-block\">\n              Read-only\n            </div>\n            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-2\">\n              {itemData.title || 'Elemento Wishlist'}\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400 text-sm\">\n              {itemData.description || 'Nessuna descrizione disponibile'}\n            </p>\n          </div>\n        );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-card border-2 border-border rounded-2xl p-6 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  if (friends.length === 0) {\n    return (\n      <div className=\"bg-card border-2 border-border rounded-2xl p-6 lg:p-8\">\n        <div className=\"text-center py-12\">\n          <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Share2 className=\"w-8 h-8 text-gray-400 dark:text-gray-600\" />\n          </div>\n          <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-2\">\n            Nessun Amico\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Aggiungi degli amici per vedere le loro wishlist condivise\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-card border-2 border-border rounded-2xl p-6 lg:p-8\">\n        <div className=\"flex items-start justify-between mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n              Wishlist Condivise\n            </h2>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              Esplora le wishlist dei tuoi amici\n            </p>\n          </div>\n          <div className=\"w-12 h-12 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center\">\n            <Share2 className=\"w-6 h-6 text-indigo-600 dark:text-indigo-400\" />\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n            Seleziona Amico\n          </label>\n          <div className=\"relative\">\n            <button\n              onClick={() => setDropdownOpen(!dropdownOpen)}\n              className=\"w-full flex items-center justify-between px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white hover:border-orange-300 dark:hover:border-orange-700 transition-all\"\n            >\n              <span className=\"truncate\">\n                {selectedFriend ? selectedFriend.friendName : 'Seleziona un amico'}\n              </span>\n              <ChevronDown className={`w-5 h-5 transition-transform ${dropdownOpen ? 'rotate-180' : ''}`} />\n            </button>\n\n            {dropdownOpen && (\n              <div className=\"absolute z-10 w-full mt-2 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl shadow-lg max-h-60 overflow-y-auto\">\n                {friends.map((friend) => (\n                  <button\n                    key={friend.friendId}\n                    onClick={() => {\n                      setSelectedFriendId(friend.friendId);\n                      setDropdownOpen(false);\n                    }}\n                    className={`w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${\n                      selectedFriendId === friend.friendId ? 'bg-orange-50 dark:bg-orange-900/20' : ''\n                    }`}\n                  >\n                    <div className=\"font-medium text-gray-900 dark:text-white\">\n                      {friend.friendName}\n                    </div>\n                    <div className=\"text-sm text-gray-600 dark:text-gray-400 truncate\">\n                      {friend.friendEmail}\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {loadingWishlist ? (\n        <div className=\"bg-card border-2 border-border rounded-2xl p-12 flex items-center justify-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n        </div>\n      ) : wishlistItems.length === 0 ? (\n        <div className=\"bg-card border-2 border-border rounded-2xl p-12\">\n          <div className=\"text-center\">\n            <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Share2 className=\"w-8 h-8 text-gray-400 dark:text-gray-600\" />\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-2\">\n              Wishlist Vuota\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {selectedFriend?.friendName} non ha ancora aggiunto elementi alla wishlist\n            </p>\n          </div>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {wishlistItems.map(renderWishlistItem)}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":10989},"components/ui/loading-skeleton.tsx":{"content":"export function LoadingSkeleton({ count = 6 }: { count?: number }) {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n      {Array.from({ length: count }).map((_, i) => (\n        <div key={i} className=\"animate-pulse\">\n          <div className=\"bg-gray-200 dark:bg-gray-700 h-48 rounded-lg mb-4\" />\n          <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2\" />\n          <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2\" />\n        </div>\n      ))}\n    </div>\n  )\n}\n","size_bytes":537},"components/ui/BaseCard.tsx":{"content":"import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface BaseCardProps extends React.ComponentProps<'div'> {\n  children: React.ReactNode\n  className?: string\n  onClick?: () => void\n}\n\nexport function BaseCard({ children, className, onClick, ...props }: BaseCardProps) {\n  return (\n    <div\n      className={cn(\n        'bg-white dark:bg-gray-900 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 border border-gray-200/60 dark:border-gray-800 overflow-hidden',\n        onClick && 'cursor-pointer',\n        className\n      )}\n      onClick={onClick}\n      {...props}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport default BaseCard\n","size_bytes":673},"app/api/friends/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n\n    const friendships = await db.friendship.findMany({\n      where: {\n        OR: [\n          { senderId: userId, status: 'accepted' },\n          { receiverId: userId, status: 'accepted' }\n        ]\n      },\n      include: {\n        sender: {\n          select: {\n            id: true,\n            name: true,\n            email: true,\n            photoURL: true\n          }\n        },\n        receiver: {\n          select: {\n            id: true,\n            name: true,\n            email: true,\n            photoURL: true\n          }\n        }\n      },\n      orderBy: {\n        acceptedAt: 'desc'\n      }\n    })\n\n    const formattedFriends = friendships.map(fs => ({\n      friendshipId: fs.id,\n      friendId: fs.senderId === userId ? fs.receiverId : fs.senderId,\n      friend: {\n        id: fs.senderId === userId ? fs.receiver.id : fs.sender.id,\n        name: fs.senderId === userId ? fs.receiver.name : fs.sender.name,\n        email: fs.senderId === userId ? fs.receiver.email : fs.sender.email,\n        photoURL: fs.senderId === userId ? fs.receiver.photoURL : fs.sender.photoURL\n      },\n      acceptedAt: fs.acceptedAt\n    }))\n\n    return NextResponse.json({ friends: formattedFriends }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching friends:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch friends' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1943},"app/api/bookings/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\nimport { isAdmin } from '@/lib/auth-helpers'\n\nexport const dynamic = 'force-dynamic'\n\n// Helper to verify user authentication\nasync function verifyAuth(request: NextRequest): Promise<{ uid: string } | null> {\n  try {\n    const authHeader = request.headers.get('authorization')\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      console.log('[BOOKINGS AUTH] No auth header or invalid format')\n      return null\n    }\n\n    const idToken = authHeader.replace('Bearer ', '')\n    console.log('[BOOKINGS AUTH] Verifying token...')\n    const verification = await verifyFirebaseToken(idToken)\n    \n    if (!verification) {\n      console.error('[BOOKINGS AUTH] Token verification returned null')\n    } else {\n      console.log('[BOOKINGS AUTH] Token verified for user:', verification.uid)\n    }\n    \n    return verification\n  } catch (error) {\n    console.error('[BOOKINGS AUTH] Auth verification error:', error)\n    return null\n  }\n}\n\n// GET - Get single booking details (authenticated, owner only)\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const authUser = await verifyAuth(request)\n    if (!authUser) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const booking = await db.booking.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!booking) {\n      return NextResponse.json({ error: 'Booking not found' }, { status: 404 })\n    }\n\n    // Verify user owns this booking (or is admin)\n    const admin = await isAdmin(request.headers.get('authorization'))\n    if (booking.userId !== authUser.uid && !admin) {\n      return NextResponse.json({ error: 'Forbidden' }, { status: 403 })\n    }\n\n    return NextResponse.json({ booking }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching booking:', error)\n    return NextResponse.json({ error: 'Failed to fetch booking' }, { status: 500 })\n  }\n}\n\n// PUT - Update booking status (authenticated, owner or admin)\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const authUser = await verifyAuth(request)\n    if (!authUser) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const booking = await db.booking.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!booking) {\n      return NextResponse.json({ error: 'Booking not found' }, { status: 404 })\n    }\n\n    // Verify user owns this booking or is admin\n    const admin = await isAdmin(request.headers.get('authorization'))\n    if (booking.userId !== authUser.uid && !admin) {\n      return NextResponse.json({ error: 'Forbidden' }, { status: 403 })\n    }\n\n    const body = await request.json()\n    const { status, paymentStatus, notes, totalPrice, startDate, endDate, travelers } = body\n\n    // Users can only update certain fields, admins can update all\n    const updateData: any = {}\n    \n    if (admin) {\n      // Admins can update any field\n      if (status !== undefined) updateData.status = status\n      if (paymentStatus !== undefined) updateData.paymentStatus = paymentStatus\n      if (notes !== undefined) updateData.notes = notes\n      if (totalPrice !== undefined) updateData.totalPrice = totalPrice\n      if (startDate !== undefined) updateData.startDate = new Date(startDate)\n      if (endDate !== undefined) updateData.endDate = new Date(endDate)\n      if (travelers !== undefined) updateData.travelers = travelers\n    } else {\n      // Regular users can only update limited fields\n      if (notes !== undefined) updateData.notes = notes\n      // Users can cancel their own bookings\n      if (status === 'cancelled') updateData.status = 'cancelled'\n    }\n\n    const updatedBooking = await db.booking.update({\n      where: { id: params.id },\n      data: updateData\n    })\n\n    return NextResponse.json({ booking: updatedBooking }, { status: 200 })\n  } catch (error) {\n    console.error('Error updating booking:', error)\n    return NextResponse.json({ error: 'Failed to update booking' }, { status: 500 })\n  }\n}\n\n// DELETE - Cancel booking (authenticated, owner or admin)\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const authUser = await verifyAuth(request)\n    if (!authUser) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const booking = await db.booking.findUnique({\n      where: { id: params.id }\n    })\n\n    if (!booking) {\n      return NextResponse.json({ error: 'Booking not found' }, { status: 404 })\n    }\n\n    // Verify user owns this booking or is admin\n    const admin = await isAdmin(request.headers.get('authorization'))\n    if (booking.userId !== authUser.uid && !admin) {\n      return NextResponse.json({ error: 'Forbidden' }, { status: 403 })\n    }\n\n    // Soft delete - set status to cancelled instead of deleting\n    await db.booking.update({\n      where: { id: params.id },\n      data: { \n        status: 'cancelled',\n        updatedAt: new Date()\n      }\n    })\n\n    return NextResponse.json(\n      { success: true, id: params.id, message: 'Booking cancelled' },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('Error cancelling booking:', error)\n    return NextResponse.json({ error: 'Failed to cancel booking' }, { status: 500 })\n  }\n}\n","size_bytes":5484},"components/dashboard/FriendRequests.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Check, X, Loader2, UserCheck, Mail } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotifications } from '@/components/NotificationSystem';\nimport { formatDistanceToNow } from 'date-fns';\nimport { it } from 'date-fns/locale';\n\ninterface FriendRequest {\n  id: string;\n  requesterId: string;\n  requesterName: string;\n  requesterEmail: string;\n  requesterAvatar?: string;\n  createdAt: string;\n}\n\nexport default function FriendRequests() {\n  const { user } = useAuth();\n  const { showSuccess, showError } = useNotifications();\n  const [requests, setRequests] = useState<FriendRequest[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [processingId, setProcessingId] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (user) {\n      fetchRequests();\n    }\n  }, [user]);\n\n  const getAuthHeaders = async (): Promise<HeadersInit> => {\n    const headers = new Headers();\n    headers.set('Content-Type', 'application/json');\n    \n    if (!user) return headers;\n    \n    try {\n      const token = await (user as any).getIdToken();\n      headers.set('Authorization', `Bearer ${token}`);\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n    }\n    \n    return headers;\n  };\n\n  const fetchRequests = async () => {\n    setLoading(true);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch('/api/friends/requests', { headers });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setRequests(data.requests || []);\n      }\n    } catch (error) {\n      console.error('Error fetching friend requests:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAccept = async (friendshipId: string) => {\n    setProcessingId(friendshipId);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`/api/friends/accept/${friendshipId}`, {\n        method: 'POST',\n        headers\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to accept request');\n      }\n\n      showSuccess(\n        'Richiesta Accettata!',\n        'Ora siete amici! Potete vedere le vostre wishlist condivise.'\n      );\n      \n      await fetchRequests();\n    } catch (error) {\n      console.error('Error accepting friend request:', error);\n      showError(\n        'Errore',\n        'Si √® verificato un errore durante l\\'accettazione della richiesta.'\n      );\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  const handleReject = async (friendshipId: string) => {\n    setProcessingId(friendshipId);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`/api/friends/reject/${friendshipId}`, {\n        method: 'POST',\n        headers\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to reject request');\n      }\n\n      showSuccess(\n        'Richiesta Rifiutata',\n        'La richiesta di amicizia √® stata rifiutata.'\n      );\n      \n      await fetchRequests();\n    } catch (error) {\n      console.error('Error rejecting friend request:', error);\n      showError(\n        'Errore',\n        'Si √® verificato un errore durante il rifiuto della richiesta.'\n      );\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-card border-2 border-border rounded-2xl p-6 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-card border-2 border-border rounded-2xl p-6 lg:p-8 hover:shadow-xl transition-all\">\n      <div className=\"flex items-start justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Richieste di Amicizia\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            {requests.length > 0\n              ? `Hai ${requests.length} ${requests.length === 1 ? 'richiesta in attesa' : 'richieste in attesa'}`\n              : 'Nessuna richiesta pending'}\n          </p>\n        </div>\n        <div className=\"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center\">\n          <UserCheck className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\n        </div>\n      </div>\n\n      {requests.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <UserCheck className=\"w-8 h-8 text-gray-400 dark:text-gray-600\" />\n          </div>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Al momento non hai richieste di amicizia\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {requests.map((request) => (\n            <div\n              key={request.id}\n              className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-orange-300 dark:hover:border-orange-700 transition-all\"\n            >\n              <div className=\"flex items-center gap-4 flex-1\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white text-lg font-semibold flex-shrink-0\">\n                  {request.requesterName?.charAt(0)?.toUpperCase() || request.requesterEmail?.charAt(0)?.toUpperCase()}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"font-semibold text-gray-900 dark:text-white truncate\">\n                    {request.requesterName || 'Utente'}\n                  </h3>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\n                    <Mail className=\"w-3 h-3\" />\n                    <span className=\"truncate\">{request.requesterEmail}</span>\n                  </div>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\n                    {formatDistanceToNow(new Date(request.createdAt), {\n                      addSuffix: true,\n                      locale: it\n                    })}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-2 ml-4\">\n                <button\n                  onClick={() => handleAccept(request.id)}\n                  disabled={processingId === request.id}\n                  className=\"p-2 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title=\"Accetta\"\n                >\n                  {processingId === request.id ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Check className=\"w-5 h-5\" />\n                  )}\n                </button>\n                <button\n                  onClick={() => handleReject(request.id)}\n                  disabled={processingId === request.id}\n                  className=\"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title=\"Rifiuta\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":7668},"components/cards/ServiceCard.tsx":{"content":"import * as React from 'react'\nimport Link from 'next/link'\nimport { MapPin, ArrowRight } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { ServiceCardProps } from '@/lib/types/cards'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { CardBadge } from '@/components/ui/CardBadge'\n\nexport function ServiceCard({\n  id,\n  image,\n  title,\n  description,\n  icon: Icon,\n  price,\n  priceType = 'per_person',\n  locations = [],\n  badges = [],\n  ctas = [],\n  className,\n  onClick,\n}: ServiceCardProps) {\n  const imageUrl = Array.isArray(image) ? image[0] : image\n\n  const priceTypeLabels = {\n    per_person: 'a persona',\n    per_day: 'al giorno',\n    per_trip: 'per viaggio',\n    fixed: 'fisso',\n  }\n\n  const formatPrice = () => {\n    if (typeof price === 'string') return price\n    if (price === undefined) return 'Su richiesta'\n    return `‚Ç¨${price} ${priceTypeLabels[priceType]}`\n  }\n\n  return (\n    <Card \n      className={cn(\n        'group hover:shadow-2xl transition-all duration-300 border-border hover:border-orange-200 dark:hover:border-orange-800 cursor-pointer',\n        className\n      )} \n      onClick={onClick}\n    >\n      <CardHeader className=\"pb-4\">\n        {Icon && (\n          <div className=\"w-14 h-14 rounded-xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n            <Icon className=\"w-7 h-7 text-orange-600 dark:text-orange-400\" />\n          </div>\n        )}\n        \n        {badges.length > 0 && (\n          <div className=\"flex flex-wrap gap-2 mb-3\">\n            {badges.map((badge, idx) => (\n              <CardBadge key={idx} label={badge.label} variant={badge.variant} />\n            ))}\n          </div>\n        )}\n        \n        <CardTitle className=\"text-xl font-bold text-foreground group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">\n          {title}\n        </CardTitle>\n        \n        {description && (\n          <CardDescription className=\"text-muted-foreground mt-2\">\n            {description}\n          </CardDescription>\n        )}\n      </CardHeader>\n\n      <CardContent className=\"pt-0 space-y-4\">\n        {imageUrl && (\n          <div className=\"relative aspect-video rounded-lg overflow-hidden\">\n            <img\n              src={imageUrl}\n              alt={title}\n              className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n            />\n          </div>\n        )}\n\n        <div className=\"space-y-3\">\n          {price !== undefined && (\n            <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\">\n              <span className=\"text-sm font-medium text-muted-foreground\">Prezzo</span>\n              <span className=\"font-bold text-lg text-foreground\">{formatPrice()}</span>\n            </div>\n          )}\n\n          {locations.length > 0 && (\n            <div>\n              <p className=\"text-sm font-semibold text-foreground mb-2 flex items-center gap-1\">\n                <MapPin className=\"w-4 h-4\" />\n                Localit√† disponibili:\n              </p>\n              <div className=\"flex flex-wrap gap-2\">\n                {locations.slice(0, 3).map((location, idx) => (\n                  <span\n                    key={idx}\n                    className=\"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium\"\n                  >\n                    {location}\n                  </span>\n                ))}\n                {locations.length > 3 && (\n                  <span className=\"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium\">\n                    +{locations.length - 3} altre\n                  </span>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {ctas.length > 0 && (\n          <div className=\"flex gap-3 pt-2\">\n            {ctas.map((cta, idx) => {\n              const isPrimary = cta.variant === 'primary'\n              const content = (\n                <>\n                  {cta.icon && <cta.icon className=\"w-5 h-5\" />}\n                  <span>{cta.label}</span>\n                  {isPrimary && <ArrowRight className=\"w-4 h-4 ml-1\" />}\n                </>\n              )\n\n              const buttonClasses = cn(\n                'flex-1 inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300',\n                isPrimary\n                  ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 shadow-md hover:shadow-lg'\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700'\n              )\n\n              if (cta.href) {\n                return (\n                  <Link key={idx} href={cta.href} className={buttonClasses}>\n                    {content}\n                  </Link>\n                )\n              }\n\n              return (\n                <button key={idx} onClick={cta.onClick} className={buttonClasses}>\n                  {content}\n                </button>\n              )\n            })}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default ServiceCard\n","size_bytes":5351},"components/cards/ExperienceCard.tsx":{"content":"import * as React from 'react'\nimport Link from 'next/link'\nimport { Clock, Users, ArrowRight } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { ExperienceCardProps } from '@/lib/types/cards'\nimport { BaseCard } from '@/components/ui/BaseCard'\nimport { CardBadge } from '@/components/ui/CardBadge'\nimport WishlistButton from '@/components/WishlistButton'\n\nexport function ExperienceCard({\n  id,\n  image,\n  title,\n  description,\n  price,\n  duration,\n  difficulty,\n  groupSize,\n  included = [],\n  badges = [],\n  quickInfo = [],\n  ctas = [],\n  className,\n  onClick,\n}: ExperienceCardProps) {\n  const imageUrl = Array.isArray(image) ? image[0] : image\n\n  return (\n    <BaseCard className={cn('group', className)} onClick={onClick}>\n      <div className=\"relative aspect-[16/10] overflow-hidden\">\n        <img\n          src={imageUrl || '/placeholder.svg'}\n          alt={title}\n          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n        />\n        \n        <div className=\"absolute top-4 left-4 right-4 flex items-center justify-between gap-2\">\n          <div className=\"flex flex-wrap gap-2\">\n            {badges.map((badge, idx) => (\n              <CardBadge key={idx} label={badge.label} variant={badge.variant} />\n            ))}\n          </div>\n          \n          {(price !== undefined || duration) && (\n            <div className=\"flex gap-2\">\n              {price !== undefined && (\n                <div className=\"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm px-3 py-1 rounded-full\">\n                  <span className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">\n                    da ‚Ç¨{price}\n                  </span>\n                </div>\n              )}\n              {duration && (\n                <div className=\"bg-black/50 backdrop-blur-sm px-3 py-1 rounded-full\">\n                  <span className=\"text-sm text-white\">{duration}</span>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n        \n        <div className=\"absolute bottom-4 right-4\">\n          <WishlistButton\n            itemId={id}\n            itemType=\"experience\"\n            itemTitle={title}\n            itemImage={imageUrl}\n            itemPrice={price}\n            itemDescription={description}\n          />\n        </div>\n      </div>\n\n      <div className=\"p-6 lg:p-8\">\n        {quickInfo.length > 0 && quickInfo[0] && (\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center\">\n              {React.createElement(quickInfo[0].icon, { className: \"w-6 h-6 text-orange-600 dark:text-orange-400\" })}\n            </div>\n          </div>\n        )}\n\n        <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">\n          {title}\n        </h3>\n\n        {description && (\n          <p className=\"text-gray-600 dark:text-gray-300 mb-4 line-clamp-3\">{description}</p>\n        )}\n\n        <div className=\"flex flex-wrap gap-4 mb-4 text-sm text-gray-600 dark:text-gray-400\">\n          {difficulty && (\n            <div className=\"flex items-center gap-1\">\n              <span className=\"font-medium\">Difficolt√†:</span>\n              <span className=\"capitalize\">{difficulty}</span>\n            </div>\n          )}\n          {groupSize && (\n            <div className=\"flex items-center gap-1\">\n              <Users className=\"w-4 h-4\" />\n              <span>{groupSize}</span>\n            </div>\n          )}\n        </div>\n\n        {included.length > 0 && (\n          <div className=\"mb-6\">\n            <p className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Incluso:</p>\n            <ul className=\"space-y-1\">\n              {included.slice(0, 3).map((item, idx) => (\n                <li key={idx} className=\"flex items-start gap-2 text-sm text-gray-600 dark:text-gray-400\">\n                  <span className=\"text-green-500 mt-0.5\">‚úì</span>\n                  <span>{item}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {ctas.length > 0 && (\n          <div className=\"flex gap-3\">\n            {ctas.slice(0, 2).map((cta, idx) => {\n              const isPrimary = cta.variant === 'primary'\n              const content = (\n                <>\n                  {cta.icon && <cta.icon className=\"w-5 h-5\" />}\n                  <span>{cta.label}</span>\n                  {isPrimary && <ArrowRight className=\"w-4 h-4 ml-1\" />}\n                </>\n              )\n\n              const buttonClasses = cn(\n                'flex-1 inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300',\n                isPrimary\n                  ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 shadow-md hover:shadow-lg'\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700'\n              )\n\n              if (cta.href) {\n                return (\n                  <Link key={idx} href={cta.href} className={buttonClasses}>\n                    {content}\n                  </Link>\n                )\n              }\n\n              return (\n                <button key={idx} onClick={cta.onClick} className={buttonClasses}>\n                  {content}\n                </button>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </BaseCard>\n  )\n}\n\nexport default ExperienceCard\n","size_bytes":5650},"app/api/friends/shared/wishlist/[friendId]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { friendId: string } }\n) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n    const { friendId } = params\n\n    const friendship = await db.friendship.findFirst({\n      where: {\n        OR: [\n          { senderId: userId, receiverId: friendId, status: 'accepted' },\n          { senderId: friendId, receiverId: userId, status: 'accepted' }\n        ]\n      }\n    })\n\n    if (!friendship) {\n      return NextResponse.json(\n        { error: 'You are not friends with this user' },\n        { status: 403 }\n      )\n    }\n\n    const items = await db.wishlist.findMany({\n      where: {\n        userId: friendId\n      },\n      orderBy: {\n        createdAt: 'desc'\n      }\n    })\n\n    const wishlistItems = items.map(item => ({\n      ...item,\n      itemData: item.itemData || {\n        title: `Item ${item.itemId}`,\n        description: 'Nessuna descrizione disponibile',\n        image: '/placeholder.svg'\n      }\n    }))\n\n    return NextResponse.json({ wishlist: wishlistItems }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching friend wishlist:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch friend wishlist' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1712},"lib/validators/content.ts":{"content":"import { z } from 'zod'\n\nexport const ContentTypeSchema = z.enum(['experience', 'travel', 'service', 'blog'])\n\nexport type ContentType = z.infer<typeof ContentTypeSchema>\n\nexport const VALID_CONTENT_TYPES = ['experience', 'travel', 'service', 'blog'] as const\n\nexport function isValidContentType(type: string): type is ContentType {\n  return VALID_CONTENT_TYPES.includes(type as ContentType)\n}\n","size_bytes":394},"app/api/friends/code/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n\n    const friendCode = await db.friendCode.findUnique({\n      where: { userId }\n    })\n\n    if (!friendCode) {\n      return NextResponse.json({ friendCode: null }, { status: 200 })\n    }\n\n    return NextResponse.json({ friendCode: friendCode.code }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching friend code:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch friend code' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1007},"components/dashboard/FriendsList.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Users, Trash2, Eye, Loader2, Mail } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotifications } from '@/components/NotificationSystem';\n\ninterface Friend {\n  friendshipId: string;\n  friendId: string;\n  friendName: string;\n  friendEmail: string;\n  friendAvatar?: string;\n  since: string;\n}\n\ninterface FriendsListProps {\n  onViewWishlist?: (friendId: string, friendName: string) => void;\n}\n\nexport default function FriendsList({ onViewWishlist }: FriendsListProps) {\n  const { user } = useAuth();\n  const { showSuccess, showError, showWarning } = useNotifications();\n  const [friends, setFriends] = useState<Friend[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [removingId, setRemovingId] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (user) {\n      fetchFriends();\n    }\n  }, [user]);\n\n  const getAuthHeaders = async (): Promise<HeadersInit> => {\n    const headers = new Headers();\n    headers.set('Content-Type', 'application/json');\n    \n    if (!user) return headers;\n    \n    try {\n      const token = await (user as any).getIdToken();\n      headers.set('Authorization', `Bearer ${token}`);\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n    }\n    \n    return headers;\n  };\n\n  const fetchFriends = async () => {\n    setLoading(true);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch('/api/friends', { headers });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setFriends(data.friends || []);\n      }\n    } catch (error) {\n      console.error('Error fetching friends:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemoveFriend = async (friendshipId: string, friendName: string) => {\n    const confirmed = window.confirm(\n      `Sei sicuro di voler rimuovere ${friendName} dai tuoi amici? Non potrete pi√π vedere le vostre wishlist condivise.`\n    );\n\n    if (!confirmed) return;\n\n    setRemovingId(friendshipId);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`/api/friends/${friendshipId}`, {\n        method: 'DELETE',\n        headers\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to remove friend');\n      }\n\n      showSuccess(\n        'Amico Rimosso',\n        `${friendName} √® stato rimosso dalla tua lista amici.`\n      );\n      \n      await fetchFriends();\n    } catch (error) {\n      console.error('Error removing friend:', error);\n      showError(\n        'Errore',\n        'Si √® verificato un errore durante la rimozione dell\\'amico.'\n      );\n    } finally {\n      setRemovingId(null);\n    }\n  };\n\n  const handleViewWishlist = (friendId: string, friendName: string) => {\n    if (onViewWishlist) {\n      onViewWishlist(friendId, friendName);\n    } else {\n      showWarning(\n        'Funzione non disponibile',\n        'Passa alla tab \"Condivisioni\" per vedere le wishlist degli amici.'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-card border-2 border-border rounded-2xl p-6 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-card border-2 border-border rounded-2xl p-6 lg:p-8 hover:shadow-xl transition-all\">\n      <div className=\"flex items-start justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            I Tuoi Amici\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            {friends.length > 0\n              ? `Hai ${friends.length} ${friends.length === 1 ? 'amico' : 'amici'}`\n              : 'Ancora nessun amico'}\n          </p>\n        </div>\n        <div className=\"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center\">\n          <Users className=\"w-6 h-6 text-purple-600 dark:text-purple-400\" />\n        </div>\n      </div>\n\n      {friends.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Users className=\"w-8 h-8 text-gray-400 dark:text-gray-600\" />\n          </div>\n          <p className=\"text-gray-600 dark:text-gray-400 mb-2\">\n            Non hai ancora amici\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-gray-500\">\n            Condividi il tuo codice amico o aggiungi qualcuno usando il suo codice!\n          </p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {friends.map((friend) => (\n            <div\n              key={friend.friendshipId}\n              className=\"p-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-900/50 rounded-xl border-2 border-gray-200 dark:border-gray-700 hover:border-orange-300 dark:hover:border-orange-700 transition-all\"\n            >\n              <div className=\"flex items-start gap-4 mb-4\">\n                <div className=\"w-14 h-14 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white text-xl font-semibold flex-shrink-0\">\n                  {friend.friendName?.charAt(0)?.toUpperCase() || friend.friendEmail?.charAt(0)?.toUpperCase()}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"font-bold text-gray-900 dark:text-white truncate\">\n                    {friend.friendName || 'Utente'}\n                  </h3>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\n                    <Mail className=\"w-3 h-3\" />\n                    <span className=\"truncate\">{friend.friendEmail}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => handleViewWishlist(friend.friendId, friend.friendName)}\n                  className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all shadow-md hover:shadow-lg\"\n                >\n                  <Eye className=\"w-4 h-4\" />\n                  <span className=\"text-sm\">Vedi Wishlist</span>\n                </button>\n                <button\n                  onClick={() => handleRemoveFriend(friend.friendshipId, friend.friendName)}\n                  disabled={removingId === friend.friendshipId}\n                  className=\"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title=\"Rimuovi\"\n                >\n                  {removingId === friend.friendshipId ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Trash2 className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":7318},"app/api/content/route.ts":{"content":"import { db } from \"@/lib/db\"\nimport { revalidateTag } from \"next/cache\"\nimport { NextRequest } from \"next/server\"\nimport { isValidContentType, VALID_CONTENT_TYPES, ContentType } from \"@/lib/validators/content\"\nimport { isAdmin } from \"@/lib/auth-helpers\"\n\nexport const dynamic = \"force-dynamic\"\n\nexport async function GET(req: NextRequest) {\n  try {\n    const { searchParams } = new URL(req.url)\n    \n    const type = searchParams.get(\"type\")\n    if (!type) {\n      return Response.json(\n        { error: \"type parameter is required\" },\n        { status: 400 }\n      )\n    }\n\n    if (!isValidContentType(type)) {\n      return Response.json(\n        { error: `Invalid type. Must be one of: ${VALID_CONTENT_TYPES.join(\", \")}` },\n        { status: 400 }\n      )\n    }\n\n    const publishedParam = searchParams.get(\"published\")\n    const published = publishedParam === null ? true : publishedParam === \"true\"\n    \n    const featuredParam = searchParams.get(\"featured\")\n    const featured = featuredParam === \"true\" ? true : undefined\n    \n    const bookableParam = searchParams.get(\"bookable\")\n    const bookable = bookableParam === \"true\" ? true : undefined\n    \n    const category = searchParams.get(\"category\") || undefined\n    const limit = parseInt(searchParams.get(\"limit\") || \"50\", 10)\n    const offset = parseInt(searchParams.get(\"offset\") || \"0\", 10)\n\n    const where: any = {\n      type\n    }\n\n    if (publishedParam !== \"false\") {\n      where.published = published\n    }\n\n    if (featured !== undefined) {\n      where.featured = featured\n    }\n\n    if (bookable !== undefined) {\n      where.bookable = bookable\n    }\n\n    if (category) {\n      where.category = category\n    }\n\n    const [items, total] = await Promise.all([\n      db.contentItem.findMany({\n        where,\n        orderBy: { createdAt: \"desc\" },\n        take: limit,\n        skip: offset\n      }),\n      db.contentItem.count({ where })\n    ])\n\n    const hasMore = offset + items.length < total\n\n    return Response.json(\n      { items, total, hasMore },\n      { headers: { \"Cache-Control\": \"no-store\" } }\n    )\n  } catch (error) {\n    console.error(\"Error fetching content:\", error)\n    return Response.json(\n      { error: \"Failed to fetch content\" },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  const isAdminUser = await isAdmin(req.headers.get(\"authorization\"))\n  if (!isAdminUser) {\n    return Response.json({ error: \"Unauthorized\" }, { status: 401 })\n  }\n\n  try {\n    const body = await req.json()\n    const { type, title, slug, ...rest } = body\n\n    if (!type) {\n      return Response.json(\n        { error: \"type is required\" },\n        { status: 400 }\n      )\n    }\n\n    if (!isValidContentType(type)) {\n      return Response.json(\n        { error: `Invalid type. Must be one of: ${VALID_CONTENT_TYPES.join(\", \")}` },\n        { status: 400 }\n      )\n    }\n\n    if (!title || !slug) {\n      return Response.json(\n        { error: \"title and slug are required\" },\n        { status: 400 }\n      )\n    }\n\n    const existingItem = await db.contentItem.findUnique({\n      where: { slug }\n    })\n\n    if (existingItem) {\n      return Response.json(\n        { error: \"A content item with this slug already exists\" },\n        { status: 400 }\n      )\n    }\n\n    const item = await db.contentItem.create({\n      data: {\n        type,\n        title,\n        slug,\n        ...rest\n      }\n    })\n\n    revalidateTag(\"content\")\n    revalidateTag(`content-${type}`)\n\n    return Response.json(item, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating content:\", error)\n    return Response.json(\n      { error: \"Failed to create content\" },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":3697},"components/dashboard/AddFriendForm.tsx":{"content":"\"use client\";\n\nimport { useState } from 'react';\nimport { UserPlus, Loader2 } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotifications } from '@/components/NotificationSystem';\n\nexport default function AddFriendForm() {\n  const { user } = useAuth();\n  const { showSuccess, showError, showWarning } = useNotifications();\n  const [friendCode, setFriendCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const getAuthHeaders = async (): Promise<HeadersInit> => {\n    const headers = new Headers();\n    headers.set('Content-Type', 'application/json');\n    \n    if (!user) return headers;\n    \n    try {\n      const token = await (user as any).getIdToken();\n      headers.set('Authorization', `Bearer ${token}`);\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n    }\n    \n    return headers;\n  };\n\n  const validateFriendCode = (code: string): boolean => {\n    const friendCodeRegex = /^MOR-[A-Z0-9]{6}$/;\n    return friendCodeRegex.test(code);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    const trimmedCode = friendCode.trim().toUpperCase();\n\n    if (!trimmedCode) {\n      setError('Inserisci un codice amico');\n      return;\n    }\n\n    if (!validateFriendCode(trimmedCode)) {\n      setError('Formato codice non valido. Deve essere MOR-XXXXXX');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch('/api/friends/request', {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({ friendCode: trimmedCode })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to send friend request');\n      }\n\n      showSuccess(\n        'Richiesta Inviata!',\n        'La tua richiesta di amicizia √® stata inviata con successo.'\n      );\n      setFriendCode('');\n    } catch (error: any) {\n      console.error('Error sending friend request:', error);\n      \n      if (error.message.includes('already friends')) {\n        showWarning(\n          'Gi√† Amici',\n          'Sei gi√† amico con questo utente.'\n        );\n      } else if (error.message.includes('pending')) {\n        showWarning(\n          'Richiesta Pending',\n          'Hai gi√† inviato una richiesta a questo utente.'\n        );\n      } else if (error.message.includes('not found')) {\n        showError(\n          'Codice Non Valido',\n          'Nessun utente trovato con questo codice amico.'\n        );\n      } else {\n        showError(\n          'Errore',\n          'Si √® verificato un errore durante l\\'invio della richiesta.'\n        );\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-card border-2 border-border rounded-2xl p-6 lg:p-8 hover:shadow-xl transition-all\">\n      <div className=\"flex items-start justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Aggiungi Amico\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Inserisci il codice amico per inviare una richiesta\n          </p>\n        </div>\n        <div className=\"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center\">\n          <UserPlus className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"friendCode\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n            Codice Amico\n          </label>\n          <input\n            id=\"friendCode\"\n            type=\"text\"\n            value={friendCode}\n            onChange={(e) => {\n              setFriendCode(e.target.value.toUpperCase());\n              setError('');\n            }}\n            placeholder=\"MOR-ABC123\"\n            className=\"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n            disabled={loading}\n          />\n          {error && (\n            <p className=\"mt-2 text-sm text-red-600 dark:text-red-400\">\n              {error}\n            </p>\n          )}\n        </div>\n\n        <button\n          type=\"submit\"\n          disabled={loading || !friendCode.trim()}\n          className=\"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {loading ? (\n            <>\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              <span>Invio in corso...</span>\n            </>\n          ) : (\n            <>\n              <UserPlus className=\"w-5 h-5\" />\n              <span>Invia Richiesta</span>\n            </>\n          )}\n        </button>\n      </form>\n    </div>\n  );\n}\n","size_bytes":5255},"components/cards/CityCard.tsx":{"content":"import * as React from 'react'\nimport Link from 'next/link'\nimport { MapPin, Navigation, ArrowRight } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { CityCardProps } from '@/lib/types/cards'\nimport { BaseCard } from '@/components/ui/BaseCard'\nimport { CardBadge } from '@/components/ui/CardBadge'\n\nexport function CityCard({\n  id,\n  image,\n  title,\n  description,\n  tagline,\n  distance,\n  population,\n  attractions = [],\n  bestSeason,\n  region,\n  badges = [],\n  ctas = [],\n  className,\n  onClick,\n}: CityCardProps) {\n  const imageUrl = Array.isArray(image) ? image[0] : image\n\n  return (\n    <BaseCard className={cn('group', className)} onClick={onClick}>\n      <div className=\"relative aspect-[16/10] lg:aspect-[4/3] overflow-hidden\">\n        <img\n          src={imageUrl || '/placeholder.svg'}\n          alt={title}\n          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent\" />\n        \n        {badges.length > 0 && (\n          <div className=\"absolute top-4 left-4 flex flex-wrap gap-2\">\n            {badges.map((badge, idx) => (\n              <CardBadge key={idx} label={badge.label} variant={badge.variant} />\n            ))}\n          </div>\n        )}\n        \n        <div className=\"absolute bottom-0 left-0 right-0 p-6 lg:p-8\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-white mb-2\">{title}</h2>\n          {tagline && (\n            <p className=\"text-lg text-white/90 mb-4\">{tagline}</p>\n          )}\n          \n          <div className=\"flex flex-wrap items-center gap-4 text-sm text-white/80\">\n            {region && (\n              <div className=\"flex items-center gap-1\">\n                <MapPin className=\"w-4 h-4\" />\n                <span>{region}</span>\n              </div>\n            )}\n            {distance && (\n              <div className=\"flex items-center gap-1\">\n                <Navigation className=\"w-4 h-4\" />\n                <span>{distance}</span>\n              </div>\n            )}\n            {population && (\n              <div className=\"flex items-center gap-1\">\n                <span>{population} abitanti</span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-6 lg:p-8\">\n        {description && (\n          <p className=\"text-gray-600 dark:text-gray-300 mb-4\">{description}</p>\n        )}\n\n        {attractions.length > 0 && (\n          <div className=\"mb-6\">\n            <p className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">Attrazioni Principali:</p>\n            <ul className=\"space-y-2\">\n              {attractions.slice(0, 3).map((attraction, idx) => (\n                <li key={idx} className=\"flex items-start gap-2 text-sm text-gray-600 dark:text-gray-400\">\n                  <span className=\"text-orange-500 mt-0.5\">‚Ä¢</span>\n                  <span>{attraction}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {bestSeason && (\n          <div className=\"mb-6\">\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              <span className=\"font-semibold text-gray-700 dark:text-gray-300\">Periodo migliore:</span> {bestSeason}\n            </p>\n          </div>\n        )}\n\n        {ctas.length > 0 && (\n          <div className=\"flex gap-3\">\n            {ctas.map((cta, idx) => {\n              const isPrimary = cta.variant === 'primary'\n              const content = (\n                <>\n                  {cta.icon && <cta.icon className=\"w-5 h-5\" />}\n                  <span>{cta.label}</span>\n                  {isPrimary && <ArrowRight className=\"w-4 h-4 ml-1\" />}\n                </>\n              )\n\n              const buttonClasses = cn(\n                'flex-1 inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300',\n                isPrimary\n                  ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 shadow-md hover:shadow-lg'\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700'\n              )\n\n              if (cta.href) {\n                return (\n                  <Link key={idx} href={cta.href} className={buttonClasses}>\n                    {content}\n                  </Link>\n                )\n              }\n\n              return (\n                <button key={idx} onClick={cta.onClick} className={buttonClasses}>\n                  {content}\n                </button>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </BaseCard>\n  )\n}\n\nexport default CityCard\n","size_bytes":4787},"components/cards/VehicleCard.tsx":{"content":"import * as React from 'react'\nimport Link from 'next/link'\nimport { Users, Settings, Luggage, ArrowRight, ChevronLeft, ChevronRight } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { VehicleCardProps } from '@/lib/types/cards'\nimport { BaseCard } from '@/components/ui/BaseCard'\nimport { CardBadge } from '@/components/ui/CardBadge'\nimport WishlistButton from '@/components/WishlistButton'\n\nexport function VehicleCard({\n  id,\n  image,\n  title,\n  description,\n  pricePerDay,\n  seats,\n  transmission,\n  fuelType,\n  luggage,\n  features = [],\n  availability = 'available',\n  badges = [],\n  ctas = [],\n  className,\n  onClick,\n}: VehicleCardProps) {\n  const images = Array.isArray(image) ? image : [image]\n  const [currentImageIndex, setCurrentImageIndex] = React.useState(0)\n\n  const nextImage = (e: React.MouseEvent) => {\n    e.stopPropagation()\n    setCurrentImageIndex((prev) => (prev + 1) % images.length)\n  }\n\n  const prevImage = (e: React.MouseEvent) => {\n    e.stopPropagation()\n    setCurrentImageIndex((prev) => (prev - 1 + images.length) % images.length)\n  }\n\n  const availabilityConfig = {\n    available: { label: 'Disponibile', color: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400' },\n    limited: { label: 'Disponibilit√† Limitata', color: 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400' },\n    unavailable: { label: 'Non Disponibile', color: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400' },\n  }\n\n  return (\n    <BaseCard className={cn('group', className)} onClick={onClick}>\n      <div className=\"relative aspect-[16/10] overflow-hidden\">\n        <img\n          src={images[currentImageIndex] || '/placeholder.svg'}\n          alt={title}\n          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n        />\n        \n        {images.length > 1 && (\n          <>\n            <button\n              onClick={prevImage}\n              className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all\"\n              aria-label=\"Immagine precedente\"\n            >\n              <ChevronLeft className=\"w-5 h-5\" />\n            </button>\n            <button\n              onClick={nextImage}\n              className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all\"\n              aria-label=\"Immagine successiva\"\n            >\n              <ChevronRight className=\"w-5 h-5\" />\n            </button>\n            <div className=\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1\">\n              {images.map((_, idx) => (\n                <div\n                  key={idx}\n                  className={cn(\n                    'w-2 h-2 rounded-full transition-all',\n                    idx === currentImageIndex ? 'bg-white w-6' : 'bg-white/50'\n                  )}\n                />\n              ))}\n            </div>\n          </>\n        )}\n        \n        <div className=\"absolute top-4 left-4 flex flex-wrap gap-2\">\n          {badges.map((badge, idx) => (\n            <CardBadge key={idx} label={badge.label} variant={badge.variant} />\n          ))}\n          <div className={cn('px-3 py-1 rounded-full text-xs font-semibold', availabilityConfig[availability].color)}>\n            {availabilityConfig[availability].label}\n          </div>\n        </div>\n        \n        {pricePerDay !== undefined && (\n          <div className=\"absolute top-4 right-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg\">\n            <div className=\"text-center\">\n              <span className=\"font-bold text-lg text-gray-900 dark:text-gray-100\">‚Ç¨{pricePerDay}</span>\n              <span className=\"text-xs text-gray-600 dark:text-gray-400 block\">al giorno</span>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"absolute bottom-4 right-4\">\n          <WishlistButton\n            itemId={id}\n            itemType=\"vehicle\"\n            itemTitle={title}\n            itemImage={images[0]}\n            itemPrice={pricePerDay}\n            itemDescription={description}\n          />\n        </div>\n      </div>\n\n      <div className=\"p-6 lg:p-8\">\n        <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">\n          {title}\n        </h3>\n\n        {description && (\n          <p className=\"text-gray-600 dark:text-gray-300 mb-4 text-sm\">{description}</p>\n        )}\n\n        <div className=\"grid grid-cols-3 gap-3 mb-4\">\n          {seats !== undefined && (\n            <div className=\"flex flex-col items-center gap-1 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg\">\n              <Users className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n              <span className=\"text-xs text-gray-600 dark:text-gray-400\">{seats} posti</span>\n            </div>\n          )}\n          {transmission && (\n            <div className=\"flex flex-col items-center gap-1 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg\">\n              <Settings className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n              <span className=\"text-xs text-gray-600 dark:text-gray-400 capitalize\">{transmission}</span>\n            </div>\n          )}\n          {luggage !== undefined && (\n            <div className=\"flex flex-col items-center gap-1 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg\">\n              <Luggage className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n              <span className=\"text-xs text-gray-600 dark:text-gray-400\">{luggage} bagagli</span>\n            </div>\n          )}\n        </div>\n\n        {features.length > 0 && (\n          <div className=\"mb-6\">\n            <p className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Caratteristiche:</p>\n            <ul className=\"grid grid-cols-2 gap-2\">\n              {features.slice(0, 4).map((feature, idx) => (\n                <li key={idx} className=\"flex items-start gap-1 text-sm text-gray-600 dark:text-gray-400\">\n                  <span className=\"text-orange-500 mt-0.5\">‚úì</span>\n                  <span>{feature}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {ctas.length > 0 && (\n          <div className=\"flex gap-3\">\n            {ctas.map((cta, idx) => {\n              const isPrimary = cta.variant === 'primary'\n              const content = (\n                <>\n                  {cta.icon && <cta.icon className=\"w-5 h-5\" />}\n                  <span>{cta.label}</span>\n                  {isPrimary && <ArrowRight className=\"w-4 h-4 ml-1\" />}\n                </>\n              )\n\n              const buttonClasses = cn(\n                'flex-1 inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300',\n                isPrimary\n                  ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 shadow-md hover:shadow-lg'\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700'\n              )\n\n              if (cta.href) {\n                return (\n                  <Link key={idx} href={cta.href} className={buttonClasses}>\n                    {content}\n                  </Link>\n                )\n              }\n\n              return (\n                <button key={idx} onClick={cta.onClick} className={buttonClasses}>\n                  {content}\n                </button>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </BaseCard>\n  )\n}\n\nexport default VehicleCard\n","size_bytes":7716},"components/dashboard/FriendNotifications.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Bell, Loader2, CheckCircle, UserPlus, Heart, X } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotifications } from '@/components/NotificationSystem';\nimport { formatDistanceToNow } from 'date-fns';\nimport { it } from 'date-fns/locale';\n\ninterface FriendNotification {\n  id: string;\n  type: 'friend_request' | 'request_accepted' | 'friend_added_item';\n  title: string;\n  message: string;\n  read: boolean;\n  createdAt: string;\n  metadata?: {\n    friendName?: string;\n    itemTitle?: string;\n  };\n}\n\nexport default function FriendNotifications() {\n  const { user } = useAuth();\n  const { showSuccess, showError } = useNotifications();\n  const [notifications, setNotifications] = useState<FriendNotification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [markingAsRead, setMarkingAsRead] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (user) {\n      fetchNotifications();\n      \n      const interval = setInterval(() => {\n        fetchNotifications();\n      }, 30000);\n\n      return () => clearInterval(interval);\n    }\n  }, [user]);\n\n  const getAuthHeaders = async (): Promise<HeadersInit> => {\n    const headers = new Headers();\n    headers.set('Content-Type', 'application/json');\n    \n    if (!user) return headers;\n    \n    try {\n      const token = await (user as any).getIdToken();\n      headers.set('Authorization', `Bearer ${token}`);\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n    }\n    \n    return headers;\n  };\n\n  const fetchNotifications = async () => {\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch('/api/friends/notifications', { headers });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setNotifications(data.notifications || []);\n      }\n    } catch (error) {\n      console.error('Error fetching notifications:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const markAsRead = async (notificationId: string) => {\n    setMarkingAsRead(notificationId);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`/api/friends/notifications/${notificationId}/read`, {\n        method: 'PATCH',\n        headers\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to mark as read');\n      }\n\n      await fetchNotifications();\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n      showError(\n        'Errore',\n        'Impossibile contrassegnare la notifica come letta.'\n      );\n    } finally {\n      setMarkingAsRead(null);\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'friend_request':\n        return <UserPlus className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />;\n      case 'request_accepted':\n        return <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400\" />;\n      case 'friend_added_item':\n        return <Heart className=\"w-5 h-5 text-red-600 dark:text-red-400\" />;\n      default:\n        return <Bell className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />;\n    }\n  };\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  if (loading) {\n    return (\n      <div className=\"bg-card border-2 border-border rounded-2xl p-6 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-card border-2 border-border rounded-2xl p-6 lg:p-8 hover:shadow-xl transition-all\">\n      <div className=\"flex items-start justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Notifiche Amici\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            {unreadCount > 0\n              ? `Hai ${unreadCount} ${unreadCount === 1 ? 'notifica non letta' : 'notifiche non lette'}`\n              : 'Nessuna notifica non letta'}\n          </p>\n        </div>\n        <div className=\"relative\">\n          <div className=\"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center\">\n            <Bell className=\"w-6 h-6 text-yellow-600 dark:text-yellow-400\" />\n          </div>\n          {unreadCount > 0 && (\n            <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold\">\n              {unreadCount > 9 ? '9+' : unreadCount}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {notifications.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Bell className=\"w-8 h-8 text-gray-400 dark:text-gray-600\" />\n          </div>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Nessuna notifica da mostrare\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n          {notifications.map((notification) => (\n            <div\n              key={notification.id}\n              className={`flex items-start gap-4 p-4 rounded-xl border-2 transition-all ${\n                notification.read\n                  ? 'bg-gray-50 dark:bg-gray-800/30 border-gray-200 dark:border-gray-700'\n                  : 'bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-700'\n              }`}\n            >\n              <div className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${\n                notification.read\n                  ? 'bg-gray-100 dark:bg-gray-800'\n                  : 'bg-white dark:bg-gray-900'\n              }`}>\n                {getNotificationIcon(notification.type)}\n              </div>\n\n              <div className=\"flex-1 min-w-0\">\n                <h4 className=\"font-semibold text-gray-900 dark:text-white mb-1\">\n                  {notification.title}\n                </h4>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                  {notification.message}\n                </p>\n                <p className=\"text-xs text-gray-500 dark:text-gray-500\">\n                  {formatDistanceToNow(new Date(notification.createdAt), {\n                    addSuffix: true,\n                    locale: it\n                  })}\n                </p>\n              </div>\n\n              {!notification.read && (\n                <button\n                  onClick={() => markAsRead(notification.id)}\n                  disabled={markingAsRead === notification.id}\n                  className=\"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors disabled:opacity-50\"\n                  title=\"Segna come letta\"\n                >\n                  {markingAsRead === notification.id ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  ) : (\n                    <X className=\"w-4 h-4\" />\n                  )}\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":7261},"hooks/useContent.ts":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\n\nexport interface ContentItem {\n  id: string\n  type: 'experience' | 'travel' | 'service' | 'blog'\n  title: string\n  slug: string\n  description: string | null\n  image: string | null\n  category: string | null\n  published: boolean\n  featured: boolean\n  bookable: boolean\n  price: number | null\n  priceNote: string | null\n  duration: string | null\n  metadata: any\n  createdAt: Date\n  updatedAt: Date\n  publishedAt: Date | null\n}\n\nexport interface UseContentOptions {\n  type: 'experience' | 'travel' | 'service' | 'blog'\n  featured?: boolean\n  bookable?: boolean\n  category?: string\n  limit?: number\n  offset?: number\n}\n\nexport interface UseContentResult {\n  items: ContentItem[]\n  total: number\n  hasMore: boolean\n  loading: boolean\n  error: Error | null\n  refetch: () => void\n}\n\nexport function useContent(options: UseContentOptions): UseContentResult {\n  const [items, setItems] = useState<ContentItem[]>([])\n  const [total, setTotal] = useState(0)\n  const [hasMore, setHasMore] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  const fetchContent = async () => {\n    setLoading(true)\n    setError(null)\n    \n    try {\n      const params = new URLSearchParams({ type: options.type })\n      if (options.featured !== undefined) params.set('featured', String(options.featured))\n      if (options.bookable !== undefined) params.set('bookable', String(options.bookable))\n      if (options.category) params.set('category', options.category)\n      if (options.limit) params.set('limit', String(options.limit))\n      if (options.offset) params.set('offset', String(options.offset))\n      \n      const response = await fetch(`/api/content?${params}`)\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch content: ${response.statusText}`)\n      }\n      \n      const data = await response.json()\n      setItems(data.items || [])\n      setTotal(data.total || 0)\n      setHasMore(data.hasMore || false)\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Unknown error'))\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchContent()\n  }, [options.type, options.featured, options.bookable, options.category, options.limit, options.offset])\n\n  return {\n    items,\n    total,\n    hasMore,\n    loading,\n    error,\n    refetch: fetchContent\n  }\n}\n","size_bytes":2433},"components/dashboard/FriendCodeCard.tsx":{"content":"\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { Copy, Loader2, UserPlus, Ticket } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useNotifications } from '@/components/NotificationSystem';\n\nexport default function FriendCodeCard() {\n  const { user } = useAuth();\n  const { showSuccess, showError } = useNotifications();\n  const [friendCode, setFriendCode] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [generating, setGenerating] = useState(false);\n\n  useEffect(() => {\n    if (user) {\n      fetchFriendCode();\n    }\n  }, [user]);\n\n  const getAuthHeaders = async (): Promise<HeadersInit> => {\n    const headers = new Headers();\n    headers.set('Content-Type', 'application/json');\n    \n    if (!user) return headers;\n    \n    try {\n      const token = await (user as any).getIdToken();\n      headers.set('Authorization', `Bearer ${token}`);\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n    }\n    \n    return headers;\n  };\n\n  const fetchFriendCode = async () => {\n    setLoading(true);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch('/api/friends/code', { headers });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setFriendCode(data.friendCode);\n      }\n    } catch (error) {\n      console.error('Error fetching friend code:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateFriendCode = async () => {\n    setGenerating(true);\n    try {\n      const headers = await getAuthHeaders();\n      const response = await fetch('/api/friends/code/generate', {\n        method: 'POST',\n        headers\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to generate friend code');\n      }\n\n      const data = await response.json();\n      setFriendCode(data.friendCode);\n      showSuccess(\n        'Codice Amico Generato',\n        'Il tuo codice amico √® stato creato con successo!'\n      );\n    } catch (error) {\n      console.error('Error generating friend code:', error);\n      showError(\n        'Errore',\n        'Si √® verificato un errore durante la generazione del codice.'\n      );\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const copyToClipboard = async () => {\n    if (!friendCode) return;\n\n    try {\n      await navigator.clipboard.writeText(friendCode);\n      showSuccess(\n        'Codice Copiato!',\n        'Il tuo codice amico √® stato copiato negli appunti.'\n      );\n    } catch (error) {\n      console.error('Error copying to clipboard:', error);\n      showError(\n        'Errore',\n        'Impossibile copiare il codice negli appunti.'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-card border-2 border-border rounded-2xl p-6 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 border-2 border-orange-200 dark:border-orange-800 rounded-2xl p-6 lg:p-8 hover:shadow-xl transition-all\">\n      <div className=\"flex items-start justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Il Tuo Codice Amico\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Condividi questo codice con i tuoi amici per connettervi\n          </p>\n        </div>\n        <div className=\"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center\">\n          <Ticket className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\n        </div>\n      </div>\n\n      {friendCode ? (\n        <div className=\"space-y-4\">\n          <div className=\"bg-white dark:bg-gray-800 border-2 border-dashed border-orange-300 dark:border-orange-700 rounded-xl p-6 text-center\">\n            <div className=\"text-4xl font-bold text-orange-600 dark:text-orange-400 tracking-wider mb-2\">\n              {friendCode}\n            </div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Il tuo codice univoco\n            </p>\n          </div>\n\n          <button\n            onClick={copyToClipboard}\n            className=\"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all shadow-md hover:shadow-lg\"\n          >\n            <Copy className=\"w-5 h-5\" />\n            <span>Copia Codice</span>\n          </button>\n        </div>\n      ) : (\n        <button\n          onClick={generateFriendCode}\n          disabled={generating}\n          className=\"w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {generating ? (\n            <>\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              <span>Generazione...</span>\n            </>\n          ) : (\n            <>\n              <UserPlus className=\"w-5 h-5\" />\n              <span>Genera il Tuo Codice</span>\n            </>\n          )}\n        </button>\n      )}\n    </div>\n  );\n}\n","size_bytes":5449},"app/api/friends/reject/[friendshipId]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { friendshipId: string } }\n) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n    const { friendshipId } = params\n\n    const friendship = await db.friendship.findUnique({\n      where: { id: friendshipId }\n    })\n\n    if (!friendship) {\n      return NextResponse.json(\n        { error: 'Friendship not found' },\n        { status: 404 }\n      )\n    }\n\n    if (friendship.receiverId !== userId) {\n      return NextResponse.json(\n        { error: 'Unauthorized to reject this request' },\n        { status: 403 }\n      )\n    }\n\n    if (friendship.status !== 'pending') {\n      return NextResponse.json(\n        { error: 'Friendship is not pending' },\n        { status: 400 }\n      )\n    }\n\n    await db.friendship.update({\n      where: { id: friendshipId },\n      data: {\n        status: 'rejected'\n      }\n    })\n\n    return NextResponse.json(\n      { message: 'Richiesta rifiutata' },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('Error rejecting friend request:', error)\n    return NextResponse.json(\n      { error: 'Failed to reject friend request' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1636},"scripts/migrate-to-contentitem.ts":{"content":"import { PrismaClient } from '@prisma/client';\nimport { exec } from 'child_process';\nimport { promisify } from 'util';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nconst execAsync = promisify(exec);\nconst prisma = new PrismaClient();\n\n// Parse command line arguments\nconst isDryRun = process.argv.includes('--dry-run');\n\ninterface MigrationStats {\n  experiences: number;\n  travels: number;\n  services: number;\n  blogPosts: number;\n  total: number;\n}\n\n/**\n * Create SQL backup of the source tables before migration\n */\nasync function createBackup(): Promise<string> {\n  console.log('üì¶ Creating SQL backup...');\n  \n  const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n  const backupDir = path.join(process.cwd(), 'backups');\n  \n  // Create backups directory if it doesn't exist\n  if (!fs.existsSync(backupDir)) {\n    fs.mkdirSync(backupDir, { recursive: true });\n  }\n  \n  const backupFile = path.join(backupDir, `migration-backup-${timestamp}.sql`);\n  \n  try {\n    // Get database URL from environment\n    const databaseUrl = process.env.DATABASE_URL;\n    if (!databaseUrl) {\n      throw new Error('DATABASE_URL not found in environment variables');\n    }\n    \n    // Parse database URL to extract connection details\n    const url = new URL(databaseUrl);\n    const database = url.pathname.substring(1);\n    const host = url.hostname;\n    const port = url.port || '5432';\n    const username = url.username;\n    const password = url.password;\n    \n    // Create pg_dump command\n    const tables = ['Experience', 'Travel', 'Service', 'BlogPost'];\n    const tableArgs = tables.map(t => `-t \"${t}\"`).join(' ');\n    \n    const pgDumpCmd = `PGPASSWORD=\"${password}\" pg_dump -h ${host} -p ${port} -U ${username} -d ${database} ${tableArgs} -f \"${backupFile}\"`;\n    \n    await execAsync(pgDumpCmd);\n    \n    const stats = fs.statSync(backupFile);\n    console.log(`‚úÖ Backup created: ${backupFile} (${(stats.size / 1024).toFixed(2)} KB)`);\n    \n    return backupFile;\n  } catch (error: any) {\n    console.warn('‚ö†Ô∏è  Could not create pg_dump backup:', error.message);\n    console.log('üìù Creating manual backup instead...');\n    \n    // Fallback: Create a JSON backup\n    const experiences = await prisma.experience.findMany();\n    const travels = await prisma.travel.findMany();\n    const services = await prisma.service.findMany();\n    const blogPosts = await prisma.blogPost.findMany();\n    \n    const backup = {\n      timestamp: new Date().toISOString(),\n      experiences,\n      travels,\n      services,\n      blogPosts\n    };\n    \n    const jsonBackupFile = backupFile.replace('.sql', '.json');\n    fs.writeFileSync(jsonBackupFile, JSON.stringify(backup, null, 2));\n    \n    const stats = fs.statSync(jsonBackupFile);\n    console.log(`‚úÖ JSON backup created: ${jsonBackupFile} (${(stats.size / 1024).toFixed(2)} KB)`);\n    \n    return jsonBackupFile;\n  }\n}\n\n/**\n * Migrate Experience records to ContentItem\n */\nasync function migrateExperiences(): Promise<number> {\n  const experiences = await prisma.experience.findMany();\n  console.log(`\\nüìã Found ${experiences.length} experiences to migrate`);\n  \n  let migrated = 0;\n  \n  for (const exp of experiences) {\n    const metadata = {\n      difficulty: exp.difficulty,\n      groupSize: exp.groupSize,\n      shortDesc: exp.shortDesc,\n      itinerary: exp.itinerary,\n      highlights: exp.highlights,\n      included: exp.included,\n      notIncluded: exp.notIncluded\n    };\n    \n    const contentItem = {\n      id: exp.id,\n      type: 'experience',\n      title: exp.title,\n      slug: exp.slug,\n      description: exp.description,\n      image: exp.image,\n      category: exp.category,\n      published: exp.published,\n      featured: exp.featured,\n      bookable: true,\n      price: exp.price,\n      priceNote: exp.priceNote,\n      duration: exp.duration,\n      metadata: metadata,\n      createdAt: exp.createdAt,\n      updatedAt: exp.updatedAt,\n      publishedAt: exp.createdAt\n    };\n    \n    if (!isDryRun) {\n      await prisma.contentItem.create({ data: contentItem });\n    }\n    \n    migrated++;\n    console.log(`  ‚úì Migrated experience: ${exp.title} (${exp.id})`);\n  }\n  \n  return migrated;\n}\n\n/**\n * Migrate Travel records to ContentItem\n */\nasync function migrateTravels(): Promise<number> {\n  const travels = await prisma.travel.findMany();\n  console.log(`\\nüìã Found ${travels.length} travels to migrate`);\n  \n  let migrated = 0;\n  \n  for (const travel of travels) {\n    const metadata = {\n      cities: travel.cities,\n      itinerary: travel.itinerary,\n      highlights: travel.highlights,\n      included: travel.included,\n      notIncluded: travel.notIncluded\n    };\n    \n    const contentItem = {\n      id: travel.id,\n      type: 'travel',\n      title: travel.title,\n      slug: travel.slug,\n      description: travel.description,\n      image: travel.image,\n      category: travel.category,\n      published: travel.published,\n      featured: travel.featured,\n      bookable: true,\n      price: travel.price,\n      priceNote: travel.priceNote,\n      duration: travel.duration,\n      metadata: metadata,\n      createdAt: travel.createdAt,\n      updatedAt: travel.updatedAt,\n      publishedAt: travel.createdAt\n    };\n    \n    if (!isDryRun) {\n      await prisma.contentItem.create({ data: contentItem });\n    }\n    \n    migrated++;\n    console.log(`  ‚úì Migrated travel: ${travel.title} (${travel.id})`);\n  }\n  \n  return migrated;\n}\n\n/**\n * Migrate Service records to ContentItem\n */\nasync function migrateServices(): Promise<number> {\n  const services = await prisma.service.findMany();\n  console.log(`\\nüìã Found ${services.length} services to migrate`);\n  \n  let migrated = 0;\n  \n  for (const service of services) {\n    const metadata = {\n      icon: service.icon,\n      features: service.features,\n      pricing: service.pricing\n    };\n    \n    const contentItem = {\n      id: service.id,\n      type: 'service',\n      title: service.name, // Service uses 'name' instead of 'title'\n      slug: service.slug,\n      description: service.description,\n      image: null, // Services don't have images\n      category: service.category,\n      published: service.published,\n      featured: service.featured,\n      bookable: false, // Services are not bookable\n      price: null, // Pricing is in metadata\n      priceNote: null,\n      duration: null,\n      metadata: metadata,\n      createdAt: service.createdAt,\n      updatedAt: service.updatedAt,\n      publishedAt: service.createdAt\n    };\n    \n    if (!isDryRun) {\n      await prisma.contentItem.create({ data: contentItem });\n    }\n    \n    migrated++;\n    console.log(`  ‚úì Migrated service: ${service.name} (${service.id})`);\n  }\n  \n  return migrated;\n}\n\n/**\n * Migrate BlogPost records to ContentItem\n */\nasync function migrateBlogPosts(): Promise<number> {\n  const blogPosts = await prisma.blogPost.findMany();\n  console.log(`\\nüìã Found ${blogPosts.length} blog posts to migrate`);\n  \n  let migrated = 0;\n  \n  for (const post of blogPosts) {\n    // Extract first tag as category, or use 'general' as default\n    let category = 'general';\n    if (post.tags && Array.isArray(post.tags) && post.tags.length > 0) {\n      category = post.tags[0] as string;\n    }\n    \n    const metadata = {\n      excerpt: post.excerpt,\n      coverImage: post.coverImage,\n      sections: post.sections,\n      tags: post.tags,\n      author: post.author,\n      readTime: post.readTime\n    };\n    \n    const contentItem = {\n      id: post.id,\n      type: 'blog',\n      title: post.title,\n      slug: post.slug,\n      description: post.excerpt, // BlogPost uses 'excerpt' instead of 'description'\n      image: post.coverImage, // BlogPost uses 'coverImage' instead of 'image'\n      category: category,\n      published: post.published,\n      featured: post.featured,\n      bookable: false, // Blog posts are not bookable\n      price: null,\n      priceNote: null,\n      duration: null,\n      metadata: metadata,\n      createdAt: post.createdAt,\n      updatedAt: post.updatedAt,\n      publishedAt: post.publishedAt || post.createdAt\n    };\n    \n    if (!isDryRun) {\n      await prisma.contentItem.create({ data: contentItem });\n    }\n    \n    migrated++;\n    console.log(`  ‚úì Migrated blog post: ${post.title} (${post.id})`);\n  }\n  \n  return migrated;\n}\n\n/**\n * Validate the migration by checking counts\n */\nasync function validateMigration(stats: MigrationStats): Promise<boolean> {\n  console.log('\\nüîç Validating migration...');\n  \n  // Count ContentItems by type\n  const contentCounts = await prisma.contentItem.groupBy({\n    by: ['type'],\n    _count: {\n      type: true\n    }\n  });\n  \n  const countMap: Record<string, number> = {};\n  for (const count of contentCounts) {\n    countMap[count.type] = count._count.type;\n  }\n  \n  console.log('\\nüìä ContentItem counts by type:');\n  console.log(`  - experiences: ${countMap['experience'] || 0}`);\n  console.log(`  - travels: ${countMap['travel'] || 0}`);\n  console.log(`  - services: ${countMap['service'] || 0}`);\n  console.log(`  - blog posts: ${countMap['blog'] || 0}`);\n  console.log(`  - TOTAL: ${Object.values(countMap).reduce((a, b) => a + b, 0)}`);\n  \n  // Validate counts match\n  const valid = \n    (countMap['experience'] || 0) === stats.experiences &&\n    (countMap['travel'] || 0) === stats.travels &&\n    (countMap['service'] || 0) === stats.services &&\n    (countMap['blog'] || 0) === stats.blogPosts;\n  \n  if (valid) {\n    console.log('\\n‚úÖ Validation successful! All counts match.');\n  } else {\n    console.log('\\n‚ùå Validation failed! Counts do not match.');\n    console.log('\\nExpected:');\n    console.log(`  - experiences: ${stats.experiences}`);\n    console.log(`  - travels: ${stats.travels}`);\n    console.log(`  - services: ${stats.services}`);\n    console.log(`  - blog posts: ${stats.blogPosts}`);\n  }\n  \n  // Spot check: Display sample records\n  console.log('\\nüî¨ Spot check - Sample records:');\n  \n  const sampleExperience = await prisma.contentItem.findFirst({\n    where: { type: 'experience' }\n  });\n  if (sampleExperience) {\n    console.log('\\n  Experience sample:');\n    console.log(`    Title: ${sampleExperience.title}`);\n    console.log(`    Slug: ${sampleExperience.slug}`);\n    console.log(`    Bookable: ${sampleExperience.bookable}`);\n    console.log(`    Metadata keys: ${Object.keys(sampleExperience.metadata as object || {}).join(', ')}`);\n  }\n  \n  const sampleTravel = await prisma.contentItem.findFirst({\n    where: { type: 'travel' }\n  });\n  if (sampleTravel) {\n    console.log('\\n  Travel sample:');\n    console.log(`    Title: ${sampleTravel.title}`);\n    console.log(`    Slug: ${sampleTravel.slug}`);\n    console.log(`    Bookable: ${sampleTravel.bookable}`);\n    console.log(`    Metadata keys: ${Object.keys(sampleTravel.metadata as object || {}).join(', ')}`);\n  }\n  \n  const sampleService = await prisma.contentItem.findFirst({\n    where: { type: 'service' }\n  });\n  if (sampleService) {\n    console.log('\\n  Service sample:');\n    console.log(`    Title: ${sampleService.title}`);\n    console.log(`    Slug: ${sampleService.slug}`);\n    console.log(`    Bookable: ${sampleService.bookable}`);\n    console.log(`    Metadata keys: ${Object.keys(sampleService.metadata as object || {}).join(', ')}`);\n  }\n  \n  const sampleBlog = await prisma.contentItem.findFirst({\n    where: { type: 'blog' }\n  });\n  if (sampleBlog) {\n    console.log('\\n  Blog post sample:');\n    console.log(`    Title: ${sampleBlog.title}`);\n    console.log(`    Slug: ${sampleBlog.slug}`);\n    console.log(`    Bookable: ${sampleBlog.bookable}`);\n    console.log(`    Metadata keys: ${Object.keys(sampleBlog.metadata as object || {}).join(', ')}`);\n  }\n  \n  return valid;\n}\n\n/**\n * Main migration function\n */\nasync function runMigration() {\n  console.log('‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó');\n  console.log('‚ïë   ContentItem Migration Script                        ‚ïë');\n  console.log('‚ïë   Migrating: Experience, Travel, Service, BlogPost    ‚ïë');\n  console.log('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\\n');\n  \n  if (isDryRun) {\n    console.log('üèÉ DRY RUN MODE - No data will be written\\n');\n  }\n  \n  const stats: MigrationStats = {\n    experiences: 0,\n    travels: 0,\n    services: 0,\n    blogPosts: 0,\n    total: 0\n  };\n  \n  try {\n    // Create backup first\n    if (!isDryRun) {\n      await createBackup();\n    } else {\n      console.log('üì¶ Skipping backup in dry-run mode\\n');\n    }\n    \n    console.log('üìä Starting migration...');\n    \n    // Run migration in a transaction\n    await prisma.$transaction(async (tx) => {\n      // Temporarily replace prisma with transaction client\n      const originalPrisma = global.prisma;\n      (global as any).prisma = tx;\n      \n      try {\n        // Migrate each type\n        stats.experiences = await migrateExperiences();\n        stats.travels = await migrateTravels();\n        stats.services = await migrateServices();\n        stats.blogPosts = await migrateBlogPosts();\n        \n        stats.total = stats.experiences + stats.travels + stats.services + stats.blogPosts;\n        \n        if (isDryRun) {\n          console.log('\\nüèÉ Dry run complete - rolling back transaction');\n          throw new Error('DRY_RUN_ROLLBACK');\n        }\n      } finally {\n        // Restore original prisma\n        (global as any).prisma = originalPrisma;\n      }\n    });\n    \n    // Print summary\n    console.log('\\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó');\n    console.log('‚ïë   Migration Summary                                    ‚ïë');\n    console.log('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù');\n    console.log(`\\n  ‚úì Migrated ${stats.experiences} experiences`);\n    console.log(`  ‚úì Migrated ${stats.travels} travels`);\n    console.log(`  ‚úì Migrated ${stats.services} services`);\n    console.log(`  ‚úì Migrated ${stats.blogPosts} blog posts`);\n    console.log(`\\n  ‚úÖ Total: ${stats.total} content items migrated\\n`);\n    \n    if (!isDryRun) {\n      // Validate migration\n      const isValid = await validateMigration(stats);\n      \n      if (!isValid) {\n        console.log('\\n‚ö†Ô∏è  Warning: Validation found discrepancies!');\n        console.log('   Please review the migration results.\\n');\n      }\n    }\n    \n  } catch (error: any) {\n    if (error.message === 'DRY_RUN_ROLLBACK') {\n      console.log('\\nüìä Dry run summary:');\n      console.log(`  - Would migrate ${stats.experiences} experiences`);\n      console.log(`  - Would migrate ${stats.travels} travels`);\n      console.log(`  - Would migrate ${stats.services} services`);\n      console.log(`  - Would migrate ${stats.blogPosts} blog posts`);\n      console.log(`  - Total: ${stats.total} content items\\n`);\n      console.log('‚úÖ Dry run completed successfully');\n      console.log('üí° Run without --dry-run to perform actual migration\\n');\n      return;\n    }\n    \n    console.error('\\n‚ùå Migration failed:', error);\n    console.error('   Transaction has been rolled back. No data was modified.');\n    throw error;\n  } finally {\n    await prisma.$disconnect();\n  }\n}\n\n// Run the migration\nrunMigration()\n  .then(() => {\n    if (!isDryRun) {\n      console.log('‚úÖ Migration completed successfully!\\n');\n      console.log('üìù Next steps:');\n      console.log('   1. Verify the data in ContentItem table');\n      console.log('   2. Update your application code to use ContentItem');\n      console.log('   3. Once verified, you can drop the old tables\\n');\n    }\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('‚ùå Migration script failed');\n    process.exit(1);\n  });\n","size_bytes":16065},"components/cards/TravelCard.tsx":{"content":"import * as React from 'react'\nimport Link from 'next/link'\nimport { Star, Clock, MapPin, ArrowRight } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { TravelCardProps } from '@/lib/types/cards'\nimport { BaseCard } from '@/components/ui/BaseCard'\nimport { CardBadge } from '@/components/ui/CardBadge'\nimport WishlistButton from '@/components/WishlistButton'\n\nexport function TravelCard({\n  id,\n  image,\n  title,\n  description,\n  price,\n  originalPrice,\n  duration,\n  rating,\n  reviews,\n  highlights = [],\n  location,\n  badges = [],\n  ctas = [],\n  className,\n  onClick,\n}: TravelCardProps) {\n  const imageUrl = Array.isArray(image) ? image[0] : image\n\n  return (\n    <BaseCard className={cn('group', className)} onClick={onClick}>\n      <div className=\"relative aspect-[16/10] overflow-hidden\">\n        <img\n          src={imageUrl || '/placeholder.svg'}\n          alt={title}\n          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n        \n        {badges.length > 0 && (\n          <div className=\"absolute top-4 left-4 flex flex-wrap gap-2\">\n            {badges.map((badge, idx) => (\n              <CardBadge key={idx} label={badge.label} variant={badge.variant} />\n            ))}\n          </div>\n        )}\n        \n        {price !== undefined && (\n          <div className=\"absolute top-4 right-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"font-bold text-lg text-gray-900 dark:text-gray-100\">‚Ç¨{price}</span>\n              {originalPrice && (\n                <span className=\"text-sm line-through text-gray-500 dark:text-gray-400\">‚Ç¨{originalPrice}</span>\n              )}\n            </div>\n          </div>\n        )}\n        \n        {rating !== undefined && (\n          <div className=\"absolute bottom-4 right-16 flex items-center gap-1 bg-black/70 backdrop-blur-sm px-3 py-2 rounded-full\">\n            <Star className=\"w-4 h-4 text-yellow-400 fill-current\" />\n            <span className=\"text-white text-sm font-semibold\">{rating}</span>\n            {reviews !== undefined && (\n              <span className=\"text-white/70 text-sm\">({reviews})</span>\n            )}\n          </div>\n        )}\n        \n        <div className=\"absolute bottom-4 right-4\">\n          <WishlistButton\n            itemId={id}\n            itemType=\"travel\"\n            itemTitle={title}\n            itemImage={imageUrl}\n            itemPrice={price}\n            itemDescription={description}\n          />\n        </div>\n      </div>\n\n      <div className=\"p-6 lg:p-8\">\n        <div className=\"flex items-start justify-between mb-4\">\n          <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">\n            {title}\n          </h3>\n        </div>\n\n        {description && (\n          <p className=\"text-gray-600 dark:text-gray-300 mb-4 line-clamp-2\">{description}</p>\n        )}\n\n        <div className=\"flex flex-wrap items-center gap-4 mb-4 text-sm text-gray-600 dark:text-gray-400\">\n          {duration && (\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"w-4 h-4\" />\n              <span>{duration}</span>\n            </div>\n          )}\n          {location && (\n            <div className=\"flex items-center gap-1\">\n              <MapPin className=\"w-4 h-4\" />\n              <span>{location}</span>\n            </div>\n          )}\n        </div>\n\n        {highlights.length > 0 && (\n          <ul className=\"mb-6 space-y-2\">\n            {highlights.slice(0, 3).map((highlight, idx) => (\n              <li key={idx} className=\"flex items-start gap-2 text-sm text-gray-600 dark:text-gray-300\">\n                <span className=\"text-orange-500 mt-0.5\">‚úì</span>\n                <span>{highlight}</span>\n              </li>\n            ))}\n          </ul>\n        )}\n\n        {ctas.length > 0 && (\n          <div className=\"flex gap-3\">\n            {ctas.map((cta, idx) => {\n              const isPrimary = cta.variant === 'primary'\n              const content = (\n                <>\n                  {cta.icon && <cta.icon className=\"w-5 h-5\" />}\n                  <span>{cta.label}</span>\n                  {isPrimary && <ArrowRight className=\"w-4 h-4 ml-1\" />}\n                </>\n              )\n\n              const buttonClasses = cn(\n                'flex-1 inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300',\n                isPrimary\n                  ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 shadow-md hover:shadow-lg'\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700'\n              )\n\n              if (cta.href) {\n                return (\n                  <Link key={idx} href={cta.href} className={buttonClasses}>\n                    {content}\n                  </Link>\n                )\n              }\n\n              return (\n                <button key={idx} onClick={cta.onClick} className={buttonClasses}>\n                  {content}\n                </button>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </BaseCard>\n  )\n}\n\nexport default TravelCard\n","size_bytes":5503},"app/api/friends/notifications/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n\n    const notifications = await db.friendshipNotification.findMany({\n      where: {\n        userId\n      },\n      orderBy: {\n        createdAt: 'desc'\n      }\n    })\n\n    return NextResponse.json({ notifications }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching notifications:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch notifications' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":976},"scripts/seed-admin-user.ts":{"content":"import * as admin from 'firebase-admin';\nimport * as crypto from 'crypto';\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nfunction formatPrivateKey(key: string): string {\n  const header = '-----BEGIN PRIVATE KEY-----';\n  const footer = '-----END PRIVATE KEY-----';\n  \n  if (key.includes(header) && key.includes(footer)) {\n    return key;\n  }\n  \n  if (key.includes('\\\\n')) {\n    key = key.replace(/\\\\n/g, '\\n');\n  }\n  \n  const cleanKey = key.replace(/\\s/g, '').replace(/\\\\n/g, '');\n  const formatted = cleanKey.match(/.{1,64}/g)?.join('\\n') || cleanKey;\n  return `${header}\\n${formatted}\\n${footer}\\n`;\n}\n\nconst privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY || '');\nconst clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL;\nconst projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID;\n\nif (!privateKey || !clientEmail || !projectId) {\n  throw new Error('Missing Firebase Admin credentials');\n}\n\nconst app = admin.initializeApp({\n  credential: admin.credential.cert({\n    projectId,\n    clientEmail,\n    privateKey,\n  }),\n});\n\nconst auth = admin.auth(app);\n\nfunction generateSecurePassword(): string {\n  const length = 16;\n  const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=';\n  let password = '';\n  const randomBytes = crypto.randomBytes(length);\n  \n  for (let i = 0; i < length; i++) {\n    password += charset[randomBytes[i] % charset.length];\n  }\n  \n  return password;\n}\n\nasync function seedAdminUser() {\n  const email = 'admin@moroccodreams.com';\n  const password = generateSecurePassword();\n  const displayName = 'Morocco Dreams Admin';\n\n  try {\n    console.log('üîë Creating admin account in Firebase and Postgres...\\n');\n    \n    let userRecord;\n    try {\n      userRecord = await auth.getUserByEmail(email);\n      console.log(`‚úÖ Firebase user ${email} already exists (UID: ${userRecord.uid})`);\n      \n      await auth.updateUser(userRecord.uid, {\n        password: password,\n        displayName: displayName\n      });\n      console.log('üîÑ Password updated in Firebase\\n');\n    } catch (error: any) {\n      if (error.code === 'auth/user-not-found') {\n        userRecord = await auth.createUser({\n          email,\n          password,\n          displayName,\n          emailVerified: true\n        });\n        console.log(`‚úÖ Firebase user created successfully (UID: ${userRecord.uid})\\n`);\n      } else {\n        throw error;\n      }\n    }\n\n    // Create or update admin user in Postgres\n    console.log('üíæ Saving admin user to Postgres...');\n    \n    const adminUser = await prisma.adminUser.upsert({\n      where: { uid: userRecord.uid },\n      update: {\n        email,\n        role: 'super_admin',\n        active: true,\n        updatedAt: new Date()\n      },\n      create: {\n        uid: userRecord.uid,\n        email,\n        role: 'super_admin',\n        active: true\n      }\n    });\n    \n    console.log('‚úÖ AdminUser record created/updated in Postgres\\n');\n    console.log('AdminUser details:', {\n      id: adminUser.id,\n      uid: adminUser.uid,\n      email: adminUser.email,\n      role: adminUser.role,\n      active: adminUser.active\n    });\n\n    console.log('\\n' + '‚îÄ'.repeat(60));\n    console.log('üéâ Admin account created successfully!');\n    console.log('‚îÄ'.repeat(60));\n    console.log('\\nüìß Login Credentials:');\n    console.log(`   Email:    ${email}`);\n    console.log(`   Password: ${password}`);\n    console.log(`   UID:      ${userRecord.uid}`);\n    console.log(`   Role:     super_admin`);\n    console.log('\\nüîó Login at: /admin/login');\n    console.log('\\n‚ö†Ô∏è  IMPORTANT: Save these credentials in a secure location!');\n    console.log('    The password will not be shown again.\\n');\n\n  } catch (error) {\n    console.error('‚ùå Error creating admin account:', error);\n    throw error;\n  } finally {\n    await prisma.$disconnect();\n  }\n}\n\nseedAdminUser()\n  .then(() => {\n    console.log('\\n‚úÖ Script completed successfully');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('\\n‚ùå Script failed:', error);\n    process.exit(1);\n  });\n","size_bytes":4107},"app/api/friends/[friendshipId]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { friendshipId: string } }\n) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n    const { friendshipId } = params\n\n    const friendship = await db.friendship.findUnique({\n      where: { id: friendshipId }\n    })\n\n    if (!friendship) {\n      return NextResponse.json(\n        { error: 'Friendship not found' },\n        { status: 404 }\n      )\n    }\n\n    if (friendship.senderId !== userId && friendship.receiverId !== userId) {\n      return NextResponse.json(\n        { error: 'Unauthorized to remove this friendship' },\n        { status: 403 }\n      )\n    }\n\n    await db.friendship.delete({\n      where: { id: friendshipId }\n    })\n\n    return NextResponse.json(\n      { message: 'Amicizia rimossa' },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('Error removing friend:', error)\n    return NextResponse.json(\n      { error: 'Failed to remove friend' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1443},"components/cards/BlogCard.tsx":{"content":"import * as React from 'react'\nimport Link from 'next/link'\nimport { Calendar, Clock, User, ArrowRight } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { format } from 'date-fns'\nimport { it } from 'date-fns/locale'\nimport { BlogCardProps } from '@/lib/types/cards'\nimport { BaseCard } from '@/components/ui/BaseCard'\nimport { CardBadge } from '@/components/ui/CardBadge'\n\nexport function BlogCard({\n  id,\n  image,\n  title,\n  description,\n  excerpt,\n  author,\n  publishedAt,\n  readTime,\n  tags = [],\n  badges = [],\n  ctas = [],\n  className,\n  onClick,\n}: BlogCardProps) {\n  const imageUrl = Array.isArray(image) ? image[0] : image\n\n  const formatDate = (date: Date | string) => {\n    const dateObj = typeof date === 'string' ? new Date(date) : date\n    return format(dateObj, 'd MMMM yyyy', { locale: it })\n  }\n\n  return (\n    <BaseCard className={cn('group flex flex-col', className)} onClick={onClick}>\n      <div className=\"relative aspect-[16/10] overflow-hidden\">\n        <img\n          src={imageUrl || '/placeholder.svg'}\n          alt={title}\n          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\n        \n        {badges.length > 0 && (\n          <div className=\"absolute top-4 left-4 flex flex-wrap gap-2\">\n            {badges.map((badge, idx) => (\n              <CardBadge key={idx} label={badge.label} variant={badge.variant} />\n            ))}\n          </div>\n        )}\n        \n        {author && (\n          <div className=\"absolute bottom-4 left-4 flex items-center gap-3\">\n            {author.avatar ? (\n              <img\n                src={author.avatar}\n                alt={author.name}\n                className=\"w-10 h-10 rounded-full border-2 border-white shadow-lg\"\n              />\n            ) : (\n              <div className=\"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center border-2 border-white shadow-lg\">\n                <User className=\"w-5 h-5 text-white\" />\n              </div>\n            )}\n            <div>\n              <p className=\"text-white font-semibold text-sm\">{author.name}</p>\n              <div className=\"flex items-center gap-2 text-xs text-white/80\">\n                {publishedAt && (\n                  <span className=\"flex items-center gap-1\">\n                    <Calendar className=\"w-3 h-3\" />\n                    {formatDate(publishedAt)}\n                  </span>\n                )}\n                {readTime && (\n                  <span className=\"flex items-center gap-1\">\n                    <Clock className=\"w-3 h-3\" />\n                    {readTime}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <div className=\"p-6 lg:p-8 flex-1 flex flex-col\">\n        <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors line-clamp-2\">\n          {title}\n        </h3>\n\n        {(excerpt || description) && (\n          <p className=\"text-gray-600 dark:text-gray-300 mb-4 line-clamp-3 flex-1\">\n            {excerpt || description}\n          </p>\n        )}\n\n        {tags.length > 0 && (\n          <div className=\"flex flex-wrap gap-2 mb-6\">\n            {tags.slice(0, 3).map((tag, idx) => (\n              <span\n                key={idx}\n                className=\"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium hover:bg-orange-100 dark:hover:bg-orange-900/30 hover:text-orange-600 dark:hover:text-orange-400 transition-colors\"\n              >\n                #{tag}\n              </span>\n            ))}\n          </div>\n        )}\n\n        {ctas.length > 0 && (\n          <div className=\"flex gap-3 mt-auto\">\n            {ctas.map((cta, idx) => {\n              const isPrimary = cta.variant === 'primary'\n              const content = (\n                <>\n                  {cta.icon && <cta.icon className=\"w-5 h-5\" />}\n                  <span>{cta.label}</span>\n                  {isPrimary && <ArrowRight className=\"w-4 h-4 ml-1\" />}\n                </>\n              )\n\n              const buttonClasses = cn(\n                'flex-1 inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300',\n                isPrimary\n                  ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600 shadow-md hover:shadow-lg'\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700'\n              )\n\n              if (cta.href) {\n                return (\n                  <Link key={idx} href={cta.href} className={buttonClasses}>\n                    {content}\n                  </Link>\n                )\n              }\n\n              return (\n                <button key={idx} onClick={cta.onClick} className={buttonClasses}>\n                  {content}\n                </button>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </BaseCard>\n  )\n}\n\nexport default BlogCard\n","size_bytes":5245},"components/ui/CardBadge.tsx":{"content":"import * as React from 'react'\nimport { cn } from '@/lib/utils'\nimport { BadgeVariant } from '@/lib/types/cards'\n\nexport interface CardBadgeProps {\n  label: string\n  variant?: BadgeVariant\n  className?: string\n}\n\nconst badgeVariants: Record<BadgeVariant, string> = {\n  default: 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100',\n  featured: 'bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 border-orange-200 dark:border-orange-800',\n  new: 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800',\n  popular: 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800',\n  sale: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800',\n  verified: 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-800',\n}\n\nexport function CardBadge({ label, variant = 'default', className }: CardBadgeProps) {\n  return (\n    <span\n      className={cn(\n        'inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border',\n        badgeVariants[variant],\n        className\n      )}\n    >\n      {label}\n    </span>\n  )\n}\n\nexport default CardBadge\n","size_bytes":1285},"app/api/friends/requests/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n\n    const requests = await db.friendship.findMany({\n      where: {\n        receiverId: userId,\n        status: 'pending'\n      },\n      include: {\n        sender: {\n          select: {\n            id: true,\n            name: true,\n            email: true,\n            photoURL: true\n          }\n        }\n      },\n      orderBy: {\n        createdAt: 'desc'\n      }\n    })\n\n    return NextResponse.json({ requests }, { status: 200 })\n  } catch (error) {\n    console.error('Error fetching friend requests:', error)\n    return NextResponse.json(\n      { error: 'Failed to fetch friend requests' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1181},"app/api/auth/check-admin/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { verifyFirebaseToken } from '@/lib/user-auth-server';\nimport { db } from '@/lib/db';\n\nexport async function GET(request: NextRequest) {\n  try {\n    console.log('[CHECK-ADMIN] Checking admin status...');\n    \n    const authHeader = request.headers.get('authorization');\n    \n    if (!authHeader) {\n      console.log('[CHECK-ADMIN] No authorization header');\n      return NextResponse.json({ isAdmin: false, role: null }, { status: 200 });\n    }\n    \n    const token = authHeader.replace('Bearer ', '');\n    \n    if (!token) {\n      console.log('[CHECK-ADMIN] No token found');\n      return NextResponse.json({ isAdmin: false, role: null }, { status: 200 });\n    }\n    \n    console.log('[CHECK-ADMIN] Verifying Firebase token...');\n    const auth = await verifyFirebaseToken(token);\n    \n    if (!auth) {\n      console.log('[CHECK-ADMIN] Token verification failed');\n      return NextResponse.json({ isAdmin: false, role: null }, { status: 200 });\n    }\n    \n    console.log('[CHECK-ADMIN] Token verified for UID:', auth.uid);\n    console.log('[CHECK-ADMIN] Checking Postgres AdminUser table...');\n    \n    const adminUser = await db.adminUser.findUnique({\n      where: { uid: auth.uid }\n    });\n    \n    if (!adminUser) {\n      console.log('[CHECK-ADMIN] User not found in AdminUser table');\n      return NextResponse.json({ isAdmin: false, role: null }, { status: 200 });\n    }\n    \n    console.log('[CHECK-ADMIN] AdminUser found:', {\n      uid: adminUser.uid,\n      email: adminUser.email,\n      role: adminUser.role,\n      active: adminUser.active\n    });\n    \n    const isAdmin = adminUser.active === true;\n    \n    return NextResponse.json({ \n      isAdmin,\n      role: adminUser.role || null,\n      email: adminUser.email\n    }, { status: 200 });\n    \n  } catch (error) {\n    console.error('[CHECK-ADMIN] Error checking admin status:', error);\n    return NextResponse.json({ \n      isAdmin: false, \n      role: null,\n      error: 'Internal server error'\n    }, { status: 500 });\n  }\n}\n","size_bytes":2055},"app/api/friends/code/generate/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nfunction generateRandomCode(length: number): string {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'\n  let result = ''\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length))\n  }\n  return result\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n\n    const existingCode = await db.friendCode.findUnique({\n      where: { userId }\n    })\n\n    if (existingCode) {\n      return NextResponse.json(\n        { error: 'Friend code already exists for this user', friendCode: existingCode.code },\n        { status: 400 }\n      )\n    }\n\n    let code: string\n    let attempts = 0\n    const maxAttempts = 10\n\n    while (attempts < maxAttempts) {\n      code = `MOR-${generateRandomCode(6)}`\n      \n      const existing = await db.friendCode.findUnique({\n        where: { code }\n      })\n\n      if (!existing) {\n        const friendCode = await db.friendCode.create({\n          data: {\n            userId,\n            code\n          }\n        })\n\n        return NextResponse.json({ friendCode: friendCode.code }, { status: 201 })\n      }\n\n      attempts++\n    }\n\n    return NextResponse.json(\n      { error: 'Failed to generate unique code, please try again' },\n      { status: 500 }\n    )\n  } catch (error) {\n    console.error('Error generating friend code:', error)\n    return NextResponse.json(\n      { error: 'Failed to generate friend code' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1930},"app/api/friends/accept/[friendshipId]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { friendshipId: string } }\n) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n    const { friendshipId } = params\n\n    const friendship = await db.friendship.findUnique({\n      where: { id: friendshipId }\n    })\n\n    if (!friendship) {\n      return NextResponse.json(\n        { error: 'Friendship not found' },\n        { status: 404 }\n      )\n    }\n\n    if (friendship.receiverId !== userId) {\n      return NextResponse.json(\n        { error: 'Unauthorized to accept this request' },\n        { status: 403 }\n      )\n    }\n\n    if (friendship.status !== 'pending') {\n      return NextResponse.json(\n        { error: 'Friendship is not pending' },\n        { status: 400 }\n      )\n    }\n\n    const updatedFriendship = await db.friendship.update({\n      where: { id: friendshipId },\n      data: {\n        status: 'accepted',\n        acceptedAt: new Date()\n      }\n    })\n\n    const receiver = await db.user.findUnique({\n      where: { id: userId },\n      select: { name: true, email: true }\n    })\n\n    await db.friendshipNotification.create({\n      data: {\n        userId: friendship.senderId,\n        type: 'request_accepted',\n        title: 'Richiesta di amicizia accettata',\n        message: `${receiver?.name || receiver?.email || 'Un utente'} ha accettato la tua richiesta di amicizia`,\n        data: {\n          friendshipId: updatedFriendship.id,\n          acceptedBy: userId,\n          acceptedByName: receiver?.name || receiver?.email\n        }\n      }\n    })\n\n    return NextResponse.json(\n      {\n        friendship: updatedFriendship,\n        message: 'Amicizia accettata'\n      },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('Error accepting friend request:', error)\n    return NextResponse.json(\n      { error: 'Failed to accept friend request' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2345},"app/api/friends/notifications/[id]/read/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function PATCH(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n    const { id } = params\n\n    const notification = await db.friendshipNotification.findUnique({\n      where: { id }\n    })\n\n    if (!notification) {\n      return NextResponse.json(\n        { error: 'Notification not found' },\n        { status: 404 }\n      )\n    }\n\n    if (notification.userId !== userId) {\n      return NextResponse.json(\n        { error: 'Unauthorized to update this notification' },\n        { status: 403 }\n      )\n    }\n\n    await db.friendshipNotification.update({\n      where: { id },\n      data: {\n        read: true\n      }\n    })\n\n    return NextResponse.json(\n      { message: 'Notifica aggiornata' },\n      { status: 200 }\n    )\n  } catch (error) {\n    console.error('Error marking notification as read:', error)\n    return NextResponse.json(\n      { error: 'Failed to update notification' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1454},"app/api/friends/request/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { db } from '@/lib/db'\nimport { verifyFirebaseToken } from '@/lib/user-auth-server'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    const token = authHeader?.replace('Bearer ', '')\n    const auth = await verifyFirebaseToken(token || '')\n    \n    if (!auth) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n    \n    const userId = auth.uid\n    const body = await request.json()\n    const { friendCode } = body\n\n    if (!friendCode) {\n      return NextResponse.json(\n        { error: 'Friend code is required' },\n        { status: 400 }\n      )\n    }\n\n    const friendCodeRecord = await db.friendCode.findUnique({\n      where: { code: friendCode }\n    })\n\n    if (!friendCodeRecord) {\n      return NextResponse.json(\n        { error: 'Friend code not found' },\n        { status: 404 }\n      )\n    }\n\n    const receiverId = friendCodeRecord.userId\n\n    if (receiverId === userId) {\n      return NextResponse.json(\n        { error: 'Cannot send friend request to yourself' },\n        { status: 400 }\n      )\n    }\n\n    const existingFriendship = await db.friendship.findFirst({\n      where: {\n        OR: [\n          { senderId: userId, receiverId },\n          { senderId: receiverId, receiverId: userId }\n        ]\n      }\n    })\n\n    if (existingFriendship) {\n      return NextResponse.json(\n        { error: 'Friendship already exists or pending', friendship: existingFriendship },\n        { status: 400 }\n      )\n    }\n\n    const friendship = await db.friendship.create({\n      data: {\n        senderId: userId,\n        receiverId,\n        status: 'pending'\n      }\n    })\n\n    const sender = await db.user.findUnique({\n      where: { id: userId },\n      select: { name: true, email: true }\n    })\n\n    await db.friendshipNotification.create({\n      data: {\n        userId: receiverId,\n        type: 'friend_request',\n        title: 'Nuova richiesta di amicizia',\n        message: `${sender?.name || sender?.email || 'Un utente'} ti ha inviato una richiesta di amicizia`,\n        data: {\n          friendshipId: friendship.id,\n          senderId: userId,\n          senderName: sender?.name || sender?.email\n        }\n      }\n    })\n\n    return NextResponse.json(\n      {\n        friendship,\n        message: 'Richiesta inviata'\n      },\n      { status: 201 }\n    )\n  } catch (error) {\n    console.error('Error sending friend request:', error)\n    return NextResponse.json(\n      { error: 'Failed to send friend request' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2670},"lib/types/cards.ts":{"content":"// Shared card types and interfaces for standardized components\n\nexport type BadgeVariant = 'default' | 'featured' | 'new' | 'popular' | 'sale' | 'verified';\nexport type CTAVariant = 'primary' | 'secondary' | 'outline' | 'ghost';\n\nexport interface CardBadge {\n  label: string;\n  variant: BadgeVariant;\n}\n\nexport interface CardCTA {\n  label: string;\n  href?: string;\n  onClick?: () => void;\n  variant: CTAVariant;\n  icon?: React.ComponentType<{ className?: string }>;\n}\n\nexport interface CardQuickInfo {\n  icon: React.ComponentType<{ className?: string }>;\n  label: string;\n  value: string;\n}\n\n// Base card props - shared across all card types\nexport interface BaseCardProps {\n  id: string;\n  image: string | string[];\n  title: string;\n  description?: string;\n  badges?: CardBadge[];\n  quickInfo?: CardQuickInfo[];\n  className?: string;\n  onClick?: () => void;\n}\n\n// Travel card specific props\nexport interface TravelCardProps extends BaseCardProps {\n  price?: number;\n  originalPrice?: number;\n  duration?: string;\n  rating?: number;\n  reviews?: number;\n  highlights?: string[];\n  location?: string;\n  category?: 'city' | 'desert' | 'coast' | 'mountain';\n  featured?: boolean;\n  ctas?: CardCTA[];\n}\n\n// Experience card specific props\nexport interface ExperienceCardProps extends BaseCardProps {\n  price?: number;\n  duration?: string;\n  difficulty?: 'easy' | 'moderate' | 'hard';\n  groupSize?: string;\n  included?: string[];\n  category?: string;\n  slug?: string;\n  ctas?: CardCTA[];\n}\n\n// Vehicle card specific props\nexport interface VehicleCardProps extends BaseCardProps {\n  pricePerDay?: number;\n  seats?: number;\n  transmission?: 'manual' | 'automatic';\n  fuelType?: string;\n  luggage?: number;\n  features?: string[];\n  availability?: 'available' | 'limited' | 'unavailable';\n  category?: string;\n  ctas?: CardCTA[];\n}\n\n// City card specific props\nexport interface CityCardProps extends BaseCardProps {\n  tagline?: string;\n  distance?: string;\n  population?: string;\n  attractions?: string[];\n  bestSeason?: string;\n  region?: string;\n  ctas?: CardCTA[];\n}\n\n// Service card specific props\nexport interface ServiceCardProps extends BaseCardProps {\n  icon?: React.ComponentType<{ className?: string }>;\n  price?: number | string;\n  priceType?: 'per_person' | 'per_day' | 'per_trip' | 'fixed';\n  category?: string;\n  type?: string;\n  locations?: string[];\n  ctas?: CardCTA[];\n}\n\n// Blog card specific props\nexport interface BlogCardProps extends BaseCardProps {\n  author?: {\n    name: string;\n    avatar?: string;\n  };\n  publishedAt?: Date | string;\n  readTime?: string;\n  tags?: string[];\n  excerpt?: string;\n  slug?: string;\n  ctas?: CardCTA[];\n}\n\n// Wishlist item data for all card types\nexport interface WishlistCardData {\n  itemId: string;\n  itemType: 'vehicle' | 'experience' | 'travel' | 'city' | 'service' | 'activity';\n  itemTitle: string;\n  itemImage?: string;\n  itemPrice?: number;\n  itemDescription?: string;\n}\n","size_bytes":2923},"app/viaggi/page.tsx":{"content":"\"use client\"\n\nimport Link from \"next/link\"\nimport ContactBanner from \"@/components/cta/contact-banner\"\nimport { TravelCard } from \"@/components/cards/TravelCard\"\nimport { useContent } from \"@/hooks/useContent\"\nimport { LoadingSkeleton } from \"@/components/ui/loading-skeleton\"\nimport { ErrorMessage } from \"@/components/ui/error-message\"\nimport { MapPin, Calendar, Users } from \"lucide-react\"\n\nexport default function ViaggiPage() {\n  const { items: travels, loading, error, refetch } = useContent({ type: 'travel' })\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n        <ContactBanner\n          title=\"Pianifica il tuo viaggio in Marocco\"\n          subtitle=\"Contattaci per creare il tour perfetto su misura per te.\"\n        />\n        <section className=\"relative py-16 lg:py-24 bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <header className=\"text-center max-w-3xl mx-auto mb-12\">\n              <h1 className=\"text-4xl lg:text-5xl font-bold mb-6 text-gray-900 dark:text-white\">\n                I Nostri Viaggi in Marocco\n              </h1>\n              <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300\">\n                Esplora le citt√† imperiali, il deserto del Sahara e le meraviglie del Marocco con i nostri tour guidati\n              </p>\n            </header>\n            <LoadingSkeleton count={6} />\n          </div>\n        </section>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n        <ContactBanner\n          title=\"Pianifica il tuo viaggio in Marocco\"\n          subtitle=\"Contattaci per creare il tour perfetto su misura per te.\"\n        />\n        <section className=\"relative py-16 lg:py-24 bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <ErrorMessage error={error} retry={refetch} />\n          </div>\n        </section>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-950\">\n      <ContactBanner\n        title=\"Pianifica il tuo viaggio in Marocco\"\n        subtitle=\"Contattaci per creare il tour perfetto su misura per te.\"\n      />\n\n      {/* Hero Section */}\n      <section className=\"relative py-16 lg:py-24 bg-gradient-to-b from-orange-50 to-white dark:from-gray-900 dark:to-gray-950\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <header className=\"text-center max-w-3xl mx-auto mb-12\">\n            <h1 className=\"text-4xl lg:text-5xl font-bold mb-6 text-gray-900 dark:text-white\">\n              I Nostri Viaggi in Marocco\n            </h1>\n            <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300\">\n              Esplora le citt√† imperiali, il deserto del Sahara e le meraviglie del Marocco con i nostri tour guidati\n            </p>\n          </header>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {travels.map((travel) => (\n              <TravelCard\n                key={travel.id}\n                id={travel.id}\n                image={travel.image || \"/placeholder.svg\"}\n                title={travel.title}\n                description={travel.description || \"\"}\n                price={travel.price || undefined}\n                duration={travel.duration || undefined}\n                location={travel.category || undefined}\n                badges={travel.featured ? [{ label: \"In Evidenza\", variant: \"featured\" as const }] : []}\n                ctas={[\n                  {\n                    label: \"Scopri i dettagli\",\n                    href: `/viaggi/${travel.slug}`,\n                    variant: \"secondary\" as const\n                  },\n                  {\n                    label: \"Prenota ora\",\n                    href: \"/contatti\",\n                    variant: \"primary\" as const\n                  }\n                ]}\n              />\n            ))}\n          </div>\n\n          {travels.length === 0 && (\n            <div className=\"text-center py-12\">\n              <p className=\"text-gray-600 dark:text-gray-400 text-lg\">\n                Nessun viaggio disponibile al momento. Torna presto per scoprire le nostre nuove offerte!\n              </p>\n            </div>\n          )}\n        </div>\n      </section>\n\n      {/* Categories Section */}\n      <section className=\"py-16 lg:py-24 bg-white dark:bg-gray-950\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-4\">\n              Viaggi per Categoria\n            </h2>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300\">\n              Scegli il tipo di avventura che fa per te\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {[\n              {\n                title: \"Citt√† Imperiali\",\n                description: \"Scopri Marrakech, Fes, Meknes e Rabat\",\n                href: \"/viaggi/citta-imperiali\",\n                icon: \"üèõÔ∏è\"\n              },\n              {\n                title: \"Deserto del Sahara\",\n                description: \"Avventure nel deserto sotto le stelle\",\n                href: \"/viaggi/deserto\",\n                icon: \"üèúÔ∏è\"\n              },\n              {\n                title: \"Costa Atlantica\",\n                description: \"Essaouira, Agadir e le spiagge marocchine\",\n                href: \"/viaggi/costa-atlantica\",\n                icon: \"üåä\"\n              },\n              {\n                title: \"Montagne dell'Atlante\",\n                description: \"Trekking e villaggi berberi\",\n                href: \"/viaggi/montagne-atlas\",\n                icon: \"‚õ∞Ô∏è\"\n              }\n            ].map((category, idx) => (\n              <Link\n                key={idx}\n                href={category.href}\n                className=\"group p-6 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-gray-800 dark:to-gray-700 rounded-2xl hover:shadow-xl transition-all duration-300 hover:-translate-y-1\"\n              >\n                <div className=\"text-5xl mb-4\">{category.icon}</div>\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">\n                  {category.title}\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-300\">{category.description}</p>\n              </Link>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Why Choose Us */}\n      <section className=\"py-16 lg:py-24 bg-gray-50 dark:bg-gray-900\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-4\">\n              Perch√© Scegliere i Nostri Tour\n            </h2>\n            <p className=\"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto\">\n              Ogni viaggio √® curato nei minimi dettagli per garantirti un'esperienza autentica e indimenticabile\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8\">\n            {[\n              {\n                icon: MapPin,\n                title: \"Guide Locali Certificate\",\n                description: \"Guide esperte che parlano italiano e conoscono ogni angolo del Marocco\"\n              },\n              {\n                icon: Calendar,\n                title: \"Itinerari Flessibili\",\n                description: \"Tour personalizzabili in base alle tue esigenze e interessi\"\n              },\n              {\n                icon: Users,\n                title: \"Gruppi Piccoli\",\n                description: \"Massimo 8 persone per garantire un'esperienza intima e personalizzata\"\n              }\n            ].map((feature, idx) => (\n              <div key={idx} className=\"text-center p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full mb-4\">\n                  <feature.icon className=\"w-8 h-8 text-orange-600 dark:text-orange-400\" />\n                </div>\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-3\">{feature.title}</h3>\n                <p className=\"text-gray-600 dark:text-gray-300\">{feature.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"py-16 lg:py-24 bg-white dark:bg-gray-950\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-6\">\n            Pronto per la Tua Avventura in Marocco?\n          </h2>\n          <p className=\"text-lg lg:text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto\">\n            Contattaci per creare il viaggio perfetto su misura per te, oppure scegli uno dei nostri tour organizzati\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/viaggi/su-misura\"\n              className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-4 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-semibold text-lg\"\n            >\n              Crea il Tuo Viaggio\n            </Link>\n            <a\n              href=\"https://wa.me/393292333370?text=Ciao! Vorrei informazioni sui viaggi in Marocco.\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"border-2 border-orange-500 text-orange-500 px-8 py-4 rounded-xl hover:bg-orange-500 hover:text-white transition-all duration-300 font-semibold text-lg\"\n            >\n              Scrivici su WhatsApp\n            </a>\n          </div>\n        </div>\n      </section>\n    </div>\n  )\n}\n","size_bytes":10197},"components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7309},"lib/admin-token.ts":{"content":"export async function getAdminToken(): Promise<string> {\n  return process.env.NEXT_PUBLIC_ADMIN_TOKEN || ''\n}\n","size_bytes":110},"components/ui/tabs.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1897},"components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"components/admin/ContentModal.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { toast } from 'sonner'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { useAuth } from '@/context/AuthContext'\nimport { ContentItem } from '@/hooks/useContent'\n\ninterface ContentModalProps {\n  open: boolean\n  onClose: () => void\n  type: 'experience' | 'travel' | 'service' | 'blog'\n  item?: ContentItem | null\n  onSuccess: () => void\n}\n\ninterface FormData {\n  type: string\n  title: string\n  slug: string\n  description: string\n  image: string\n  category: string\n  published: boolean\n  featured: boolean\n  bookable: boolean\n  price: number | null\n  priceNote: string\n  duration: string\n  metadata: any\n}\n\nfunction getDefaultFormData(type: string): FormData {\n  return {\n    type,\n    title: '',\n    slug: '',\n    description: '',\n    image: '',\n    category: type === 'experience' ? 'adventure' : type === 'travel' ? 'tour' : type === 'service' ? 'transfer' : 'guide',\n    published: true,\n    featured: false,\n    bookable: type === 'experience' || type === 'travel',\n    price: null,\n    priceNote: '',\n    duration: '',\n    metadata: {}\n  }\n}\n\nfunction generateSlug(title: string): string {\n  return title\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '')\n    .replace(/[^a-z0-9\\s-]/g, '')\n    .replace(/\\s+/g, '-')\n    .replace(/-+/g, '-')\n    .trim()\n}\n\nexport function ContentModal({ open, onClose, type, item, onSuccess }: ContentModalProps) {\n  const { user } = useAuth()\n  const [formData, setFormData] = useState<FormData>(\n    item ? {\n      type: item.type,\n      title: item.title,\n      slug: item.slug,\n      description: item.description || '',\n      image: item.image || '',\n      category: item.category || '',\n      published: item.published,\n      featured: item.featured,\n      bookable: item.bookable,\n      price: item.price,\n      priceNote: item.priceNote || '',\n      duration: item.duration || '',\n      metadata: item.metadata || {}\n    } : getDefaultFormData(type)\n  )\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    if (item) {\n      setFormData({\n        type: item.type,\n        title: item.title,\n        slug: item.slug,\n        description: item.description || '',\n        image: item.image || '',\n        category: item.category || '',\n        published: item.published,\n        featured: item.featured,\n        bookable: item.bookable,\n        price: item.price,\n        priceNote: item.priceNote || '',\n        duration: item.duration || '',\n        metadata: item.metadata || {}\n      })\n    } else {\n      setFormData(getDefaultFormData(type))\n    }\n  }, [item, type, open])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!formData.title.trim()) {\n      toast.error('Title is required')\n      return\n    }\n\n    if (!formData.slug.trim()) {\n      toast.error('Slug is required')\n      return\n    }\n\n    setLoading(true)\n    \n    try {\n      if (!user) {\n        console.error('[CONTENT-MODAL] No user found')\n        toast.error('You must be logged in to perform this action')\n        setLoading(false)\n        return\n      }\n\n      console.log('[CONTENT-MODAL] Getting ID token for user:', user.uid)\n      const token = await user.getIdToken(true) // Force refresh\n      \n      if (!token) {\n        console.error('[CONTENT-MODAL] No token received')\n        toast.error('Failed to get authentication token')\n        setLoading(false)\n        return\n      }\n      \n      console.log('[CONTENT-MODAL] Token received (first 20 chars):', token.substring(0, 20) + '...')\n      \n      const url = item ? `/api/content/${item.id}` : '/api/content'\n      const method = item ? 'PUT' : 'POST'\n      \n      console.log('[CONTENT-MODAL] Sending request:', { method, url, title: formData.title })\n      \n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          ...formData,\n          price: formData.price ? parseFloat(String(formData.price)) : null\n        })\n      })\n      \n      console.log('[CONTENT-MODAL] Response status:', response.status)\n      \n      const data = await response.json()\n      \n      console.log('[CONTENT-MODAL] Response data:', data)\n      \n      if (!response.ok) {\n        console.error('[CONTENT-MODAL] Request failed:', data)\n        throw new Error(data.error || `Request failed with status ${response.status}`)\n      }\n      \n      toast.success(item ? 'Content updated successfully' : 'Content created successfully')\n      onSuccess()\n    } catch (error: any) {\n      console.error('[CONTENT-MODAL] Error saving content:', error)\n      toast.error(error.message || 'Failed to save content')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleTitleChange = (value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      title: value,\n      slug: prev.slug || generateSlug(value)\n    }))\n  }\n\n  const categories: Record<string, string[]> = {\n    experience: ['adventure', 'culture', 'food', 'wellness', 'photography'],\n    travel: ['tour', 'desert', 'city', 'mountains', 'coast'],\n    service: ['transfer', 'car-rental', 'guide', 'insurance'],\n    blog: ['guide', 'tips', 'culture', 'destinations', 'experiences']\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">\n            {item ? 'Edit' : 'Create'} {type.charAt(0).toUpperCase() + type.slice(1)}\n          </DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"title\">Title *</Label>\n              <Input\n                id=\"title\"\n                value={formData.title}\n                onChange={(e) => handleTitleChange(e.target.value)}\n                placeholder=\"Enter title\"\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"slug\">Slug *</Label>\n              <Input\n                id=\"slug\"\n                value={formData.slug}\n                onChange={(e) => setFormData(prev => ({ ...prev, slug: e.target.value }))}\n                placeholder=\"url-friendly-slug\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">Description</Label>\n            <Textarea\n              id=\"description\"\n              value={formData.description}\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n              placeholder=\"Enter description\"\n              rows={4}\n            />\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"image\">Image URL</Label>\n              <Input\n                id=\"image\"\n                value={formData.image}\n                onChange={(e) => setFormData(prev => ({ ...prev, image: e.target.value }))}\n                placeholder=\"/images/...\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"category\">Category</Label>\n              <Select\n                value={formData.category}\n                onValueChange={(value) => setFormData(prev => ({ ...prev, category: value }))}\n              >\n                <SelectTrigger id=\"category\">\n                  <SelectValue placeholder=\"Select category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {categories[type].map(cat => (\n                    <SelectItem key={cat} value={cat}>\n                      {cat.charAt(0).toUpperCase() + cat.slice(1)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"price\">Price (EUR)</Label>\n              <Input\n                id=\"price\"\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.price || ''}\n                onChange={(e) => setFormData(prev => ({ \n                  ...prev, \n                  price: e.target.value ? parseFloat(e.target.value) : null \n                }))}\n                placeholder=\"0.00\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"priceNote\">Price Note</Label>\n              <Input\n                id=\"priceNote\"\n                value={formData.priceNote}\n                onChange={(e) => setFormData(prev => ({ ...prev, priceNote: e.target.value }))}\n                placeholder=\"per person\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"duration\">Duration</Label>\n              <Input\n                id=\"duration\"\n                value={formData.duration}\n                onChange={(e) => setFormData(prev => ({ ...prev, duration: e.target.value }))}\n                placeholder=\"2-3 hours\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-6\">\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"published\"\n                checked={formData.published}\n                onCheckedChange={(checked) => \n                  setFormData(prev => ({ ...prev, published: checked as boolean }))\n                }\n              />\n              <Label htmlFor=\"published\" className=\"cursor-pointer\">Published</Label>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"featured\"\n                checked={formData.featured}\n                onCheckedChange={(checked) => \n                  setFormData(prev => ({ ...prev, featured: checked as boolean }))\n                }\n              />\n              <Label htmlFor=\"featured\" className=\"cursor-pointer\">Featured</Label>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"bookable\"\n                checked={formData.bookable}\n                onCheckedChange={(checked) => \n                  setFormData(prev => ({ ...prev, bookable: checked as boolean }))\n                }\n              />\n              <Label htmlFor=\"bookable\" className=\"cursor-pointer\">Bookable</Label>\n            </div>\n          </div>\n\n          <DialogFooter className=\"gap-2\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={onClose}\n              disabled={loading}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={loading}>\n              {loading ? 'Saving...' : item ? 'Update' : 'Create'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","size_bytes":11635},"app/admin/bookings/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { toast } from 'sonner'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { useAuth } from '@/context/AuthContext'\nimport { CheckCircle, XCircle, Clock, DollarSign } from 'lucide-react'\nimport { format } from 'date-fns'\nimport { \n  UnifiedAdminTable, \n  TableColumn,\n  TableAction\n} from '@/components/admin/UnifiedAdminTable'\n\ninterface Booking {\n  id: string\n  userId: string\n  bookingType: string\n  itemId: string\n  itemData: {\n    title?: string\n    slug?: string\n    image?: string\n    price?: number\n  }\n  startDate: string | null\n  endDate: string | null\n  travelers: number | null\n  totalPrice: number | null\n  currency: string\n  customerInfo: any\n  status: string\n  paymentStatus: string\n  notes: string | null\n  createdAt: string\n  updatedAt: string\n}\n\nexport default function BookingManagerPage() {\n  const { user } = useAuth()\n  const [bookings, setBookings] = useState<Booking[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    fetchAllBookings()\n  }, [])\n\n  const fetchAllBookings = async () => {\n    setLoading(true)\n    setError(null)\n\n    try {\n      if (!user) {\n        setError('You must be logged in')\n        setLoading(false)\n        return\n      }\n\n      const token = await user.getIdToken()\n      \n      const response = await fetch('/api/bookings?admin=true', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch bookings')\n      }\n\n      const data = await response.json()\n      setBookings(data.bookings || [])\n    } catch (err: any) {\n      console.error('Error fetching bookings:', err)\n      setError(err.message || 'Failed to fetch bookings')\n      toast.error('Failed to load bookings')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const updateStatus = async (bookingId: string, status: string) => {\n    try {\n      if (!user) {\n        toast.error('You must be logged in to perform this action')\n        return\n      }\n\n      const token = await user.getIdToken()\n      \n      const response = await fetch(`/api/bookings/${bookingId}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ status })\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to update booking')\n      }\n\n      toast.success(`Booking ${status} successfully`)\n      fetchAllBookings()\n    } catch (error: any) {\n      console.error('Error updating booking:', error)\n      toast.error(error.message || 'Failed to update booking')\n    }\n  }\n\n  const updatePaymentStatus = async (bookingId: string, paymentStatus: string) => {\n    try {\n      if (!user) {\n        toast.error('You must be logged in to perform this action')\n        return\n      }\n\n      const token = await user.getIdToken()\n      \n      const response = await fetch(`/api/bookings/${bookingId}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ paymentStatus })\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to update payment status')\n      }\n\n      toast.success(`Payment marked as ${paymentStatus}`)\n      fetchAllBookings()\n    } catch (error: any) {\n      console.error('Error updating payment:', error)\n      toast.error(error.message || 'Failed to update payment status')\n    }\n  }\n\n  const getStatusVariant = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n        return 'default'\n      case 'pending':\n        return 'secondary'\n      case 'cancelled':\n        return 'destructive'\n      case 'completed':\n        return 'default'\n      default:\n        return 'secondary'\n    }\n  }\n\n  const getPaymentVariant = (status: string) => {\n    switch (status) {\n      case 'paid':\n        return 'default'\n      case 'pending':\n        return 'secondary'\n      case 'failed':\n        return 'destructive'\n      case 'refunded':\n        return 'secondary'\n      default:\n        return 'secondary'\n    }\n  }\n\n  const formatDate = (dateStr: string | null) => {\n    if (!dateStr) return '-'\n    try {\n      return format(new Date(dateStr), 'MMM dd, yyyy')\n    } catch {\n      return '-'\n    }\n  }\n\n  const columns: TableColumn<Booking>[] = [\n    {\n      key: 'id',\n      label: 'Booking ID',\n      render: (booking) => (\n        <span className=\"font-mono text-xs\">{booking.id.slice(0, 8)}...</span>\n      )\n    },\n    {\n      key: 'item',\n      label: 'Item',\n      render: (booking) => (\n        <div>\n          <p className=\"font-medium\">{booking.itemData?.title || 'N/A'}</p>\n          <p className=\"text-xs text-muted-foreground\">\n            User: {booking.userId.slice(0, 8)}...\n          </p>\n        </div>\n      )\n    },\n    {\n      key: 'bookingType',\n      label: 'Type',\n      render: (booking) => (\n        <Badge variant=\"outline\" className=\"capitalize\">\n          {booking.bookingType}\n        </Badge>\n      )\n    },\n    {\n      key: 'date',\n      label: 'Date',\n      render: (booking) => (\n        <div className=\"text-sm\">\n          <p>{formatDate(booking.startDate)}</p>\n          {booking.endDate && (\n            <p className=\"text-xs text-muted-foreground\">\n              to {formatDate(booking.endDate)}\n            </p>\n          )}\n        </div>\n      )\n    },\n    {\n      key: 'travelers',\n      label: 'Travelers',\n      render: (booking) => booking.travelers ? `${booking.travelers} pax` : '-'\n    },\n    {\n      key: 'price',\n      label: 'Price',\n      render: (booking) => booking.totalPrice ? (\n        <span className=\"font-medium\">\n          {booking.currency} {booking.totalPrice}\n        </span>\n      ) : (\n        <span className=\"text-muted-foreground\">-</span>\n      )\n    },\n    {\n      key: 'status',\n      label: 'Status',\n      render: (booking) => (\n        <Badge variant={getStatusVariant(booking.status)} className=\"capitalize\">\n          {booking.status}\n        </Badge>\n      )\n    },\n    {\n      key: 'paymentStatus',\n      label: 'Payment',\n      render: (booking) => (\n        <Badge variant={getPaymentVariant(booking.paymentStatus)} className=\"capitalize\">\n          {booking.paymentStatus}\n        </Badge>\n      )\n    }\n  ]\n\n  const actions: TableAction<Booking>[] = [\n    {\n      label: 'Confirm Booking',\n      icon: <CheckCircle className=\"w-4 h-4\" />,\n      onClick: (booking) => updateStatus(booking.id, 'confirmed'),\n      className: 'cursor-pointer'\n    },\n    {\n      label: 'Set Pending',\n      icon: <Clock className=\"w-4 h-4\" />,\n      onClick: (booking) => updateStatus(booking.id, 'pending'),\n      className: 'cursor-pointer'\n    },\n    {\n      label: 'Mark Completed',\n      icon: <CheckCircle className=\"w-4 h-4\" />,\n      onClick: (booking) => updateStatus(booking.id, 'completed'),\n      className: 'cursor-pointer'\n    },\n    {\n      label: 'Cancel Booking',\n      icon: <XCircle className=\"w-4 h-4\" />,\n      onClick: (booking) => updateStatus(booking.id, 'cancelled'),\n      className: 'text-red-600 focus:text-red-600 cursor-pointer',\n      separator: true\n    },\n    {\n      label: 'Mark Paid',\n      icon: <DollarSign className=\"w-4 h-4\" />,\n      onClick: (booking) => updatePaymentStatus(booking.id, 'paid'),\n      className: 'cursor-pointer',\n      separator: true\n    },\n    {\n      label: 'Mark Refunded',\n      icon: <DollarSign className=\"w-4 h-4\" />,\n      onClick: (booking) => updatePaymentStatus(booking.id, 'refunded'),\n      className: 'cursor-pointer'\n    }\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Booking Manager</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Manage all customer bookings and reservations\n          </p>\n        </div>\n        <Button onClick={fetchAllBookings} variant=\"outline\">\n          Refresh\n        </Button>\n      </div>\n\n      {loading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin\" />\n        </div>\n      ) : error ? (\n        <div className=\"text-center py-12 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\">\n          <p className=\"text-red-600 dark:text-red-400\">{error}</p>\n          <Button onClick={fetchAllBookings} className=\"mt-4\">\n            Try Again\n          </Button>\n        </div>\n      ) : (\n        <>\n          <UnifiedAdminTable\n            data={bookings}\n            columns={columns}\n            actions={actions}\n            keyExtractor={(booking) => booking.id}\n            emptyMessage=\"No bookings found\"\n          />\n          {bookings.length > 0 && (\n            <div className=\"text-sm text-muted-foreground\">\n              Showing {bookings.length} booking{bookings.length !== 1 ? 's' : ''}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n","size_bytes":9346},"app/admin/content/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport { toast } from 'sonner'\nimport { useContent, ContentItem } from '@/hooks/useContent'\nimport { Button } from '@/components/ui/button'\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs'\nimport { Badge } from '@/components/ui/badge'\nimport { ContentModal } from '@/components/admin/ContentModal'\nimport { useAuth } from '@/context/AuthContext'\nimport { Plus } from 'lucide-react'\nimport { \n  UnifiedAdminTable, \n  TableColumn,\n  createPublishedColumn, \n  createFeaturedColumn,\n  createBooleanBadgeColumn,\n  createStandardActions \n} from '@/components/admin/UnifiedAdminTable'\n\nexport default function ContentManagerPage() {\n  const { user } = useAuth()\n  const [selectedType, setSelectedType] = useState<'experience' | 'travel' | 'service' | 'blog'>('experience')\n  const [modalOpen, setModalOpen] = useState(false)\n  const [editingItem, setEditingItem] = useState<ContentItem | null>(null)\n  \n  const { items, loading, error, refetch } = useContent({ \n    type: selectedType,\n    limit: 100 \n  })\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Are you sure you want to delete this item? It will be unpublished.')) {\n      return\n    }\n\n    try {\n      if (!user) {\n        toast.error('You must be logged in to perform this action')\n        return\n      }\n\n      const token = await user.getIdToken()\n      \n      const response = await fetch(`/api/content/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to delete content')\n      }\n\n      toast.success('Content deleted successfully')\n      refetch()\n    } catch (error: any) {\n      console.error('Error deleting content:', error)\n      toast.error(error.message || 'Failed to delete content')\n    }\n  }\n\n  const handleTogglePublished = async (item: ContentItem) => {\n    try {\n      if (!user) {\n        toast.error('You must be logged in to perform this action')\n        return\n      }\n\n      const token = await user.getIdToken()\n      \n      const response = await fetch(`/api/content/${item.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          published: !item.published\n        })\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to update content')\n      }\n\n      toast.success(item.published ? 'Content unpublished' : 'Content published')\n      refetch()\n    } catch (error: any) {\n      console.error('Error toggling published:', error)\n      toast.error(error.message || 'Failed to update content')\n    }\n  }\n\n  const handleToggleFeatured = async (item: ContentItem) => {\n    try {\n      if (!user) {\n        toast.error('You must be logged in to perform this action')\n        return\n      }\n\n      const token = await user.getIdToken()\n      \n      const response = await fetch(`/api/content/${item.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          featured: !item.featured\n        })\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to update content')\n      }\n\n      toast.success(item.featured ? 'Removed from featured' : 'Added to featured')\n      refetch()\n    } catch (error: any) {\n      console.error('Error toggling featured:', error)\n      toast.error(error.message || 'Failed to update content')\n    }\n  }\n\n  const handleEdit = (item: ContentItem) => {\n    setEditingItem(item)\n    setModalOpen(true)\n  }\n\n  const handleAddNew = () => {\n    setEditingItem(null)\n    setModalOpen(true)\n  }\n\n  const handleModalClose = () => {\n    setModalOpen(false)\n    setEditingItem(null)\n  }\n\n  const handleSuccess = () => {\n    handleModalClose()\n    refetch()\n  }\n\n  const getTypeLabel = (type: string) => {\n    const labels = {\n      experience: 'Experiences',\n      travel: 'Travels',\n      service: 'Services',\n      blog: 'Blog Posts'\n    }\n    return labels[type as keyof typeof labels] || type\n  }\n\n  const columns: TableColumn<ContentItem>[] = [\n    {\n      key: 'title',\n      label: 'Title',\n      render: (item) => (\n        <div>\n          <p className=\"font-semibold\">{item.title}</p>\n          <p className=\"text-xs text-muted-foreground\">/{item.slug}</p>\n        </div>\n      )\n    },\n    {\n      key: 'category',\n      label: 'Category',\n      render: (item) => (\n        <Badge variant=\"outline\" className=\"capitalize\">\n          {item.category || 'N/A'}\n        </Badge>\n      )\n    },\n    {\n      key: 'price',\n      label: 'Price',\n      render: (item) => item.price ? (\n        <span className=\"font-medium\">‚Ç¨{item.price}</span>\n      ) : (\n        <span className=\"text-muted-foreground\">-</span>\n      )\n    },\n    createPublishedColumn<ContentItem>(),\n    createFeaturedColumn<ContentItem>(),\n    createBooleanBadgeColumn<ContentItem>('bookable', 'Bookable', 'Yes', 'No')\n  ]\n\n  const actions = createStandardActions<ContentItem>({\n    onEdit: handleEdit,\n    onTogglePublished: handleTogglePublished,\n    onToggleFeatured: handleToggleFeatured,\n    onDelete: (item) => handleDelete(item.id)\n  })\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Content Manager</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Manage all content items across the website\n          </p>\n        </div>\n      </div>\n\n      <Tabs value={selectedType} onValueChange={(val) => setSelectedType(val as any)}>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex gap-4\">\n            <TabsList className=\"grid grid-cols-4 w-auto\">\n              <TabsTrigger value=\"experience\">Experiences</TabsTrigger>\n              <TabsTrigger value=\"travel\">Travels</TabsTrigger>\n              <TabsTrigger value=\"service\">Services</TabsTrigger>\n              <TabsTrigger value=\"blog\">Blog</TabsTrigger>\n            </TabsList>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => window.location.href = '/admin/vehicles'}\n                className=\"gap-2\"\n              >\n                Vehicles ‚Üí\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => window.location.href = '/admin/bookings'}\n                className=\"gap-2\"\n              >\n                Bookings ‚Üí\n              </Button>\n            </div>\n          </div>\n\n          <Button onClick={handleAddNew} className=\"gap-2\">\n            <Plus className=\"w-4 h-4\" />\n            Add New {getTypeLabel(selectedType).slice(0, -1)}\n          </Button>\n        </div>\n\n        <TabsContent value={selectedType} className=\"mt-6\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin\" />\n            </div>\n          ) : error ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-red-500\">Error loading content: {error.message}</p>\n            </div>\n          ) : (\n            <>\n              <UnifiedAdminTable\n                data={items}\n                columns={columns}\n                actions={actions}\n                keyExtractor={(item) => item.id}\n                emptyMessage={\n                  <div className=\"text-center\">\n                    <p className=\"text-muted-foreground text-lg mb-4\">\n                      No {getTypeLabel(selectedType).toLowerCase()} found\n                    </p>\n                    <Button onClick={handleAddNew} className=\"gap-2\">\n                      <Plus className=\"w-4 h-4\" />\n                      Create your first {getTypeLabel(selectedType).slice(0, -1).toLowerCase()}\n                    </Button>\n                  </div>\n                }\n              />\n              {items.length > 0 && (\n                <div className=\"mt-4 text-sm text-muted-foreground\">\n                  Showing {items.length} {getTypeLabel(selectedType).toLowerCase()}\n                </div>\n              )}\n            </>\n          )}\n        </TabsContent>\n      </Tabs>\n\n      <ContentModal\n        open={modalOpen}\n        onClose={handleModalClose}\n        type={selectedType}\n        item={editingItem}\n        onSuccess={handleSuccess}\n      />\n    </div>\n  )\n}\n","size_bytes":8885},"components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ ...props }) => <ChevronLeft className=\"h-4 w-4\" />,\n        IconRight: ({ ...props }) => <ChevronRight className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2623},"data/cities.backup.ts":{"content":"export interface CityAttraction {\n  title: string\n  description: string\n  image: string\n  price?: string\n  duration?: string\n}\n\nexport interface City {\n  id: string\n  name: string\n  slug: string\n  tagline: string\n  heroImage: string\n  description: string\n  history: string\n  attractions: CityAttraction[]\n  bestTime: string\n  howToArrive: string\n  tourPrices: {\n    halfDay: string\n    fullDay: string\n    multiDay?: string\n  }\n  highlights: string[]\n  location: {\n    distance: string\n    coordinates?: { lat: number; lng: number }\n  }\n}\n\nexport const cities: City[] = [\n  {\n    id: 'marrakech',\n    name: 'Marrakech',\n    slug: 'marrakech',\n    tagline: 'La Perla del Sud, citt√† dei colori e dei profumi',\n    heroImage: '/images/marrakech-hero.png',\n    description: 'Marrakech √® una delle quattro citt√† imperiali del Marocco, famosa per i suoi mercati vivaci, i giardini lussureggianti e la piazza Jemaa el-Fna, cuore pulsante della medina.',\n    history: 'Fondata nel 1062 da Yusuf ibn Tashfin, Marrakech √® stata la capitale di potenti dinastie come gli Almoravidi e gli Almohadi. La citt√† ha conservato il suo fascino antico con palazzi, moschee e giardini che testimoniano secoli di storia.',\n    attractions: [\n      {\n        title: 'Piazza Jemaa el-Fna',\n        description: 'Il cuore pulsante di Marrakech, patrimonio UNESCO, con incantatori di serpenti, musicisti e bancarelle di cibo',\n        image: '/images/jemaa-el-fna.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Giardini Majorelle',\n        description: 'Oasi di pace creata da Jacques Majorelle, ora di propriet√† Yves Saint Laurent',\n        image: '/images/majorelle.png',\n        price: '‚Ç¨7',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Palazzo Bahia',\n        description: 'Capolavoro architettonico del XIX secolo con cortili, giardini e decorazioni mozzafiato',\n        image: '/images/bahia.png',\n        price: '‚Ç¨7',\n        duration: '1 ora'\n      },\n      {\n        title: 'Souks della Medina',\n        description: 'Labirinto di mercati tradizionali con artigianato, spezie, tessuti e gioielli',\n        image: '/images/souks.png',\n        duration: '2-4 ore'\n      }\n    ],\n    bestTime: 'Primavera (marzo-maggio) e autunno (settembre-novembre) sono ideali. Evita luglio-agosto per il caldo intenso.',\n    howToArrive: 'Aeroporto Marrakech-Menara (RAK) con voli diretti da tutta Europa. Transfer per il centro in 15-20 minuti.',\n    tourPrices: {\n      halfDay: '‚Ç¨40-60',\n      fullDay: '‚Ç¨80-120',\n      multiDay: '‚Ç¨200-400'\n    },\n    highlights: [\n      'Piazza Jemaa el-Fna UNESCO',\n      'Giardini Majorelle',\n      'Palazzo Bahia',\n      'Souks tradizionali',\n      'Moschea Koutoubia',\n      'Tombe Saadiane'\n    ],\n    location: {\n      distance: 'Centro citt√†',\n      coordinates: { lat: 31.6295, lng: -7.9811 }\n    }\n  },\n  {\n    id: 'fes',\n    name: 'F√®s',\n    slug: 'fes',\n    tagline: 'La Capitale Spirituale, cuore culturale del Marocco',\n    heroImage: '/images/fes-hero.png',\n    description: 'F√®s √® la citt√† medievale meglio conservata del mondo arabo, famosa per la sua medina labirintica, le concerie storiche e l\\'universit√† Al Quaraouiyine, la pi√π antica del mondo.',\n    history: 'Fondata nell\\'808 d.C. da Idris II, F√®s √® stata per secoli il centro culturale e spirituale del Marocco. La sua medina, patrimonio UNESCO, √® rimasta praticamente immutata da mille anni.',\n    attractions: [\n      {\n        title: 'Medina di F√®s el-Bali',\n        description: 'La pi√π grande area urbana pedonale del mondo, patrimonio UNESCO dal 1981',\n        image: '/images/fes-medina.png',\n        duration: 'Mezza giornata'\n      },\n      {\n        title: 'Concerie Chouara',\n        description: 'Le storiche concerie del XIII secolo dove si lavora la pelle con metodi tradizionali',\n        image: '/images/chouara.png',\n        duration: '1 ora'\n      },\n      {\n        title: 'Universit√† Al Quaraouiyine',\n        description: 'La pi√π antica universit√† del mondo ancora funzionante, fondata nell\\'859',\n        image: '/images/al-quaraouiyine.png',\n        duration: '30 min (esterno)'\n      },\n      {\n        title: 'Palazzo Reale',\n        description: 'Magnifico palazzo con porte dorate e architettura mozzafiato',\n        image: '/images/fes-palace.png',\n        duration: '30 min (esterno)'\n      }\n    ],\n    bestTime: 'Primavera (marzo-maggio) e autunno (ottobre-novembre). Evita l\\'estate per il caldo nella medina.',\n    howToArrive: 'Aeroporto F√®s-Sa√Øss (FEZ) o treno da Marrakech (7 ore) o Casablanca (4 ore).',\n    tourPrices: {\n      halfDay: '‚Ç¨35-50',\n      fullDay: '‚Ç¨70-100'\n    },\n    highlights: [\n      'Medina UNESCO pi√π grande del mondo',\n      'Concerie Chouara storiche',\n      'Universit√† Al Quaraouiyine',\n      'Madrasa Bou Inania',\n      'Souks artigianali',\n      'Palazzo Reale'\n    ],\n    location: {\n      distance: '280 km da Casablanca',\n      coordinates: { lat: 34.0181, lng: -5.0078 }\n    }\n  },\n  {\n    id: 'meknes',\n    name: 'Mekn√®s',\n    slug: 'meknes',\n    tagline: 'La Versailles del Marocco',\n    heroImage: '/images/meknes-hero.png',\n    description: 'Mekn√®s √® una delle quattro citt√† imperiali del Marocco, conosciuta come la \"Versailles del Marocco\" per i suoi grandiosi monumenti e palazzi. La citt√† combina magnificenza imperiale con un\\'atmosfera rilassata, offrendo un\\'esperienza autentica lontano dalle folle turistiche. La sua medina, patrimonio UNESCO, racchiude tesori architettonici straordinari.',\n    history: 'Fondata nell\\'XI secolo, Mekn√®s raggiunse il suo splendore sotto il sultano Moulay Ismail (1672-1727) che la trasform√≤ in una capitale imperiale maestosa. Il sultano costru√¨ oltre 50 km di mura, palazzi sontuosi e monumenti grandiosi, impiegando migliaia di schiavi e artigiani. La citt√† conserva ancora oggi la grandiosit√† di quel periodo d\\'oro.',\n    attractions: [\n      {\n        title: 'Bab Mansour',\n        description: 'La porta monumentale pi√π bella del Marocco, capolavoro di architettura islamica con decorazioni in zellige e calligrafia araba',\n        image: '/images/meknes-bab-mansour.png',\n        duration: '30 min'\n      },\n      {\n        title: 'Mausoleo Moulay Ismail',\n        description: 'L\\'unico mausoleo reale in Marocco accessibile ai non musulmani, con cortili eleganti e decorazioni raffinate',\n        image: '/images/meknes-mausoleo.png',\n        price: '‚Ç¨5',\n        duration: '45 min'\n      },\n      {\n        title: 'Rovine di Volubilis',\n        description: 'Sito archeologico romano patrimonio UNESCO a 30 km da Mekn√®s, con mosaici straordinari e rovine ben conservate',\n        image: '/images/meknes-volubilis.png',\n        price: '‚Ç¨7',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Medina e Souks',\n        description: 'Medina autentica e meno turistica con souks tradizionali, artigiani locali e atmosfera rilassata',\n        image: '/images/meknes-medina.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Heri es-Souani',\n        description: 'Antichi granai e scuderie imperiali, testimonianza dell\\'ambizione architettonica di Moulay Ismail',\n        image: '/images/meknes-heri.png',\n        price: '‚Ç¨3',\n        duration: '1 ora'\n      }\n    ],\n    bestTime: 'Primavera (marzo-maggio) e autunno (settembre-novembre) offrono temperature piacevoli. L\\'inverno pu√≤ essere freddo.',\n    howToArrive: 'Treno da F√®s (45 min), Rabat (2 ore) o Casablanca (3 ore). L\\'aeroporto pi√π vicino √® F√®s-Sa√Øss (60 km).',\n    tourPrices: {\n      halfDay: '‚Ç¨30-45',\n      fullDay: '‚Ç¨60-90',\n      multiDay: '‚Ç¨150-250'\n    },\n    highlights: [\n      'Bab Mansour monumentale',\n      'Mausoleo Moulay Ismail',\n      'Rovine romane Volubilis UNESCO',\n      'Heri es-Souani granai imperiali',\n      'Medina autentica',\n      'Palazzo Reale Dar el-Makhzen'\n    ],\n    location: {\n      distance: '60 km da F√®s',\n      coordinates: { lat: 33.8935, lng: -5.5473 }\n    }\n  },\n  {\n    id: 'rabat',\n    name: 'Rabat',\n    slug: 'rabat',\n    tagline: 'La Capitale Moderna',\n    heroImage: '/images/rabat-hero.png',\n    description: 'Rabat √® la capitale politica e amministrativa del Marocco, una citt√† moderna ed elegante che combina armoniosamente tradizione e modernit√†. Meno caotica di Marrakech o Casablanca, offre monumenti storici straordinari, giardini curati, una bella corniche atlantica e un\\'atmosfera sofisticata. La citt√† √® patrimonio UNESCO dal 2012.',\n    history: 'Fondata nel XII secolo dagli Almohadi come ribat (fortezza), Rabat divenne capitale del Marocco nel 1912 sotto il Protettorato francese. La citt√† conserva importanti monumenti di diverse epoche: la Torre Hassan e il Mausoleo Mohammed V testimoniano la grandezza almohade, mentre la Kasbah des Oudaias racconta secoli di storia andalusa e berbera.',\n    attractions: [\n      {\n        title: 'Torre Hassan e Mausoleo Mohammed V',\n        description: 'Minareto incompiuto del XII secolo e magnifico mausoleo in marmo bianco, simboli della citt√†',\n        image: '/images/rabat-hassan.png',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Kasbah des Oudaias',\n        description: 'Fortezza del XII secolo con vicoli blu e bianchi, giardini andalusi e vista sull\\'oceano',\n        image: '/images/rabat-kasbah.png',\n        duration: '2 ore'\n      },\n      {\n        title: 'Chellah',\n        description: 'Necropoli medievale su rovine romane, sito archeologico affascinante con giardini rigogliosi',\n        image: '/images/rabat-chellah.png',\n        price: '‚Ç¨7',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Medina di Rabat',\n        description: 'Medina ordinata e pulita con souks tradizionali, rue des Consuls e artigianato locale',\n        image: '/images/rabat-medina.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Giardini Esotici di Bouknadel',\n        description: 'Splendidi giardini botanici con piante da tutto il mondo e atmosfera rilassante',\n        image: '/images/rabat-giardini.png',\n        price: '‚Ç¨5',\n        duration: '1-2 ore'\n      }\n    ],\n    bestTime: 'Tutto l\\'anno. Primavera e autunno sono ideali, l\\'estate √® mite grazie all\\'oceano.',\n    howToArrive: 'Aeroporto Rabat-Sal√© (RBA) a 10 km. Treno da Casablanca (1 ora), Marrakech (4 ore), Tangeri (4,5 ore).',\n    tourPrices: {\n      halfDay: '‚Ç¨35-50',\n      fullDay: '‚Ç¨70-100'\n    },\n    highlights: [\n      'Torre Hassan e Mausoleo UNESCO',\n      'Kasbah des Oudaias blu e bianca',\n      'Chellah necropoli medievale',\n      'Medina ordinata e moderna',\n      'Corniche atlantica',\n      'Palazzo Reale'\n    ],\n    location: {\n      distance: '90 km da Casablanca',\n      coordinates: { lat: 33.9716, lng: -6.8498 }\n    }\n  },\n  {\n    id: 'casablanca',\n    name: 'Casablanca',\n    slug: 'casablanca',\n    tagline: 'La Metropoli Economica',\n    heroImage: '/images/casablanca-hero.png',\n    description: 'Casablanca √® la capitale economica del Marocco, una metropoli moderna e dinamica affacciata sull\\'Atlantico. Con oltre 4 milioni di abitanti, √® il cuore finanziario e commerciale del paese. La citt√† combina architettura art d√©co, modernit√† urbana e la maestosa Moschea Hassan II, terza moschea pi√π grande del mondo.',\n    history: 'Originariamente un piccolo porto berbero chiamato Anfa, Casablanca si svilupp√≤ durante il Protettorato francese (1912-1956) diventando il principale porto del Marocco. L\\'architettura art d√©co degli anni \\'20-\\'30 caratterizza ancora il centro, mentre la Moschea Hassan II (completata nel 1993) rappresenta il rinnovamento religioso e culturale del Marocco moderno.',\n    attractions: [\n      {\n        title: 'Moschea Hassan II',\n        description: 'Capolavoro architettonico sul mare, seconda moschea pi√π alta del mondo con minareto di 210m',\n        image: '/images/casablanca-hassan-ii.png',\n        price: '‚Ç¨13',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Corniche Ain Diab',\n        description: 'Lungomare moderno con beach club, ristoranti, locali notturni e spiagge urbane',\n        image: '/images/casablanca-corniche.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Quartiere Art D√©co',\n        description: 'Centro storico con splendidi edifici coloniali art d√©co degli anni \\'20-\\'30',\n        image: '/images/casablanca-art-deco.png',\n        duration: '2 ore'\n      },\n      {\n        title: 'Morocco Mall',\n        description: 'Uno dei pi√π grandi centri commerciali d\\'Africa con acquario gigante e marchi internazionali',\n        image: '/images/casablanca-mall.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Antica Medina',\n        description: 'Piccola medina ricostruita nel XVIII secolo con souks, artigianato e atmosfera tradizionale',\n        image: '/images/casablanca-medina.png',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Rick\\'s Caf√©',\n        description: 'Ristorante ispirato al film \"Casablanca\", ricreazione fedele del caf√© del film',\n        image: '/images/casablanca-ricks.png',\n        price: '‚Ç¨30-50',\n        duration: '2 ore'\n      }\n    ],\n    bestTime: 'Tutto l\\'anno. Primavera e autunno ideali. Estate mite grazie alla brezza atlantica.',\n    howToArrive: 'Aeroporto Mohammed V (CMN), principale hub internazionale del Marocco. Treno per il centro in 45 min.',\n    tourPrices: {\n      halfDay: '‚Ç¨40-60',\n      fullDay: '‚Ç¨80-120'\n    },\n    highlights: [\n      'Moschea Hassan II monumentale',\n      'Architettura Art D√©co',\n      'Corniche Ain Diab',\n      'Morocco Mall',\n      'Rick\\'s Caf√©',\n      'Vita notturna moderna'\n    ],\n    location: {\n      distance: 'Centro citt√†',\n      coordinates: { lat: 33.5731, lng: -7.5898 }\n    }\n  },\n  {\n    id: 'essaouira',\n    name: 'Essaouira',\n    slug: 'essaouira',\n    tagline: 'La Perla dell\\'Atlantico',\n    heroImage: '/images/essaouira-hero.png',\n    description: 'Essaouira √® una pittoresca citt√† fortificata sulla costa atlantica, famosa per le sue mura bianche e blu, il porto peschereccio vivace e l\\'atmosfera boh√©mien. Patrimonio UNESCO, √® un paradiso per surfisti, artisti e amanti della tranquillit√†. La brezza costante rende il clima piacevole tutto l\\'anno.',\n    history: 'Fondata nel XVIII secolo dal sultano Sidi Mohammed ben Abdallah che incaric√≤ l\\'architetto francese Th√©odore Cornut di progettare una citt√†-fortezza. Essaouira divenne un importante porto commerciale con una comunit√† ebraica fiorente. Negli anni \\'60-\\'70 attrasse musicisti come Jimi Hendrix, diventando rifugio di artisti. Oggi conserva il suo fascino autentico.',\n    attractions: [\n      {\n        title: 'Medina di Essaouira',\n        description: 'Medina fortificata patrimonio UNESCO con vicoli bianchi e blu, gallerie d\\'arte e artigianato del legno di tuia',\n        image: '/images/essaouira-medina.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Porto Peschereccio',\n        description: 'Porto autentico con barche blu, gabbiani, pescatori e bancarelle di pesce fresco grigliato',\n        image: '/images/essaouira-porto.png',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Bastioni e Skala',\n        description: 'Fortificazioni del XVIII secolo con cannoni portoghesi affacciati sull\\'oceano, panorami spettacolari',\n        image: '/images/essaouira-bastioni.png',\n        duration: '1 ora'\n      },\n      {\n        title: 'Spiaggia di Essaouira',\n        description: 'Lunga spiaggia perfetta per surf, kitesurf e passeggiate al tramonto con vento costante',\n        image: '/images/essaouira-spiaggia.png',\n        duration: 'Mezza giornata'\n      },\n      {\n        title: 'Isola di Mogador',\n        description: 'Riserva ornitologica al largo della costa, rifugio del falco di Eleonora (visibile solo dall\\'esterno)',\n        image: '/images/essaouira-mogador.png',\n        duration: '30 min'\n      }\n    ],\n    bestTime: 'Tutto l\\'anno. Primavera per i festival musicali, estate per sport acquatici. Evita l\\'inverno se sensibili al vento.',\n    howToArrive: 'Voli diretti per aeroporto Essaouira-Mogador. In auto da Marrakech (2,5 ore) o Agadir (2,5 ore).',\n    tourPrices: {\n      halfDay: '‚Ç¨30-45',\n      fullDay: '‚Ç¨60-90',\n      multiDay: '‚Ç¨150-280'\n    },\n    highlights: [\n      'Medina UNESCO bianca e blu',\n      'Porto peschereccio autentico',\n      'Bastioni storici Skala',\n      'Surf e kitesurf',\n      'Festival Gnaoua di musica',\n      'Artigianato legno di tuia'\n    ],\n    location: {\n      distance: '180 km da Marrakech',\n      coordinates: { lat: 31.5125, lng: -9.7695 }\n    }\n  },\n  {\n    id: 'chefchaouen',\n    name: 'Chefchaouen',\n    slug: 'chefchaouen',\n    tagline: 'La Citt√† Blu',\n    heroImage: '/images/chefchaouen-hero.png',\n    description: 'Chefchaouen, la \"Perla Blu\" del Marocco, √® una citt√† magica incastonata nelle montagne del Rif. Famosa per i suoi edifici dipinti in infinite sfumature di blu, stradine acciottolate e atmosfera rilassata, √® un paradiso per fotografi e viaggiatori in cerca di autenticit√†. L\\'architettura andalusa e l\\'artigianato locale completano il fascino unico di questa citt√†.',\n    history: 'Fondata nel 1471 da Moulay Ali Ben Moussa Ben Rached El Alami come fortezza contro le invasioni portoghesi, Chefchaouen accolse rifugiati musulmani ed ebrei dalla Spagna dopo la Reconquista. L\\'influenza andalusa √® evidente nell\\'architettura. La tradizione di dipingere le case di blu risale agli anni \\'30, quando la comunit√† ebraica introdusse questa usanza per ragioni religiose e pratiche.',\n    attractions: [\n      {\n        title: 'Medina Blu',\n        description: 'Labirinto incantevole di vicoli dipinti in infinite tonalit√† di blu, con porte colorate e angoli fotografici',\n        image: '/images/chefchaouen-medina.png',\n        duration: '3-4 ore'\n      },\n      {\n        title: 'Kasbah e Museo',\n        description: 'Fortezza del XV secolo nel cuore della medina con museo etnografico e giardini andalusi',\n        image: '/images/chefchaouen-kasbah.png',\n        price: '‚Ç¨5',\n        duration: '1 ora'\n      },\n      {\n        title: 'Cascata Ras el-Maa',\n        description: 'Cascata ai margini della medina, luogo di ritrovo per locali e punto di partenza per escursioni',\n        image: '/images/chefchaouen-cascata.png',\n        duration: '30 min'\n      },\n      {\n        title: 'Moschea Spagnola',\n        description: 'Moschea abbandonata su una collina con vista panoramica spettacolare sulla citt√† blu',\n        image: '/images/chefchaouen-moschea.png',\n        duration: '1-2 ore (con escursione)'\n      },\n      {\n        title: 'Souks Artigianali',\n        description: 'Mercati con tessuti berberi, ceramiche dipinte a mano, formaggio di capra e artigianato locale',\n        image: '/images/chefchaouen-souks.png',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Parco Nazionale Talassemtane',\n        description: 'Parco montano con trekking, foreste di cedri, sorgenti naturali e villaggio berbero di Akchour',\n        image: '/images/chefchaouen-parco.png',\n        duration: 'Giornata intera'\n      }\n    ],\n    bestTime: 'Primavera (aprile-giugno) e autunno (settembre-ottobre). Estate calda ma piacevole. Inverno freddo in montagna.',\n    howToArrive: 'In auto da Tangeri (2 ore), F√®s (4 ore) o T√©touan (1 ora). Autobus da tutte le citt√† principali.',\n    tourPrices: {\n      halfDay: '‚Ç¨25-40',\n      fullDay: '‚Ç¨50-80',\n      multiDay: '‚Ç¨180-300'\n    },\n    highlights: [\n      'Medina blu Instagram-friendly',\n      'Kasbah del XV secolo',\n      'Vista dalla Moschea Spagnola',\n      'Cascata Ras el-Maa',\n      'Artigianato berbero',\n      'Trekking montagne del Rif'\n    ],\n    location: {\n      distance: '110 km da Tangeri',\n      coordinates: { lat: 35.1689, lng: -5.2636 }\n    }\n  },\n  {\n    id: 'tangier',\n    name: 'Tangeri',\n    slug: 'tangier',\n    tagline: 'La Porta d\\'Africa',\n    heroImage: '/images/tangier-hero.png',\n    description: 'Tangeri, affacciata sullo Stretto di Gibilterra, √® la porta tra Europa e Africa, un crocevia di culture che ha ispirato artisti e scrittori per secoli. La citt√† combina fascino cosmopolita, storia stratificata e paesaggi mozzafiato. Oggi √® una metropoli moderna in rapida crescita, con nuovi sviluppi e il pi√π grande porto del Mediterraneo.',\n    history: 'Citt√† antichissima, Tangeri √® stata sotto il controllo di fenici, romani, vandali, bizantini, arabi, portoghesi, spagnoli e britannici. Dal 1923 al 1956 fu Zona Internazionale, paradiso fiscale che attrasse artisti, spie e avventurieri come Paul Bowles, William Burroughs e Matisse. Questo periodo boh√©mien ha lasciato un\\'eredit√† culturale unica che ancora permea la citt√†.',\n    attractions: [\n      {\n        title: 'Grotte di Ercole',\n        description: 'Grotte naturali sul promontorio di Cap Spartel, con apertura a forma di Africa e leggende mitologiche',\n        image: '/images/tangier-grotte.png',\n        price: '‚Ç¨5',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Kasbah e Museo',\n        description: 'Antica fortezza con Palazzo del Sultano, museo d\\'arte marocchina e terrazza con vista sullo Stretto',\n        image: '/images/tangier-kasbah.png',\n        price: '‚Ç¨3',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Medina di Tangeri',\n        description: 'Medina vivace con Petit Socco, Grande Socco, souks tradizionali e atmosfera cosmopolita',\n        image: '/images/tangier-medina.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Cap Spartel',\n        description: 'Promontorio all\\'estremo nord-ovest dell\\'Africa dove Atlantico e Mediterraneo si incontrano, con faro storico',\n        image: '/images/tangier-cap-spartel.png',\n        duration: '1 ora'\n      },\n      {\n        title: 'Caf√© Hafa',\n        description: 'Caff√® storico a picco sul mare, frequentato da artisti e scrittori, con vista spettacolare sullo Stretto',\n        image: '/images/tangier-cafe-hafa.png',\n        duration: '1 ora'\n      },\n      {\n        title: 'Cinema Rif e Grand Socco',\n        description: 'Cuore pulsante della citt√† moderna, piazza vivace con architettura coloniale e vita locale',\n        image: '/images/tangier-grand-socco.png',\n        duration: '1 ora'\n      }\n    ],\n    bestTime: 'Primavera (aprile-giugno) e autunno (settembre-novembre). Estate mite grazie alla posizione costiera.',\n    howToArrive: 'Aeroporto Ibn Battouta (TNG) a 15 km. Ferry dalla Spagna (Tarifa 35 min, Algeciras 1,5 ore). Treno da Casablanca, Rabat.',\n    tourPrices: {\n      halfDay: '‚Ç¨35-50',\n      fullDay: '‚Ç¨70-100',\n      multiDay: '‚Ç¨180-320'\n    },\n    highlights: [\n      'Grotte di Ercole mitologiche',\n      'Kasbah e vista sullo Stretto',\n      'Cap Spartel punto estremo',\n      'Caf√© Hafa storico',\n      'Medina cosmopolita',\n      'Storia internazionale unica'\n    ],\n    location: {\n      distance: '14 km dalla Spagna (via mare)',\n      coordinates: { lat: 35.7595, lng: -5.8340 }\n    }\n  },\n  {\n    id: 'agadir',\n    name: 'Agadir',\n    slug: 'agadir',\n    tagline: 'La Riviera Marocchina',\n    heroImage: '/images/agadir-hero.png',\n    description: 'Agadir √® la principale destinazione balneare del Marocco, con 300 giorni di sole all\\'anno, una lunga spiaggia dorata e un\\'atmosfera rilassata. Ricostruita dopo il devastante terremoto del 1960, √® una citt√† moderna con resort, golf, sport acquatici e vita notturna. Perfetta per chi cerca mare, relax e clima mite tutto l\\'anno.',\n    history: 'Fondata nel XVI secolo come porto fortificato portoghese, Agadir divenne importante centro commerciale. Il terribile terremoto del 29 febbraio 1960 distrusse completamente la citt√†, causando 15.000 vittime. La citt√† fu ricostruita 2 km pi√π a sud con criteri antisismici moderni. L\\'antica Kasbah in collina testimonia il passato pre-terremoto. Oggi Agadir √® la capitale turistica del sud del Marocco.',\n    attractions: [\n      {\n        title: 'Spiaggia di Agadir',\n        description: 'Spiaggia urbana di 10 km con sabbia dorata, lungomare moderno, sport acquatici e stabilimenti balneari',\n        image: '/images/agadir-spiaggia.png',\n        duration: 'Giornata intera'\n      },\n      {\n        title: 'Kasbah di Agadir Oufella',\n        description: 'Rovine dell\\'antica fortezza del 1540 su una collina, con vista panoramica mozzafiato sulla baia',\n        image: '/images/agadir-kasbah.png',\n        duration: '1-2 ore'\n      },\n      {\n        title: 'Souk El Had',\n        description: 'Enorme mercato coperto con 6.000 negozi, il pi√π grande del Marocco, aperto il marted√¨-domenica',\n        image: '/images/agadir-souk.png',\n        duration: '2-3 ore'\n      },\n      {\n        title: 'Vallee des Oiseaux',\n        description: 'Giardino zoologico urbano con uccelli esotici, lama, cervi e spazi verdi rilassanti',\n        image: '/images/agadir-vallee.png',\n        duration: '1 ora'\n      },\n      {\n        title: 'Marina di Agadir',\n        description: 'Porto turistico moderno con ristoranti, boutique, passeggiate serali e yacht di lusso',\n        image: '/images/agadir-marina.png',\n        duration: '2 ore'\n      },\n      {\n        title: 'Paradise Valley',\n        description: 'Oasi naturale a 30 km dalla citt√† con piscine naturali, palme e gole spettacolari',\n        image: '/images/agadir-paradise-valley.png',\n        duration: 'Mezza giornata'\n      }\n    ],\n    bestTime: 'Tutto l\\'anno grazie al clima mite. Inverno perfetto per sfuggire al freddo europeo (18-22¬∞C).',\n    howToArrive: 'Aeroporto Al Massira (AGA) a 25 km con voli da tutta Europa. In auto da Marrakech (3 ore) o Essaouira (2,5 ore).',\n    tourPrices: {\n      halfDay: '‚Ç¨30-50',\n      fullDay: '‚Ç¨60-100',\n      multiDay: '‚Ç¨200-400'\n    },\n    highlights: [\n      'Spiaggia di 10 km',\n      '300 giorni di sole',\n      'Kasbah panoramica',\n      'Souk El Had gigante',\n      'Sport acquatici e golf',\n      'Paradise Valley oasi'\n    ],\n    location: {\n      distance: '240 km da Marrakech',\n      coordinates: { lat: 30.4278, lng: -9.5981 }\n    }\n  }\n]\n","size_bytes":26127},"lib/auth-helpers.ts":{"content":"import { getAuth } from 'firebase-admin/auth'\nimport { db } from '@/lib/db'\nimport { getFirebaseAdminApp } from './user-auth-server'\n\n/**\n * Secure admin authentication helper\n * Verifies Firebase ID token and checks AdminUser table in Postgres\n * \n * @param authHeader - Authorization header from request (e.g., \"Bearer <token>\")\n * @returns Promise<boolean> - true if user is an active admin, false otherwise\n */\nexport async function isAdmin(authHeader: string | null): Promise<boolean> {\n  if (!authHeader) {\n    console.log('[AUTH_HELPER] No authorization header provided')\n    return false\n  }\n  \n  const token = authHeader.replace('Bearer ', '').trim()\n  \n  if (!token) {\n    console.log('[AUTH_HELPER] Empty token after Bearer removal')\n    return false\n  }\n  \n  try {\n    // Step 1: Verify Firebase ID token using Firebase Admin SDK\n    console.log('[AUTH_HELPER] Verifying Firebase token...')\n    const app = getFirebaseAdminApp()\n    \n    if (!app) {\n      console.error('[AUTH_HELPER] Firebase Admin app not initialized')\n      return false\n    }\n    \n    const auth = getAuth(app)\n    const decodedToken = await auth.verifyIdToken(token)\n    const uid = decodedToken.uid\n    \n    console.log('[AUTH_HELPER] Firebase token verified for UID:', uid)\n    \n    // Step 2: Check AdminUser table in Postgres\n    console.log('[AUTH_HELPER] Checking AdminUser table...')\n    const adminUser = await db.adminUser.findUnique({\n      where: { uid }\n    })\n    \n    if (!adminUser) {\n      console.log('[AUTH_HELPER] User not found in AdminUser table')\n      return false\n    }\n    \n    if (!adminUser.active) {\n      console.log('[AUTH_HELPER] Admin user exists but is not active')\n      return false\n    }\n    \n    console.log('[AUTH_HELPER] ‚úÖ Admin verified:', adminUser.email, 'Role:', adminUser.role)\n    return true\n    \n  } catch (error) {\n    console.error('[AUTH_HELPER] Admin verification failed:', error)\n    return false\n  }\n}\n","size_bytes":1941},"components/wishlist/WishlistButton.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useAuth } from '@/context/AuthContext'\nimport { Button } from '@/components/ui/button'\nimport { Heart } from 'lucide-react'\nimport { toast } from 'sonner'\n\ninterface WishlistButtonProps {\n  contentItem: {\n    id: string\n    type: string\n    title: string\n    image?: string | null\n    price?: number | null\n    description?: string\n  }\n  variant?: 'default' | 'icon'\n  className?: string\n}\n\nexport function WishlistButton({ contentItem, variant = 'default', className = '' }: WishlistButtonProps) {\n  const { user } = useAuth()\n  const [isInWishlist, setIsInWishlist] = useState(false)\n  const [loading, setLoading] = useState(false)\n  \n  useEffect(() => {\n    if (!user) {\n      setIsInWishlist(false)\n      return\n    }\n    \n    const checkWishlist = async () => {\n      try {\n        const token = await user.getIdToken()\n        const response = await fetch('/api/wishlist', {\n          headers: { 'Authorization': `Bearer ${token}` }\n        })\n        \n        if (response.ok) {\n          const data = await response.json()\n          const found = data.wishlist?.some((item: any) => \n            item.itemId === contentItem.id && item.itemType === contentItem.type\n          )\n          setIsInWishlist(found)\n        }\n      } catch (error) {\n        console.error('Error checking wishlist:', error)\n      }\n    }\n    \n    checkWishlist()\n  }, [user, contentItem.id, contentItem.type])\n  \n  const toggleWishlist = async (e: React.MouseEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    \n    if (!user) {\n      toast.error('Devi effettuare il login per usare la wishlist', {\n        action: {\n          label: 'Login',\n          onClick: () => window.location.href = '/auth/signin'\n        }\n      })\n      return\n    }\n    \n    setLoading(true)\n    \n    try {\n      const token = await user.getIdToken()\n      \n      if (isInWishlist) {\n        const response = await fetch(\n          `/api/wishlist?itemType=${contentItem.type}&itemId=${contentItem.id}`,\n          {\n            method: 'DELETE',\n            headers: { 'Authorization': `Bearer ${token}` }\n          }\n        )\n        \n        if (response.ok) {\n          setIsInWishlist(false)\n          toast.success('Rimosso dalla wishlist')\n        } else {\n          toast.error('Errore nella rimozione')\n        }\n      } else {\n        const response = await fetch('/api/wishlist', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            itemType: contentItem.type,\n            itemId: contentItem.id,\n            itemData: {\n              title: contentItem.title,\n              image: contentItem.image,\n              price: contentItem.price,\n              description: contentItem.description\n            }\n          })\n        })\n        \n        if (response.ok) {\n          setIsInWishlist(true)\n          toast.success('Aggiunto alla wishlist', {\n            action: {\n              label: 'Vedi',\n              onClick: () => window.location.href = '/dashboard?tab=wishlist'\n            }\n          })\n        } else {\n          toast.error('Errore nell\\'aggiunta')\n        }\n      }\n    } catch (error) {\n      console.error('Wishlist error:', error)\n      toast.error('Si √® verificato un errore')\n    } finally {\n      setLoading(false)\n    }\n  }\n  \n  if (variant === 'icon') {\n    return (\n      <button\n        onClick={toggleWishlist}\n        disabled={loading}\n        className={`\n          group flex items-center justify-center\n          p-2 rounded-full transition-all duration-200\n          ${isInWishlist \n            ? 'bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400' \n            : 'bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-500'\n          }\n          ${loading ? 'opacity-50 cursor-not-allowed' : 'hover:scale-110'}\n          shadow-md hover:shadow-lg\n          ${className}\n        `}\n        aria-label={isInWishlist ? 'Rimuovi dalla wishlist' : 'Aggiungi alla wishlist'}\n        title={isInWishlist ? 'Rimuovi dalla wishlist' : 'Aggiungi alla wishlist'}\n      >\n        <Heart \n          className={`w-5 h-5 transition-all ${isInWishlist ? 'fill-current' : ''}`}\n        />\n      </button>\n    )\n  }\n  \n  return (\n    <Button \n      variant={isInWishlist ? \"default\" : \"outline\"}\n      onClick={toggleWishlist}\n      disabled={loading}\n      className={className}\n    >\n      <Heart \n        className={`w-4 h-4 mr-2 ${isInWishlist ? 'fill-current' : ''}`}\n      />\n      {isInWishlist ? 'Salvato' : 'Salva'}\n    </Button>\n  )\n}\n","size_bytes":4738},"app/esperienze/[slug]/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useParams } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { ArrowLeft, Clock, Users, Star, MapPin, Calendar, Check } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { db } from \"@/lib/firebase\"\nimport { collection, query, where, getDocs, doc, getDoc } from \"firebase/firestore\"\nimport WishlistButton from \"@/components/WishlistButton\"\nimport { BookingForm } from \"@/components/booking/BookingForm\"\n\ninterface Experience {\n  id: string\n  title: string\n  description: string\n  slug: string\n  images?: string[]\n  price?: number\n  duration?: string\n  difficulty?: string\n  groupSize?: string\n  highlights?: string[]\n  included?: string[]\n  excluded?: string[]\n  rating?: number\n  reviews?: number\n  category?: string\n  location?: string\n  status?: string\n}\n\nexport default function ExperienceDetailPage() {\n  const params = useParams()\n  const slug = params.slug as string\n  \n  const [experience, setExperience] = useState<Experience | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n  const [bookingOpen, setBookingOpen] = useState(false)\n\n  useEffect(() => {\n    const fetchExperience = async () => {\n      try {\n        setLoading(true)\n        \n        let q = query(\n          collection(db, 'experiences'),\n          where('slug', '==', slug),\n          where('status', '==', 'published')\n        )\n        \n        let snapshot = await getDocs(q)\n        \n        if (snapshot.empty) {\n          try {\n            const docRef = doc(db, 'experiences', slug)\n            const docSnap = await getDoc(docRef)\n            \n            if (docSnap.exists() && docSnap.data()?.status === 'published') {\n              setExperience({ id: docSnap.id, ...docSnap.data() } as Experience)\n              return\n            }\n          } catch (idError) {\n            console.log('Document ID lookup failed:', idError)\n          }\n          \n          setError(\"Esperienza non trovata\")\n          return\n        }\n        \n        const docData = snapshot.docs[0]\n        setExperience({ id: docData.id, ...docData.data() } as Experience)\n        \n      } catch (err) {\n        console.error('Error fetching experience:', err)\n        setError(\"Errore nel caricamento dell'esperienza\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (slug) {\n      fetchExperience()\n    }\n  }, [slug])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-4xl mx-auto px-4 py-12\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-64 bg-gray-200 dark:bg-gray-700 rounded-xl mb-8\"></div>\n            <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4\"></div>\n            <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-8\"></div>\n            <div className=\"space-y-4\">\n              {[...Array(5)].map((_, i) => (\n                <div key={i} className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !experience) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-foreground mb-4\">Oops!</h1>\n          <p className=\"text-muted-foreground mb-6\">{error || \"Esperienza non trovata\"}</p>\n          <Button asChild>\n            <Link href=\"/esperienze\">\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Torna alle Esperienze\n            </Link>\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <section className=\"relative h-96 overflow-hidden\">\n        <img\n          src={experience.images?.[0] || \"/images/placeholder-travel.jpg\"}\n          alt={experience.title}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-black/50\" />\n        \n        <div className=\"absolute top-4 right-4 z-20\">\n          <WishlistButton\n            itemId={`experience-${experience.id}`}\n            itemType=\"experience\"\n            itemTitle={experience.title}\n            itemImage={experience.images?.[0]}\n            itemPrice={experience.price || 0}\n            itemDescription={experience.description}\n          />\n        </div>\n        \n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <div className=\"text-center text-white max-w-4xl mx-auto px-4\">\n            <h1 className=\"text-4xl lg:text-5xl font-bold mb-4\">{experience.title}</h1>\n            <p className=\"text-xl text-gray-200 mb-6\">{experience.description}</p>\n            <div className=\"flex flex-wrap justify-center gap-4 text-sm\">\n              {experience.duration && (\n                <div className=\"flex items-center\">\n                  <Clock className=\"w-4 h-4 mr-2\" />\n                  {experience.duration}\n                </div>\n              )}\n              {experience.groupSize && (\n                <div className=\"flex items-center\">\n                  <Users className=\"w-4 h-4 mr-2\" />\n                  {experience.groupSize}\n                </div>\n              )}\n              {experience.rating && (\n                <div className=\"flex items-center\">\n                  <Star className=\"w-4 h-4 mr-2 text-yellow-400 fill-current\" />\n                  {experience.rating} {experience.reviews && `(${experience.reviews} recensioni)`}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <div className=\"max-w-7xl mx-auto px-4 py-12 grid lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2 space-y-8\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <h2 className=\"text-2xl font-bold text-foreground mb-4\">Descrizione</h2>\n              <p className=\"text-muted-foreground leading-relaxed\">{experience.description}</p>\n            </CardContent>\n          </Card>\n\n          {experience.highlights && experience.highlights.length > 0 && (\n            <Card>\n              <CardContent className=\"p-6\">\n                <h2 className=\"text-2xl font-bold text-foreground mb-4\">Punti Salienti</h2>\n                <div className=\"grid md:grid-cols-2 gap-3\">\n                  {experience.highlights.map((highlight, index) => (\n                    <div key={index} className=\"flex items-center\">\n                      <Check className=\"w-5 h-5 text-green-500 mr-3 flex-shrink-0\" />\n                      <span className=\"text-muted-foreground\">{highlight}</span>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <div className=\"grid md:grid-cols-2 gap-6\">\n            {experience.included && experience.included.length > 0 && (\n              <Card>\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-lg font-bold text-foreground mb-4\">Incluso</h3>\n                  <ul className=\"space-y-2\">\n                    {experience.included.map((item, index) => (\n                      <li key={index} className=\"flex items-center text-sm\">\n                        <Check className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0\" />\n                        {item}\n                      </li>\n                    ))}\n                  </ul>\n                </CardContent>\n              </Card>\n            )}\n\n            {experience.excluded && experience.excluded.length > 0 && (\n              <Card>\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-lg font-bold text-foreground mb-4\">Non Incluso</h3>\n                  <ul className=\"space-y-2\">\n                    {experience.excluded.map((item, index) => (\n                      <li key={index} className=\"flex items-center text-sm text-muted-foreground\">\n                        <span className=\"w-4 h-4 mr-2 flex-shrink-0\">‚Ä¢</span>\n                        {item}\n                      </li>\n                    ))}\n                  </ul>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-6\">\n          <Card className=\"sticky top-4\">\n            <CardContent className=\"p-6\">\n              <div className=\"text-center mb-6\">\n                <div className=\"flex items-center justify-center gap-2 mb-2\">\n                  <span className=\"text-3xl font-bold text-foreground\">\n                    ‚Ç¨{experience.price || 0}\n                  </span>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">per persona</p>\n              </div>\n\n              <div className=\"space-y-4\">\n                <Button \n                  className=\"w-full bg-orange-500 hover:bg-orange-600\" \n                  size=\"lg\"\n                  onClick={() => setBookingOpen(true)}\n                >\n                  <Calendar className=\"w-4 h-4 mr-2\" />\n                  Prenota Ora\n                </Button>\n              </div>\n\n              <div className=\"border-t pt-4 mt-6\">\n                {experience.category && (\n                  <div className=\"flex items-center justify-between text-sm mb-2\">\n                    <span className=\"text-muted-foreground\">Categoria:</span>\n                    <Badge variant=\"secondary\">{experience.category}</Badge>\n                  </div>\n                )}\n                {experience.duration && (\n                  <div className=\"flex items-center justify-between text-sm mb-2\">\n                    <span className=\"text-muted-foreground\">Durata:</span>\n                    <span className=\"font-medium\">{experience.duration}</span>\n                  </div>\n                )}\n                {experience.difficulty && (\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Difficolt√†:</span>\n                    <span className=\"font-medium capitalize\">{experience.difficulty}</span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-6\">\n              <h3 className=\"text-lg font-bold text-foreground mb-4\">Hai domande?</h3>\n              <p className=\"text-muted-foreground text-sm mb-4\">\n                Il nostro team √® sempre disponibile per aiutarti a pianificare l'esperienza perfetta.\n              </p>\n              <Button variant=\"outline\" className=\"w-full\" asChild>\n                <Link href=\"/contatti\">\n                  Contattaci\n                </Link>\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      <BookingForm\n        contentItem={{\n          id: experience.id,\n          type: 'experience',\n          title: experience.title,\n          price: experience.price || null,\n          image: experience.images?.[0] || null\n        }}\n        open={bookingOpen}\n        onClose={() => setBookingOpen(false)}\n      />\n    </div>\n  )\n}\n","size_bytes":11331},"data/vehicles.backup.ts":{"content":"export interface Vehicle {\n  id: string\n  name: string\n  category: \"economica\" | \"suv\" | \"Premium\"\n  transmission: \"manuale\" | \"automatica\"\n  fuel: \"benzina\" | \"diesel\"\n  hasAC: boolean\n  doors: number\n  seats: number\n  dailyDeductible: number\n  image: string\n  pricing: {\n    period1: { short: number; medium: number; long: number }\n    period2: { short: number; medium: number; long: number }\n    period3: { short: number; medium: number; long: number }\n    period4: { short: number; medium: number; long: number }\n  }\n}\n\nexport const vehicles: Vehicle[] = [\n  {\n    id: \"dacia-sandero-benzina\",\n    name: \"Dacia Sandero\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"benzina\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/dacia-sandero.png\",\n    pricing: {\n      period1: { short: 38, medium: 36, long: 33 },\n      period2: { short: 42, medium: 41, long: 40 },\n      period3: { short: 40, medium: 38, long: 36 },\n      period4: { short: 38, medium: 35, long: 32 },\n    },\n  },\n  {\n    id: \"peugeot-208\",\n    name: \"Peugeot 208\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/peugeot-208.png\",\n    pricing: {\n      period1: { short: 45, medium: 42, long: 40 },\n      period2: { short: 50, medium: 48, long: 48 },\n      period3: { short: 45, medium: 40, long: 38 },\n      period4: { short: 42, medium: 39, long: 37 },\n    },\n  },\n  {\n    id: \"renault-clio-5\",\n    name: \"Renault Clio 5\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 7,\n    image: \"/images/vehicles/renault-clio-5.png\",\n    pricing: {\n      period1: { short: 50, medium: 48, long: 48 },\n      period2: { short: 43, medium: 40, long: 38 },\n      period3: { short: 45, medium: 42, long: 40 },\n      period4: { short: 43, medium: 40, long: 38 },\n    },\n  },\n  {\n    id: \"t-roc\",\n    name: \"T-roc\",\n    category: \"Premium\",\n    transmission: \"automatica\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 12,\n    image: \"/images/vehicles/t-roc.png\",\n    pricing: {\n      period1: { short: 70, medium: 68, long: 63 },\n      period2: { short: 80, medium: 75, long: 72 },\n      period3: { short: 75, medium: 72, long: 68 },\n      period4: { short: 70, medium: 65, long: 60 },\n    },\n  },\n  {\n    id: \"touareg\",\n    name: \"Touareg\",\n    category: \"Premium\",\n    transmission: \"automatica\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 20,\n    image: \"/images/vehicles/touareg.png\",\n    pricing: {\n      period1: { short: 115, medium: 110, long: 105 },\n      period2: { short: 109, medium: 100, long: 95 },\n      period3: { short: 115, medium: 105, long: 100 },\n      period4: { short: 110, medium: 105, long: 100 },\n    },\n  },\n  {\n    id: \"dacia-logan-automatica-benzina\",\n    name: \"Dacia Logan\",\n    category: \"economica\",\n    transmission: \"automatica\",\n    fuel: \"benzina\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/dacia-logan-automatica.png\",\n    pricing: {\n      period1: { short: 43, medium: 39, long: 37 },\n      period2: { short: 46, medium: 44, long: 44 },\n      period3: { short: 45, medium: 40, long: 38 },\n      period4: { short: 42, medium: 39, long: 37 },\n    },\n  },\n  {\n    id: \"dacia-logan-manuale-benzina\",\n    name: \"Dacia Logan\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"benzina\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/dacia-logan.png\",\n    pricing: {\n      period1: { short: 39, medium: 37, long: 36 },\n      period2: { short: 43, medium: 42, long: 40 },\n      period3: { short: 41, medium: 38, long: 36 },\n      period4: { short: 39, medium: 36, long: 33 },\n    },\n  },\n  {\n    id: \"citroen-c3\",\n    name: \"Citroen C3\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/citroen-c3.png\",\n    pricing: {\n      period1: { short: 43, medium: 38, long: 36 },\n      period2: { short: 48, medium: 46, long: 46 },\n      period3: { short: 45, medium: 40, long: 38 },\n      period4: { short: 42, medium: 38, long: 36 },\n    },\n  },\n  {\n    id: \"citroen-c-elysee\",\n    name: \"Citroen C Elysee\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/citroen-c-elysee.png\",\n    pricing: {\n      period1: { short: 42, medium: 39, long: 38 },\n      period2: { short: 46, medium: 44, long: 44 },\n      period3: { short: 43, medium: 40, long: 39 },\n      period4: { short: 42, medium: 38, long: 36 },\n    },\n  },\n  {\n    id: \"dacia-logan-manuale-diesel\",\n    name: \"Dacia Logan\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/dacia-logan-diesel.png\",\n    pricing: {\n      period1: { short: 41, medium: 40, long: 36 },\n      period2: { short: 46, medium: 44, long: 44 },\n      period3: { short: 43, medium: 39, long: 38 },\n      period4: { short: 40, medium: 38, long: 35 },\n    },\n  },\n  {\n    id: \"dacia-lodgy\",\n    name: \"Dacia Lodgy\",\n    category: \"suv\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 7,\n    dailyDeductible: 8,\n    image: \"/images/vehicles/dacia-lodgy.png\",\n    pricing: {\n      period1: { short: 65, medium: 62, long: 60 },\n      period2: { short: 55, medium: 48, long: 45 },\n      period3: { short: 58, medium: 50, long: 48 },\n      period4: { short: 53, medium: 48, long: 45 },\n    },\n  },\n  {\n    id: \"clio-5-automatica\",\n    name: \"Clio 5\",\n    category: \"economica\",\n    transmission: \"automatica\",\n    fuel: \"benzina\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 7,\n    image: \"/images/vehicles/renault-clio-5-automatica.png\",\n    pricing: {\n      period1: { short: 45, medium: 42, long: 39 },\n      period2: { short: 50, medium: 48, long: 48 },\n      period3: { short: 48, medium: 45, long: 40 },\n      period4: { short: 45, medium: 43, long: 38 },\n    },\n  },\n  {\n    id: \"kia-picanto\",\n    name: \"Kia Picanto\",\n    category: \"economica\",\n    transmission: \"automatica\",\n    fuel: \"benzina\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/kia-picanto.png\",\n    pricing: {\n      period1: { short: 42, medium: 38, long: 36 },\n      period2: { short: 45, medium: 43, long: 42 },\n      period3: { short: 43, medium: 40, long: 38 },\n      period4: { short: 40, medium: 36, long: 35 },\n    },\n  },\n  {\n    id: \"dacia-duster-manuale\",\n    name: \"Dacia Duster\",\n    category: \"suv\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 8,\n    image: \"/images/vehicles/dacia-duster.png\",\n    pricing: {\n      period1: { short: 50, medium: 48, long: 46 },\n      period2: { short: 60, medium: 58, long: 55 },\n      period3: { short: 55, medium: 53, long: 50 },\n      period4: { short: 53, medium: 50, long: 45 },\n    },\n  },\n  {\n    id: \"dacia-duster-automatica\",\n    name: \"Dacia Duster\",\n    category: \"suv\",\n    transmission: \"automatica\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 8,\n    image: \"/images/vehicles/dacia-duster-automatica.png\",\n    pricing: {\n      period1: { short: 65, medium: 62, long: 60 },\n      period2: { short: 55, medium: 53, long: 50 },\n      period3: { short: 42, medium: 58, long: 55 },\n      period4: { short: 58, medium: 55, long: 53 },\n    },\n  },\n  {\n    id: \"fiat-500\",\n    name: \"Fiat 500\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"benzina\",\n    hasAC: true,\n    doors: 3,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/fiat-500.png\",\n    pricing: {\n      period1: { short: 42, medium: 39, long: 37 },\n      period2: { short: 46, medium: 43, long: 43 },\n      period3: { short: 43, medium: 40, long: 38 },\n      period4: { short: 43, medium: 39, long: 35 },\n    },\n  },\n  {\n    id: \"hyundai-tucson\",\n    name: \"Hyundai Tucson\",\n    category: \"Premium\",\n    transmission: \"automatica\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 11,\n    image: \"/images/vehicles/hyundai-tucson.png\",\n    pricing: {\n      period1: { short: 80, medium: 75, long: 72 },\n      period2: { short: 70, medium: 65, long: 60 },\n      period3: { short: 75, medium: 70, long: 68 },\n      period4: { short: 70, medium: 65, long: 62 },\n    },\n  },\n  {\n    id: \"citroen-c4\",\n    name: \"Citroen C4\",\n    category: \"Premium\",\n    transmission: \"automatica\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 9,\n    image: \"/images/vehicles/citroen-c4.png\",\n    pricing: {\n      period1: { short: 65, medium: 62, long: 58 },\n      period2: { short: 70, medium: 68, long: 68 },\n      period3: { short: 70, medium: 65, long: 62 },\n      period4: { short: 65, medium: 60, long: 55 },\n    },\n  },\n  {\n    id: \"dacia-sandero-diesel\",\n    name: \"Dacia Sandero\",\n    category: \"economica\",\n    transmission: \"manuale\",\n    fuel: \"diesel\",\n    hasAC: true,\n    doors: 5,\n    seats: 5,\n    dailyDeductible: 6,\n    image: \"/images/vehicles/dacia-sandero-diesel.png\",\n    pricing: {\n      period1: { short: 41, medium: 39, long: 37 },\n      period2: { short: 46, medium: 44, long: 44 },\n      period3: { short: 42, medium: 40, long: 38 },\n      period4: { short: 40, medium: 38, long: 35 },\n    },\n  },\n];\n\nexport interface RentalService {\n  name: string\n  included: boolean\n}\n\nexport const includedServices: RentalService[] = [\n  { name: \"Chilometraggio illimitato\", included: true },\n  { name: \"Secondo conducente gratuito\", included: true },\n  { name: \"Consegna gratuita a Marrakech\", included: true },\n  { name: \"Assistenza 24 ore su 24, 7 giorni su 7\", included: true },\n  { name: \"IVA\", included: true },\n]\n\nexport const extraServices: RentalService[] = [\n  { name: \"Assicurazione a franchigia zero\", included: false },\n  { name: \"Esenzione danni da collisione\", included: false },\n  { name: \"Protezione antifurto\", included: false },\n]\n\nexport function getPeriodFromDate(date: Date): 1 | 2 | 3 | 4 {\n  const month = date.getMonth() + 1\n  const day = date.getDate()\n\n  if ((month === 1 && day >= 10) || (month > 1 && month < 7) || (month === 7 && day < 15)) {\n    return 1\n  }\n\n  if ((month === 7 && day >= 15) || month === 8 || (month === 9 && day < 5)) {\n    return 2\n  }\n\n  if ((month === 12 && day >= 20) || (month === 1 && day < 10)) {\n    return 3\n  }\n\n  return 4\n}\n\nexport function getDurationCategory(days: number): \"short\" | \"medium\" | \"long\" {\n  if (days >= 2 && days <= 5) return \"short\"\n  if (days >= 6 && days <= 20) return \"medium\"\n  return \"long\"\n}\n\nexport function calculateRentalPrice(\n  vehicle: Vehicle,\n  startDate: Date,\n  endDate: Date\n): { dailyRate: number; totalDays: number; totalPrice: number; period: 1 | 2 | 3 | 4 } | null {\n  if (!startDate || !endDate || endDate <= startDate) return null\n\n  const totalDays = Math.ceil((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24))\n  if (totalDays < 2) return null\n\n  const period = getPeriodFromDate(startDate)\n  const durationCategory = getDurationCategory(totalDays)\n\n  const periodKey = `period${period}` as keyof typeof vehicle.pricing\n  const dailyRate = vehicle.pricing[periodKey][durationCategory]\n  const totalPrice = dailyRate * totalDays\n\n  return { dailyRate, totalDays, totalPrice, period }\n}\n\nexport const periodNames = {\n  1: \"10/01 - 15/07\",\n  2: \"15/07 - 05/09 (Estate)\",\n  3: \"20/12 - 10/01 (Capodanno)\",\n  4: \"05/09 - 20/12\",\n}\n","size_bytes":11957},"content/blog-posts.backup.ts":{"content":"export interface BlogPost {\n  slug: string\n  title: string\n  excerpt: string\n  cover: string\n  author: string\n  date: string\n  readingMinutes: number\n  tags: string[]\n  sections: {\n    heading: string\n    body: string\n    image?: string\n  }[]\n}\n\nexport const blogPosts: BlogPost[] = [\n  {\n    slug: \"guida-completa-marocco-2024\",\n    title: \"Guida Completa al Viaggio in Marocco: Tutto quello che Devi Sapere nel 2024\",\n    excerpt: \"Una guida dettagliata e aggiornata per pianificare il tuo primo viaggio in Marocco, con consigli pratici, itinerari consigliati e informazioni essenziali.\",\n    cover: \"/images/blog/morocco-complete-guide.png\",\n    author: \"Ahmed El Fassi\",\n    date: \"2024-01-15\",\n    readingMinutes: 12,\n    tags: [\"Marocco\", \"Guida\", \"Consigli\", \"Pianificazione\"],\n    sections: [\n      {\n        heading: \"Quando andare in Marocco\",\n        body: \"Il Marocco si pu√≤ visitare tutto l'anno, ma ogni stagione ha le sue caratteristiche. La primavera (marzo-maggio) e l'autunno (settembre-novembre) offrono temperature ideali per esplorare le citt√† imperiali e fare trekking nell'Atlante. L'inverno √® perfetto per il deserto del Sahara, mentre l'estate √® ideale per la costa atlantica.\",\n        image: \"/images/blog/morocco-seasons.png\"\n      },\n      {\n        heading: \"Documenti necessari\",\n        body: \"I cittadini italiani non hanno bisogno di visto per soggiorni turistici fino a 90 giorni. √à sufficiente un passaporto valido con almeno 6 mesi di validit√† residua dalla data di ingresso. All'arrivo riceverete un timbro di ingresso che dovrete conservare per l'uscita dal paese.\"\n      },\n      {\n        heading: \"Itinerari consigliati\",\n        body: \"Per un primo viaggio, consigliamo almeno 7-10 giorni. Un itinerario classico include Marrakech (2-3 giorni), Fes (2 giorni), il deserto del Sahara (2 giorni) e una citt√† costiera come Essaouira (1-2 giorni). Per chi ha pi√π tempo, vale la pena aggiungere Chefchaouen e l'Alto Atlante.\",\n        image: \"/images/blog/morocco-itinerary-map.png\"\n      },\n      {\n        heading: \"Consigli pratici\",\n        body: \"La moneta locale √® il dirham marocchino (MAD). √à consigliabile portare contanti in euro da cambiare localmente. La contrattazione nei souks √® normale e fa parte della cultura. Rispettate le tradizioni locali nell'abbigliamento, soprattutto nei luoghi sacri. Imparate qualche parola in arabo o francese: sar√† molto apprezzato.\"\n      }\n    ]\n  },\n  {\n    slug: \"piatti-marocchini-da-provare\",\n    title: \"I 15 Piatti Marocchini che Devi Assolutamente Provare\",\n    excerpt: \"Scopri i sapori autentici del Marocco attraverso i suoi piatti pi√π iconici e dove trovarli nelle citt√† imperiali.\",\n    cover: \"/images/blog/moroccan-tagine-cooking.png\",\n    author: \"Fatima Benali\",\n    date: \"2024-01-12\",\n    readingMinutes: 8,\n    tags: [\"Cucina\", \"Tradizioni\", \"Ristoranti\", \"Street Food\"],\n    sections: [\n      {\n        heading: \"Tagine: il piatto simbolo\",\n        body: \"Il tagine non √® solo un piatto, ma anche il recipiente di terracotta in cui viene cucinato. Questo metodo di cottura lenta concentra i sapori e mantiene la carne tenerissima. I tagine pi√π famosi sono quello di pollo con olive e limone conservato, quello di agnello con prugne e mandorle, e quello vegetariano con verdure di stagione.\",\n        image: \"/images/blog/tagine-varieties.png\"\n      },\n      {\n        heading: \"Couscous: il re del venerd√¨\",\n        body: \"Tradizionalmente servito il venerd√¨ dopo la preghiera, il couscous √® considerato il piatto nazionale. La semola viene cotta al vapore in una couscoussiera speciale e servita con verdure, carne o pesce. Ogni regione ha la sua variante: quello di Fes con sette verdure, quello berbero dell'Atlante con carne secca.\"\n      },\n      {\n        heading: \"Street food imperdibile\",\n        body: \"Nelle strade del Marocco troverete delizie come la harira (zuppa di lenticchie e pomodoro), i msemen (crepes sfogliate), i chebakia (dolci fritti al miele) e il famoso t√® alla menta servito in piccoli bicchieri decorati. Non perdete i panini con merguez nella piazza Jemaa el-Fnaa di Marrakech.\",\n        image: \"/images/blog/moroccan-street-food.png\"\n      },\n      {\n        heading: \"Dove mangiare autentico\",\n        body: \"Per un'esperienza autentica, cercate i piccoli ristoranti frequentati dai locali. A Marrakech provate Chez Lamine Hadj Mustapha per il migliore tagine della citt√†. A Fes, il ristorante Nur nella medina offre cucina tradizionale in un riad storico. Evitate i ristoranti troppo turistici intorno alle piazze principali.\"\n      }\n    ]\n  },\n  {\n    slug: \"hammam-tradizionale-guida\",\n    title: \"Hammam Tradizionale: Guida Completa al Rituale di Benessere Marocchino\",\n    excerpt: \"Tutto quello che devi sapere sull'hammam tradizionale: come funziona, cosa aspettarsi e dove vivere l'esperienza migliore.\",\n    cover: \"/images/blog/hammam-traditional-spa.png\",\n    author: \"Youssef Alami\",\n    date: \"2024-01-10\",\n    readingMinutes: 6,\n    tags: [\"Hammam\", \"Tradizioni\", \"Relax\", \"Spa\"],\n    sections: [\n      {\n        heading: \"Cos'√® l'hammam tradizionale\",\n        body: \"L'hammam √® molto pi√π di un semplice bagno: √® un rituale sociale e di purificazione che risale all'epoca romana. In Marocco, ogni quartiere ha il suo hammam pubblico dove le famiglie si recano settimanalmente. L'esperienza combina vapore, esfoliazione e massaggio in un ambiente di marmo e vapore.\",\n        image: \"/images/blog/hammam-interior.png\"\n      },\n      {\n        heading: \"Come funziona il rituale\",\n        body: \"Il rituale inizia nella sala tiepida dove ci si abitua gradualmente al calore. Si passa poi alla sala calda dove il vapore apre i pori. Qui avviene l'esfoliazione con il guanto kessa e il sapone nero (savon noir) a base di olive. Infine, ci si rilassa nella sala fresca con t√® alla menta e dolci.\"\n      },\n      {\n        heading: \"Cosa portare e aspettarsi\",\n        body: \"Portate un costume da bagno, ciabatte antiscivolo e un asciugamano. Molti hammam forniscono il guanto kessa e il sapone nero. L'esperienza dura 2-3 ore e pu√≤ essere intensa per chi non √® abituato al calore. √à normale sentirsi stanchi dopo: √® segno che il corpo si sta disintossicando.\"\n      },\n      {\n        heading: \"I migliori hammam autentici\",\n        body: \"A Marrakech, l'Hammam de la Rose nella medina offre un'esperienza autentica a prezzi locali. A Fes, provate l'Hammam Sidi Harazem, frequentato dalle famiglie del posto. Per un'esperienza di lusso, La Mamounia a Marrakech ha uno dei pi√π bei hammam del mondo, ma a prezzi decisamente pi√π alti.\"\n      }\n    ]\n  },\n  {\n    slug: \"trekking-sahara-guida-definitiva\",\n    title: \"Trekking nel Deserto del Sahara: La Guida Definitiva per l'Avventura Perfetta\",\n    excerpt: \"Come prepararsi per un trekking nel Sahara: equipaggiamento essenziale, periodo migliore e cosa aspettarsi dall'esperienza.\",\n    cover: \"/images/blog/sahara-desert-camping.png\",\n    author: \"Omar Berrada\",\n    date: \"2024-01-08\",\n    readingMinutes: 10,\n    tags: [\"Sahara\", \"Trekking\", \"Deserto\", \"Avventura\"],\n    sections: [\n      {\n        heading: \"Quando andare nel Sahara\",\n        body: \"Il periodo migliore per il trekking nel Sahara va da ottobre ad aprile, quando le temperature diurne sono sopportabili (20-25¬∞C) e quelle notturne fresche (5-10¬∞C). Evitate assolutamente l'estate quando le temperature possono superare i 50¬∞C. I mesi di dicembre e gennaio possono essere molto freddi di notte, quindi preparatevi adeguatamente.\",\n        image: \"/images/blog/sahara-seasons.png\"\n      },\n      {\n        heading: \"Equipaggiamento essenziale\",\n        body: \"Per il trekking nel deserto servono: abbigliamento a strati per gestire gli sbalzi termici, scarponi chiusi per proteggere dalla sabbia, cappello e occhiali da sole, crema solare ad alta protezione, sacco a pelo per temperature sotto zero, torcia frontale e batterie di riserva. Portate sempre pi√π acqua del previsto.\"\n      },\n      {\n        heading: \"Tipi di trekking disponibili\",\n        body: \"I trekking variano da escursioni giornaliere a spedizioni di una settimana. Il classico tour di 2-3 giorni include trasferimento in 4x4, trekking con cammelli, pernottamento in campo tendato e alba sulle dune. Per i pi√π avventurosi, ci sono trekking di 5-7 giorni che attraversano diverse oasi e formazioni rocciose.\",\n        image: \"/images/blog/camel-trekking-types.png\"\n      },\n      {\n        heading: \"Sicurezza e guide locali\",\n        body: \"Non avventuratevi mai da soli nel deserto. Affidate sempre a guide locali esperte che conoscono il territorio, i punti d'acqua e le condizioni meteorologiche. Le guide berbere hanno una conoscenza ancestrale del deserto tramandata di generazione in generazione. Verificate sempre che abbiano le licenze necessarie.\"\n      }\n    ]\n  },\n  {\n    slug: \"marrakech-vs-fes-confronto\",\n    title: \"Marrakech vs Fes: Quale Citt√† Imperiale Scegliere per il Tuo Primo Viaggio?\",\n    excerpt: \"Un confronto dettagliato tra le due citt√† imperiali pi√π famose del Marocco per aiutarti a scegliere la destinazione perfetta.\",\n    cover: \"/images/blog/marrakech-medina-souks.png\",\n    author: \"Aicha Mansouri\",\n    date: \"2024-01-05\",\n    readingMinutes: 7,\n    tags: [\"Marrakech\", \"Fes\", \"Citt√† Imperiali\", \"Confronto\"],\n    sections: [\n      {\n        heading: \"Atmosfera e carattere\",\n        body: \"Marrakech √® la citt√† del glamour e del turismo internazionale, con una medina vivace e colorata dominata dalla famosa piazza Jemaa el-Fnaa. Fes √® pi√π autentica e tradizionale, considerata la capitale spirituale e culturale del Marocco, con la medina medievale meglio conservata al mondo. Marrakech √® pi√π cosmopolita, Fes pi√π genuina.\",\n        image: \"/images/blog/marrakech-vs-fes-atmosphere.png\"\n      },\n      {\n        heading: \"Attrazioni principali\",\n        body: \"Marrakech offre i Giardini Majorelle, il Palazzo Bahia, la Moschea Koutoubia e i souks colorati. Fes vanta l'Universit√† Al Quaraouiyine (la pi√π antica del mondo), le concerie tradizionali, la Madrasa Bou Inania e una medina labirintica di 9.000 vicoli. Entrambe hanno souks incredibili, ma quelli di Fes sono pi√π autentici.\"\n      },\n      {\n        heading: \"Facilit√† di visita\",\n        body: \"Marrakech √® pi√π facile per i primi viaggi: pi√π turistica, con pi√π persone che parlano inglese/francese e infrastrutture moderne. Fes richiede pi√π spirito di avventura: la medina √® pi√π complessa da navigare e l'esperienza √® pi√π immersiva ma anche pi√π impegnativa. Marrakech ha pi√π opzioni di alloggio di lusso.\"\n      },\n      {\n        heading: \"Il nostro consiglio\",\n        body: \"Per un primo viaggio in Marocco, Marrakech √® pi√π accessibile e offre un buon mix di tradizione e comfort moderno. Se cercate autenticit√† e non temete di perdervi in vicoli medievali, scegliete Fes. L'ideale sarebbe visitare entrambe: sono complementari e offrono facce diverse dello stesso affascinante paese.\"\n      }\n    ]\n  },\n  {\n    slug: \"shopping-souks-guida-contrattazione\",\n    title: \"Shopping nei Souks: Come Contrattare e Cosa Comprare in Marocco\",\n    excerpt: \"Guida pratica per fare shopping nei souks marocchini: tecniche di contrattazione, migliori prodotti e come riconoscere la qualit√†.\",\n    cover: \"/images/blog/souk-shopping-guide.png\",\n    author: \"Rachid Tazi\",\n    date: \"2024-01-03\",\n    readingMinutes: 5,\n    tags: [\"Souks\", \"Shopping\", \"Artigianato\", \"Contrattazione\"],\n    sections: [\n      {\n        heading: \"L'arte della contrattazione\",\n        body: \"La contrattazione nei souks √® un rituale sociale, non una battaglia. Iniziate sempre offrendo il 30-40% del prezzo richiesto. Siate pazienti, sorridete e mostrate interesse genuino per l'oggetto. Se il venditore non accetta la vostra offerta, alzatevi e andate via: spesso vi richiamer√† con un prezzo migliore. Non abbiate fretta e godetevi il processo.\",\n        image: \"/images/blog/souk-negotiation.png\"\n      },\n      {\n        heading: \"Cosa comprare di autentico\",\n        body: \"I migliori acquisti includono: tappeti berberi (verificate l'origine e la lavorazione a mano), ceramiche di Sal√© e Fes, oggetti in pelle di Marrakech, gioielli berberi in argento, spezie e t√®, olio di argan puro, babouches (pantofole tradizionali) e tessuti. Evitate oggetti 'antichi' a prezzi stracciati: sono quasi sempre falsi.\"\n      },\n      {\n        heading: \"Come riconoscere la qualit√†\",\n        body: \"Per i tappeti, controllate che i nodi siano regolari e che i colori non stingano. Per la pelle, verificate che sia morbida e ben rifinita. L'argento autentico ha il marchio 925. L'olio di argan puro ha un colore dorato e un odore caratteristico. Diffidate di prezzi troppo bassi: la qualit√† ha sempre un costo.\"\n      },\n      {\n        heading: \"Consigli pratici\",\n        body: \"Portate contanti in piccoli tagli per facilitare la contrattazione. Non mostrate troppo entusiasmo per un oggetto. Confrontate i prezzi in pi√π negozi prima di decidere. Chiedete sempre il certificato di autenticit√† per oggetti costosi. Ricordate che molti negozi spediscono in tutto il mondo se acquistate oggetti voluminosi.\"\n      }\n    ]\n  }\n]\n","size_bytes":13203},"components/booking/BookingForm.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport { useAuth } from '@/context/AuthContext'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Calendar } from '@/components/ui/calendar'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { toast } from 'sonner'\nimport { Calendar as CalendarIcon, Users, Phone, Mail, FileText, Check, ArrowLeft, ArrowRight } from 'lucide-react'\nimport { DateRange } from 'react-day-picker'\nimport { format } from 'date-fns'\n\ninterface BookingFormProps {\n  contentItem: {\n    id: string\n    type: string\n    title: string\n    price: number | null\n    image: string | null\n  }\n  open: boolean\n  onClose: () => void\n}\n\nexport function BookingForm({ contentItem, open, onClose }: BookingFormProps) {\n  const { user } = useAuth()\n  const [step, setStep] = useState(1)\n  const [loading, setLoading] = useState(false)\n  const [dateRange, setDateRange] = useState<DateRange | undefined>()\n  const [formData, setFormData] = useState({\n    travelers: 2,\n    customerInfo: {\n      name: user?.displayName || '',\n      email: user?.email || '',\n      phone: ''\n    },\n    notes: ''\n  })\n  \n  const handleSubmit = async () => {\n    if (!user) {\n      toast.error('Devi effettuare il login per prenotare')\n      return\n    }\n    \n    if (!dateRange?.from) {\n      toast.error('Seleziona almeno una data di partenza')\n      return\n    }\n    \n    setLoading(true)\n    \n    try {\n      const token = await user.getIdToken()\n      \n      const response = await fetch('/api/bookings', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          bookingType: contentItem.type,\n          itemId: contentItem.id,\n          startDate: dateRange.from ? dateRange.from.toISOString() : null,\n          endDate: dateRange.to ? dateRange.to.toISOString() : (dateRange.from ? dateRange.from.toISOString() : null),\n          travelers: formData.travelers,\n          customerInfo: formData.customerInfo,\n          notes: formData.notes,\n          totalPrice: contentItem.price ? contentItem.price * formData.travelers : 0,\n          currency: 'EUR'\n        })\n      })\n      \n      if (response.ok) {\n        toast.success('Prenotazione creata con successo!', {\n          description: 'Ti contatteremo presto per confermare i dettagli.'\n        })\n        onClose()\n        setStep(1)\n        setDateRange(undefined)\n        setFormData({\n          travelers: 2,\n          customerInfo: {\n            name: user?.displayName || '',\n            email: user?.email || '',\n            phone: ''\n          },\n          notes: ''\n        })\n      } else {\n        const error = await response.json()\n        toast.error('Errore nella prenotazione', {\n          description: error.error || 'Riprova pi√π tardi'\n        })\n      }\n    } catch (error) {\n      console.error('Booking error:', error)\n      toast.error('Errore nella prenotazione', {\n        description: 'Si √® verificato un errore. Riprova pi√π tardi.'\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n  \n  const totalPrice = contentItem.price ? contentItem.price * formData.travelers : 0\n  \n  const renderStepIndicator = () => (\n    <div className=\"flex items-center justify-center gap-2 mb-6\">\n      {[1, 2, 3].map((s) => (\n        <div\n          key={s}\n          className={`h-2 w-12 rounded-full transition-all ${\n            s === step \n              ? 'bg-orange-500' \n              : s < step \n                ? 'bg-orange-300' \n                : 'bg-gray-200 dark:bg-gray-700'\n          }`}\n        />\n      ))}\n    </div>\n  )\n  \n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold\">\n            Prenota: {contentItem.title}\n          </DialogTitle>\n          <DialogDescription>\n            Completa i passaggi per richiedere la prenotazione\n          </DialogDescription>\n        </DialogHeader>\n        \n        {renderStepIndicator()}\n        \n        {step === 1 && (\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n                <CalendarIcon className=\"w-5 h-5 text-orange-500\" />\n                Seleziona le Date\n              </h3>\n              <div className=\"flex justify-center\">\n                <Calendar \n                  mode=\"range\"\n                  selected={dateRange}\n                  onSelect={setDateRange}\n                  numberOfMonths={2}\n                  disabled={(date) => date < new Date()}\n                  className=\"rounded-md border\"\n                />\n              </div>\n              {dateRange?.from && (\n                <div className=\"mt-4 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg\">\n                  <p className=\"text-sm font-medium text-orange-900 dark:text-orange-100\">\n                    Date selezionate:\n                  </p>\n                  <p className=\"text-sm text-orange-700 dark:text-orange-300\">\n                    {format(dateRange.from, 'PPP')}\n                    {dateRange.to && ` - ${format(dateRange.to, 'PPP')}`}\n                  </p>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={onClose}\n                className=\"flex-1\"\n              >\n                Annulla\n              </Button>\n              <Button\n                onClick={() => setStep(2)}\n                disabled={!dateRange?.from}\n                className=\"flex-1 bg-orange-500 hover:bg-orange-600\"\n              >\n                Continua\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Button>\n            </div>\n          </div>\n        )}\n        \n        {step === 2 && (\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n                <Users className=\"w-5 h-5 text-orange-500\" />\n                Dettagli Viaggiatori\n              </h3>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"travelers\">Numero di Viaggiatori *</Label>\n                  <Input\n                    id=\"travelers\"\n                    type=\"number\"\n                    min=\"1\"\n                    max=\"20\"\n                    value={formData.travelers}\n                    onChange={(e) => setFormData({\n                      ...formData, \n                      travelers: parseInt(e.target.value) || 1\n                    })}\n                    className=\"mt-1\"\n                  />\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"name\">Nome Completo *</Label>\n                  <Input\n                    id=\"name\"\n                    type=\"text\"\n                    value={formData.customerInfo.name}\n                    onChange={(e) => setFormData({\n                      ...formData,\n                      customerInfo: {...formData.customerInfo, name: e.target.value}\n                    })}\n                    placeholder=\"Mario Rossi\"\n                    className=\"mt-1\"\n                  />\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"email\">Email *</Label>\n                  <div className=\"relative mt-1\">\n                    <Mail className=\"absolute left-3 top-3 w-4 h-4 text-gray-400\" />\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      value={formData.customerInfo.email}\n                      onChange={(e) => setFormData({\n                        ...formData,\n                        customerInfo: {...formData.customerInfo, email: e.target.value}\n                      })}\n                      placeholder=\"mario@esempio.it\"\n                      className=\"pl-10\"\n                    />\n                  </div>\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"phone\">Telefono *</Label>\n                  <div className=\"relative mt-1\">\n                    <Phone className=\"absolute left-3 top-3 w-4 h-4 text-gray-400\" />\n                    <Input\n                      id=\"phone\"\n                      type=\"tel\"\n                      value={formData.customerInfo.phone}\n                      onChange={(e) => setFormData({\n                        ...formData,\n                        customerInfo: {...formData.customerInfo, phone: e.target.value}\n                      })}\n                      placeholder=\"+39 329 233 3370\"\n                      className=\"pl-10\"\n                    />\n                  </div>\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"notes\">Note o Richieste Speciali</Label>\n                  <Textarea\n                    id=\"notes\"\n                    value={formData.notes}\n                    onChange={(e) => setFormData({...formData, notes: e.target.value})}\n                    placeholder=\"Allergie, preferenze, richieste particolari...\"\n                    className=\"mt-1 resize-none\"\n                    rows={3}\n                  />\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setStep(1)}\n                className=\"flex-1\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Indietro\n              </Button>\n              <Button\n                onClick={() => setStep(3)}\n                disabled={\n                  !formData.customerInfo.name || \n                  !formData.customerInfo.email || \n                  !formData.customerInfo.phone\n                }\n                className=\"flex-1 bg-orange-500 hover:bg-orange-600\"\n              >\n                Continua\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Button>\n            </div>\n          </div>\n        )}\n        \n        {step === 3 && (\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n                <Check className=\"w-5 h-5 text-orange-500\" />\n                Conferma Prenotazione\n              </h3>\n              \n              <div className=\"space-y-4\">\n                {contentItem.image && (\n                  <div className=\"relative h-48 rounded-lg overflow-hidden\">\n                    <img\n                      src={contentItem.image}\n                      alt={contentItem.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  </div>\n                )}\n                \n                <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-3\">\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">Esperienza</p>\n                      <p className=\"font-semibold\">{contentItem.title}</p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"border-t pt-3\">\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Date</p>\n                    <p className=\"font-medium\">\n                      {dateRange?.from && format(dateRange.from, 'PPP')}\n                      {dateRange?.to && ` - ${format(dateRange.to, 'PPP')}`}\n                    </p>\n                  </div>\n                  \n                  <div className=\"border-t pt-3\">\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Viaggiatori</p>\n                    <p className=\"font-medium\">{formData.travelers} {formData.travelers === 1 ? 'persona' : 'persone'}</p>\n                  </div>\n                  \n                  <div className=\"border-t pt-3\">\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Contatti</p>\n                    <p className=\"text-sm\">{formData.customerInfo.name}</p>\n                    <p className=\"text-sm\">{formData.customerInfo.email}</p>\n                    <p className=\"text-sm\">{formData.customerInfo.phone}</p>\n                  </div>\n                  \n                  {formData.notes && (\n                    <div className=\"border-t pt-3\">\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Note</p>\n                      <p className=\"text-sm\">{formData.notes}</p>\n                    </div>\n                  )}\n                  \n                  <div className=\"border-t pt-3 flex justify-between items-center\">\n                    <p className=\"text-lg font-bold\">Prezzo Totale Stimato</p>\n                    <p className=\"text-2xl font-bold text-orange-600\">\n                      ‚Ç¨{totalPrice}\n                    </p>\n                  </div>\n                  \n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 text-center\">\n                    Il prezzo finale verr√† confermato dal nostro team\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setStep(2)}\n                disabled={loading}\n                className=\"flex-1\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Indietro\n              </Button>\n              <Button\n                onClick={handleSubmit}\n                disabled={loading}\n                className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600\"\n              >\n                {loading ? 'Invio...' : 'Conferma Prenotazione'}\n                <Check className=\"w-4 h-4 ml-2\" />\n              </Button>\n            </div>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n","size_bytes":14455},"components/admin/PublishBanner.tsx":{"content":"\"use client\"\n\nimport { useState } from 'react'\nimport { CheckCircle, Rocket, X, Loader2 } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { useAuth } from '@/context/AuthContext'\nimport { toast } from 'sonner'\n\nexport default function PublishBanner() {\n  const { user } = useAuth()\n  const [isPublished, setIsPublished] = useState(false)\n  const [isDismissed, setIsDismissed] = useState(false)\n  const [isPublishing, setIsPublishing] = useState(false)\n\n  const handlePublish = async () => {\n    if (!user) {\n      toast.error('You must be logged in to publish')\n      return\n    }\n\n    setIsPublishing(true)\n    \n    try {\n      const token = await user.getIdToken()\n      \n      const response = await fetch('/api/revalidate', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to publish changes')\n      }\n\n      const data = await response.json()\n      \n      setIsPublished(true)\n      toast.success('Contenuti pubblicati con successo!')\n      \n      // Auto-dismiss after 5 seconds\n      setTimeout(() => setIsDismissed(true), 5000)\n    } catch (error: any) {\n      console.error('Error publishing:', error)\n      toast.error(error.message || 'Errore durante la pubblicazione')\n    } finally {\n      setIsPublishing(false)\n    }\n  }\n\n  if (isDismissed) return null\n\n  if (isPublished) {\n    return (\n      <div className=\"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4\">\n        <div className=\"flex items-start\">\n          <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n          <div className=\"ml-3 flex-1\">\n            <h3 className=\"text-sm font-semibold text-green-800 dark:text-green-200\">\n              ‚úì Contenuti Pubblicati\n            </h3>\n            <p className=\"text-sm text-green-700 dark:text-green-300 mt-1\">\n              Le modifiche salvate sono ora visibili sul sito pubblico. Tutti i contenuti sono stati sincronizzati.\n            </p>\n          </div>\n          <button\n            onClick={() => setIsDismissed(true)}\n            className=\"ml-4 p-1 hover:bg-green-100 dark:hover:bg-green-900 rounded transition-colors\"\n            aria-label=\"Chiudi\"\n          >\n            <X className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4\">\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex-1\">\n          <h3 className=\"text-sm font-semibold text-blue-800 dark:text-blue-200\">\n            Pubblicazione Contenuti\n          </h3>\n          <p className=\"text-sm text-blue-700 dark:text-blue-300 mt-1\">\n            Tutte le modifiche salvate vengono sincronizzate automaticamente. Clicca il pulsante per confermare la pubblicazione dei contenuti sul sito pubblico.\n          </p>\n        </div>\n        <div className=\"flex gap-2 ml-4\">\n          <Button\n            onClick={handlePublish}\n            size=\"sm\"\n            disabled={isPublishing}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white gap-2 whitespace-nowrap\"\n          >\n            {isPublishing ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Pubblicazione...\n              </>\n            ) : (\n              <>\n                <Rocket className=\"w-4 h-4\" />\n                Pubblica Ora\n              </>\n            )}\n          </Button>\n          <button\n            onClick={() => setIsDismissed(true)}\n            className=\"p-1 hover:bg-blue-100 dark:hover:bg-blue-900 rounded transition-colors\"\n            aria-label=\"Chiudi\"\n          >\n            <X className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":3986},"scripts/create-new-admin.ts":{"content":"import * as admin from 'firebase-admin';\nimport * as crypto from 'crypto';\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nfunction formatPrivateKey(key: string): string {\n  const header = '-----BEGIN PRIVATE KEY-----';\n  const footer = '-----END PRIVATE KEY-----';\n  \n  if (key.includes(header) && key.includes(footer)) {\n    return key;\n  }\n  \n  if (key.includes('\\\\n')) {\n    key = key.replace(/\\\\n/g, '\\n');\n  }\n  \n  const cleanKey = key.replace(/\\s/g, '').replace(/\\\\n/g, '');\n  const formatted = cleanKey.match(/.{1,64}/g)?.join('\\n') || cleanKey;\n  return `${header}\\n${formatted}\\n${footer}\\n`;\n}\n\nconst privateKey = formatPrivateKey(process.env.FIREBASE_ADMIN_PRIVATE_KEY || '');\nconst clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL;\nconst projectId = process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID;\n\nif (!privateKey || !clientEmail || !projectId) {\n  throw new Error('Missing Firebase Admin credentials');\n}\n\nconst app = admin.initializeApp({\n  credential: admin.credential.cert({\n    projectId,\n    clientEmail,\n    privateKey,\n  }),\n});\n\nconst auth = admin.auth(app);\n\nfunction generateSecurePassword(): string {\n  const length = 16;\n  const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=';\n  let password = '';\n  const randomBytes = crypto.randomBytes(length);\n  \n  for (let i = 0; i < length; i++) {\n    password += charset[randomBytes[i] % charset.length];\n  }\n  \n  return password;\n}\n\nasync function createNewAdmin() {\n  const email = 'casa.di.edis@gmail.com';\n  const password = generateSecurePassword();\n  const displayName = 'Morocco Dreams Admin';\n\n  try {\n    console.log('üîë Creating admin account in Firebase and Postgres...\\n');\n    \n    let userRecord;\n    try {\n      userRecord = await auth.getUserByEmail(email);\n      console.log(`‚úÖ Firebase user ${email} already exists (UID: ${userRecord.uid})`);\n      \n      await auth.updateUser(userRecord.uid, {\n        password: password,\n        displayName: displayName\n      });\n      console.log('üîÑ Password updated in Firebase\\n');\n    } catch (error: any) {\n      if (error.code === 'auth/user-not-found') {\n        userRecord = await auth.createUser({\n          email,\n          password,\n          displayName,\n          emailVerified: true\n        });\n        console.log(`‚úÖ Firebase user created successfully (UID: ${userRecord.uid})\\n`);\n      } else {\n        throw error;\n      }\n    }\n\n    // Create or update admin user in Postgres\n    console.log('üíæ Saving admin user to Postgres...');\n    \n    const adminUser = await prisma.adminUser.upsert({\n      where: { uid: userRecord.uid },\n      update: {\n        email,\n        role: 'super_admin',\n        active: true,\n        updatedAt: new Date()\n      },\n      create: {\n        uid: userRecord.uid,\n        email,\n        role: 'super_admin',\n        active: true\n      }\n    });\n    \n    console.log('‚úÖ AdminUser record created/updated in Postgres\\n');\n\n    console.log('\\n' + '‚îÄ'.repeat(60));\n    console.log('üéâ Admin account created successfully!');\n    console.log('‚îÄ'.repeat(60));\n    console.log('\\nüìß Login Credentials:');\n    console.log(`   Email:    ${email}`);\n    console.log(`   Password: ${password}`);\n    console.log(`   UID:      ${userRecord.uid}`);\n    console.log(`   Role:     super_admin`);\n    console.log('\\nüîó Login at: /admin');\n    console.log('\\n‚ö†Ô∏è  IMPORTANT: Save these credentials in a secure location!');\n    console.log('    The password will not be shown again.\\n');\n\n  } catch (error) {\n    console.error('‚ùå Error creating admin account:', error);\n    throw error;\n  } finally {\n    await prisma.$disconnect();\n  }\n}\n\ncreateNewAdmin()\n  .then(() => {\n    console.log('\\n‚úÖ Script completed successfully');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('\\n‚ùå Script failed:', error);\n    process.exit(1);\n  });\n","size_bytes":3915},"app/api/revalidate/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { revalidateTag, revalidatePath } from 'next/cache'\nimport { isAdmin } from '@/lib/auth-helpers'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const authHeader = request.headers.get('authorization')\n    \n    if (!authHeader?.startsWith('Bearer ')) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const token = authHeader.substring(7)\n    const adminStatus = await isAdmin(token)\n\n    if (!adminStatus) {\n      return NextResponse.json({ error: 'Forbidden: Admin access required' }, { status: 403 })\n    }\n\n    // Revalidate all content tags\n    revalidateTag('content')\n    revalidateTag('experiences')\n    revalidateTag('travels')\n    revalidateTag('services')\n    revalidateTag('blog')\n    revalidateTag('vehicles')\n    revalidateTag('bookings')\n    \n    // Revalidate all main paths\n    revalidatePath('/', 'layout')\n    revalidatePath('/esperienze')\n    revalidatePath('/viaggi')\n    revalidatePath('/servizi')\n    revalidatePath('/blog')\n    revalidatePath('/veicoli')\n\n    return NextResponse.json({ \n      success: true, \n      message: 'All content revalidated successfully',\n      timestamp: new Date().toISOString()\n    })\n  } catch (error) {\n    console.error('Error revalidating:', error)\n    return NextResponse.json(\n      { error: 'Failed to revalidate content' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1435},"lib/utils/vehicle-pricing.ts":{"content":"import type { Vehicle } from '@/lib/public-data'\n\nexport interface RentalService {\n  name: string\n  included: boolean\n}\n\nexport const includedServices: RentalService[] = [\n  { name: \"Chilometraggio illimitato\", included: true },\n  { name: \"Secondo conducente gratuito\", included: true },\n  { name: \"Consegna gratuita a Marrakech\", included: true },\n  { name: \"Assistenza 24 ore su 24, 7 giorni su 7\", included: true },\n  { name: \"IVA\", included: true },\n]\n\nexport const extraServices: RentalService[] = [\n  { name: \"Assicurazione a franchigia zero\", included: false },\n  { name: \"Esenzione danni da collisione\", included: false },\n  { name: \"Protezione antifurto\", included: false },\n]\n\nexport function getPeriodFromDate(date: Date): 1 | 2 | 3 | 4 {\n  const month = date.getMonth() + 1\n  const day = date.getDate()\n\n  if ((month === 1 && day >= 10) || (month > 1 && month < 7) || (month === 7 && day < 15)) {\n    return 1\n  }\n\n  if ((month === 7 && day >= 15) || month === 8 || (month === 9 && day < 5)) {\n    return 2\n  }\n\n  if ((month === 12 && day >= 20) || (month === 1 && day < 10)) {\n    return 3\n  }\n\n  return 4\n}\n\nexport function getDurationCategory(days: number): \"short\" | \"medium\" | \"long\" {\n  if (days >= 2 && days <= 5) return \"short\"\n  if (days >= 6 && days <= 20) return \"medium\"\n  return \"long\"\n}\n\nexport function calculateRentalPrice(\n  vehicle: Vehicle,\n  startDate: Date,\n  endDate: Date\n): { dailyRate: number; totalDays: number; totalPrice: number; period: 1 | 2 | 3 | 4 } | null {\n  if (!startDate || !endDate || endDate <= startDate || !vehicle.pricing) return null\n\n  const totalDays = Math.ceil((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24))\n  if (totalDays < 2) return null\n\n  const period = getPeriodFromDate(startDate)\n  const durationCategory = getDurationCategory(totalDays)\n\n  const periodKey = `period${period}` as keyof typeof vehicle.pricing\n  const dailyRate = vehicle.pricing[periodKey][durationCategory]\n  const totalPrice = dailyRate * totalDays\n\n  return { dailyRate, totalDays, totalPrice, period }\n}\n\nexport const periodNames = {\n  1: \"10/01 - 15/07\",\n  2: \"15/07 - 05/09 (Estate)\",\n  3: \"20/12 - 10/01 (Capodanno)\",\n  4: \"05/09 - 20/12\",\n}\n","size_bytes":2202},"components/admin/UnifiedAdminTable.tsx":{"content":"\"use client\"\n\nimport { useState } from 'react'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport { MoreVertical, Edit, Eye, EyeOff, Star, StarOff, Trash2 } from 'lucide-react'\n\nexport interface TableColumn<T> {\n  key: string\n  label: string\n  render?: (item: T) => React.ReactNode\n  className?: string\n}\n\nexport interface TableAction<T> {\n  label: string\n  icon?: React.ReactNode\n  onClick: (item: T) => void\n  className?: string\n  separator?: boolean\n}\n\ninterface UnifiedAdminTableProps<T> {\n  data: T[]\n  columns: TableColumn<T>[]\n  actions?: TableAction<T>[]\n  keyExtractor: (item: T) => string\n  emptyMessage?: React.ReactNode\n}\n\nexport function UnifiedAdminTable<T>({\n  data,\n  columns,\n  actions = [],\n  keyExtractor,\n  emptyMessage = 'No items found'\n}: UnifiedAdminTableProps<T>) {\n  \n  if (data.length === 0) {\n    return (\n      <div className=\"text-center py-12 bg-muted/50 rounded-lg border-2 border-dashed\">\n        {typeof emptyMessage === 'string' ? (\n          <p className=\"text-muted-foreground text-lg\">{emptyMessage}</p>\n        ) : (\n          emptyMessage\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"bg-card border rounded-lg overflow-hidden\">\n      <Table>\n        <TableHeader>\n          <TableRow>\n            {columns.map((column) => (\n              <TableHead \n                key={column.key} \n                className={column.className}\n              >\n                {column.label}\n              </TableHead>\n            ))}\n            {actions.length > 0 && (\n              <TableHead className=\"text-right w-[80px]\">Actions</TableHead>\n            )}\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {data.map((item) => (\n            <TableRow key={keyExtractor(item)}>\n              {columns.map((column) => (\n                <TableCell key={column.key} className={column.className}>\n                  {column.render ? column.render(item) : (item as any)[column.key]}\n                </TableCell>\n              ))}\n              {actions.length > 0 && (\n                <TableCell className=\"text-right\">\n                  <DropdownMenu modal={false}>\n                    <DropdownMenuTrigger asChild>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"sm\"\n                        className=\"h-8 w-8 p-0 hover:bg-accent\"\n                      >\n                        <span className=\"sr-only\">Open menu</span>\n                        <MoreVertical className=\"h-4 w-4\" />\n                      </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent \n                      align=\"end\" \n                      className=\"w-[200px] bg-popover border shadow-lg\"\n                      sideOffset={5}\n                    >\n                      {actions.map((action, idx) => (\n                        <div key={idx}>\n                          {action.separator && idx > 0 && <DropdownMenuSeparator />}\n                          <DropdownMenuItem\n                            onClick={() => action.onClick(item)}\n                            className={action.className || 'cursor-pointer'}\n                          >\n                            {action.icon && <span className=\"mr-2\">{action.icon}</span>}\n                            {action.label}\n                          </DropdownMenuItem>\n                        </div>\n                      ))}\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n                </TableCell>\n              )}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  )\n}\n\nexport function createPublishedColumn<T extends { published?: boolean }>(): TableColumn<T> {\n  return {\n    key: 'published',\n    label: 'Published',\n    className: 'text-center',\n    render: (item) => item.published ? (\n      <Badge variant=\"default\" className=\"bg-green-500\">Published</Badge>\n    ) : (\n      <Badge variant=\"secondary\">Draft</Badge>\n    )\n  }\n}\n\nexport function createFeaturedColumn<T extends { featured?: boolean }>(): TableColumn<T> {\n  return {\n    key: 'featured',\n    label: 'Featured',\n    className: 'text-center',\n    render: (item) => item.featured ? (\n      <Star className=\"w-4 h-4 fill-orange-500 text-orange-500 mx-auto\" />\n    ) : (\n      <StarOff className=\"w-4 h-4 text-muted-foreground mx-auto\" />\n    )\n  }\n}\n\nexport function createBooleanBadgeColumn<T>(\n  key: string,\n  label: string,\n  trueLabel: string = 'Yes',\n  falseLabel: string = 'No'\n): TableColumn<T> {\n  return {\n    key,\n    label,\n    className: 'text-center',\n    render: (item) => (item as any)[key] ? (\n      <Badge variant=\"default\" className=\"bg-blue-500\">{trueLabel}</Badge>\n    ) : (\n      <Badge variant=\"secondary\">{falseLabel}</Badge>\n    )\n  }\n}\n\nexport function createStandardActions<T extends { id: string, published?: boolean, featured?: boolean }>(handlers: {\n  onEdit: (item: T) => void,\n  onTogglePublished: (item: T) => void,\n  onToggleFeatured: (item: T) => void,\n  onDelete: (item: T) => void\n}): TableAction<T>[] {\n  return [\n    {\n      label: 'Edit',\n      icon: <Edit className=\"w-4 h-4\" />,\n      onClick: handlers.onEdit,\n      className: 'cursor-pointer'\n    },\n    {\n      label: 'Toggle Published',\n      icon: <Eye className=\"w-4 h-4\" />,\n      onClick: handlers.onTogglePublished,\n      className: 'cursor-pointer',\n      separator: true\n    },\n    {\n      label: 'Toggle Featured',\n      icon: <Star className=\"w-4 h-4\" />,\n      onClick: handlers.onToggleFeatured,\n      className: 'cursor-pointer'\n    },\n    {\n      label: 'Delete',\n      icon: <Trash2 className=\"w-4 h-4\" />,\n      onClick: handlers.onDelete,\n      className: 'text-red-600 focus:text-red-600 cursor-pointer',\n      separator: true\n    }\n  ]\n}\n","size_bytes":6103}},"version":2}